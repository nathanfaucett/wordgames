import{L as e,_ as t,$ as s,C as n,O as o}from"./vendor-55b6b459.js";import{p as a,c as r,a as c}from"./p2p-e438590d.js";import{r as m}from"./singletons-12a22614.js";const i=n(null);function d(e){return{id:e,name:r(e),team:1}}const u=new e.EventEmitter,g=t(i,(e=>e?e.get():{byId:{}})),l=t(g,(e=>e.byId[c()]));function p(){const e=o(i);return e?Promise.resolve(e):new Promise((e=>u.once("state",e)))}a.on("room",(e=>{const t=new s("users",e,{byId:{}});t.on("update",(()=>i.set(t))),u.emit("state",t),i.set(t);const n=e.getPeer().getId();t.change((e=>{e.byId[n]||(e.byId[n]=d(n))}))}));const b=n(null),f=new e.EventEmitter,v=t(b,(e=>(null==e?void 0:e.get())||{started:!1}));function w(){const e=o(b);return e?Promise.resolve(e):new Promise((e=>f.once("state",e)))}a.on("room",(e=>{const t=new s("game",e,{started:!1});t.on("update",(()=>b.set(t))),f.emit("state",t),b.set(t)}));const y=m,I=async function(e,t){return y.goto(e,t,[])};export{l as a,p as b,w as c,I as d,d as e,v as g,g as u};
