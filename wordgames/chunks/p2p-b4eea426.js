import{S as s,i as t,s as n,D as e,e as o,c as a,a as r,d as i,b as c,f as l,E as u,F as f,G as p,x as m,u as h,L as d,M as $,N as g,P as w,O as v,C as x,Q as I,R as b,T as C}from"./vendor-55b6b459.js";function D(s){let t,n;const d=s[1].default,$=e(d,s,s[0],null);return{c(){t=o("div"),$&&$.c(),this.h()},l(s){t=a(s,"DIV",{class:!0});var n=r(t);$&&$.l(n),n.forEach(i),this.h()},h(){c(t,"class","container mx-auto px-4")},m(s,e){l(s,t,e),$&&$.m(t,null),n=!0},p(s,[t]){$&&$.p&&(!n||1&t)&&u($,d,s,s[0],n?p(d,s[0],t,null):f(s[0]),null)},i(s){n||(m($,s),n=!0)},o(s){h($,s),n=!1},d(s){s&&i(t),$&&$.d(s)}}}function E(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=s=>{"$$scope"in s&&n(0,o=s.$$scope)},[o,e]}class P extends s{constructor(s){super(),t(this,s,E,D,n,{})}}const M="wordgames-github-io-",R=x(null),j=x(null),y=new d.EventEmitter;function L(){var s;return null==(s=v(R))?void 0:s.getId()}function S(s){return s.slice(M.length)}function _(s=6){return I(0,s).iter().map((()=>b()<.25?Math.floor(10*b()):String.fromCharCode(97+Math.floor(26*b())))).join("")}function F(){j.set(this)}async function G(s){const t=v(j);if(t){if(t.getRoomId()===s)return t;t.off(C.Connection,F),t.off(C.Disconnection,F),t.close(),j.set(null)}const n=(await function(){const s=v(R);return s?Promise.resolve(s):new Promise((s=>y.once("peer",s)))}()).getRoom(s);return n.on(C.Connection,F),n.on(C.Disconnection,F),j.set(n),y.emit("room",n),n.connect()}$.exports.getItem("peer_id").then((async s=>{s||(s=g(),await $.exports.setItem("peer_id",s));const t=await w.create(new window.Peer((n=s,`${M}${n}`),{host:"localhost",port:parseInt("8080")}));var n;R.set(t),y.emit("peer",t)}));export{P as L,L as a,G as b,S as c,_ as g,y as p,j as r};
