import{S as nt,i as it,s as ut,T as He,U as Qe,a as R,v as be,K as ft,h as i,c as U,w as ke,b as k,x as we,V as Xe,f as oe,t as fe,y as Ee,J as mt,o as ct,X as dt,k as _,q as L,l as h,m as g,r as O,n as m,P as ue,I as u,L as Ye,Y as Je,M as F,u as te,N as _t,Z as ht,C as at,_ as Fe,A as ot,$ as Ce,D as me,O as pt,e as Ke,g as gt,d as vt}from"../../../chunks/index-321b22c2.js";import{L as bt,a as kt,g as wt,s as Et,X as yt,c as Oe}from"../../../chunks/util-663ac0af.js";import{c as rt}from"../../../chunks/singletons-22490379.js";import{M as Ze,W as ye,g as It,u as $t,Q as Tt}from"../../../chunks/userId-5a5ee24e.js";const{document:Ve}=dt;function ze(t,e,s){const l=t.slice();return l[28]=e[s][0],l[6]=e[s][1],l[30]=s,l}function xe(t,e,s){const l=t.slice();return l[31]=e[s],l}function et(t){let e,s=t[31]+"",l;return{c(){e=_("option"),l=L(s),this.h()},l(a){e=h(a,"OPTION",{});var n=g(e);l=O(n,s),n.forEach(i),this.h()},h(){e.__value=ye[t[31]],e.value=e.__value},m(a,n){k(a,e,n),u(e,l)},p:ot,d(a){a&&i(e)}}}function tt(t,e){let s,l,a,n=e[30]+1+"",D,j,w=e[6].name+"",$,P,E,S,y,W,r,c,I,p,B,q,H,v,C,z;return{key:t,first:null,c(){s=_("div"),l=_("div"),a=_("p"),D=L(n),j=L(" - "),$=L(w),P=R(),E=_("form"),S=_("div"),y=_("input"),c=R(),I=_("div"),p=_("input"),H=R(),v=_("hr"),this.h()},l(T){s=h(T,"DIV",{class:!0});var b=g(s);l=h(b,"DIV",{class:!0});var x=g(l);a=h(x,"P",{class:!0});var K=g(a);D=O(K,n),j=O(K," - "),$=O(K,w),K.forEach(i),x.forEach(i),P=U(b),E=h(b,"FORM",{class:!0});var A=g(E);S=h(A,"DIV",{class:!0});var Y=g(S);y=h(Y,"INPUT",{id:!0,name:!0,type:!0,class:!0}),Y.forEach(i),c=U(A),I=h(A,"DIV",{class:!0});var d=g(I);p=h(d,"INPUT",{id:!0,name:!0,type:!0,class:!0}),d.forEach(i),A.forEach(i),b.forEach(i),H=U(T),v=h(T,"HR",{}),this.h()},h(){m(a,"class","text-2xl p-1 font-bold"),m(l,"class","flex-grow"),m(y,"id",W=`${e[28]}-team-1`),m(y,"name","team"),y.value="1",m(y,"type","radio"),m(y,"class","align-bottom"),y.checked=r=!e[6].team||e[6].team==="team1",m(S,"class","btn sm primary flex-1"),m(p,"id",B=`${e[28]}-team-2`),m(p,"name","team"),p.value="2",m(p,"type","radio"),m(p,"class","align-bottom"),p.checked=q=e[6].team==="team2",m(I,"class","btn sm danger flex-1"),m(E,"class","flex-grow-0 flex flex-row"),m(s,"class","flex justify-between"),ue(s,"bg-gray-200",e[28]===e[3]),this.first=s},m(T,b){k(T,s,b),u(s,l),u(l,a),u(a,D),u(a,j),u(a,$),u(s,P),u(s,E),u(E,S),u(S,y),u(E,c),u(E,I),u(I,p),k(T,H,b),k(T,v,b),C||(z=[F(y,"click",Ce(e[22])),F(S,"click",function(){me(e[12](e[28],e[6].team,"team1"))&&e[12](e[28],e[6].team,"team1").apply(this,arguments)}),F(p,"click",Ce(e[21])),F(I,"click",function(){me(e[12](e[28],e[6].team,"team2"))&&e[12](e[28],e[6].team,"team2").apply(this,arguments)})],C=!0)},p(T,b){e=T,b[0]&32&&n!==(n=e[30]+1+"")&&te(D,n),b[0]&32&&w!==(w=e[6].name+"")&&te($,w),b[0]&32&&W!==(W=`${e[28]}-team-1`)&&m(y,"id",W),b[0]&32&&r!==(r=!e[6].team||e[6].team==="team1")&&(y.checked=r),b[0]&32&&B!==(B=`${e[28]}-team-2`)&&m(p,"id",B),b[0]&32&&q!==(q=e[6].team==="team2")&&(p.checked=q),b[0]&40&&ue(s,"bg-gray-200",e[28]===e[3])},d(T){T&&i(s),T&&i(H),T&&i(v),C=!1,at(z)}}}function Dt(t){var Pe;let e,s,l,a,n,D,j,w,$,P,E,S,y,W,r,c,I,p,B,q,H,v,C,z,T=((Pe=t[1][t[3]])==null?void 0:Pe.team)==="team1"?"Blue":"Red",b,x,K,A,Y,d,V,X,ee,Ie,J=[],Ne=new Map,ce,re,de,Z,Q,$e,_e,Te,le,De,Se,Re,ne=Object.keys(ye),M=[];for(let o=0;o<ne.length;o+=1)M[o]=et(xe(t,ne,o));let he=t[5];const Ue=o=>o[28]+o[6].team;for(let o=0;o<he.length;o+=1){let f=ze(t,he,o),N=Ue(f);Ne.set(N,J[o]=tt(N,f))}return{c(){e=_("h1"),s=L("Room Id "),l=L(t[0]),a=R(),n=_("div"),D=_("label"),j=L("Name"),w=R(),$=_("input"),P=R(),E=_("div"),S=_("label"),y=L("Words"),W=R(),r=_("select");for(let o=0;o<M.length;o+=1)M[o].c();c=R(),I=_("div"),p=_("button"),B=L("Share Game "),q=L(t[0]),H=R(),v=_("div"),C=_("h2"),z=L("Teams (You are on "),b=L(T),x=L(")"),K=R(),A=_("div"),Y=_("div"),d=L(t[4]),V=R(),X=_("div"),ee=L(t[15]),Ie=R();for(let o=0;o<J.length;o+=1)J[o].c();ce=R(),re=_("div"),de=R(),Z=_("div"),Q=_("button"),$e=L("Start"),Te=R(),le=_("button"),De=L("Leave"),this.h()},l(o){e=h(o,"H1",{class:!0});var f=g(e);s=O(f,"Room Id "),l=O(f,t[0]),f.forEach(i),a=U(o),n=h(o,"DIV",{class:!0});var N=g(n);D=h(N,"LABEL",{for:!0});var G=g(D);j=O(G,"Name"),G.forEach(i),w=U(N),$=h(N,"INPUT",{class:!0}),N.forEach(i),P=U(o),E=h(o,"DIV",{});var se=g(E);S=h(se,"LABEL",{for:!0});var je=g(S);y=O(je,"Words"),je.forEach(i),W=U(se),r=h(se,"SELECT",{id:!0,class:!0});var Be=g(r);for(let ae=0;ae<M.length;ae+=1)M[ae].l(Be);Be.forEach(i),se.forEach(i),c=U(o),I=h(o,"DIV",{class:!0});var Me=g(I);p=h(Me,"BUTTON",{class:!0});var Le=g(p);B=O(Le,"Share Game "),q=O(Le,t[0]),Le.forEach(i),Me.forEach(i),H=U(o),v=h(o,"DIV",{class:!0});var ie=g(v);C=h(ie,"H2",{class:!0});var pe=g(C);z=O(pe,"Teams (You are on "),b=O(pe,T),x=O(pe,")"),pe.forEach(i),K=U(ie),A=h(ie,"DIV",{class:!0});var ge=g(A);Y=h(ge,"DIV",{class:!0});var We=g(Y);d=O(We,t[4]),We.forEach(i),V=U(ge),X=h(ge,"DIV",{class:!0});var Ae=g(X);ee=O(Ae,t[15]),Ae.forEach(i),ge.forEach(i),Ie=U(ie);for(let ae=0;ae<J.length;ae+=1)J[ae].l(ie);ie.forEach(i),ce=U(o),re=h(o,"DIV",{class:!0}),g(re).forEach(i),de=U(o),Z=h(o,"DIV",{class:!0});var ve=g(Z);Q=h(ve,"BUTTON",{class:!0});var Ge=g(Q);$e=O(Ge,"Start"),Ge.forEach(i),Te=U(ve),le=h(ve,"BUTTON",{class:!0});var qe=g(le);De=O(qe,"Leave"),qe.forEach(i),ve.forEach(i),this.h()},h(){m(e,"class","text-center cursor-pointer"),m(D,"for","name"),m($,"class","input"),m(n,"class","mt-2"),m(S,"for","words"),m(r,"id","words"),m(r,"class","input"),m(p,"class","btn md primary w-full mb-2"),m(I,"class","flex"),m(C,"class","text-center"),m(Y,"class","btn md primary flex-1 text-center"),m(X,"class","btn md danger flex-1 text-center"),m(A,"class","mt-2 mb-2 flex justify-center"),m(v,"class","mt-2 mb-2"),m(re,"class","flex-grow"),m(Q,"class","btn lg primary flex-1"),Q.disabled=_e=t[5].length<2||st,ue(Q,"bg-blue-100",t[5].length<2),ue(Q,"hover:bg-blue-500",t[5].length>1),m(le,"class","btn lg danger flex-1"),m(Z,"class","flex justify-center")},m(o,f){k(o,e,f),u(e,s),u(e,l),k(o,a,f),k(o,n,f),u(n,D),u(D,j),u(n,w),u(n,$),Ye($,t[2]),k(o,P,f),k(o,E,f),u(E,S),u(S,y),u(E,W),u(E,r);for(let N=0;N<M.length;N+=1)M[N].m(r,null);Je(r,t[8]),k(o,c,f),k(o,I,f),u(I,p),u(p,B),u(p,q),k(o,H,f),k(o,v,f),u(v,C),u(C,z),u(C,b),u(C,x),u(v,K),u(v,A),u(A,Y),u(Y,d),u(A,V),u(A,X),u(X,ee),u(v,Ie);for(let N=0;N<J.length;N+=1)J[N].m(v,null);k(o,ce,f),k(o,re,f),k(o,de,f),k(o,Z,f),u(Z,Q),u(Q,$e),u(Z,Te),u(Z,le),u(le,De),Se||(Re=[F(e,"click",t[23]),F($,"input",t[24]),F($,"input",function(){me(t[14])&&t[14].apply(this,arguments)}),F(r,"change",Ce(function(){me(t[13])&&t[13].apply(this,arguments)})),F(p,"click",Ct),F(Q,"click",function(){me(t[11])&&t[11].apply(this,arguments)}),F(le,"click",t[25])],Se=!0)},p(o,f){var N;if(t=o,f[0]&1&&te(l,t[0]),f[0]&4&&$.value!==t[2]&&Ye($,t[2]),f&0){ne=Object.keys(ye);let G;for(G=0;G<ne.length;G+=1){const se=xe(t,ne,G);M[G]?M[G].p(se,f):(M[G]=et(se),M[G].c(),M[G].m(r,null))}for(;G<M.length;G+=1)M[G].d(1);M.length=ne.length}f[0]&256&&Je(r,t[8]),f[0]&1&&te(q,t[0]),f[0]&10&&T!==(T=((N=t[1][t[3]])==null?void 0:N.team)==="team1"?"Blue":"Red")&&te(b,T),f[0]&16&&te(d,t[4]),f[0]&32768&&te(ee,t[15]),f[0]&4136&&(he=t[5],J=_t(J,f,Ue,1,t,he,Ne,v,pt,tt,null,ze)),f[0]&32&&_e!==(_e=t[5].length<2||st)&&(Q.disabled=_e),f[0]&32&&ue(Q,"bg-blue-100",t[5].length<2),f[0]&32&&ue(Q,"hover:bg-blue-500",t[5].length>1)},d(o){o&&i(e),o&&i(a),o&&i(n),o&&i(P),o&&i(E),ht(M,o),o&&i(c),o&&i(I),o&&i(H),o&&i(v);for(let f=0;f<J.length;f+=1)J[f].d();o&&i(ce),o&&i(re),o&&i(de),o&&i(Z),Se=!1,at(Re)}}}function lt(t){let e,s;return e=new Tt({props:{value:t[7].href}}),{c(){be(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,a){we(e,l,a),s=!0},p(l,a){const n={};a[0]&128&&(n.value=l[7].href),e.$set(n)},i(l){s||(oe(e.$$.fragment,l),s=!0)},o(l){fe(e.$$.fragment,l),s=!1},d(l){Ee(e,l)}}}function St(t){let e,s,l=t[7]&&lt(t);return{c(){l&&l.c(),e=Ke()},l(a){l&&l.l(a),e=Ke()},m(a,n){l&&l.m(a,n),k(a,e,n),s=!0},p(a,n){a[7]?l?(l.p(a,n),n[0]&128&&oe(l,1)):(l=lt(a),l.c(),oe(l,1),l.m(e.parentNode,e)):l&&(gt(),fe(l,1,1,()=>{l=null}),vt())},i(a){s||(oe(l),s=!0)},o(a){fe(l),s=!1},d(a){l&&l.d(a),a&&i(e)}}}function Lt(t){let e,s,l;return{c(){e=_("h2"),s=L("Room Id "),l=L(t[0]),this.h()},l(a){e=h(a,"H2",{slot:!0});var n=g(e);s=O(n,"Room Id "),l=O(n,t[0]),n.forEach(i),this.h()},h(){m(e,"slot","title")},m(a,n){k(a,e,n),u(e,s),u(e,l)},p(a,n){n[0]&1&&te(l,a[0])},d(a){a&&i(e)}}}function Ot(t){let e,s;return{c(){e=_("a"),s=L("Exit"),this.h()},l(l){e=h(l,"A",{href:!0,class:!0});var a=g(e);s=O(a,"Exit"),a.forEach(i),this.h()},h(){m(e,"href",`${rt}/`),m(e,"class","btn lg danger")},m(l,a){k(l,e,a),u(e,s)},p:ot,d(l){l&&i(e)}}}function Vt(t){let e,s,l,a,n,D,j,w,$,P;Ve.title=e="Word Games!: Lobby "+t[0],l=new bt({props:{$$slots:{default:[Dt]},$$scope:{ctx:t}}});function E(r){t[26](r)}let S={$$slots:{title:[Lt],default:[St]},$$scope:{ctx:t}};t[9]!==void 0&&(S.show=t[9]),n=new Ze({props:S}),He.push(()=>Qe(n,"show",E));function y(r){t[27](r)}let W={$$slots:{default:[Ot]},$$scope:{ctx:t}};return t[10]!==void 0&&(W.show=t[10]),w=new Ze({props:W}),He.push(()=>Qe(w,"show",y)),{c(){s=R(),be(l.$$.fragment),a=R(),be(n.$$.fragment),j=R(),be(w.$$.fragment)},l(r){ft('[data-svelte="svelte-5lsgla"]',Ve.head).forEach(i),s=U(r),ke(l.$$.fragment,r),a=U(r),ke(n.$$.fragment,r),j=U(r),ke(w.$$.fragment,r)},m(r,c){k(r,s,c),we(l,r,c),k(r,a,c),we(n,r,c),k(r,j,c),we(w,r,c),P=!0},p(r,c){(!P||c[0]&1)&&e!==(e="Word Games!: Lobby "+r[0])&&(Ve.title=e);const I={};c[0]&65343|c[1]&8&&(I.$$scope={dirty:c,ctx:r}),l.$set(I);const p={};c[0]&129|c[1]&8&&(p.$$scope={dirty:c,ctx:r}),!D&&c[0]&512&&(D=!0,p.show=r[9],Xe(()=>D=!1)),n.$set(p);const B={};c[1]&8&&(B.$$scope={dirty:c,ctx:r}),!$&&c[0]&1024&&($=!0,B.show=r[10],Xe(()=>$=!1)),w.$set(B)},i(r){P||(oe(l.$$.fragment,r),oe(n.$$.fragment,r),oe(w.$$.fragment,r),P=!0)},o(r){fe(l.$$.fragment,r),fe(n.$$.fragment,r),fe(w.$$.fragment,r),P=!1},d(r){r&&i(s),Ee(l,r),r&&i(a),Ee(n,r),r&&i(j),Ee(w,r)}}}function Ct(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Oe("Successful shared!","success")).catch(t=>Oe(t.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Oe("Successful Copied!","success"));else if("execCommand"in document){const t=document.createElement("input");t.style.display="none",t.textContent=location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}let st=!1;function Nt(t,e,s){let l,a,n,D,j,w,$,P,E,S,y;mt(t,$t,d=>s(20,y=d));let W,r="",c={},I=!1,p=ye.Medium,B=Date.now(),q=!1,H=!1,v=`guest-${kt()}`,C;ct(()=>{s(7,W=new URL(window.location.href)),s(0,r=W.searchParams.get("roomId")||"");const d=[a.get("seed").on(V=>{s(17,B=V)}),a.get("started").on(V=>{s(16,I=V)}),a.get("words").on(V=>{s(8,p=V)}),a.get("users").on(async V=>{!V||s(1,c=(await Promise.all(Object.values(V))).reduce((X,ee)=>(ee&&(X[ee.id]=ee),X),{}))})];return a.get("users").get(l).set({id:l,name:v,team:"team1"}),()=>{d.forEach(V=>V())}});function z(d){Fe.call(this,t,d)}function T(d){Fe.call(this,t,d)}const b=()=>s(9,q=!0);function x(){v=this.value,s(2,v)}const K=()=>s(10,H=!0);function A(d){q=d,s(9,q)}function Y(d){H=d,s(10,H)}return t.$$.update=()=>{if(t.$$.dirty[0]&1048576&&s(3,l=y),t.$$.dirty[0]&1&&s(19,a=It.get("rooms").get(r)),t.$$.dirty[0]&524296&&s(6,n=a.get("users").get(l)),t.$$.dirty[0]&65537&&I&&r&&wt(`${rt}/game?room=${r}`),t.$$.dirty[0]&2&&s(5,D=Array.from(Object.entries(c)).sort(Et)),t.$$.dirty[0]&32&&s(4,j=D.filter(([d,V])=>!V.team||V.team==="team1").length),t.$$.dirty[0]&48&&s(15,w=D.length-j),t.$$.dirty[0]&68&&s(14,$=()=>{n.get("name").set(v)}),t.$$.dirty[0]&524288&&s(13,P=d=>{a.get("words").set(d.currentTarget.value)}),t.$$.dirty[0]&524288&&s(12,E=(d,V,X)=>()=>{V!==X&&a.get("users").get(d).get("team").set(X)}),t.$$.dirty[0]&655370&&s(11,S=async()=>{const d=yt.fromSeed(B);a.get("turn").set(d.fromArray(Object.keys(c)).unwrapOr(l)),a.get("started").set(!0)}),t.$$.dirty[0]&786444&&l&&C!==l){const d=l;C&&a.get("users").get(C).set(null),a.get("users").get(d).set({id:d,name:v,team:"team1"}),s(18,C=d)}},[r,c,v,l,j,D,n,W,p,q,H,S,E,P,$,w,I,B,C,a,y,z,T,b,x,K,A,Y]}class Bt extends nt{constructor(e){super(),it(this,e,Nt,Vt,ut,{},null,[-1,-1])}}export{Bt as default};
