import{S as it,i as ut,s as ft,w as Ye,N as ze,a as N,y as ke,J as mt,h as n,c as B,z as we,b as y,A as Ee,O as Je,g as ue,d as fe,B as ye,I as ct,o as dt,R as _t,k as h,q as $,l as p,m as k,r as L,n as f,P as ie,G as i,K as Fe,T as Ke,L as z,u as ee,U as ht,V as pt,M as rt,W as Ze,H as Be,X as Ne,Q as me,Y as vt,e as xe}from"../chunks/index.e9f15bb7.js";import{L as bt,a as gt,g as kt,s as wt,X as Et,c as Ce}from"../chunks/util.3aebd846.js";import{e as nt}from"../chunks/singletons.aa0faa8a.js";import{M as et,W as Ie,g as yt,u as It,Q as Tt}from"../chunks/userId.a5c8385a.js";const{document:Re}=_t;function tt(t,e,s){const l=t.slice();return l[27]=e[s][0],l[6]=e[s][1],l[29]=s,l}function lt(t,e,s){const l=t.slice();return l[30]=e[s],l}function st(t){let e,s=t[30]+"",l;return{c(){e=h("option"),l=$(s),this.h()},l(o){e=p(o,"OPTION",{});var u=k(e);l=L(u,s),u.forEach(n),this.h()},h(){e.__value=Ie[t[30]],e.value=e.__value},m(o,u){y(o,e,u),i(e,l)},p:Be,d(o){o&&n(e)}}}function at(t,e){let s,l,o,u=e[29]+1+"",_,O,I=e[6].name+"",G,T,C,E,g,U,r,m,R,v,S,H,j,M,J,P;return{key:t,first:null,c(){s=h("div"),l=h("div"),o=h("p"),_=$(u),O=$(" - "),G=$(I),T=N(),C=h("form"),E=h("div"),g=h("input"),m=N(),R=h("div"),v=h("input"),j=N(),M=h("hr"),this.h()},l(w){s=p(w,"DIV",{class:!0});var D=k(s);l=p(D,"DIV",{class:!0});var F=k(l);o=p(F,"P",{class:!0});var Y=k(o);_=L(Y,u),O=L(Y," - "),G=L(Y,I),Y.forEach(n),F.forEach(n),T=B(D),C=p(D,"FORM",{class:!0});var K=k(C);E=p(K,"DIV",{class:!0});var d=k(E);g=p(d,"INPUT",{id:!0,name:!0,type:!0,class:!0}),d.forEach(n),m=B(K),R=p(K,"DIV",{class:!0});var b=k(R);v=p(b,"INPUT",{id:!0,name:!0,type:!0,class:!0}),b.forEach(n),K.forEach(n),D.forEach(n),j=B(w),M=p(w,"HR",{}),this.h()},h(){f(o,"class","text-2xl p-1 font-bold"),f(l,"class","flex-grow"),f(g,"id",U=`${e[27]}-team-1`),f(g,"name","team"),g.value="1",f(g,"type","radio"),f(g,"class","align-bottom"),g.checked=r=!e[6].team||e[6].team==="team1",f(E,"class","btn sm primary flex-1"),f(v,"id",S=`${e[27]}-team-2`),f(v,"name","team"),v.value="2",f(v,"type","radio"),f(v,"class","align-bottom"),v.checked=H=e[6].team==="team2",f(R,"class","btn sm danger flex-1"),f(C,"class","flex-grow-0 flex flex-row"),f(s,"class","flex justify-between"),ie(s,"bg-gray-200",e[27]===e[3]),this.first=s},m(w,D){y(w,s,D),i(s,l),i(l,o),i(o,_),i(o,O),i(o,G),i(s,T),i(s,C),i(C,E),i(E,g),i(C,m),i(C,R),i(R,v),y(w,j,D),y(w,M,D),J||(P=[z(g,"click",Ne(e[21])),z(E,"click",function(){me(e[11](e[27],e[6].team,"team1"))&&e[11](e[27],e[6].team,"team1").apply(this,arguments)}),z(v,"click",Ne(e[20])),z(R,"click",function(){me(e[11](e[27],e[6].team,"team2"))&&e[11](e[27],e[6].team,"team2").apply(this,arguments)})],J=!0)},p(w,D){e=w,D[0]&32&&u!==(u=e[29]+1+"")&&ee(_,u),D[0]&32&&I!==(I=e[6].name+"")&&ee(G,I),D[0]&32&&U!==(U=`${e[27]}-team-1`)&&f(g,"id",U),D[0]&32&&r!==(r=!e[6].team||e[6].team==="team1")&&(g.checked=r),D[0]&32&&S!==(S=`${e[27]}-team-2`)&&f(v,"id",S),D[0]&32&&H!==(H=e[6].team==="team2")&&(v.checked=H),D[0]&40&&ie(s,"bg-gray-200",e[27]===e[3])},d(w){w&&n(s),w&&n(j),w&&n(M),J=!1,rt(P)}}}function St(t){var We;let e,s,l=t[0].room+"",o,u,_,O,I,G,T,C,E,g,U,r,m,R,v,S,H,j=t[0].room+"",M,J,P,w,D,F=((We=t[1][t[3]])==null?void 0:We.team)==="team1"?"Blue":"Red",Y,K,d,b,q,x,Te,ae,ce,Se,X=[],Ue=new Map,de,oe,_e,Z,Q,De,he,Oe,te,Ve,$e,je,re=Object.keys(Ie),W=[];for(let a=0;a<re.length;a+=1)W[a]=st(lt(t,re,a));let pe=t[5];const Pe=a=>a[27]+a[6].team;for(let a=0;a<pe.length;a+=1){let c=tt(t,pe,a),V=Pe(c);Ue.set(V,X[a]=at(V,c))}return{c(){e=h("h1"),s=$("Room Id "),o=$(l),u=N(),_=h("div"),O=h("label"),I=$("Name"),G=N(),T=h("input"),C=N(),E=h("div"),g=h("label"),U=$("Words"),r=N(),m=h("select");for(let a=0;a<W.length;a+=1)W[a].c();R=N(),v=h("div"),S=h("button"),H=$("Share Game "),M=$(j),J=N(),P=h("div"),w=h("h2"),D=$("Teams (You are on "),Y=$(F),K=$(")"),d=N(),b=h("div"),q=h("div"),x=$(t[4]),Te=N(),ae=h("div"),ce=$(t[14]),Se=N();for(let a=0;a<X.length;a+=1)X[a].c();de=N(),oe=h("div"),_e=N(),Z=h("div"),Q=h("button"),De=$("Start"),Oe=N(),te=h("button"),Ve=$("Leave"),this.h()},l(a){e=p(a,"H1",{class:!0});var c=k(e);s=L(c,"Room Id "),o=L(c,l),c.forEach(n),u=B(a),_=p(a,"DIV",{class:!0});var V=k(_);O=p(V,"LABEL",{for:!0,class:!0});var A=k(O);I=L(A,"Name"),A.forEach(n),G=B(V),T=p(V,"INPUT",{class:!0}),V.forEach(n),C=B(a),E=p(a,"DIV",{class:!0});var le=k(E);g=p(le,"LABEL",{for:!0,class:!0});var Ge=k(g);U=L(Ge,"Words"),Ge.forEach(n),r=B(le),m=p(le,"SELECT",{id:!0,class:!0});var Me=k(m);for(let se=0;se<W.length;se+=1)W[se].l(Me);Me.forEach(n),le.forEach(n),R=B(a),v=p(a,"DIV",{class:!0});var Ae=k(v);S=p(Ae,"BUTTON",{class:!0});var Le=k(S);H=L(Le,"Share Game "),M=L(Le,j),Le.forEach(n),Ae.forEach(n),J=B(a),P=p(a,"DIV",{class:!0});var ne=k(P);w=p(ne,"H2",{class:!0});var ve=k(w);D=L(ve,"Teams (You are on "),Y=L(ve,F),K=L(ve,")"),ve.forEach(n),d=B(ne),b=p(ne,"DIV",{class:!0});var be=k(b);q=p(be,"DIV",{class:!0});var He=k(q);x=L(He,t[4]),He.forEach(n),Te=B(be),ae=p(be,"DIV",{class:!0});var Qe=k(ae);ce=L(Qe,t[14]),Qe.forEach(n),be.forEach(n),Se=B(ne);for(let se=0;se<X.length;se+=1)X[se].l(ne);ne.forEach(n),de=B(a),oe=p(a,"DIV",{class:!0}),k(oe).forEach(n),_e=B(a),Z=p(a,"DIV",{class:!0});var ge=k(Z);Q=p(ge,"BUTTON",{class:!0});var qe=k(Q);De=L(qe,"Start"),qe.forEach(n),Oe=B(ge),te=p(ge,"BUTTON",{class:!0});var Xe=k(te);Ve=L(Xe,"Leave"),Xe.forEach(n),ge.forEach(n),this.h()},h(){f(e,"class","text-center cursor-pointer"),f(O,"for","name"),f(O,"class","flex flex-shrink"),f(T,"class","flex-grow"),f(_,"class","mt-2 flex flex-row"),f(g,"for","words"),f(g,"class","flex flex-shrink"),f(m,"id","words"),f(m,"class","input flex-grow"),f(E,"class","mt-2 flex flex-row"),f(S,"class","btn md primary w-full mb-2"),f(v,"class","flex"),f(w,"class","text-center"),f(q,"class","btn md primary flex-1 text-center"),f(ae,"class","btn md danger flex-1 text-center"),f(b,"class","mt-2 mb-2 flex justify-center"),f(P,"class","mt-2 mb-2"),f(oe,"class","flex-grow"),f(Q,"class","btn lg primary flex-1"),Q.disabled=he=t[5].length<2||ot,ie(Q,"bg-blue-100",t[5].length<2),ie(Q,"hover:bg-blue-500",t[5].length>1),f(te,"class","btn lg danger flex-1"),f(Z,"class","flex justify-center")},m(a,c){y(a,e,c),i(e,s),i(e,o),y(a,u,c),y(a,_,c),i(_,O),i(O,I),i(_,G),i(_,T),Fe(T,t[2]),y(a,C,c),y(a,E,c),i(E,g),i(g,U),i(E,r),i(E,m);for(let V=0;V<W.length;V+=1)W[V]&&W[V].m(m,null);Ke(m,t[7]),y(a,R,c),y(a,v,c),i(v,S),i(S,H),i(S,M),y(a,J,c),y(a,P,c),i(P,w),i(w,D),i(w,Y),i(w,K),i(P,d),i(P,b),i(b,q),i(q,x),i(b,Te),i(b,ae),i(ae,ce),i(P,Se);for(let V=0;V<X.length;V+=1)X[V]&&X[V].m(P,null);y(a,de,c),y(a,oe,c),y(a,_e,c),y(a,Z,c),i(Z,Q),i(Q,De),i(Z,Oe),i(Z,te),i(te,Ve),$e||(je=[z(e,"click",t[22]),z(T,"input",t[23]),z(T,"input",function(){me(t[13])&&t[13].apply(this,arguments)}),z(m,"change",Ne(function(){me(t[12])&&t[12].apply(this,arguments)})),z(S,"click",Ct),z(Q,"click",function(){me(t[10])&&t[10].apply(this,arguments)}),z(te,"click",t[24])],$e=!0)},p(a,c){var V;if(t=a,c[0]&1&&l!==(l=t[0].room+"")&&ee(o,l),c[0]&4&&T.value!==t[2]&&Fe(T,t[2]),c&0){re=Object.keys(Ie);let A;for(A=0;A<re.length;A+=1){const le=lt(t,re,A);W[A]?W[A].p(le,c):(W[A]=st(le),W[A].c(),W[A].m(m,null))}for(;A<W.length;A+=1)W[A].d(1);W.length=re.length}c[0]&128&&Ke(m,t[7]),c[0]&1&&j!==(j=t[0].room+"")&&ee(M,j),c[0]&10&&F!==(F=((V=t[1][t[3]])==null?void 0:V.team)==="team1"?"Blue":"Red")&&ee(Y,F),c[0]&16&&ee(x,t[4]),c[0]&16384&&ee(ce,t[14]),c[0]&2088&&(pe=t[5],X=ht(X,c,Pe,1,t,pe,Ue,P,vt,at,null,tt)),c[0]&32&&he!==(he=t[5].length<2||ot)&&(Q.disabled=he),c[0]&32&&ie(Q,"bg-blue-100",t[5].length<2),c[0]&32&&ie(Q,"hover:bg-blue-500",t[5].length>1)},d(a){a&&n(e),a&&n(u),a&&n(_),a&&n(C),a&&n(E),pt(W,a),a&&n(R),a&&n(v),a&&n(J),a&&n(P);for(let c=0;c<X.length;c+=1)X[c].d();a&&n(de),a&&n(oe),a&&n(_e),a&&n(Z),$e=!1,rt(je)}}}function Dt(t){let e,s;return e=new Tt({props:{value:window.location.href}}),{c(){ke(e.$$.fragment)},l(l){we(e.$$.fragment,l)},m(l,o){Ee(e,l,o),s=!0},p:Be,i(l){s||(ue(e.$$.fragment,l),s=!0)},o(l){fe(e.$$.fragment,l),s=!1},d(l){ye(e,l)}}}function Ot(t){let e,s,l=Dt();return{c(){l&&l.c(),e=xe()},l(o){l&&l.l(o),e=xe()},m(o,u){l&&l.m(o,u),y(o,e,u),s=!0},p(o,u){l.p(o,u)},i(o){s||(ue(l),s=!0)},o(o){fe(l),s=!1},d(o){l&&l.d(o),o&&n(e)}}}function Vt(t){let e,s,l=t[0].room+"",o;return{c(){e=h("h2"),s=$("Room Id "),o=$(l),this.h()},l(u){e=p(u,"H2",{slot:!0});var _=k(e);s=L(_,"Room Id "),o=L(_,l),_.forEach(n),this.h()},h(){f(e,"slot","title")},m(u,_){y(u,e,_),i(e,s),i(e,o)},p(u,_){_[0]&1&&l!==(l=u[0].room+"")&&ee(o,l)},d(u){u&&n(e)}}}function $t(t){let e,s;return{c(){e=h("a"),s=$("Exit"),this.h()},l(l){e=p(l,"A",{href:!0,class:!0});var o=k(e);s=L(o,"Exit"),o.forEach(n),this.h()},h(){f(e,"href",`${nt}/`),f(e,"class","btn lg danger")},m(l,o){y(l,e,o),i(e,s)},p:Be,d(l){l&&n(e)}}}function Lt(t){let e,s,l,o,u,_,O,I,G,T;Re.title=e="Word Games!: Lobby "+t[0].room,l=new bt({props:{$$slots:{default:[St]},$$scope:{ctx:t}}});function C(r){t[25](r)}let E={$$slots:{title:[Vt],default:[Ot]},$$scope:{ctx:t}};t[8]!==void 0&&(E.show=t[8]),u=new et({props:E}),Ye.push(()=>ze(u,"show",C));function g(r){t[26](r)}let U={$$slots:{default:[$t]},$$scope:{ctx:t}};return t[9]!==void 0&&(U.show=t[9]),I=new et({props:U}),Ye.push(()=>ze(I,"show",g)),{c(){s=N(),ke(l.$$.fragment),o=N(),ke(u.$$.fragment),O=N(),ke(I.$$.fragment)},l(r){mt("svelte-lrb7zh",Re.head).forEach(n),s=B(r),we(l.$$.fragment,r),o=B(r),we(u.$$.fragment,r),O=B(r),we(I.$$.fragment,r)},m(r,m){y(r,s,m),Ee(l,r,m),y(r,o,m),Ee(u,r,m),y(r,O,m),Ee(I,r,m),T=!0},p(r,m){(!T||m[0]&1)&&e!==(e="Word Games!: Lobby "+r[0].room)&&(Re.title=e);const R={};m[0]&32703|m[1]&4&&(R.$$scope={dirty:m,ctx:r}),l.$set(R);const v={};m[0]&1|m[1]&4&&(v.$$scope={dirty:m,ctx:r}),!_&&m[0]&256&&(_=!0,v.show=r[8],Je(()=>_=!1)),u.$set(v);const S={};m[1]&4&&(S.$$scope={dirty:m,ctx:r}),!G&&m[0]&512&&(G=!0,S.show=r[9],Je(()=>G=!1)),I.$set(S)},i(r){T||(ue(l.$$.fragment,r),ue(u.$$.fragment,r),ue(I.$$.fragment,r),T=!0)},o(r){fe(l.$$.fragment,r),fe(u.$$.fragment,r),fe(I.$$.fragment,r),T=!1},d(r){r&&n(s),ye(l,r),r&&n(o),ye(u,r),r&&n(O),ye(I,r)}}}function Ct(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Ce("Successful shared!","success")).catch(t=>Ce(t.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Ce("Successful Copied!","success"));else if("execCommand"in document){const t=document.createElement("input");t.style.display="none",t.textContent=location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}let ot=!1;function Rt(t,e,s){let l,o,u,_,O,I,G,T,C,E,g;ct(t,It,d=>s(19,g=d));let{data:U}=e,r={},m=!1,R=Ie.Medium,v=Date.now(),S=!1,H=!1,j=`guest-${gt()}`,M;dt(()=>{const d=[o.get("seed").on(b=>{s(16,v=b)}),o.get("started").on(b=>{s(15,m=b)}),o.get("words").on(b=>{s(7,R=b)}),o.get("users").on(async b=>{b&&s(1,r=(await Promise.all(Object.values(b))).reduce((q,x)=>(x&&(q[x.id]=x),q),{}))})];return o.get("users").get(l).set({id:l,name:j,team:"team1"}),()=>{d.forEach(b=>b())}});function J(d){Ze.call(this,t,d)}function P(d){Ze.call(this,t,d)}const w=()=>s(8,S=!0);function D(){j=this.value,s(2,j)}const F=()=>s(9,H=!0);function Y(d){S=d,s(8,S)}function K(d){H=d,s(9,H)}return t.$$set=d=>{"data"in d&&s(0,U=d.data)},t.$$.update=()=>{if(t.$$.dirty[0]&524288&&s(3,l=g),t.$$.dirty[0]&1&&s(18,o=yt.get("rooms").get(U.room)),t.$$.dirty[0]&262152&&s(6,u=o.get("users").get(l)),t.$$.dirty[0]&32769&&m&&U.room&&kt(`${nt}/game?room=${U.room}`),t.$$.dirty[0]&2&&s(5,_=Array.from(Object.entries(r)).sort(wt)),t.$$.dirty[0]&32&&s(4,O=_.filter(([d,b])=>!b.team||b.team==="team1").length),t.$$.dirty[0]&48&&s(14,I=_.length-O),t.$$.dirty[0]&68&&s(13,G=()=>{u.get("name").set(j)}),t.$$.dirty[0]&262144&&s(12,T=d=>{o.get("words").set(d.currentTarget.value)}),t.$$.dirty[0]&262144&&s(11,C=(d,b,q)=>()=>{b!==q&&o.get("users").get(d).get("team").set(q)}),t.$$.dirty[0]&327690&&s(10,E=async()=>{const d=Et.fromSeed(v);o.get("turn").set(d.fromArray(Object.keys(r)).unwrapOr(l)),o.get("started").set(!0)}),t.$$.dirty[0]&393228&&l&&M!==l){const d=l;M&&o.get("users").get(M).set(null),o.get("users").get(d).set({id:d,name:j,team:"team1"}),s(17,M=d)}},[U,r,j,l,O,_,u,R,S,H,E,C,T,G,I,m,v,M,o,g,J,P,w,D,F,Y,K]}class Pt extends it{constructor(e){super(),ut(this,e,Rt,Lt,ft,{data:0},null,[-1,-1])}}export{Pt as default};
