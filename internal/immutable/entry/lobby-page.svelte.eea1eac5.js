import{S as it,i as ut,s as ft,w as Ye,N as ze,a as N,y as ke,J as mt,h as n,c as B,z as we,b as E,A as Ee,O as Je,g as ue,d as fe,B as ye,I as ct,o as dt,R as _t,k as h,q as V,l as p,m as g,r as $,n as c,P as ie,G as i,K as Fe,T as Ke,L as z,u as ee,U as ht,V as pt,M as rt,W as Ze,H as Be,X as Ne,Q as me,Y as vt,e as xe}from"../chunks/index.8f7fe7b1.js";import{L as bt,a as gt,g as kt,s as wt,X as Et,c as Ce}from"../chunks/util.54d134f6.js";import{e as nt}from"../chunks/singletons.61a91846.js";import{M as et,W as Ie,g as yt,u as It,Q as Tt}from"../chunks/userId.0c95ee66.js";const{document:Re}=_t;function tt(t,e,s){const l=t.slice();return l[27]=e[s][0],l[6]=e[s][1],l[29]=s,l}function lt(t,e,s){const l=t.slice();return l[30]=e[s],l}function st(t){let e,s=t[30]+"",l;return{c(){e=h("option"),l=V(s),this.h()},l(o){e=p(o,"OPTION",{});var u=g(e);l=$(u,s),u.forEach(n),this.h()},h(){e.__value=Ie[t[30]],e.value=e.__value},m(o,u){E(o,e,u),i(e,l)},p:Be,d(o){o&&n(e)}}}function at(t,e){let s,l,o,u=e[29]+1+"",_,L,y=e[6].name+"",G,I,C,T,k,U,r,f,R,v,S,H,j,M,J,P;return{key:t,first:null,c(){s=h("div"),l=h("div"),o=h("p"),_=V(u),L=V(" - "),G=V(y),I=N(),C=h("form"),T=h("div"),k=h("input"),f=N(),R=h("div"),v=h("input"),j=N(),M=h("hr"),this.h()},l(w){s=p(w,"DIV",{class:!0});var D=g(s);l=p(D,"DIV",{class:!0});var F=g(l);o=p(F,"P",{class:!0});var Y=g(o);_=$(Y,u),L=$(Y," - "),G=$(Y,y),Y.forEach(n),F.forEach(n),I=B(D),C=p(D,"FORM",{class:!0});var K=g(C);T=p(K,"DIV",{class:!0});var d=g(T);k=p(d,"INPUT",{id:!0,name:!0,type:!0,class:!0}),d.forEach(n),f=B(K),R=p(K,"DIV",{class:!0});var b=g(R);v=p(b,"INPUT",{id:!0,name:!0,type:!0,class:!0}),b.forEach(n),K.forEach(n),D.forEach(n),j=B(w),M=p(w,"HR",{}),this.h()},h(){c(o,"class","text-2xl p-1 font-bold"),c(l,"class","flex-grow"),c(k,"id",U=`${e[27]}-team-1`),c(k,"name","team"),k.value="1",c(k,"type","radio"),c(k,"class","align-bottom"),k.checked=r=!e[6].team||e[6].team==="team1",c(T,"class","btn sm primary flex-1"),c(v,"id",S=`${e[27]}-team-2`),c(v,"name","team"),v.value="2",c(v,"type","radio"),c(v,"class","align-bottom"),v.checked=H=e[6].team==="team2",c(R,"class","btn sm danger flex-1"),c(C,"class","flex-grow-0 flex flex-row"),c(s,"class","flex justify-between"),ie(s,"bg-gray-200",e[27]===e[3]),this.first=s},m(w,D){E(w,s,D),i(s,l),i(l,o),i(o,_),i(o,L),i(o,G),i(s,I),i(s,C),i(C,T),i(T,k),i(C,f),i(C,R),i(R,v),E(w,j,D),E(w,M,D),J||(P=[z(k,"click",Ne(e[21])),z(T,"click",function(){me(e[11](e[27],e[6].team,"team1"))&&e[11](e[27],e[6].team,"team1").apply(this,arguments)}),z(v,"click",Ne(e[20])),z(R,"click",function(){me(e[11](e[27],e[6].team,"team2"))&&e[11](e[27],e[6].team,"team2").apply(this,arguments)})],J=!0)},p(w,D){e=w,D[0]&32&&u!==(u=e[29]+1+"")&&ee(_,u),D[0]&32&&y!==(y=e[6].name+"")&&ee(G,y),D[0]&32&&U!==(U=`${e[27]}-team-1`)&&c(k,"id",U),D[0]&32&&r!==(r=!e[6].team||e[6].team==="team1")&&(k.checked=r),D[0]&32&&S!==(S=`${e[27]}-team-2`)&&c(v,"id",S),D[0]&32&&H!==(H=e[6].team==="team2")&&(v.checked=H),D[0]&40&&ie(s,"bg-gray-200",e[27]===e[3])},d(w){w&&n(s),w&&n(j),w&&n(M),J=!1,rt(P)}}}function St(t){var We;let e,s,l=t[0].room+"",o,u,_,L,y,G,I,C,T,k,U,r,f,R,v,S,H,j=t[0].room+"",M,J,P,w,D,F=((We=t[1][t[3]])==null?void 0:We.team)==="team1"?"Blue":"Red",Y,K,d,b,q,x,Te,ae,ce,Se,X=[],Ue=new Map,de,oe,_e,Z,Q,De,he,Oe,te,Ve,$e,je,re=Object.keys(Ie),W=[];for(let a=0;a<re.length;a+=1)W[a]=st(lt(t,re,a));let pe=t[5];const Pe=a=>a[27]+a[6].team;for(let a=0;a<pe.length;a+=1){let m=tt(t,pe,a),O=Pe(m);Ue.set(O,X[a]=at(O,m))}return{c(){e=h("h1"),s=V("Room Id "),o=V(l),u=N(),_=h("div"),L=h("label"),y=V("Name"),G=N(),I=h("input"),C=N(),T=h("div"),k=h("label"),U=V("Words"),r=N(),f=h("select");for(let a=0;a<W.length;a+=1)W[a].c();R=N(),v=h("div"),S=h("button"),H=V("Share Game "),M=V(j),J=N(),P=h("div"),w=h("h2"),D=V("Teams (You are on "),Y=V(F),K=V(")"),d=N(),b=h("div"),q=h("div"),x=V(t[4]),Te=N(),ae=h("div"),ce=V(t[14]),Se=N();for(let a=0;a<X.length;a+=1)X[a].c();de=N(),oe=h("div"),_e=N(),Z=h("div"),Q=h("button"),De=V("Start"),Oe=N(),te=h("button"),Ve=V("Leave"),this.h()},l(a){e=p(a,"H1",{class:!0});var m=g(e);s=$(m,"Room Id "),o=$(m,l),m.forEach(n),u=B(a),_=p(a,"DIV",{class:!0});var O=g(_);L=p(O,"LABEL",{for:!0});var A=g(L);y=$(A,"Name"),A.forEach(n),G=B(O),I=p(O,"INPUT",{class:!0}),O.forEach(n),C=B(a),T=p(a,"DIV",{});var le=g(T);k=p(le,"LABEL",{for:!0});var Ge=g(k);U=$(Ge,"Words"),Ge.forEach(n),r=B(le),f=p(le,"SELECT",{id:!0,class:!0});var Me=g(f);for(let se=0;se<W.length;se+=1)W[se].l(Me);Me.forEach(n),le.forEach(n),R=B(a),v=p(a,"DIV",{class:!0});var Ae=g(v);S=p(Ae,"BUTTON",{class:!0});var Le=g(S);H=$(Le,"Share Game "),M=$(Le,j),Le.forEach(n),Ae.forEach(n),J=B(a),P=p(a,"DIV",{class:!0});var ne=g(P);w=p(ne,"H2",{class:!0});var ve=g(w);D=$(ve,"Teams (You are on "),Y=$(ve,F),K=$(ve,")"),ve.forEach(n),d=B(ne),b=p(ne,"DIV",{class:!0});var be=g(b);q=p(be,"DIV",{class:!0});var He=g(q);x=$(He,t[4]),He.forEach(n),Te=B(be),ae=p(be,"DIV",{class:!0});var Qe=g(ae);ce=$(Qe,t[14]),Qe.forEach(n),be.forEach(n),Se=B(ne);for(let se=0;se<X.length;se+=1)X[se].l(ne);ne.forEach(n),de=B(a),oe=p(a,"DIV",{class:!0}),g(oe).forEach(n),_e=B(a),Z=p(a,"DIV",{class:!0});var ge=g(Z);Q=p(ge,"BUTTON",{class:!0});var qe=g(Q);De=$(qe,"Start"),qe.forEach(n),Oe=B(ge),te=p(ge,"BUTTON",{class:!0});var Xe=g(te);Ve=$(Xe,"Leave"),Xe.forEach(n),ge.forEach(n),this.h()},h(){c(e,"class","text-center cursor-pointer"),c(L,"for","name"),c(I,"class","input"),c(_,"class","mt-2"),c(k,"for","words"),c(f,"id","words"),c(f,"class","input"),c(S,"class","btn md primary w-full mb-2"),c(v,"class","flex"),c(w,"class","text-center"),c(q,"class","btn md primary flex-1 text-center"),c(ae,"class","btn md danger flex-1 text-center"),c(b,"class","mt-2 mb-2 flex justify-center"),c(P,"class","mt-2 mb-2"),c(oe,"class","flex-grow"),c(Q,"class","btn lg primary flex-1"),Q.disabled=he=t[5].length<2||ot,ie(Q,"bg-blue-100",t[5].length<2),ie(Q,"hover:bg-blue-500",t[5].length>1),c(te,"class","btn lg danger flex-1"),c(Z,"class","flex justify-center")},m(a,m){E(a,e,m),i(e,s),i(e,o),E(a,u,m),E(a,_,m),i(_,L),i(L,y),i(_,G),i(_,I),Fe(I,t[2]),E(a,C,m),E(a,T,m),i(T,k),i(k,U),i(T,r),i(T,f);for(let O=0;O<W.length;O+=1)W[O]&&W[O].m(f,null);Ke(f,t[7]),E(a,R,m),E(a,v,m),i(v,S),i(S,H),i(S,M),E(a,J,m),E(a,P,m),i(P,w),i(w,D),i(w,Y),i(w,K),i(P,d),i(P,b),i(b,q),i(q,x),i(b,Te),i(b,ae),i(ae,ce),i(P,Se);for(let O=0;O<X.length;O+=1)X[O]&&X[O].m(P,null);E(a,de,m),E(a,oe,m),E(a,_e,m),E(a,Z,m),i(Z,Q),i(Q,De),i(Z,Oe),i(Z,te),i(te,Ve),$e||(je=[z(e,"click",t[22]),z(I,"input",t[23]),z(I,"input",function(){me(t[13])&&t[13].apply(this,arguments)}),z(f,"change",Ne(function(){me(t[12])&&t[12].apply(this,arguments)})),z(S,"click",Ct),z(Q,"click",function(){me(t[10])&&t[10].apply(this,arguments)}),z(te,"click",t[24])],$e=!0)},p(a,m){var O;if(t=a,m[0]&1&&l!==(l=t[0].room+"")&&ee(o,l),m[0]&4&&I.value!==t[2]&&Fe(I,t[2]),m&0){re=Object.keys(Ie);let A;for(A=0;A<re.length;A+=1){const le=lt(t,re,A);W[A]?W[A].p(le,m):(W[A]=st(le),W[A].c(),W[A].m(f,null))}for(;A<W.length;A+=1)W[A].d(1);W.length=re.length}m[0]&128&&Ke(f,t[7]),m[0]&1&&j!==(j=t[0].room+"")&&ee(M,j),m[0]&10&&F!==(F=((O=t[1][t[3]])==null?void 0:O.team)==="team1"?"Blue":"Red")&&ee(Y,F),m[0]&16&&ee(x,t[4]),m[0]&16384&&ee(ce,t[14]),m[0]&2088&&(pe=t[5],X=ht(X,m,Pe,1,t,pe,Ue,P,vt,at,null,tt)),m[0]&32&&he!==(he=t[5].length<2||ot)&&(Q.disabled=he),m[0]&32&&ie(Q,"bg-blue-100",t[5].length<2),m[0]&32&&ie(Q,"hover:bg-blue-500",t[5].length>1)},d(a){a&&n(e),a&&n(u),a&&n(_),a&&n(C),a&&n(T),pt(W,a),a&&n(R),a&&n(v),a&&n(J),a&&n(P);for(let m=0;m<X.length;m+=1)X[m].d();a&&n(de),a&&n(oe),a&&n(_e),a&&n(Z),$e=!1,rt(je)}}}function Dt(t){let e,s;return e=new Tt({props:{value:window.location.href}}),{c(){ke(e.$$.fragment)},l(l){we(e.$$.fragment,l)},m(l,o){Ee(e,l,o),s=!0},p:Be,i(l){s||(ue(e.$$.fragment,l),s=!0)},o(l){fe(e.$$.fragment,l),s=!1},d(l){ye(e,l)}}}function Ot(t){let e,s,l=Dt();return{c(){l&&l.c(),e=xe()},l(o){l&&l.l(o),e=xe()},m(o,u){l&&l.m(o,u),E(o,e,u),s=!0},p(o,u){l.p(o,u)},i(o){s||(ue(l),s=!0)},o(o){fe(l),s=!1},d(o){l&&l.d(o),o&&n(e)}}}function Vt(t){let e,s,l=t[0].room+"",o;return{c(){e=h("h2"),s=V("Room Id "),o=V(l),this.h()},l(u){e=p(u,"H2",{slot:!0});var _=g(e);s=$(_,"Room Id "),o=$(_,l),_.forEach(n),this.h()},h(){c(e,"slot","title")},m(u,_){E(u,e,_),i(e,s),i(e,o)},p(u,_){_[0]&1&&l!==(l=u[0].room+"")&&ee(o,l)},d(u){u&&n(e)}}}function $t(t){let e,s;return{c(){e=h("a"),s=V("Exit"),this.h()},l(l){e=p(l,"A",{href:!0,class:!0});var o=g(e);s=$(o,"Exit"),o.forEach(n),this.h()},h(){c(e,"href",`${nt}/`),c(e,"class","btn lg danger")},m(l,o){E(l,e,o),i(e,s)},p:Be,d(l){l&&n(e)}}}function Lt(t){let e,s,l,o,u,_,L,y,G,I;Re.title=e="Word Games!: Lobby "+t[0].room,l=new bt({props:{$$slots:{default:[St]},$$scope:{ctx:t}}});function C(r){t[25](r)}let T={$$slots:{title:[Vt],default:[Ot]},$$scope:{ctx:t}};t[8]!==void 0&&(T.show=t[8]),u=new et({props:T}),Ye.push(()=>ze(u,"show",C));function k(r){t[26](r)}let U={$$slots:{default:[$t]},$$scope:{ctx:t}};return t[9]!==void 0&&(U.show=t[9]),y=new et({props:U}),Ye.push(()=>ze(y,"show",k)),{c(){s=N(),ke(l.$$.fragment),o=N(),ke(u.$$.fragment),L=N(),ke(y.$$.fragment)},l(r){mt("svelte-lrb7zh",Re.head).forEach(n),s=B(r),we(l.$$.fragment,r),o=B(r),we(u.$$.fragment,r),L=B(r),we(y.$$.fragment,r)},m(r,f){E(r,s,f),Ee(l,r,f),E(r,o,f),Ee(u,r,f),E(r,L,f),Ee(y,r,f),I=!0},p(r,f){(!I||f[0]&1)&&e!==(e="Word Games!: Lobby "+r[0].room)&&(Re.title=e);const R={};f[0]&32703|f[1]&4&&(R.$$scope={dirty:f,ctx:r}),l.$set(R);const v={};f[0]&1|f[1]&4&&(v.$$scope={dirty:f,ctx:r}),!_&&f[0]&256&&(_=!0,v.show=r[8],Je(()=>_=!1)),u.$set(v);const S={};f[1]&4&&(S.$$scope={dirty:f,ctx:r}),!G&&f[0]&512&&(G=!0,S.show=r[9],Je(()=>G=!1)),y.$set(S)},i(r){I||(ue(l.$$.fragment,r),ue(u.$$.fragment,r),ue(y.$$.fragment,r),I=!0)},o(r){fe(l.$$.fragment,r),fe(u.$$.fragment,r),fe(y.$$.fragment,r),I=!1},d(r){r&&n(s),ye(l,r),r&&n(o),ye(u,r),r&&n(L),ye(y,r)}}}function Ct(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Ce("Successful shared!","success")).catch(t=>Ce(t.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Ce("Successful Copied!","success"));else if("execCommand"in document){const t=document.createElement("input");t.style.display="none",t.textContent=location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}let ot=!1;function Rt(t,e,s){let l,o,u,_,L,y,G,I,C,T,k;ct(t,It,d=>s(19,k=d));let{data:U}=e,r={},f=!1,R=Ie.Medium,v=Date.now(),S=!1,H=!1,j=`guest-${gt()}`,M;dt(()=>{const d=[o.get("seed").on(b=>{s(16,v=b)}),o.get("started").on(b=>{s(15,f=b)}),o.get("words").on(b=>{s(7,R=b)}),o.get("users").on(async b=>{b&&s(1,r=(await Promise.all(Object.values(b))).reduce((q,x)=>(x&&(q[x.id]=x),q),{}))})];return o.get("users").get(l).set({id:l,name:j,team:"team1"}),()=>{d.forEach(b=>b())}});function J(d){Ze.call(this,t,d)}function P(d){Ze.call(this,t,d)}const w=()=>s(8,S=!0);function D(){j=this.value,s(2,j)}const F=()=>s(9,H=!0);function Y(d){S=d,s(8,S)}function K(d){H=d,s(9,H)}return t.$$set=d=>{"data"in d&&s(0,U=d.data)},t.$$.update=()=>{if(t.$$.dirty[0]&524288&&s(3,l=k),t.$$.dirty[0]&1&&s(18,o=yt.get("rooms").get(U.room)),t.$$.dirty[0]&262152&&s(6,u=o.get("users").get(l)),t.$$.dirty[0]&32769&&f&&U.room&&kt(`${nt}/game?room=${U.room}`),t.$$.dirty[0]&2&&s(5,_=Array.from(Object.entries(r)).sort(wt)),t.$$.dirty[0]&32&&s(4,L=_.filter(([d,b])=>!b.team||b.team==="team1").length),t.$$.dirty[0]&48&&s(14,y=_.length-L),t.$$.dirty[0]&68&&s(13,G=()=>{u.get("name").set(j)}),t.$$.dirty[0]&262144&&s(12,I=d=>{o.get("words").set(d.currentTarget.value)}),t.$$.dirty[0]&262144&&s(11,C=(d,b,q)=>()=>{b!==q&&o.get("users").get(d).get("team").set(q)}),t.$$.dirty[0]&327690&&s(10,T=async()=>{const d=Et.fromSeed(v);o.get("turn").set(d.fromArray(Object.keys(r)).unwrapOr(l)),o.get("started").set(!0)}),t.$$.dirty[0]&393228&&l&&M!==l){const d=l;M&&o.get("users").get(M).set(null),o.get("users").get(d).set({id:d,name:j,team:"team1"}),s(17,M=d)}},[U,r,j,l,L,_,u,R,S,H,T,C,I,G,y,f,v,M,o,k,J,P,w,D,F,Y,K]}class Pt extends it{constructor(e){super(),ut(this,e,Rt,Lt,ft,{data:0},null,[-1,-1])}}export{Pt as default};
