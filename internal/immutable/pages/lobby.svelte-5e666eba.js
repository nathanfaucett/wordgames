import{S as rt,i as nt,s as it,N as qe,O as Xe,a as R,w as ge,P as ut,h as n,c as N,x as ke,b as E,y as Ee,Q as Ye,f as ie,t as ue,B as ye,R as ft,o as mt,$ as ct,l as _,r as V,m as h,n as b,u as L,p as m,T as ne,M as u,_ as Fe,a0 as Je,U as Y,v as ee,V as dt,a1 as _t,G as at,a2 as ze,E as Re,a3 as Ce,H as fe,W as ht,e as Ke}from"../chunks/index-275a10fd.js";import{L as pt,a as bt,g as vt,s as gt,X as kt,c as Ve}from"../chunks/util-dfedccda.js";import{b as ot}from"../chunks/singletons-80e721ca.js";import{M as Ze,W as we,g as Et,u as yt,Q as wt}from"../chunks/userId-791e378d.js";import"../chunks/preload-helper-362d4722.js";const{document:Le}=ct;function xe(t,e,s){const l=t.slice();return l[27]=e[s][0],l[6]=e[s][1],l[29]=s,l}function et(t,e,s){const l=t.slice();return l[30]=e[s],l}function tt(t){let e,s=t[30]+"",l;return{c(){e=_("option"),l=V(s),this.h()},l(a){e=h(a,"OPTION",{});var i=b(e);l=L(i,s),i.forEach(n),this.h()},h(){e.__value=we[t[30]],e.value=e.__value},m(a,i){E(a,e,i),u(e,l)},p:Re,d(a){a&&n(e)}}}function lt(t,e){let s,l,a,i=e[29]+1+"",D,j,y=e[6].name+"",T,B,w,O,I,P,r,d,S,p,U,H,W,v,Q,Z;return{key:t,first:null,c(){s=_("div"),l=_("div"),a=_("p"),D=V(i),j=V(" - "),T=V(y),B=R(),w=_("form"),O=_("div"),I=_("input"),d=R(),S=_("div"),p=_("input"),W=R(),v=_("hr"),this.h()},l($){s=h($,"DIV",{class:!0});var g=b(s);l=h(g,"DIV",{class:!0});var x=b(l);a=h(x,"P",{class:!0});var F=b(a);D=L(F,i),j=L(F," - "),T=L(F,y),F.forEach(n),x.forEach(n),B=N(g),w=h(g,"FORM",{class:!0});var M=b(w);O=h(M,"DIV",{class:!0});var c=b(O);I=h(c,"INPUT",{id:!0,name:!0,type:!0,class:!0}),c.forEach(n),d=N(M),S=h(M,"DIV",{class:!0});var k=b(S);p=h(k,"INPUT",{id:!0,name:!0,type:!0,class:!0}),k.forEach(n),M.forEach(n),g.forEach(n),W=N($),v=h($,"HR",{}),this.h()},h(){m(a,"class","text-2xl p-1 font-bold"),m(l,"class","flex-grow"),m(I,"id",P=`${e[27]}-team-1`),m(I,"name","team"),I.value="1",m(I,"type","radio"),m(I,"class","align-bottom"),I.checked=r=!e[6].team||e[6].team==="team1",m(O,"class","btn sm primary flex-1"),m(p,"id",U=`${e[27]}-team-2`),m(p,"name","team"),p.value="2",m(p,"type","radio"),m(p,"class","align-bottom"),p.checked=H=e[6].team==="team2",m(S,"class","btn sm danger flex-1"),m(w,"class","flex-grow-0 flex flex-row"),m(s,"class","flex justify-between"),ne(s,"bg-gray-200",e[27]===e[3]),this.first=s},m($,g){E($,s,g),u(s,l),u(l,a),u(a,D),u(a,j),u(a,T),u(s,B),u(s,w),u(w,O),u(O,I),u(w,d),u(w,S),u(S,p),E($,W,g),E($,v,g),Q||(Z=[Y(I,"click",Ce(e[21])),Y(O,"click",function(){fe(e[11](e[27],e[6].team,"team1"))&&e[11](e[27],e[6].team,"team1").apply(this,arguments)}),Y(p,"click",Ce(e[20])),Y(S,"click",function(){fe(e[11](e[27],e[6].team,"team2"))&&e[11](e[27],e[6].team,"team2").apply(this,arguments)})],Q=!0)},p($,g){e=$,g[0]&32&&i!==(i=e[29]+1+"")&&ee(D,i),g[0]&32&&y!==(y=e[6].name+"")&&ee(T,y),g[0]&32&&P!==(P=`${e[27]}-team-1`)&&m(I,"id",P),g[0]&32&&r!==(r=!e[6].team||e[6].team==="team1")&&(I.checked=r),g[0]&32&&U!==(U=`${e[27]}-team-2`)&&m(p,"id",U),g[0]&32&&H!==(H=e[6].team==="team2")&&(p.checked=H),g[0]&40&&ne(s,"bg-gray-200",e[27]===e[3])},d($){$&&n(s),$&&n(W),$&&n(v),Q=!1,at(Z)}}}function It(t){var je;let e,s,l,a,i,D,j,y,T,B,w,O,I,P,r,d,S,p,U,H,W,v,Q,Z,$=((je=t[1][t[3]])==null?void 0:je.team)==="team1"?"Blue":"Red",g,x,F,M,c,k,z,J,me,Ie,X=[],Ne=new Map,ce,ae,de,K,q,Te,_e,Se,te,$e,De,Be,oe=Object.keys(we),G=[];for(let o=0;o<oe.length;o+=1)G[o]=tt(et(t,oe,o));let he=t[5];const Ue=o=>o[27]+o[6].team;for(let o=0;o<he.length;o+=1){let f=xe(t,he,o),C=Ue(f);Ne.set(C,X[o]=lt(C,f))}return{c(){e=_("h1"),s=V("Room Id "),l=V(t[0]),a=R(),i=_("div"),D=_("label"),j=V("Name"),y=R(),T=_("input"),B=R(),w=_("div"),O=_("label"),I=V("Words"),P=R(),r=_("select");for(let o=0;o<G.length;o+=1)G[o].c();d=R(),S=_("div"),p=_("button"),U=V("Share Game "),H=V(t[0]),W=R(),v=_("div"),Q=_("h2"),Z=V("Teams (You are on "),g=V($),x=V(")"),F=R(),M=_("div"),c=_("div"),k=V(t[4]),z=R(),J=_("div"),me=V(t[14]),Ie=R();for(let o=0;o<X.length;o+=1)X[o].c();ce=R(),ae=_("div"),de=R(),K=_("div"),q=_("button"),Te=V("Start"),Se=R(),te=_("button"),$e=V("Leave"),this.h()},l(o){e=h(o,"H1",{class:!0});var f=b(e);s=L(f,"Room Id "),l=L(f,t[0]),f.forEach(n),a=N(o),i=h(o,"DIV",{class:!0});var C=b(i);D=h(C,"LABEL",{for:!0});var A=b(D);j=L(A,"Name"),A.forEach(n),y=N(C),T=h(C,"INPUT",{class:!0}),C.forEach(n),B=N(o),w=h(o,"DIV",{});var le=b(w);O=h(le,"LABEL",{for:!0});var Pe=b(O);I=L(Pe,"Words"),Pe.forEach(n),P=N(le),r=h(le,"SELECT",{id:!0,class:!0});var We=b(r);for(let se=0;se<G.length;se+=1)G[se].l(We);We.forEach(n),le.forEach(n),d=N(o),S=h(o,"DIV",{class:!0});var Ge=b(S);p=h(Ge,"BUTTON",{class:!0});var Oe=b(p);U=L(Oe,"Share Game "),H=L(Oe,t[0]),Oe.forEach(n),Ge.forEach(n),W=N(o),v=h(o,"DIV",{class:!0});var re=b(v);Q=h(re,"H2",{class:!0});var pe=b(Q);Z=L(pe,"Teams (You are on "),g=L(pe,$),x=L(pe,")"),pe.forEach(n),F=N(re),M=h(re,"DIV",{class:!0});var be=b(M);c=h(be,"DIV",{class:!0});var Me=b(c);k=L(Me,t[4]),Me.forEach(n),z=N(be),J=h(be,"DIV",{class:!0});var Ae=b(J);me=L(Ae,t[14]),Ae.forEach(n),be.forEach(n),Ie=N(re);for(let se=0;se<X.length;se+=1)X[se].l(re);re.forEach(n),ce=N(o),ae=h(o,"DIV",{class:!0}),b(ae).forEach(n),de=N(o),K=h(o,"DIV",{class:!0});var ve=b(K);q=h(ve,"BUTTON",{class:!0});var He=b(q);Te=L(He,"Start"),He.forEach(n),Se=N(ve),te=h(ve,"BUTTON",{class:!0});var Qe=b(te);$e=L(Qe,"Leave"),Qe.forEach(n),ve.forEach(n),this.h()},h(){m(e,"class","text-center cursor-pointer"),m(D,"for","name"),m(T,"class","input"),m(i,"class","mt-2"),m(O,"for","words"),m(r,"id","words"),m(r,"class","input"),m(p,"class","btn md primary w-full mb-2"),m(S,"class","flex"),m(Q,"class","text-center"),m(c,"class","btn md primary flex-1 text-center"),m(J,"class","btn md danger flex-1 text-center"),m(M,"class","mt-2 mb-2 flex justify-center"),m(v,"class","mt-2 mb-2"),m(ae,"class","flex-grow"),m(q,"class","btn lg primary flex-1"),q.disabled=_e=t[5].length<2||st,ne(q,"bg-blue-100",t[5].length<2),ne(q,"hover:bg-blue-500",t[5].length>1),m(te,"class","btn lg danger flex-1"),m(K,"class","flex justify-center")},m(o,f){E(o,e,f),u(e,s),u(e,l),E(o,a,f),E(o,i,f),u(i,D),u(D,j),u(i,y),u(i,T),Fe(T,t[2]),E(o,B,f),E(o,w,f),u(w,O),u(O,I),u(w,P),u(w,r);for(let C=0;C<G.length;C+=1)G[C].m(r,null);Je(r,t[7]),E(o,d,f),E(o,S,f),u(S,p),u(p,U),u(p,H),E(o,W,f),E(o,v,f),u(v,Q),u(Q,Z),u(Q,g),u(Q,x),u(v,F),u(v,M),u(M,c),u(c,k),u(M,z),u(M,J),u(J,me),u(v,Ie);for(let C=0;C<X.length;C+=1)X[C].m(v,null);E(o,ce,f),E(o,ae,f),E(o,de,f),E(o,K,f),u(K,q),u(q,Te),u(K,Se),u(K,te),u(te,$e),De||(Be=[Y(e,"click",t[22]),Y(T,"input",t[23]),Y(T,"input",function(){fe(t[13])&&t[13].apply(this,arguments)}),Y(r,"change",Ce(function(){fe(t[12])&&t[12].apply(this,arguments)})),Y(p,"click",Vt),Y(q,"click",function(){fe(t[10])&&t[10].apply(this,arguments)}),Y(te,"click",t[24])],De=!0)},p(o,f){var C;if(t=o,f[0]&1&&ee(l,t[0]),f[0]&4&&T.value!==t[2]&&Fe(T,t[2]),f&0){oe=Object.keys(we);let A;for(A=0;A<oe.length;A+=1){const le=et(t,oe,A);G[A]?G[A].p(le,f):(G[A]=tt(le),G[A].c(),G[A].m(r,null))}for(;A<G.length;A+=1)G[A].d(1);G.length=oe.length}f[0]&128&&Je(r,t[7]),f[0]&1&&ee(H,t[0]),f[0]&10&&$!==($=((C=t[1][t[3]])==null?void 0:C.team)==="team1"?"Blue":"Red")&&ee(g,$),f[0]&16&&ee(k,t[4]),f[0]&16384&&ee(me,t[14]),f[0]&2088&&(he=t[5],X=dt(X,f,Ue,1,t,he,Ne,v,ht,lt,null,xe)),f[0]&32&&_e!==(_e=t[5].length<2||st)&&(q.disabled=_e),f[0]&32&&ne(q,"bg-blue-100",t[5].length<2),f[0]&32&&ne(q,"hover:bg-blue-500",t[5].length>1)},d(o){o&&n(e),o&&n(a),o&&n(i),o&&n(B),o&&n(w),_t(G,o),o&&n(d),o&&n(S),o&&n(W),o&&n(v);for(let f=0;f<X.length;f+=1)X[f].d();o&&n(ce),o&&n(ae),o&&n(de),o&&n(K),De=!1,at(Be)}}}function Tt(t){let e,s;return e=new wt({props:{value:location.href}}),{c(){ge(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,a){Ee(e,l,a),s=!0},p:Re,i(l){s||(ie(e.$$.fragment,l),s=!0)},o(l){ue(e.$$.fragment,l),s=!1},d(l){ye(e,l)}}}function St(t){let e,s,l=typeof location<"u"&&Tt();return{c(){l&&l.c(),e=Ke()},l(a){l&&l.l(a),e=Ke()},m(a,i){l&&l.m(a,i),E(a,e,i),s=!0},p(a,i){typeof location<"u"&&l.p(a,i)},i(a){s||(ie(l),s=!0)},o(a){ue(l),s=!1},d(a){l&&l.d(a),a&&n(e)}}}function $t(t){let e,s,l;return{c(){e=_("h2"),s=V("Room Id "),l=V(t[0]),this.h()},l(a){e=h(a,"H2",{slot:!0});var i=b(e);s=L(i,"Room Id "),l=L(i,t[0]),i.forEach(n),this.h()},h(){m(e,"slot","title")},m(a,i){E(a,e,i),u(e,s),u(e,l)},p(a,i){i[0]&1&&ee(l,a[0])},d(a){a&&n(e)}}}function Dt(t){let e,s;return{c(){e=_("a"),s=V("Exit"),this.h()},l(l){e=h(l,"A",{href:!0,class:!0});var a=b(e);s=L(a,"Exit"),a.forEach(n),this.h()},h(){m(e,"href",`${ot}/`),m(e,"class","btn lg danger")},m(l,a){E(l,e,a),u(e,s)},p:Re,d(l){l&&n(e)}}}function Ot(t){let e,s,l,a,i,D,j,y,T,B;Le.title=e="Word Games!: Lobby "+t[0],l=new pt({props:{$$slots:{default:[It]},$$scope:{ctx:t}}});function w(r){t[25](r)}let O={$$slots:{title:[$t],default:[St]},$$scope:{ctx:t}};t[8]!==void 0&&(O.show=t[8]),i=new Ze({props:O}),qe.push(()=>Xe(i,"show",w));function I(r){t[26](r)}let P={$$slots:{default:[Dt]},$$scope:{ctx:t}};return t[9]!==void 0&&(P.show=t[9]),y=new Ze({props:P}),qe.push(()=>Xe(y,"show",I)),{c(){s=R(),ge(l.$$.fragment),a=R(),ge(i.$$.fragment),j=R(),ge(y.$$.fragment)},l(r){ut('[data-svelte="svelte-5lsgla"]',Le.head).forEach(n),s=N(r),ke(l.$$.fragment,r),a=N(r),ke(i.$$.fragment,r),j=N(r),ke(y.$$.fragment,r)},m(r,d){E(r,s,d),Ee(l,r,d),E(r,a,d),Ee(i,r,d),E(r,j,d),Ee(y,r,d),B=!0},p(r,d){(!B||d[0]&1)&&e!==(e="Word Games!: Lobby "+r[0])&&(Le.title=e);const S={};d[0]&32703|d[1]&4&&(S.$$scope={dirty:d,ctx:r}),l.$set(S);const p={};d[0]&1|d[1]&4&&(p.$$scope={dirty:d,ctx:r}),!D&&d[0]&256&&(D=!0,p.show=r[8],Ye(()=>D=!1)),i.$set(p);const U={};d[1]&4&&(U.$$scope={dirty:d,ctx:r}),!T&&d[0]&512&&(T=!0,U.show=r[9],Ye(()=>T=!1)),y.$set(U)},i(r){B||(ie(l.$$.fragment,r),ie(i.$$.fragment,r),ie(y.$$.fragment,r),B=!0)},o(r){ue(l.$$.fragment,r),ue(i.$$.fragment,r),ue(y.$$.fragment,r),B=!1},d(r){r&&n(s),ye(l,r),r&&n(a),ye(i,r),r&&n(j),ye(y,r)}}}const jt=t=>({props:{roomId:t.url.searchParams.get("room")}});function Vt(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Ve("Successful shared!","success")).catch(t=>Ve(t.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Ve("Successful Copied!","success"));else if("execCommand"in document){const t=document.createElement("input");t.style.display="none",t.textContent=location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}let st=!1;function Lt(t,e,s){let l,a,i,D,j,y,T,B,w,O,I;ft(t,yt,c=>s(19,I=c));let{roomId:P}=e,r={},d=!1,S=we.Medium,p=Date.now(),U=!1,H=!1,W=`guest-${bt()}`,v;mt(()=>{const c=[a.get("seed").on(k=>{s(16,p=k)}),a.get("started").on(k=>{s(15,d=k)}),a.get("words").on(k=>{s(7,S=k)}),a.get("users").on(async k=>{!k||s(1,r=(await Promise.all(Object.values(k))).reduce((z,J)=>(J&&(z[J.id]=J),z),{}))})];return a.get("users").get(l).set({id:l,name:W,team:"team1"}),()=>{c.forEach(k=>k())}});function Q(c){ze.call(this,t,c)}function Z(c){ze.call(this,t,c)}const $=()=>s(8,U=!0);function g(){W=this.value,s(2,W)}const x=()=>s(9,H=!0);function F(c){U=c,s(8,U)}function M(c){H=c,s(9,H)}return t.$$set=c=>{"roomId"in c&&s(0,P=c.roomId)},t.$$.update=()=>{if(t.$$.dirty[0]&524288&&s(3,l=I),t.$$.dirty[0]&1&&s(18,a=Et.get("rooms").get(P)),t.$$.dirty[0]&262152&&s(6,i=a.get("users").get(l)),t.$$.dirty[0]&32769&&d&&vt(`${ot}/game?room=${P}`),t.$$.dirty[0]&2&&s(5,D=Array.from(Object.entries(r)).sort(gt)),t.$$.dirty[0]&32&&s(4,j=D.filter(([c,k])=>!k.team||k.team==="team1").length),t.$$.dirty[0]&48&&s(14,y=D.length-j),t.$$.dirty[0]&68&&s(13,T=()=>{i.get("name").set(W)}),t.$$.dirty[0]&262144&&s(12,B=c=>{a.get("words").set(c.currentTarget.value)}),t.$$.dirty[0]&262144&&s(11,w=(c,k,z)=>()=>{k!==z&&a.get("users").get(c).get("team").set(z)}),t.$$.dirty[0]&327690&&s(10,O=async()=>{const c=kt.fromSeed(p);a.get("turn").set(c.fromArray(Object.keys(r)).unwrapOr(l)),a.get("started").set(!0)}),t.$$.dirty[0]&393228&&l&&v!==l){const c=l;v&&a.get("users").get(v).set(null),a.get("users").get(c).set({id:c,name:W,team:"team1"}),s(17,v=c)}},[P,r,W,l,j,D,i,S,U,H,O,w,B,T,y,d,p,v,a,I,Q,Z,$,g,x,F,M]}class Pt extends rt{constructor(e){super(),nt(this,e,Lt,Ot,it,{roomId:0},null,[-1,-1])}}export{Pt as default,jt as load};
