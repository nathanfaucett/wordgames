import{S as s,i as t,s as n,D as e,e as o,c as a,a as r,d as i,b as c,f as l,E as u,F as f,G as p,x as m,u as d,L as h,M as $,N as E,P as g,O as w,C as v,Q as I,R as x,T as P}from"./vendor-55b6b459.js";function R(s){let t,n;const h=s[1].default,$=e(h,s,s[0],null);return{c(){t=o("div"),$&&$.c(),this.h()},l(s){t=a(s,"DIV",{class:!0});var n=r(t);$&&$.l(n),n.forEach(i),this.h()},h(){c(t,"class","container mx-auto px-4")},m(s,e){l(s,t,e),$&&$.m(t,null),n=!0},p(s,[t]){$&&$.p&&(!n||1&t)&&u($,h,s,s[0],n?p(h,s[0],t,null):f(s[0]),null)},i(s){n||(m($,s),n=!0)},o(s){d($,s),n=!1},d(s){s&&i(t),$&&$.d(s)}}}function _(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=s=>{"$$scope"in s&&n(0,o=s.$$scope)},[o,e]}class b extends s{constructor(s){super(),t(this,s,_,R,n,{})}}const C="wordgames-github-io-",T=v(null),D=v(null),M=new h.EventEmitter;function O(){var s;return null==(s=w(T))?void 0:s.getId()}function S(s){return s.slice(C.length)}function V(s=6){return I(0,s).iter().map((()=>x()<.25?Math.floor(10*x()):String.fromCharCode(97+Math.floor(26*x())))).join("")}function j(){D.set(this)}async function y(s){const t=w(D);if(t){if(t.getRoomId()===s)return t;t.off(P.Connection,j),t.off(P.Disconnection,j),t.close(),D.set(null)}const n=(await function(){const s=w(T);return s?Promise.resolve(s):new Promise((s=>M.once("peer",s)))}()).getRoom(s);return n.on(P.Connection,j),n.on(P.Disconnection,j),D.set(n),M.emit("room",n),n.connect()}$.exports.getItem("peer_id").then((async s=>{s||(s=E(),await $.exports.setItem("peer_id",s));const t=await g.create(new window.Peer((n=s,`${C}${n}`),{host:{}.VITE_PEER_HOST,port:parseInt({}.VITE_PEER_PORT)}));var n;T.set(t),M.emit("peer",t)}));export{b as L,O as a,y as b,S as c,V as g,M as p,D as r};
