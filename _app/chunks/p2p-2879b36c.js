import{S as s,i as t,s as e,D as n,e as o,c as a,a as r,d as i,b as c,f as l,E as u,F as f,G as p,x as m,u as d,L as h,M as $,N as g,P as w,O as v,C as x,Q as I,R as b,T as C}from"./vendor-55b6b459.js";function D(s){let t,e;const h=s[1].default,$=n(h,s,s[0],null);return{c(){t=o("div"),$&&$.c(),this.h()},l(s){t=a(s,"DIV",{class:!0});var e=r(t);$&&$.l(e),e.forEach(i),this.h()},h(){c(t,"class","container mx-auto px-4")},m(s,n){l(s,t,n),$&&$.m(t,null),e=!0},p(s,[t]){$&&$.p&&(!e||1&t)&&u($,h,s,s[0],e?p(h,s[0],t,null):f(s[0]),null)},i(s){e||(m($,s),e=!0)},o(s){d($,s),e=!1},d(s){s&&i(t),$&&$.d(s)}}}function E(s,t,e){let{$$slots:n={},$$scope:o}=t;return s.$$set=s=>{"$$scope"in s&&e(0,o=s.$$scope)},[o,n]}class P extends s{constructor(s){super(),t(this,s,E,D,e,{})}}const j="wordgames-github-io-",M=x(null),R=x(null),y=new h.EventEmitter;function L(){var s;return null==(s=v(M))?void 0:s.getId()}function S(s){return s.slice(j.length)}function _(s=6){return I(0,s).iter().map((()=>b()<.25?Math.floor(10*b()):String.fromCharCode(97+Math.floor(26*b())))).join("")}function F(){R.set(this)}async function G(s){const t=v(R);if(t){if(t.getRoomId()===s)return t;t.off(C.Connection,F),t.off(C.Disconnection,F),t.close(),R.set(null)}const e=(await function(){const s=v(M);return s?Promise.resolve(s):new Promise((s=>y.once("peer",s)))}()).getRoom(s);return e.on(C.Connection,F),e.on(C.Disconnection,F),R.set(e),y.emit("room",e),e.connect()}$.exports.getItem("peer_id").then((async s=>{s||(s=g(),await $.exports.setItem("peer_id",s));const t=await w.create(new window.Peer((e=s,`${j}${e}`),{host:"0.peerjs.com",port:parseInt("443")}));var e;M.set(t),y.emit("peer",t)}));export{P as L,L as a,G as b,S as c,_ as g,y as p,R as r};
