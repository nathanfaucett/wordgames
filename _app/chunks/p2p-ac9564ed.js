import{S as s,i as t,s as e,D as o,e as n,c as a,a as r,d as c,b as i,f as l,H as u,E as f,F as p,G as m,x as d,u as h,L as $,M as v,N as w,P as g,O as x,C as I,Q as C,R as D,T as E}from"./vendor-30d0dc21.js";function P(s){let t,e,$;const v=s[1].default,w=o(v,s,s[0],null);return{c(){t=n("div"),e=n("div"),w&&w.c(),this.h()},l(s){t=a(s,"DIV",{class:!0});var o=r(t);e=a(o,"DIV",{class:!0});var n=r(e);w&&w.l(n),n.forEach(c),o.forEach(c),this.h()},h(){i(e,"class","row-auto"),i(t,"class","container mx-auto px-4")},m(s,o){l(s,t,o),u(t,e),w&&w.m(e,null),$=!0},p(s,[t]){w&&w.p&&(!$||1&t)&&f(w,v,s,s[0],$?m(v,s[0],t,null):p(s[0]),null)},i(s){$||(d(w,s),$=!0)},o(s){h(w,s),$=!1},d(s){s&&c(t),w&&w.d(s)}}}function b(s,t,e){let{$$slots:o={},$$scope:n}=t;return s.$$set=s=>{"$$scope"in s&&e(0,n=s.$$scope)},[n,o]}class j extends s{constructor(s){super(),t(this,s,b,P,e,{})}}const M=I(null),R=I(null),y=new $.EventEmitter;function L(){var s;return null==(s=x(M))?void 0:s.getId()}function S(s=6){return C(0,s).iter().map((()=>D()<.25?Math.floor(10*D()):String.fromCharCode(97+Math.floor(26*D())))).join("")}function V(){R.set(this)}async function _(s){const t=x(R);if(t){if(t.getRoomId()===s)return t;t.off(E.Connection,V),t.off(E.Disconnection,V),t.close(),R.set(null)}const e=(await function(){const s=x(M);return s?Promise.resolve(s):new Promise((s=>y.once("peer",s)))}()).getRoom(s);return e.on(E.Connection,V),e.on(E.Disconnection,V),R.set(e),y.emit("room",e),e.connect()}v.exports.getItem("peer_id").then((async s=>{s||(s=w(),await v.exports.setItem("peer_id",s));const t=await g.create(new window.Peer((e=s,`wordgames-github-io-${e}`),{host:"0.peerjs.com",port:parseInt("443")}));var e;M.set(t),y.emit("peer",t)}));export{j as L,L as a,_ as b,S as g,y as p,R as r};
