import{S as D,i as C,s as b,D as y,e as h,c as v,a as P,d as f,b as w,f as j,H as A,E as L,F as M,G as S,x,u as O,L as V,M as E,N as q,P as F,O as m,C as I,Q as G,R as d,T as l}from"./vendor-10429b53.js";function H(e){let t,a,r;const s=e[1].default,o=y(s,e,e[0],null);return{c(){t=h("div"),a=h("div"),o&&o.c(),this.h()},l(n){t=v(n,"DIV",{class:!0});var i=P(t);a=v(i,"DIV",{class:!0});var g=P(a);o&&o.l(g),g.forEach(f),i.forEach(f),this.h()},h(){w(a,"class","row-auto"),w(t,"class","container mx-auto px-4")},m(n,i){j(n,t,i),A(t,a),o&&o.m(a,null),r=!0},p(n,[i]){o&&o.p&&(!r||i&1)&&L(o,s,n,n[0],r?S(s,n[0],i,null):M(n[0]),null)},i(n){r||(x(o,n),r=!0)},o(n){O(o,n),r=!1},d(n){n&&f(t),o&&o.d(n)}}}function K(e,t,a){let{$$slots:r={},$$scope:s}=t;return e.$$set=o=>{"$$scope"in o&&a(0,s=o.$$scope)},[s,r]}class Y extends D{constructor(t){super();C(this,t,K,H,b,{})}}const N="wordgames-github-io-",$="peer_id",p=I(null),c=I(null),_=new V.EventEmitter;function Q(){const e=m(p);return e?Promise.resolve(e):new Promise(t=>_.once("peer",t))}function k(){var e;return(e=m(p))==null?void 0:e.getId()}function R(e){return`${N}${e}`}function z(e=6){return G(0,e).iter().map(()=>d()<.25?Math.floor(d()*10):String.fromCharCode(97+Math.floor(d()*26))).join("")}function u(){c.set(this)}async function B(e){const t=m(c),a=R(e);if(t)if(t.getRoomId()!==a)t.off(l.Connection,u),t.off(l.Disconnection,u),t.close(),c.set(null);else return t;const r=await Q(),s=r.getRoom(a);return s.on(l.Connection,u),s.on(l.Disconnection,u),c.set(s),_.emit("room",s),s.connect()}E.exports.getItem($).then(async e=>{e||(e=q(),await E.exports.setItem($,e));const t=await F.create(new window.Peer(R(e),{host:"0.peerjs.com",port:parseInt("443")}));p.set(t),_.emit("peer",t)});export{Y as L,k as a,B as b,z as g,_ as p,c as r};
