import{L as e,_ as t,$ as s,C as n,O as o}from"./vendor-55b6b459.js";import{p as a,c as r,a as c}from"./p2p-b4eea426.js";import{r as m}from"./singletons-12a22614.js";const i=n(null);function u(e){return{id:e,name:r(e),team:1}}const d=new e.EventEmitter,b=t(i,(e=>e?e.get():{byId:{}})),g=t(b,(e=>e.byId[c()]));function l(){const e=o(i);return e?Promise.resolve(e):new Promise((e=>d.once("state",e)))}a.on("room",(e=>{const t=new s("users",e,{byId:{}});t.on("update",(()=>i.set(t))),d.emit("state",t),i.set(t);const n=e.getPeer().getId();t.change((e=>{e.byId[n]||(e.byId[n]=u(n))}))}));const p=n(null),f=new e.EventEmitter,v=t(p,(e=>(null==e?void 0:e.get())||{started:!1}));function w(){const e=o(p);return e?Promise.resolve(e):new Promise((e=>f.once("state",e)))}a.on("room",(e=>{const t=new s("game",e,{started:!1});t.on("update",(()=>p.set(t))),f.emit("state",t),p.set(t)}));const y=async function(e,t){return m.goto(e,t,[])};export{g as a,l as b,w as c,y as d,u as e,v as g,b as u};
