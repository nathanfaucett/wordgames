var $n=Object.defineProperty;var Et=Object.getOwnPropertySymbols;var Nn=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable;var It=(y,n,o)=>n in y?$n(y,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):y[n]=o,we=(y,n)=>{for(var o in n||(n={}))Nn.call(n,o)&&It(y,o,n[o]);if(Et)for(var o of Et(n))Bn.call(n,o)&&It(y,o,n[o]);return y};function be(){}function Rn(y,n){for(const o in n)y[o]=n[o];return y}function Ot(y){return y()}function Dt(){return Object.create(null)}function ke(y){y.forEach(Ot)}function Cn(y){return typeof y=="function"}function Pn(y,n){return y!=y?n==n:y!==n||y&&typeof y=="object"||typeof y=="function"}function Mn(y){return Object.keys(y).length===0}function jt(y,...n){if(y==null)return be;const o=y.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function Pr(y){let n;return jt(y,o=>n=o)(),n}function Mr(y,n,o){y.$$.on_destroy.push(jt(n,o))}function Gr(y,n,o,c){if(y){const r=$t(y,n,o,c);return y[0](r)}}function $t(y,n,o,c){return y[1]&&c?Rn(o.ctx.slice(),y[1](c(n))):o.ctx}function Fr(y,n,o,c){if(y[2]&&c){const r=y[2](c(o));if(n.dirty===void 0)return r;if(typeof r=="object"){const l=[],s=Math.max(n.dirty.length,r.length);for(let p=0;p<s;p+=1)l[p]=n.dirty[p]|r[p];return l}return n.dirty|r}return n.dirty}function Lr(y,n,o,c,r,l){if(r){const s=$t(n,o,c,l);y.p(s,r)}}function Hr(y){if(y.ctx.length>32){const n=[],o=y.ctx.length/32;for(let c=0;c<o;c++)n[c]=-1;return n}return-1}let $e=!1;function Gn(){$e=!0}function Fn(){$e=!1}function Ln(y,n,o,c){for(;y<n;){const r=y+(n-y>>1);o(r)<=c?y=r+1:n=r}return y}function Hn(y){if(y.hydrate_init)return;y.hydrate_init=!0;let n=y.childNodes;if(y.nodeName==="HEAD"){const d=[];for(let a=0;a<n.length;a++){const g=n[a];g.claim_order!==void 0&&d.push(g)}n=d}const o=new Int32Array(n.length+1),c=new Int32Array(n.length);o[0]=-1;let r=0;for(let d=0;d<n.length;d++){const a=n[d].claim_order,g=(r>0&&n[o[r]].claim_order<=a?r+1:Ln(1,r,t=>n[o[t]].claim_order,a))-1;c[d]=o[g]+1;const e=g+1;o[e]=d,r=Math.max(e,r)}const l=[],s=[];let p=n.length-1;for(let d=o[r]+1;d!=0;d=c[d-1]){for(l.push(n[d-1]);p>=d;p--)s.push(n[p]);p--}for(;p>=0;p--)s.push(n[p]);l.reverse(),s.sort((d,a)=>d.claim_order-a.claim_order);for(let d=0,a=0;d<s.length;d++){for(;a<l.length&&s[d].claim_order>=l[a].claim_order;)a++;const g=a<l.length?l[a]:null;y.insertBefore(s[d],g)}}function Un(y,n){if($e){for(Hn(y),(y.actual_end_child===void 0||y.actual_end_child!==null&&y.actual_end_child.parentElement!==y)&&(y.actual_end_child=y.firstChild);y.actual_end_child!==null&&y.actual_end_child.claim_order===void 0;)y.actual_end_child=y.actual_end_child.nextSibling;n!==y.actual_end_child?(n.claim_order!==void 0||n.parentNode!==y)&&y.insertBefore(n,y.actual_end_child):y.actual_end_child=n.nextSibling}else(n.parentNode!==y||n.nextSibling!==null)&&y.appendChild(n)}function Ur(y,n,o){$e&&!o?Un(y,n):(n.parentNode!==y||n.nextSibling!=o)&&y.insertBefore(n,o||null)}function Wn(y){y.parentNode.removeChild(y)}function Wr(y,n){for(let o=0;o<y.length;o+=1)y[o]&&y[o].d(n)}function Vn(y){return document.createElement(y)}function Jn(y){return document.createElementNS("http://www.w3.org/2000/svg",y)}function qe(y){return document.createTextNode(y)}function Vr(){return qe(" ")}function Jr(){return qe("")}function Yr(y,n,o,c){return y.addEventListener(n,o,c),()=>y.removeEventListener(n,o,c)}function Kr(y){return function(n){return n.preventDefault(),y.call(this,n)}}function Xr(y,n,o){o==null?y.removeAttribute(n):y.getAttribute(n)!==o&&y.setAttribute(n,o)}function Yn(y){return Array.from(y.childNodes)}function Kn(y){y.claim_info===void 0&&(y.claim_info={last_index:0,total_claimed:0})}function Nt(y,n,o,c,r=!1){Kn(y);const l=(()=>{for(let s=y.claim_info.last_index;s<y.length;s++){const p=y[s];if(n(p)){const d=o(p);return d===void 0?y.splice(s,1):y[s]=d,r||(y.claim_info.last_index=s),p}}for(let s=y.claim_info.last_index-1;s>=0;s--){const p=y[s];if(n(p)){const d=o(p);return d===void 0?y.splice(s,1):y[s]=d,r?d===void 0&&y.claim_info.last_index--:y.claim_info.last_index=s,p}}return c()})();return l.claim_order=y.claim_info.total_claimed,y.claim_info.total_claimed+=1,l}function Bt(y,n,o,c){return Nt(y,r=>r.nodeName===n,r=>{const l=[];for(let s=0;s<r.attributes.length;s++){const p=r.attributes[s];o[p.name]||l.push(p.name)}l.forEach(s=>r.removeAttribute(s))},()=>c(n))}function qr(y,n,o){return Bt(y,n,o,Vn)}function Qr(y,n,o){return Bt(y,n,o,Jn)}function Xn(y,n){return Nt(y,o=>o.nodeType===3,o=>{const c=""+n;if(o.data.startsWith(c)){if(o.data.length!==c.length)return o.splitText(c.length)}else o.data=c},()=>qe(n),!0)}function Zr(y){return Xn(y," ")}function zr(y,n){n=""+n,y.wholeText!==n&&(y.data=n)}function ei(y,n){y.value=n==null?"":n}function ti(y,n){for(let o=0;o<y.options.length;o+=1){const c=y.options[o];if(c.__value===n){c.selected=!0;return}}y.selectedIndex=-1}function ni(y,n,o){y.classList[o?"add":"remove"](n)}function ri(y,n=document.body){return Array.from(n.querySelectorAll(y))}let Ne;function Be(y){Ne=y}function Qe(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function ii(y){Qe().$$.on_mount.push(y)}function oi(y){Qe().$$.after_update.push(y)}function ai(y,n){Qe().$$.context.set(y,n)}function ui(y,n){const o=y.$$.callbacks[n.type];o&&o.slice().forEach(c=>c.call(this,n))}const Ee=[],Rt=[],Re=[],Ze=[],qn=Promise.resolve();let ze=!1;function Qn(){ze||(ze=!0,qn.then(Ct))}function et(y){Re.push(y)}function fi(y){Ze.push(y)}let tt=!1;const nt=new Set;function Ct(){if(!tt){tt=!0;do{for(let y=0;y<Ee.length;y+=1){const n=Ee[y];Be(n),Zn(n.$$)}for(Be(null),Ee.length=0;Rt.length;)Rt.pop()();for(let y=0;y<Re.length;y+=1){const n=Re[y];nt.has(n)||(nt.add(n),n())}Re.length=0}while(Ee.length);for(;Ze.length;)Ze.pop()();ze=!1,tt=!1,nt.clear()}}function Zn(y){if(y.fragment!==null){y.update(),ke(y.before_update);const n=y.dirty;y.dirty=[-1],y.fragment&&y.fragment.p(y.ctx,n),y.after_update.forEach(et)}}const Ce=new Set;let he;function si(){he={r:0,c:[],p:he}}function ci(){he.r||ke(he.c),he=he.p}function Pt(y,n){y&&y.i&&(Ce.delete(y),y.i(n))}function li(y,n,o,c){if(y&&y.o){if(Ce.has(y))return;Ce.add(y),he.c.push(()=>{Ce.delete(y),c&&(o&&y.d(1),c())}),y.o(n)}}const di=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function pi(y,n){y.d(1),n.delete(y.key)}function hi(y,n,o,c,r,l,s,p,d,a,g,e){let t=y.length,i=l.length,f=t;const u={};for(;f--;)u[y[f].key]=f;const _=[],w=new Map,v=new Map;for(f=i;f--;){const k=e(r,l,f),D=o(k);let j=s.get(D);j?c&&j.p(k,n):(j=a(D,k),j.c()),w.set(D,_[f]=j),D in u&&v.set(D,Math.abs(f-u[D]))}const h=new Set,m=new Set;function x(k){Pt(k,1),k.m(p,g),s.set(k.key,k),g=k.first,i--}for(;t&&i;){const k=_[i-1],D=y[t-1],j=k.key,B=D.key;k===D?(g=k.first,t--,i--):w.has(B)?!s.has(j)||h.has(j)?x(k):m.has(B)?t--:v.get(j)>v.get(B)?(m.add(j),x(k)):(h.add(B),t--):(d(D,s),t--)}for(;t--;){const k=y[t];w.has(k.key)||d(k,s)}for(;i;)x(_[i-1]);return _}function _i(y,n){const o={},c={},r={$$scope:1};let l=y.length;for(;l--;){const s=y[l],p=n[l];if(p){for(const d in s)d in p||(c[d]=1);for(const d in p)r[d]||(o[d]=p[d],r[d]=1);y[l]=p}else for(const d in s)r[d]=1}for(const s in c)s in o||(o[s]=void 0);return o}function vi(y){return typeof y=="object"&&y!==null?y:{}}function yi(y,n,o){const c=y.$$.props[n];c!==void 0&&(y.$$.bound[c]=o,o(y.$$.ctx[c]))}function mi(y){y&&y.c()}function gi(y,n){y&&y.l(n)}function zn(y,n,o,c){const{fragment:r,on_mount:l,on_destroy:s,after_update:p}=y.$$;r&&r.m(n,o),c||et(()=>{const d=l.map(Ot).filter(Cn);s?s.push(...d):ke(d),y.$$.on_mount=[]}),p.forEach(et)}function er(y,n){const o=y.$$;o.fragment!==null&&(ke(o.on_destroy),o.fragment&&o.fragment.d(n),o.on_destroy=o.fragment=null,o.ctx=[])}function tr(y,n){y.$$.dirty[0]===-1&&(Ee.push(y),Qn(),y.$$.dirty.fill(0)),y.$$.dirty[n/31|0]|=1<<n%31}function wi(y,n,o,c,r,l,s,p=[-1]){const d=Ne;Be(y);const a=y.$$={fragment:null,ctx:null,props:l,update:be,not_equal:r,bound:Dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:Dt(),dirty:p,skip_bound:!1,root:n.target||d.$$.root};s&&s(a.root);let g=!1;if(a.ctx=o?o(y,n.props||{},(e,t,...i)=>{const f=i.length?i[0]:t;return a.ctx&&r(a.ctx[e],a.ctx[e]=f)&&(!a.skip_bound&&a.bound[e]&&a.bound[e](f),g&&tr(y,e)),t}):[],a.update(),g=!0,ke(a.before_update),a.fragment=c?c(a.ctx):!1,n.target){if(n.hydrate){Gn();const e=Yn(n.target);a.fragment&&a.fragment.l(e),e.forEach(Wn)}else a.fragment&&a.fragment.c();n.intro&&Pt(y.$$.fragment),zn(y,n.target,n.anchor,n.customElement),Fn(),Ct()}Be(d)}class bi{$destroy(){er(this,1),this.$destroy=be}$on(n,o){const c=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return c.push(o),()=>{const r=c.indexOf(o);r!==-1&&c.splice(r,1)}}$set(n){this.$$set&&!Mn(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const xe=[];function xi(y,n=be){let o;const c=new Set;function r(p){if(Pn(y,p)&&(y=p,o)){const d=!xe.length;for(const a of c)a[1](),xe.push(a,y);if(d){for(let a=0;a<xe.length;a+=2)xe[a][0](xe[a+1]);xe.length=0}}}function l(p){r(p(y))}function s(p,d=be){const a=[p,d];return c.add(a),c.size===1&&(o=n(r)||be),p(y),()=>{c.delete(a),c.size===0&&(o(),o=null)}}return{set:r,update:l,subscribe:s}}const _e=Math.pow(2,31)-1|0;function nr(y,n){return y[0]=(n&4278190080)>>24,y[1]=(n&16711680)>>16,y[2]=(n&65280)>>8,y[3]=n&255,y}function rr(y){return y!=null&&typeof y.toJS=="function"?y.toJS():y}function ir(y){return y!=null&&typeof y.toJSON=="function"?y.toJSON():y}const rt={},Pe={};class Me{constructor(n,o){if(n!==rt)throw new TypeError("Options can only be created with the some or none functions");this._value=o}static some(n){return ie(n)}static none(){return oe()}static from(n){return n!=null?ie(n):oe()}static fromResult(n){return n.isOk()?ie(n.unwrap()):oe()}isNone(){return this._value===Pe}isSome(){return!this.isNone()}expect(n){if(this.isSome())return this._value;throw new Error(typeof n=="function"?n():n)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(n){return this.isSome()?this._value:n}unwrapOrElse(n){return this.isSome()?this._value:n()}map(n){return this.isSome()?ie(n(this._value)):oe()}mapOr(n,o){return this.isSome()?ie(n(this._value)):ie(o)}mapOrElse(n,o){return this.isSome()?ie(n(this._value)):ie(o())}flatMap(n){return this.isSome()?n(this._value):oe()}flatMapOr(n,o){return this.isSome()?n(this._value):o}flatMapOrElse(n,o){return this.isSome()?n(this._value):o()}and(n){return this.isSome()?n:oe()}andThen(n){return this.isSome()?n(this._value):oe()}or(n){return this.isNone()?n:this}orElse(n){return this.isNone()?n():this}xor(n){const o=this.isSome(),c=n.isSome();return o&&!c?this:!o&&c?n:oe()}filter(n){return this.isSome()&&n(this._value)?this:oe()}getOrInsert(n){return this.isNone()&&(this._value=n),this}getOrInsertWith(n){return this.isNone()&&(this._value=n()),this}take(){if(this.isSome()){const n=this._value;return this._value=Pe,ie(n)}else return oe()}from(n){return n!=null?this._value=n:this.clear(),this}replace(n){return this._value=n,this}clear(){return this._value=Pe,this}fromResult(n){return n.isOk()?ie(n.unwrap()):oe()}ifSome(n,o){return this.isSome()?n(this._value):o&&o(),this}ifNone(n,o){return this.isNone()?n():o&&o(this._value),this}fromJSON(n){return Me.from(n)}toJSON(){return this.map(ir).unwrapOr(null)}toJS(){return this.map(rr).unwrapOr(null)}}const ie=y=>new Me(rt,y),oe=()=>new Me(rt,Pe);class Q{constructor(n){this._index=0,this._iter=n}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const n=this._iter.next();return n.done?n:{value:[n.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(n){throw new Error("iter/ForEach was not imported!")}map(n){throw new Error("iter/Map was not imported!")}merge(n){throw new Error("iter/Merge was not imported!")}concat(n){return this.merge(n)}filter(n){throw new Error("iter/Filter was not imported!")}step(n){throw new Error("iter/Step was not imported!")}skip(n){throw new Error("iter/Skip was not imported!")}take(n){throw new Error("iter/Take was not imported!")}toMap(n,o){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,n=>n+1)}consume(){let n=this.next();for(;!n.done;)n=this.next();return this}toArray(){return this.reduce([],(n,o)=>(n.push(o),n))}join(n){return this.toArray().join(n)}indexOf(n){let o=this.next(),c=0;for(;!o.done;){if(o.value===n)return c;c++,o=this.next()}return-1}findIndex(n){let o=this.nextWithIndex();for(;!o.done;){const[c,r]=o.value;if(n(c,r))return r;o=this.nextWithIndex()}return-1}find(n){let o=this.nextWithIndex();for(;!o.done;){const[c,r]=o.value;if(n(c,r))return ie(c);o=this.nextWithIndex()}return oe()}findAll(n){return this.filter(n)}nth(n=0){let o=this.next();for(n<0&&(n=0);!o.done;){if(n--<=0)return ie(o.value);o=this.next()}return oe()}first(){return this.nth(0)}last(){let n=this.next();for(;!n.done;){const o=this.next();if(o.done)return ie(n.value);n=o}return oe()}any(n){return this.findIndex(n)!==-1}some(n){return this.any(n)}none(n){return this.findIndex(n)===-1}all(n){let o=this.nextWithIndex();for(;!o.done;){const[c,r]=o.value;if(!n(c,r))return!1;o=this.nextWithIndex()}return!0}unflatten(n){throw new Error("iter/Unflatten was not imported!")}reduce(n,o){let c=this.next();for(;!c.done;){const r=c.value;n=o(n,r,this._index-1),c=this.next()}return n}reverse(){return Ge(this.toArray().reverse())}}function Ge(y){return y!=null?typeof y[Symbol.iterator]=="function"?new Q(y[Symbol.iterator]()):typeof y.next=="function"?y instanceof Q?y:new Q(y):Ge(typeof y=="object"?Object.entries(y):[y]):Ge([])}class or extends Q{constructor(n){super(n)}next(){const n=super.nextWithIndex();return n.done?n:{value:ar(n.value)}}}Q.prototype.enumerate=function(){return new or(this)};function ar(y){const n=y[0],o=y;return o[0]=y[1],o[1]=n,o}class ur extends Q{constructor(n,o){super(n);this._fn=o}next(){let n=super.nextWithIndex();for(;!n.done;){const[o,c]=n.value;if(this._fn(o,c))return{done:!1,value:o};n=super.nextWithIndex()}return{done:!0,value:void 0}}}Q.prototype.filter=function(n){return new ur(this,n)};class fr extends Q{constructor(n,o){super(n);this._fn=([c,r])=>(o(c,r),c)}next(){const n=super.nextWithIndex();return n.done?n:{done:!1,value:this._fn(n.value)}}}Q.prototype.forEach=function(n){return new fr(this,n)};class sr extends Q{constructor(n,o){super(n);this._fn=([c,r])=>o(c,r)}next(){const n=super.nextWithIndex();return n.done?n:{done:!1,value:this._fn(n.value)}}}Q.prototype.map=function(n){return new sr(this,n)};class cr extends Q{constructor(n,o){super(n);this._other=o}next(){const n=super.next();return n.done?this._other.next():n}}Q.prototype.merge=function(n){return new cr(this,n)};class lr extends Q{constructor(){super(...arguments);this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?ie(this.peeked.shift()):oe()}peek(n=0){if(n<this.peeked.length)return ie(this.peeked[n]);{let o=this.peeked.length-n-1,c=super.next();for(;!c.done&&(this.peeked.push(c.value),!(--o<=0));)c=super.next();return c.done?oe():ie(c.value)}}next(){const n=this.unpeek();if(n.isSome())return{done:!1,value:n.unwrap()};const o=super.next();return o.done?o:{done:!1,value:o.value}}}Q.prototype.peekable=function(){return new lr(this)};class dr extends Q{constructor(n,o){super(n);this._skipped=0,this._skip=(o<=0?0:o)|0}next(){let n=super.next();for(;!n.done;)if(this._skipped<=this._skip)this._skipped+=1,n=super.next();else return n;return{done:!0,value:void 0}}}Q.prototype.skip=function y(y){return new dr(this,y)};class pr extends Q{constructor(n,o){super(n);this._stepped=0,this._step=o<=0?1:o|0}next(){let n=super.next();for(;!n.done;)if(this._stepped<this._step)this._stepped+=1,n=super.next();else return this._stepped=0,n;return{done:!0,value:void 0}}}Q.prototype.step=function y(y){return new pr(this,y)};class hr extends Q{constructor(n,o){super(n);this._taken=0,this._count=(o<=0?0:o)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}Q.prototype.take=function(n){return new hr(this,n)};const _r=y=>y,vr=y=>y;class yr extends Q{constructor(n,o=_r,c=vr){super(n);this._map=([r,l])=>[o(r,l),c(r,l)]}toObject(){return this.reduce({},(n,o)=>(n[o[0]]=o[1],n))}next(){const n=super.nextWithIndex();return n.done?n:{done:!1,value:this._map(n.value)}}}Q.prototype.toMap=function(n,o){return new yr(this,n,o)};class mr extends Q{constructor(n,o){super(n);this._fn=o}next(){return this._fn(this._iter)}}Q.prototype.unflatten=function(n){return new mr(this,n)};var Ae;(function(y){y[y.Forward=0]="Forward",y[y.Backward=1]="Backward"})(Ae||(Ae={}));class it{constructor(n,o,c=1){this.start=n,this.end=o,this.step=Math.abs(c),this.direction=n>o?Ae.Backward:Ae.Forward}static from(n,o,c=1){return new it(n,o,c)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(n){return this.start<=n&&n<=this.end}isEmpty(){return this.direction===Ae.Forward?this.start>this.end:this.start<this.end}iter(){return new Q(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const n=this.start;return this.direction===Ae.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:n}}}}const Ai=it.from;class gr extends Q{constructor(n){super(n);this.rng=n}iter(){return new Q(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class wr extends Q{constructor(n,o=0,c=1){super(n);this.rng=n,this.min=o,this.max=c}iter(){return new Q(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class br extends Q{constructor(n,o=0,c=_e){super(n);this.rng=n,this.min=o|0,this.max=c|0}iter(){return new Q(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const xr=new Uint8Array(4);class ot{nextFloat(){return this.nextInt()/_e}nextFloatInRange(n=0,o=1){return n+this.nextFloat()*(o-n)}nextIntInRange(n=0,o=_e){return Math.round(this.nextFloatInRange(n,o))}shuffle(n){const o=n.length;for(let c=0;c<o;c++){const r=c+this.nextIntInRange(0,o-c-1),l=n[c];n[c]=n[r],n[r]=l}return n}fromArray(n){return n.length?ie(n[this.nextIntInRange(0,n.length-1)]):oe()}keyFromObject(n){return this.fromArray(Object.keys(n))}valueFromObject(n){return this.fromArray(Object.values(n))}fillBytes(n){const o=xr;for(let c=0,r=n.length;c<r;c++){const l=c%4;l===0&&nr(o,this.nextInt()),n[c]=o[l]}return n}[Symbol.iterator](){return this}iter(){return new Q(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new gr(this)}uniformFloat(n=0,o=1){return new wr(this,n,o)}uniformInt(n=0,o=_e){return new br(this,n,o)}}class Ar extends ot{nextInt(){return Math.random()*_e|0}nextFloat(){return Math.random()}}class Mt extends ot{constructor(n=423257940){super();this.seed=n}setSeed(n=423257940){return this.seed=n,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%_e,this.seed&_e}}const Sr=new Mt;class at extends ot{constructor(n,o,c,r){super();this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(n,o,c,r)}static fromSeed(n){return new at().setSeed(n)}setSeed(n){const o=Sr.setSeed(n);return this.set(o.nextInt(),o.nextInt(),o.nextInt(),o.nextInt())}set(n=423257940,o=2829571177,c=2541948421,r=289122235){return this.x=n|0,this.y=o|0,this.z=c|0,this.w=r|0,this}nextInt(){const n=this.x,o=n^n<<11;this.x=this.y,this.y=this.z,this.z=this.w;const c=this.w;return this.w=c^c>>19^(o^o>>8),this.w}}new Mt;new at;const Tr=new Ar;let kr=Tr;function Si(){return kr.nextFloat()}var ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ve(y){throw new Error('Could not dynamically require "'+y+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Gt={exports:{}};(function(y){(function(){function n(c,r){return r?ve(c):c.slice?n[l(c)]:function(s,p){c(s={exports:{}}),n[l(p)]=s.exports};function l(s){return s.split("/").slice(-1).toString().replace(".js","")}}var o=y;n(function(c){String.random=function(l,s){var p="";for(l=l||24,s=s||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";l-- >0;)p+=s.charAt(Math.floor(Math.random()*s.length));return p},String.match=function(l,s){var p,d;return typeof l!="string"?!1:(typeof s=="string"&&(s={"=":s}),s=s||{},p=s["="]||s["*"]||s[">"]||s["<"],l===p?!0:d!==s["="]?!1:(p=s["*"]||s[">"],l.slice(0,(p||"").length)===p?!0:d!==s["*"]?!1:d!==s[">"]&&d!==s["<"]?l>=s[">"]&&l<=s["<"]:d!==s[">"]&&l>=s[">"]||d!==s["<"]&&l<=s["<"]))},String.hash=function(l,s){if(typeof l=="string"){if(s=s||0,!l.length)return s;for(var p=0,d=l.length,a;p<d;++p)a=l.charCodeAt(p),s=(s<<5)-s+a,s|=0;return s}};var r=Object.prototype.hasOwnProperty;Object.plain=function(l){return l?l instanceof Object&&l.constructor===Object||Object.prototype.toString.call(l).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(l,s){for(var p in l)if(r.call(l,p)&&(!s||s.indexOf(p)==-1))return!1;return!0},Object.keys=Object.keys||function(l){var s=[];for(var p in l)r.call(l,p)&&s.push(p);return s},function(){var l,s=setTimeout,p=0,d=0,a=typeof setImmediate!=""+l&&setImmediate||s;s.poll=s.poll||function(g){if(1>=+new Date-p&&d++<3333){g();return}a(function(){p=+new Date,g()},d=0)}}(),function(){var l=setTimeout,s=l.turn=l.turn||function(t){p.push(t)==1&&d(e)},p=s.s=[],d=l.poll,a=0,g,e=function(){(g=p[a++])&&g(),(a==p.length||a==99)&&(p=s.s=p.slice(a),a=0),p.length&&d(e)}}(),function(){var l,s=setTimeout,p=s.turn;(s.each=s.each||function(d,a,g,e){e=e||9,function t(i,f,u){if(f=(i=(d||[]).splice(0,e)).length){for(var _=0;_<f&&l===(u=a(i[_]));_++);if(l===u){p(t);return}}g&&g(u)}()})()}()})(n,"./shim"),n(function(c){c.exports=function r(l,s,p){if(!l)return{to:r};var d,a=typeof s=="function",l=(this.tag||(this.tag={}))[l]||a&&(this.tag[l]={tag:l,to:r._={next:function(e){var t;(t=this.to)&&t.next(e)}}});if(a){var g={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:s,the:l,on:this,as:p};return(g.back=l.last||l).to=g,l.last=g}return(l=l.to)&&d!==s&&l.next(s),l}})(n,"./onto"),n(function(c){n("./shim"),c.exports=function(r){return r===void 0?!1:r===null?!0:r===1/0||r!==r?!1:typeof r=="string"||typeof r=="boolean"||typeof r=="number"?!0:r&&typeof(r["#"]||0)=="string"&&Object.empty(r,["#"])?r["#"]:!1}})(n,"./valid"),n(function(c){n("./shim");function r(){var g=+new Date;return d<g?(s=0,d=g+r.drift):d=g+(s+=1)/p+r.drift}r.drift=0;var l=-1/0,s=0,p=999,d=l,a;r.is=function(g,e,t){var i=e&&g&&g._&&g._[">"]||t;if(!!i)return typeof(i=i[e])=="number"?i:l},r.ify=function(g,e,t,i,f){(g=g||{})._=g._||{},f&&(g._["#"]=f);var u=g._[">"]||(g._[">"]={});return a!==e&&e!=="_"&&(typeof t=="number"&&(u[e]=t),a!==i&&(g[e]=i)),g},c.exports=r})(n,"./state"),n(function(c){n("./shim");function r(l){var s={s:{}},p=s.s;l=l||{max:999,age:1e3*9},s.check=function(a){return p[a]?d(a):!1};var d=s.track=function(a){var g=p[a]||(p[a]={});return g.was=s.now=+new Date,s.to||(s.to=setTimeout(s.drop,l.age+9)),g};return s.drop=function(a){s.to=null,s.now=+new Date;var g=Object.keys(p);console.STAT&&console.STAT(s.now,+new Date-s.now,"dup drop keys"),setTimeout.each(g,function(e){var t=p[e];t&&(a||l.age)>s.now-t.was||delete p[e]},0,99)},s}c.exports=r})(n,"./dup"),n(function(c){n("./onto"),c.exports=function(s,p){if(!!this.on){var d=(this.opt||{}).lack||9e3;if(typeof s!="function"){if(!s)return;var g=s["#"]||s,a=(this.tag||"")[g];return a?(p&&(a=this.on(g,p),clearTimeout(a.err),a.err=setTimeout(function(){a.off()},d)),!0):void 0}var g=p&&p["#"]||r(9);if(!s)return g;var e=this.on(g,s,p);return e.err=e.err||setTimeout(function(){e.off(),e.next({err:"Error: No ACK yet.",lack:!0})},d),g}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(n,"./ask"),n(function(c){function r(f){return f instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:f}):new r(f)}r.is=function(f){return f instanceof r||f&&f._&&f===f._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},n("./shim"),r.valid=n("./valid"),r.state=n("./state"),r.on=n("./onto"),r.dup=n("./dup"),r.ask=n("./ask"),function(){r.create=function(E){E.root=E.root||E,E.graph=E.graph||{},E.on=E.on||r.on,E.ask=E.ask||r.ask,E.dup=E.dup||r.dup();var P=E.$.opt(E.opt);return E.once||(E.on("in",f,E),E.on("out",f,E),E.on("put",w,E),r.on("create",E),E.on("create",E)),E.once=1,P};function f(E){if(!!E){if(E.out===f){this.to.next(E);return}var P=this,S=P.as,T=S.at||S,I=T.$,C=T.dup,L,M=E.DBG;if((L=E["#"])||(L=E["#"]=s(9)),!C.check(L)){if(C.track(L),L=E._,E._=typeof L=="function"?L:function(){},E.$&&E.$===(E.$._||"").$||(E.$=I),E["@"]&&!E.put&&h(E),!T.ask(E["@"],E))if(M&&(M.u=+new Date),E.put){u(E);return}else E.get&&r.on.get(E,I);M&&(M.uc=+new Date),P.to.next(E),M&&(M.ua=+new Date),!(E.nts||E.NTS)&&(E.out=f,T.on("out",E),M&&(M.ue=+new Date))}}}function u(E){if(!!E){var P=E._||"",S=P.root=((P.$=E.$||"")._||"").root;if(E["@"]&&P.faith&&!P.miss){E.out=f,S.on("out",E);return}P.latch=S.hatch,P.match=S.hatch=[];var T=E.put,I=P.DBG=E.DBG,C=+new Date;if(!(T["#"]&&T["."])){I&&(I.p=C),P["#"]=E["#"],P.msg=E,P.all=0,P.stun=1;var L=Object.keys(T);console.STAT&&console.STAT(C,((I||P).pk=+new Date)-C,"put sort");var M=0,G,J,Y,K,Z,te,fe;(function ue(ye){if(G!=M){if(G=M,!(Y=L[M])){console.STAT&&console.STAT(C,((I||P).pd=+new Date)-C,"put"),v(P);return}(K=T[Y])?(fe=K._)?Y!==fe["#"]?te=x+k(Y)+"soul not same.":(Z=fe[">"])||(te=x+k(Y)+"no state."):te=x+k(Y)+"no meta.":te=x+k(Y)+"no node.",J=Object.keys(K||{})}if(te){E.err=P.err=te,v(P);return}var Ie=0,le;for(ye=ye||0;ye++<9&&(le=J[Ie++]);)if(le!=="_"){var me=K[le],Oe=Z[le];if(e===Oe){te=x+k(le)+"on"+k(Y)+"no state.";break}if(!d(me)){te=x+k(le)+"on"+k(Y)+"bad "+typeof me+k(me);break}_(me,le,Y,Oe,E)}if((J=J.slice(Ie)).length){p(ue);return}++M,J=null,ue(ye)})()}}}r.on.put=u;function _(E,P,S,T,I){var C=I._||"",L=C.root,M=L.graph,G,J=M[S]||t,Y=a(J,P,1),K=J[P],Z=C.DBG;(G=console.STAT)&&(!M[S]||!K)&&(G.has=(G.has||0)+1);var te=B();if(T>te){setTimeout(function(){_(E,P,S,T,I)},(G=T-te)>j?j:G),console.STAT&&console.STAT((Z||C).Hf=+new Date,G,"future");return}if(!(T<Y&&!C.miss)&&!(!C.faith&&T===Y&&(E===K||D(E)<=D(K))&&!C.miss)){C.stun++;var fe=I["#"]+C.all++,ue={toString:function(){return fe},_:C};ue.toJSON=ue.toString,Z&&(Z.ph=Z.ph||+new Date),L.on("put",{"#":ue,"@":I["@"],put:{"#":S,".":P,":":E,">":T},_:C})}}function w(E){var P;(P=(E._||"").DBG)&&(P.pa=+new Date,P.pm=P.pm||+new Date);var S=this,T=S.as,I=T.graph,C=E._,L=E.put,M=L["#"],G=L["."],J=L[":"],Y=L[">"];E["#"];var K;(K=C.msg)&&(K=K.put)&&(K=K[M])&&g(K,G,Y,J,M),I[M]=g(I[M],G,Y,J,M),(K=(T.next||"")[M])&&K.on("in",E),v(C),S.to.next(E)}function v(E,P){var S;if(!E.stop&&!(!E.err&&0<--E.stun)&&(E.stop=1,!!(S=E.root))){var T=E.match;T.end=1,T===S.hatch&&(!(T=E.latch)||T.end?delete S.hatch:S.hatch=T),E.hatch&&E.hatch(),setTimeout.each(E.match,function(I){I&&I()}),!(!(P=E.msg)||E.err||P.err)&&(P.out=f,E.root.on("out",P))}}function h(E){var P=E["@"]||"",S;!(S=P._)||(S.acks=(S.acks||0)+1,(S.err=E.err)&&(E["@"]=S["#"],v(S)),!S.stop&&!S.crack&&(S.crack=S.match&&S.match.push(function(){m(S)})),m(S))}function m(E){!E||!E.root||E.stun||E.acks!==E.all||E.root.on("in",{"@":E["#"],err:E.err,ok:E.err?e:{"":1}})}var x="Error: Invalid graph!",k=function(E){return" '"+(""+E).slice(0,9)+"...' "},D=JSON.stringify,j=2147483647,B=r.state}(),function(){r.on.get=function(u,_){var w=_._,v=u.get,h=v["#"],m=w.graph[h],x=v["."],k=w.next||(w.next={});k[h];var D=u._||{},j=D.DBG=u.DBG;if(j&&(j.g=+new Date),!m)return w.on("get",u);if(x){if(typeof x!="string"||e===m[x])return w.on("get",u);m=g({},x,a(m,x),m[x],h)}m&&f(u,m),w.on("get",u)};function f(u,_){var w=+new Date,v=u._||{},h=v.DBG=u.DBG,m=u["#"],x=s(9),k=Object.keys(_||"").sort(),D=((_||"")._||"")["#"];k.length;var j=u.$._.root,B=_===j.graph[D];console.STAT&&console.STAT(w,((h||v).gk=+new Date)-w,"got keys"),_&&function E(){w=+new Date;for(var P=0,S,T={},I;P<9&&(S=k[P++]);)g(T,S,a(_,S),_[S],D);k=k.slice(P),(I={})[D]=T,T=I;var C;B&&(C=function(){},C.ram=C.faith=!0),I=k.length,console.STAT&&console.STAT(w,-(w-(w=+new Date)),"got copied some"),h&&(h.ga=+new Date),j.on("in",{"@":m,"#":x,put:T,"%":I?x=s(9):e,$:j.$,_:C,DBG:h}),console.STAT&&console.STAT(w,+new Date-w,"got in"),!!I&&setTimeout.turn(E)}(),_||j.on("in",{"@":u["#"]})}r.on.get.ack=f}(),function(){r.chain.opt=function(f){f=f||{};var u=this,_=u._,w=f.peers||f;return Object.plain(f)||(f={}),Object.plain(_.opt)||(_.opt=f),typeof w=="string"&&(w=[w]),w instanceof Array&&(Object.plain(_.opt.peers)||(_.opt.peers={}),w.forEach(function(v){var h={};h.id=h.url=v,_.opt.peers[v]=_.opt.peers[v]||h})),_.opt.peers=_.opt.peers||{},l(f,function v(h){var m=this[h];if(this&&this.hasOwnProperty(h)||typeof m=="string"||Object.empty(m)){this[h]=m;return}m&&m.constructor!==Object&&!(m instanceof Array)||l(m,v)}),r.on("opt",_),_.opt.uuid=_.opt.uuid||function(h){return r.state().toString(36).replace(".","")+String.random(h||12)},u}}();var l=function(f,u){Object.keys(f).forEach(u,f)},s=String.random,p=setTimeout.turn,d=r.valid,a=r.state.is,g=r.state.ify,e,t={},i;r.log=function(){return!r.log.off&&i.log.apply(i,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(f,u,_){return(_=r.log.once)[f]=_[f]||0,_[f]++||r.log(u)},typeof window!="undefined"&&((window.GUN=window.Gun=r).window=window);try{typeof o!="undefined"&&(o.exports=r)}catch{}c.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(i=console).only=function(f,u){return i.only.i&&f===i.only.i&&i.only.i++&&(i.log.apply(i,arguments)||u)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(n,"./root"),n(function(c){var r=n("./root");r.chain.back=function(p,d){var a;if(p=p||1,p===-1||p===1/0)return this._.root.$;if(p===1)return(this._.back||this._).$;var g=this,e=g._;if(typeof p=="string"&&(p=p.split(".")),p instanceof Array){var t=0,i=p.length,a=e;for(t;t<i;t++)a=(a||l)[p[t]];return s!==a?d?g:a:(a=e.back)?a.$.back(p,d):void 0}if(typeof p=="function"){for(var f,a={back:e};(a=a.back)&&s===(f=p(a,d)););return f}return typeof p=="number"?(e.back||e).$.back(p-1):this};var l={},s})(n,"./back"),n(function(c){var r=n("./root");r.chain.chain=function(v){var h=this,m=h._,x=new(v||h).constructor(h),k=x._,D;return k.root=D=m.root,k.id=++D.once,k.back=h._,k.on=r.on,k.on("in",r.on.in,k),k.on("out",r.on.out,k),x};function l(v){var h,m=this.as,x=m.back,k=m.root,D;if(v.$||(v.$=m.$),this.to.next(v),m.err){m.on("in",{put:m.put=e,$:m.$});return}if(h=v.get){if(k.pass&&(k.pass[m.id]=m),m.lex&&Object.keys(m.lex).forEach(function(j){D[j]=m.lex[j]},D=v.get=v.get||{}),h["#"]||m.soul){if(h["#"]=h["#"]||m.soul,v["#"]||(v["#"]=t(9)),x=k.$.get(h["#"])._,h=h["."]){if(f(x.put,h)&&(D=x.ask&&x.ask[h],(x.ask||(x.ask={}))[h]=x.$.get(h)._,x.on("in",{get:h,put:{"#":x.soul,".":h,":":x.put[h],">":_(k.graph[x.soul],h)}}),D))return}else{if(D=x.ask&&x.ask[""],(x.ask||(x.ask={}))[""]=x,e!==x.put&&(x.on("in",x),D))return;v.$=x.$}return k.ask(a,v),k.on("in",v)}if(h["."])return m.get?(v={get:{".":m.get},$:m.$},(x.ask||(x.ask={}))[m.get]=v.$._,x.on("out",v)):(v={get:m.lex?v.get:{},$:m.$},x.on("out",v));if((m.ask||(m.ask={}))[""]=m,m.get)return h["."]=m.get,(x.ask||(x.ask={}))[m.get]=v.$._,x.on("out",v)}return x.on("out",v)}r.on.out=l;function s(v,h){h=h||this.as;var m=h.root,x=v.$||(v.$=h.$),k=(x||"")._||g,D=v.put||"",j=D["#"],B=D["."],E=e!==D["="]?D["="]:D[":"],P=D[">"]||-1/0,S;if(e!==v.put&&(e===D["#"]||e===D["."]||e===D[":"]&&e===D["="]||e===D[">"])){if(!i(D)){if(!(j=((D||"")._||"")["#"])){console.log("chain not yet supported for",D,"...",v,h);return}return x=h.root.$.get(j),setTimeout.each(Object.keys(D).sort(),function(T){T=="_"||e===(P=_(D,T))||h.on("in",{$:x,put:{"#":j,".":T,"=":D[T],">":P},VIA:v})})}h.on("in",{$:k.back.$,put:{"#":j=k.back.soul,".":B=k.has||k.get,"=":D,">":_(k.back.put,B)},via:v});return}(v.seen||"")[h.id]||((v.seen||(v.seen=function(){}))[h.id]=h,h!==k&&(Object.keys(v).forEach(function(T){D[T]=v[T]},D={}),D.get=h.get||D.get,!h.soul&&!h.has?D.$$$=D.$$$||h.$:k.soul&&(D.$=h.$,D.$$=D.$$||k.$),v=D),d(v,h),(h.soul||v.$$)&&P>=_(m.graph[j],B)&&((D=m.$.get(j)._).put=w(D.put,B,P,E,j)),!k.soul&&P>=_(m.graph[j],B)&&(S=(m.$.get(j)._.next||"")[B])&&(S.put=E,typeof(D=i(E))=="string"&&(S.put=m.$.get(D)._.put||E)),this.to&&this.to.next(v),h.any&&setTimeout.each(Object.keys(h.any),function(T){(T=h.any[T])&&T(v)},0,99),h.echo&&setTimeout.each(Object.keys(h.echo),function(T){(T=h.echo[T])&&T.on("in",v)},0,99),((v.$$||"")._||k).soul&&(S=h.next)&&(S=S[B])&&(D={},Object.keys(v).forEach(function(T){D[T]=v[T]}),D.$=(v.$$||v.$).get(D.get=B),delete D.$$,delete D.$$$,S.on("in",D)),p(v,h))}r.on.in=s;function p(v,h){if(h=h||this.as||v.$._,!(v.$$&&this!==r.on)&&!(!v.put||h.soul)){var m=v.put||"",x=m["="]||m[":"],k,D=h.root,j=D.$.get(m["#"]).get(m["."])._;if(typeof(x=i(x))!="string"){this===r.on&&((j.echo||(j.echo={}))[h.id]=h);return}if(!((j.echo||(j.echo={}))[h.id]&&!(D.pass||"")[h.id])){if(k=D.pass){if(k[x+h.id])return;k[x+h.id]=1}(j.echo||(j.echo={}))[h.id]=h,h.has&&(h.link=x);var B=D.$.get(j.link=x)._;(B.echo||(B.echo={}))[j.id]=j;var k=h.ask||"";(k[""]||h.lex)&&B.on("out",{get:{"#":x}}),setTimeout.each(Object.keys(k),function(E,P){!E||!(P=k[E])||P.on("out",{get:{"#":x,".":E}})},0,99)}}}r.on.link=p;function d(v,h){var m=v.put||"",x=e!==m["="]?m["="]:m[":"],k=h.root,D,j;if(e===x){if(h.soul&&e!==h.put||(j=(v.$$||v.$||"")._||"",v["@"]&&(e!==j.put||e!==h.put)))return;(D=h.link||v.linked)&&delete(k.$.get(D)._.echo||"")[h.id],h.has&&(h.link=null),h.put=e,setTimeout.each(Object.keys(h.next||""),function(B,E){!(E=h.next[B])||(D&&delete(k.$.get(D).get(B)._.echo||"")[E.id],E.on("in",{get:B,put:e,$:E.$}))},0,99);return}h.soul||v.$$||(D=i(x),j=v.$._||"",!((D===j.link||h.has&&!j.link)&&!((k.pass||"")[h.id]&&typeof D!="string"))&&(delete(j.echo||"")[h.id],d({get:h.get,put:e,$:v.$,linked:v.linked=v.linked||j.link},h)))}r.on.unlink=d;function a(v,h){var m=this.as,x=m.$._;x.root;var k=m.get||"",D=(v.put||"")[k["#"]]||"";if(!v.put||typeof k["."]=="string"&&e===D[k["."]]){if(e!==x.put||!x.soul&&!x.has)return;x.ack=(x.ack||0)+1,x.on("in",{get:x.get,put:x.put=e,$:x.$,"@":v["@"]});return}(v._||{}).miss=1,r.on.put(v)}var g={},e,t=String.random,i=r.valid,f=function(v,h){return v&&Object.prototype.hasOwnProperty.call(v,h)},u=r.state,_=u.is,w=u.ify})(n,"./chain"),n(function(c){var r=n("./root");r.chain.get=function(e,t,i){var f,u;if(typeof e=="string"){if(e.length==0)return(f=this.chain())._.err={err:r.log("0 length key!",e)},t&&t.call(f,f._.err),f;var _=this,w=_._,v=w.next||d;(f=v[e])||(f=e&&l(e,_)),f=f&&f.$}else if(typeof e=="function"){let j=function(B,E,P){if(!j.stun&&!((M=m.pass)&&!M[x])){var S=B.$._,T=(B.$$||"")._,I=(T||S).put,C=!S.has&&!S.soul,L={},M;if((C||g===I)&&(I=g===((M=B.put)||"")["="]?g===(M||"")[":"]?M:M[":"]:M["="]),typeof(M=r.valid(I))=="string"&&(I=g===(M=m.$.get(M)._.put)?h.not?g:I:M),!(h.not&&g===I)){if(g===h.stun){if((M=m.stun)&&M.on&&(w.$.back(function(G){if(M.on(""+G.id,L={}),(L.run||0)<j.id)return L}),!L.run&&M.on(""+S.id,L={}),!L.run&&T&&M.on(""+T.id,L={}),j.id>L.run&&((!L.stun||L.stun.end)&&(L.stun=M.on("stun"),L.stun=L.stun&&L.stun.last),L.stun&&!L.stun.end))){(L.stun.add||(L.stun.add={}))[x]=function(){j(B,E,1)};return}if(g===I&&(P=0),(M=m.hatch)&&!M.end&&g===h.hatch&&!P){if(k[S.$._.id])return;k[S.$._.id]=1,M.push(function(){j(B,E,1)});return}k={}}if(m.pass){if(m.pass[x+S.id])return;m.pass[x+S.id]=1}if(h.on){h.ok.call(S.$,I,S.get,B,E||j);return}if(h.v2020){h.ok(B,E||j);return}Object.keys(B).forEach(function(G){M[G]=B[G]},M={}),B=M,B.put=I,h.ok.call(h.as,B,E||j)}}};if(t===!0)return s(this,e,t,i),this;f=this;var w=f._,h=t||{},m=w.root,x;h.at=w,h.ok=e;var k={};return j.at=w,(w.any||(w.any={}))[x=String.random(7)]=j,j.off=function(){j.stun=1,!!w.any&&delete w.any[x]},j.rid=p,j.id=h.run||++m.once,u=m.pass,(m.pass={})[x]=1,h.out=h.out||{get:{}},w.on("out",h.out),m.pass=u,f}else{if(typeof e=="number")return this.get(""+e,t,i);if(typeof(u=a(e))=="string")return this.get(u,t,i);(u=this.get.next)&&(f=u(this,e))}return f?(t&&typeof t=="function"&&f.get(t,i),f):((f=this.chain())._.err={err:r.log("Invalid get request!",e)},t&&t.call(f,f._.err),f)};function l(e,t){var i=t._,f=i.next,u=t.chain(),_=u._;return f||(f=i.next={}),f[_.get=e]=_,t===i.root.$?_.soul=e:(i.soul||i.has)&&(_.has=e),_}function s(e,t,i,f){var u=e._,_=0,w;return(w=u.soul||u.link)?t(w,f,u):u.jam?u.jam.push([t,f]):(u.jam=[[t,f]],e.get(function(h,m){if(!(g===h.put&&!u.root.opt.super&&(w=Object.keys(u.root.opt.peers).length)&&++_<=w)){m.rid(h);var x=(x=h.$)&&x._||{},k=0,D;for(w=u.jam,delete u.jam;D=w[k++];){var j=D[0];D=D[1],j&&j(x.link||x.soul||r.valid(h.put)||((h.put||{})._||{})["#"],D,h,m)}}},{out:{get:{".":!0}}}),e)}function p(e){var t=this.at||this.on;if(!e||t.soul||t.has)return this.off();if(!!(e=(e=(e=e.$||e)._||e).id)){t.map;var i;if((i=this.seen||(this.seen={}))[e])return!0;i[e]=!0}}var d={},a=r.valid,g})(n,"./get"),n(function(c){var r=n("./root");r.chain.put=function(i,f,u){var _=this,w=_._,v=w.root;u=u||{},u.root=w.root,u.run||(u.run=v.once),l(u,w.id),u.ack=u.ack||f,u.via=u.via||_,u.data=u.data||i,u.soul||(u.soul=w.soul||typeof f=="string"&&f);var h=u.state=u.state||r.state();return typeof i=="function"?(i(function(m){u.data=m,_.put(d,d,u)}),_):u.soul?(u.$=v.$.get(u.soul),u.todo=[{it:u.data,ref:u.$}],u.turn=u.turn||g,u.ran=u.ran||s,function m(){var x=u.todo,k=x.pop(),D=k.it;k.ref&&k.ref._.id;var j,B,E,P,S;if(l(u,k.ref),(P=k.todo)&&(B=P.pop(),D=D[B],P.length&&x.push(k)),B&&(x.path||(x.path=[])).push(B),!(j=e(D))&&!(S=r.is(D))){if(!Object.plain(D)){(u.ack||a).call(u,u.out={err:u.err=r.log("Invalid data: "+(D&&(P=D.constructor)&&P.name||typeof D)+" at "+(u.via.back(function(L){L.get&&P.push(L.get)},P=[])||P.join("."))+"."+(x.path||[]).join("."))}),u.ran(u);return}for(var T=u.seen||(u.seen=[]),I=T.length;I--;)if(D===(P=T[I]).it){j=D=P.link;break}}if(B&&j)k.node=t(k.node,B,h,D);else{let L=function(M,G){var J=E.link["#"];G&&(G.off(),G.rid(M));var Y=J||M.soul||(P=(M.$$||M.$)._||"").soul||P.link||((P=P.put||"")._||"")["#"]||P["#"]||((P=M.put||"")&&M.$$?P["#"]:(P["="]||P[":"]||"")["#"]);if(!J&&l(u,M.$),!Y&&!k.link["#"]){(k.wait||(k.wait=[])).push(function(){L(M,G)});return}Y||(Y=[],(M.$$||M.$).back(function(K){if(P=K.soul||K.link)return Y.push(P);Y.push(K.get)}),Y=Y.reverse().join("/")),E.link["#"]=Y,!S&&(((u.graph||(u.graph={}))[Y]=E.node||(E.node={_:{}}))._["#"]=Y),delete u.wait[C],E.wait&&setTimeout.each(E.wait,function(K){K&&K()}),u.ran(u)};u.seen.push(E={it:D,link:{},todo:S?[]:Object.keys(D).sort().reverse(),path:(x.path||[]).slice(),up:k}),k.node=t(k.node,B,h,E.link),!S&&E.todo.length&&x.push(E);var C=u.seen.length;(u.wait||(u.wait={}))[C]="",P=(E.ref=S?D:B?k.ref.get(B):k.ref)._,(P=D&&(D._||"")["#"]||P.soul||P.link)?L({soul:P}):E.ref.get(L,{run:u.run,v2020:1,out:{get:{".":" "}}})}if(!x.length)return u.ran(u);u.turn(m)}(),_):(p(u),_)};function l(i,f){if(!!f){f=(f._||"").id||f;var u=i.root.stun||(i.root.stun={on:r.on}),_={},w;i.stun||(i.stun=u.on("stun",function(){})),(w=u.on(""+f))&&w.the.last.next(_),!(_.run>=i.run)&&u.on(""+f,function(v){if(i.stun.end){this.off(),this.to.next(v);return}v.run=v.run||i.run,v.stun=v.stun||i.stun})}}function s(i){if(i.err){s.end(i.stun,i.root);return}if(!(i.todo.length||i.end||!Object.empty(i.wait))){i.end=1;var f=i.$.back(-1)._,u=f.root,_=f.ask(function(m){u.on("ack",m),m.err&&r.log(m),++w>(i.acks||0)&&this.off(),!!i.ack&&i.ack(m,this)},i.opt),w=0,v=i.stun,h;(h=function(){!v||(s.end(v,u),setTimeout.each(Object.keys(v=v.add||""),function(m){(m=v[m])&&m()}))}).hatch=h,i.via._.on("out",{put:i.out=i.graph,opt:i.opt,"#":_,_:h})}}s.end=function(i,f){i.end=a,i.the.to===i&&i===i.the.last&&delete f.stun,i.off()};function p(i){var f=i.via._,u;i.via=i.via.back(function(_){if(_.soul||!_.get)return _.$;u=i.data,(i.data={})[_.get]=u}),(!i.via||!i.via._.soul)&&(i.via=f.root.$.get(((i.data||"")._||"")["#"]||f.$.back("opt.uuid")())),i.via.put(i.data,i.ack,i)}var d,a=function(){},g=setTimeout.turn,e=r.valid,t=r.state.ify})(n,"./put"),n(function(c){var r=n("./root");n("./chain"),n("./back"),n("./put"),n("./get"),c.exports=r})(n,"./index"),n(function(c){var r=n("./index");r.chain.on=function(p,d,a,g){var e=this,t=e._;t.root;var i;if(typeof p=="string")return d?(i=t.on(p,d,a||t,g),a&&a.$&&(a.subs||(a.subs=[])).push(i),e):t.on(p);var f=d;return(f=f===!0?{change:!0}:f||{}).not=1,f.on=1,e.get(p,f),e},r.chain.once=function(p,d){if(d=d||{},!p)return l(this);var a=this,g=a._,e=g.root;g.put;var t=String.random(7),i;return a.get(function(f,u,_,w){var v=this,h=v._,m=h.one||(h.one={});if(w.stun||m[t]==="")return;if((i=r.valid(f))===!0){x();return}if(typeof i=="string")return;clearTimeout((g.one||"")[t]),clearTimeout(m[t]),m[t]=setTimeout(x,d.wait||99);function x(){!h.has&&!h.soul&&(h={put:f,get:u}),s===(i=h.put)&&(i=((_.$$||"")._||"").put),!(typeof r.valid(i)=="string"&&(i=e.$.get(i)._.put,i===s))&&(w.stun||m[t]!==""&&(m[t]="",(g.soul||g.has)&&w.off(),p.call(v,i,h.get)))}},{on:1}),a};function l(p,d,a){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(a=p.chain())._.nix=p.once(function(g,e){a._.on("in",this._)}),a._.lex=p._.lex,a}r.chain.off=function(){var p=this,d=p._,a,g=d.back;if(!!g)return d.ack=0,(a=g.next)&&a[d.get]&&delete a[d.get],(a=g.ask)&&delete a[d.get],(a=g.put)&&delete a[d.get],(a=d.soul)&&delete g.root.graph[a],(a=d.map)&&Object.keys(a).forEach(function(e,t){t=a[e],t.link&&g.root.$.get(t.link).off()}),(a=d.next)&&Object.keys(a).forEach(function(e,t){t=a[e],t.$.off()}),d.on("off",{}),p};var s})(n,"./on"),n(function(c){var r=n("./index"),l=r.chain.get.next;r.chain.get.next=function(a,g){var e;return Object.plain(g)?(e=((e=g["#"])||"")["="]||e)?a.get(e):((e=a.chain()._).lex=g,a.on("in",function(t){String.match(t.get||(t.put||"")["."],g["."]||g["#"]||g)&&e.on("in",t),this.to.next(t)}),e.$):(l||p)(a,g)},r.chain.map=function(a,g,e){var t=this,i=t._,f,u;return Object.plain(a)&&(f=a["."]?a:{".":a},a=d),a?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),u=t.chain(),t.map().on(function(_,w,v,h){var m=(a||p).call(this,_,w,v,h);if(d!==m){if(_===m)return u._.on("in",v);if(r.is(m))return u._.on("in",m._);var x={};Object.keys(v.put).forEach(function(k){x[k]=v.put[k]},x),x["="]=m,u._.on("in",{get:w,put:x})}}),u):((u=i.each)||((i.each=u=t.chain())._.lex=f||u._.lex||i.lex,u._.nix=t.back("nix"),t.on("in",s,u._)),u)};function s(a){this.to.next(a);var g=this.as,e=a.$,t=e._,i=a.put,f;!t.soul&&!a.$$||(f=g.lex)&&!String.match(a.get||(i||"")["."],f["."]||f["#"]||f)||r.on.link(a,g)}var p=function(){},d})(n,"./map"),n(function(c){var r=n("./index");r.chain.set=function(l,s,p){var d=this,a=d.back(-1),g,e;return s=s||function(){},p=p||{},p.item=p.item||l,(g=((l||"")._||"")["#"])&&((l={})["#"]=g),typeof(e=r.valid(l))=="string"?d.get(g=e).put(l,s,p):r.is(l)?(d.put(function(t){l.get(function(i,f,u){if(!i)return s.call(d,{err:r.log('Only a node can be linked! Not "'+u.put+'"!')});(e={})[i]={"#":i},t(e)},!0)}),l):(Object.plain(l)&&(l=a.get(g=d.back("opt.uuid")()).put(l)),d.get(g||a.back("opt.uuid")(7)).put(l,s,p))}})(n,"./set"),n(function(c){n("./shim");function r(s){var p=function(){},d=s.opt||{};d.log=d.log||console.log,d.gap=d.gap||d.wait||0,d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.pack=d.pack||d.max*.01*.01,d.puff=d.puff||9;var a=setTimeout.turn||setTimeout,g=JSON.parseAsync||function(h,m,x){var k;try{m(k,JSON.parse(h,x))}catch(D){m(D)}},e=JSON.stringifyAsync||function(h,m,x,k){var D;try{m(D,JSON.stringify(h,x,k))}catch(j){m(j)}},t=s.dup,i=t.check,f=t.track,u=p.hear=function(h,m){if(!!h){if(d.max<=h.length)return p.say({dam:"!",err:"Message too big!"},m);p===this&&(u.d+=h.length||0,++u.c);var x=m.SH=+new Date,k=h[0],D;if(k==="["){g(h,function(j,B){if(j||!B)return p.say({dam:"!",err:"DAM JSON parse error."},m);console.STAT&&console.STAT(+new Date,B.length,"# on hear batch");var E=d.puff;(function P(){for(var S=+new Date,T=0,I;T<E&&(I=B[T++]);)u(I,m);B=B.slice(T),console.STAT&&console.STAT(S,+new Date-S,"hear loop"),_(m),!!B.length&&a(P,0)})()}),h="";return}if(k==="{"||(h["#"]||Object.plain(h))&&(D=h)){if(D)return u.one(D,m,x);g(h,function(j,B){if(j||!B)return p.say({dam:"!",err:"DAM JSON parse error."},m);u.one(B,m,x)});return}}};u.one=function(h,m,x){var k,D,j,B,E;if(h.DBG&&(h.DBG=E={DBG:h.DBG}),E&&(E.h=x),E&&(E.hp=+new Date),(k=h["#"])||(k=h["#"]=String.random(9)),!(j=i(k))&&(D=h["##"],!(D&&(j=h["@"]||h.get&&k)&&t.check(B=j+D)))){if((h._=function(){}).via=p.leap=m,(j=h["><"])&&typeof j=="string"&&j.slice(0,99).split(",").forEach(function(P){this[P]=1},h._.yo={}),j=h.dam){(j=p.hear[j])&&j(h,m,s),f(k);return}var x=+new Date;E&&(E.is=x),m.SI=k,s.on("in",p.last=h),E&&(E.hd=+new Date),console.STAT&&console.STAT(x,+new Date-x,h.get?"msg get":h.put?"msg put":"msg"),(j=f(k)).via=m,h.get&&(j.it=h),B&&f(B),p.leap=p.last=null}},u.c=u.d=0,function(){var h=0,m;p.hash=function(j,B){var E,P,S,T=+new Date;e(j.put,function I(C,L){var M=(P||(P=S=L||"")).slice(0,32768);if(E=String.hash(M,E),P=P.slice(32768),P){a(I,0);return}console.STAT&&console.STAT(T,+new Date-T,"say json+hash"),j._.$put=S,j["##"]=E,D(j,B),delete j._.$put},x)};function x(j,B){var E;return B instanceof Object?(Object.keys(B).sort().forEach(k,{to:E={},on:B}),E):B}function k(j){this.to[j]=this.on[j]}var D=p.say=function(j,B){var E;if((E=this)&&(E=E.to)&&E.next&&E.next(j),!j)return!1;var P,S,T=j["@"],I=j._||(j._=function(){}),C=j.DBG,L=+new Date;if(I.y=I.y||L,B||C&&(C.y=L),(P=j["#"])||(P=j["#"]=String.random(9)),!m&&f(P),j.put&&(j.err||(t.s[P]||"").err))return!1;if(!j["##"]&&l!==j.put&&!I.via&&T){p.hash(j,B);return}if(!B&&T&&(B=(E=t.s[T])&&(E.via||(E=E.it)&&(E=E._)&&E.via)||(E=p.last)&&T===E["#"]&&p.leap),!B&&T)return t.s[T]?void 0:(console.STAT&&console.STAT(+new Date,++h,"total no peer to ack to"),!1);if(!B&&p.way)return p.way(j);if(C&&(C.yh=+new Date),!(S=I.raw)){p.raw(j,B);return}if(C&&(C.yr=+new Date),!B||!B.id){if(!Object.plain(B||d.peers))return!1;var L=+new Date;d.puff;var M=d.peers,G=Object.keys(B||d.peers||{});console.STAT&&console.STAT(L,+new Date-L,"peer keys"),function K(){var Z=+new Date;m=1;var te=I.raw;I.raw=S;for(var fe=0,ue;fe<9&&(ue=(G||"")[fe++]);)!(ue=M[ue])||D(j,ue);I.raw=te,m=0,G=G.slice(fe),console.STAT&&console.STAT(Z,+new Date-Z,"say loop"),!!G.length&&(a(K,0),T&&f(T))}();return}if(!B.wire&&p.wire&&p.wire(B),P!==B.last){if(B.last=P,B===I.via||(E=I.yo)&&(E[B.url]||E[B.pid]||E[B.id]))return!1;if(console.STAT&&console.STAT(L,((C||I).yp=+new Date)-(I.y||L),"say prep"),!m&&T&&f(T),B.batch){if(B.tail=(E=B.tail||0)+S.length,B.tail<=d.pack){B.batch+=(E?",":"")+S;return}_(B)}B.batch="[";var J=+new Date;setTimeout(function(){console.STAT&&console.STAT(J,+new Date-J,"0ms TO"),_(B)},d.gap),w(S,B),console.STAT&&T===B.SI&&console.STAT(L,+new Date-B.SH,"say ack")}};p.say.c=p.say.d=0,p.raw=function(j,B){if(!j)return"";var E=j._||{},P,S;if(S=E.raw)return S;if(typeof j=="string")return j;var T=j["##"],I=j["@"];if(T&&I){if(!E.via&&i(I+T))return!1;if((S=(t.s[I]||"").it)||(S=p.last)&&I===S["#"]){if(T===S["##"])return!1;S["##"]||(S["##"]=T)}}if(!j.dam){var C=0,L=[];S=d.peers;for(var M in S){var G=S[M];if(L.push(G.url||G.pid||G.id),++C>6)break}C>1&&(j["><"]=L.join())}if(P=E.$put){S={},Object.keys(j).forEach(function(Y){S[Y]=j[Y]}),S.put=":])([:",e(S,function(Y,K){if(!Y){var Z=+new Date;S=K.indexOf('"put":":])([:"'),J(l,K=K.slice(0,S+6)+P+K.slice(S+14)),console.STAT&&console.STAT(Z,+new Date-Z,"say slice")}});return}e(j,J);function J(Y,K){Y||(E.raw=K,D(j,B))}}}();function _(h){var m=h.batch,x=typeof m=="string";if(x&&(m+="]"),h.batch=h.tail=null,!!m&&!(x?3>m.length:!m.length)){if(!x)try{m=m.length===1?m[0]:JSON.stringify(m)}catch(k){return d.log("DAM JSON stringify error",k)}!m||w(m,h)}}function w(h,m){try{var x=m.wire;m.say?m.say(h):x.send&&x.send(h),p.say.d+=h.length||0,++p.say.c}catch{(m.queue=m.queue||[]).push(h)}}p.hi=function(h){var m=h.wire||{};h.id?d.peers[h.url||h.id]=h:(m=h.id=h.id||String.random(9),p.say({dam:"?",pid:s.opt.pid},d.peers[m]=h),delete t.s[h.last]),h.met=h.met||+new Date,m.hied||s.on(m.hied="hi",h),m=h.queue,h.queue=[],setTimeout.each(m||[],function(x){w(x,h)},0,9)},p.bye=function(h){s.on("bye",h);var m=+new Date;m=m-(h.met||m),p.bye.time=((p.bye.time||m)+m)/2},p.hear["!"]=function(h,m){d.log("Error:",h.err)},p.hear["?"]=function(h,m){h.pid&&(m.pid||(m.pid=h.pid),h["@"])||(p.say({dam:"?",pid:d.pid,"@":h["#"]},m),delete t.s[m.last])},s.on("create",function(h){h.opt.pid=h.opt.pid||String.random(9),this.to.next(h),h.on("out",p.say)}),s.on("bye",function(h,m){h=d.peers[h.id||h]||h,this.to.next(h),h.bye?h.bye():(m=h.wire)&&m.close&&m.close(),delete d.peers[h.id],h.wire=null});var v={};return s.on("bye",function(h,m){this.to.next(h),(m=console.STAT)&&(m.peers=(m.peers||0)-1),!!(m=h.url)&&(v[m]=!0,setTimeout(function(){delete v[m]},d.lack||9e3))}),s.on("hi",function(h,m){this.to.next(h),(m=console.STAT)&&(m.peers=(m.peers||0)+1),!(!(m=h.url)||!v[m])&&(delete v[m],!d.super&&setTimeout.each(Object.keys(s.next),function(x){s.next[x],m={},m[x]=s.graph[x],m=String.hash(m),p.say({"##":m,get:{"#":x}},h)}))}),p}var l;try{c.exports=r}catch{}})(n,"./mesh"),n(function(c){var r=n("../index");r.Mesh=n("./mesh"),r.on("opt",function(s){if(this.to.next(s),s.once)return;var p=s.opt;if(p.WebSocket===!1)return;var d=r.window||{},a=p.WebSocket||d.WebSocket||d.webkitWebSocket||d.mozWebSocket;if(!a)return;p.WebSocket=a;var g=p.mesh=p.mesh||r.Mesh(s);g.wire||p.wire,g.wire=p.wire=e;function e(u){try{if(!u||!u.url)return w&&w(u);var _=u.url.replace(/^http/,"ws"),w=u.wire=new p.WebSocket(_);return w.onclose=function(){p.mesh.bye(u),i(u)},w.onerror=function(v){i(u)},w.onopen=function(){p.mesh.hi(u)},w.onmessage=function(v){!v||p.mesh.hear(v.data||v,u)},w}catch{}}setTimeout(function(){!p.super&&s.on("out",{dam:"hi"})},1);var t=2*999;function i(u){clearTimeout(u.defer),!(f&&u.retry<=0)&&(u.retry=(u.retry||p.retry+1||60)-(-u.tried+(u.tried=+new Date)<t*4?1:0),u.defer=setTimeout(function _(){if(f&&f.hidden)return setTimeout(_,t);e(u)},t))}var f=""+l!=typeof document&&document});var l})(n,"./websocket"),n(function(c){if(typeof Gun!="undefined"){var r=function(){},l;try{l=(Gun.window||r).localStorage}catch{}l||(Gun.log("Warning: No localStorage exists to persist data to!"),l={setItem:function(s,p){this[s]=p},removeItem:function(s){delete this[s]},getItem:function(s){return this[s]}}),Gun.on("create",function s(p){this.to.next(p);var d=p.opt;p.graph;var a=[],g,e;if(d.localStorage===!1)return;d.prefix=d.file||"gun/";try{g=s[d.prefix]=s[d.prefix]||JSON.parse(l.getItem(d.prefix))||{}}catch{g=s[d.prefix]={}}p.on("get",function(i){this.to.next(i);var f=i.get,u,_,w,v;!f||!(u=f["#"])||(_=g[u]||v,_&&(w=f["."])&&!Object.plain(w)&&(_=Gun.state.ify({},w,Gun.state.is(_,w),_[w],u)),Gun.on.get.ack(i,_))}),p.on("put",function(i){this.to.next(i);var f=i.put,u=f["#"],_=f["."];g[u]=Gun.state.ify(g[u],_,f[">"],f[":"],u),i["@"]||a.push(i["#"]),!e&&(e=setTimeout(t,d.wait||1))});function t(){var i,f=a;clearTimeout(e),e=!1,a=[];try{l.setItem(d.prefix,JSON.stringify(g))}catch(u){Gun.log((i=u||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:i,get:d.prefix,put:g})}!i&&!Object.empty(d.peers)||setTimeout.each(f,function(u){p.on("in",{"@":u,err:i,ok:0})})}})}})(n,"./localStorage")})(),function(){var n;if(""+n!=typeof Gun){var o=function(S){console.log("Warning! Deprecated internal utility will break in next version:",S)},c=Gun;c.fn=c.fn||{is:function(S){return o("fn"),!!S&&typeof S=="function"}},c.bi=c.bi||{is:function(S){return o("bi"),S instanceof Boolean||typeof S=="boolean"}},c.num=c.num||{is:function(S){return o("num"),!l(S)&&(S-parseFloat(S)+1>=0||S===1/0||S===-1/0)}},c.text=c.text||{is:function(S){return o("text"),typeof S=="string"}},c.text.ify=c.text.ify||function(S){return o("text.ify"),c.text.is(S)?S:typeof JSON!="undefined"?JSON.stringify(S):S&&S.toString?S.toString():S},c.text.random=c.text.random||function(S,T){o("text.random");var I="";for(S=S||24,T=T||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";S>0;)I+=T.charAt(Math.floor(Math.random()*T.length)),S--;return I},c.text.match=c.text.match||function(S,T){var I,C;return o("text.match"),typeof S!="string"?!1:(typeof T=="string"&&(T={"=":T}),T=T||{},I=T["="]||T["*"]||T[">"]||T["<"],S===I?!0:C!==T["="]?!1:(I=T["*"]||T[">"]||T["<"],S.slice(0,(I||"").length)===I?!0:C!==T["*"]?!1:C!==T[">"]&&C!==T["<"]?S>=T[">"]&&S<=T["<"]:C!==T[">"]&&S>=T[">"]||C!==T["<"]&&S<=T["<"]))},c.text.hash=c.text.hash||function(S,T){if(o("text.hash"),typeof S=="string"){if(T=T||0,!S.length)return T;for(var I=0,C=S.length,L;I<C;++I)L=S.charCodeAt(I),T=(T<<5)-T+L,T|=0;return T}},c.list=c.list||{is:function(S){return o("list"),S instanceof Array}},c.list.slit=c.list.slit||Array.prototype.slice,c.list.sort=c.list.sort||function(S){return o("list.sort"),function(T,I){return!T||!I?0:(T=T[S],I=I[S],T<I?-1:T>I?1:0)}},c.list.map=c.list.map||function(S,T,I){return o("list.map"),a(S,T,I)},c.list.index=1,c.obj=c.boj||{is:function(S){return o("obj"),S?S instanceof Object&&S.constructor===Object||Object.prototype.toString.call(S).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},c.obj.put=c.obj.put||function(S,T,I){return o("obj.put"),(S||{})[T]=I,S},c.obj.has=c.obj.has||function(S,T){return o("obj.has"),S&&Object.prototype.hasOwnProperty.call(S,T)},c.obj.del=c.obj.del||function(S,T){if(o("obj.del"),!!S)return S[T]=null,delete S[T],S},c.obj.as=c.obj.as||function(S,T,I,C){return o("obj.as"),S[T]=S[T]||(C===I?{}:I)},c.obj.ify=c.obj.ify||function(S){if(o("obj.ify"),p(S))return S;try{S=JSON.parse(S)}catch{S={}}return S},function(){var S;function T(I,C){d(this,C)&&S!==this[C]||(this[C]=I)}c.obj.to=c.obj.to||function(I,C){return o("obj.to"),C=C||{},a(I,T,C),C}}(),c.obj.copy=c.obj.copy||function(S){return o("obj.copy"),S&&JSON.parse(JSON.stringify(S))},function(){function S(T,I){var C=this.n,L;if(!(C&&(I===C||p(C)&&d(C,I)))&&L!==I)return!0}c.obj.empty=c.obj.empty||function(T,I){return o("obj.empty"),T?!a(T,S,{n:I}):!0}}(),function(){function S(C,L){if(arguments.length===2){S.r=S.r||{},S.r[C]=L;return}S.r=S.r||[],S.r.push(C)}var T=Object.keys,I;Object.keys=Object.keys||function(C){return I(C,function(L,M,G){G(M)})},c.obj.map=I=c.obj.map||function(C,L,M){o("obj.map");var G,J=0,Y,K,Z,te,fe=typeof L=="function";if(S.r=G,T&&p(C)&&(Z=T(C),te=!0),M=M||{},l(C)||Z)for(Y=(Z||C).length;J<Y;J++){var ue=J+c.list.index;if(fe){if(K=te?L.call(M,C[Z[J]],Z[J],S):L.call(M,C[J],ue,S),K!==G)return K}else if(L===C[te?Z[J]:J])return Z?Z[J]:ue}else for(J in C)if(fe){if(d(C,J)&&(K=M?L.call(M,C[J],J,S):L(C[J],J,S),K!==G))return K}else if(L===C[J])return J;return fe?S.r:c.list.index?0:-1}}(),c.time=c.time||{},c.time.is=c.time.is||function(S){return o("time"),S?S instanceof Date:+new Date().getTime()};var r=c.fn.is,l=c.list.is,s=c.obj,p=s.is,d=s.has,a=s.map,g={};g.is=function(S){return o("val.is"),S===n?!1:S===null?!0:S===1/0?!1:f(S)||t(S)||i(S)?!0:g.link.is(S)||!1},g.link=g.rel={_:"#"},function(){g.link.is=function(T){if(o("val.link.is"),T&&T[e]&&!T._&&p(T)){var I={};if(a(T,S,I),I.id)return I.id}return!1};function S(T,I){var C=this;if(C.id)return C.id=!1;if(I==e&&f(T))C.id=T;else return C.id=!1}}(),g.link.ify=function(S){return o("val.link.ify"),u({},e,S)},c.obj.has._=".";var e=g.link._,n,t=c.bi.is,i=c.num.is,f=c.text.is,s=c.obj,p=s.is,u=s.put,a=s.map;c.val=c.val||g;var _={_:"_"};_.soul=function(S,T){return o("node.soul"),S&&S._&&S._[T||m]},_.soul.ify=function(S,T){return o("node.soul.ify"),T=typeof T=="string"?{soul:T}:T||{},S=S||{},S._=S._||{},S._[m]=T.soul||S._[m]||h(),S},_.soul._=g.link._,function(){_.is=function(T,I,C){o("node.is");var L;return p(T)&&(L=_.soul(T))?!a(T,S,{as:C,cb:I,s:L,n:T}):!1};function S(T,I){if(I!==_._){if(!g.is(T))return!0;this.cb&&this.cb.call(this.as,T,I,this.n,this.s)}}}(),function(){_.ify=function(T,I,C){return o("node.ify"),I?typeof I=="string"?I={soul:I}:typeof I=="function"&&(I={map:I}):I={},I.map&&(I.node=I.map.call(C,T,n,I.node||{})),(I.node=_.soul.ify(I.node||{},I))&&a(T,S,{o:I,as:C}),I.node};function S(T,I){var C=this.o,L,M;if(C.map){L=C.map.call(this.as,T,""+I,C.node),M===L?w(C.node,I):C.node&&(C.node[I]=L);return}g.is(T)&&(C.node[I]=T)}}();var s=c.obj,p=s.is,w=s.del,a=s.map,v=c.text,h=v.random,m=_.soul._,n;c.node=c.node||_;var x=c.state;x.lex=function(){return o("state.lex"),x().toString(36).replace(".","")},x.to=function(S,T,I){o("state.to");var C=(S||{})[T];return p(C)&&(C=k(C)),x.ify(I,T,x.is(S,T),C,_.soul(S))},function(){x.map=function(T,I,C){o("state.map");var L,M=p(M=T||I)?M:null;return T=r(T=T||I)?T:null,M&&!T?(I=i(I)?I:x(),M[B]=M[B]||{},a(M,S,{o:M,s:I}),M):(C=C||p(I)?I:L,I=i(I)?I:x(),function(G,J,Y,K){if(!T)return S.call({o:Y,s:I},G,J),G;T.call(C||this||{},G,J,Y,K),!(d(Y,J)&&L===Y[J])&&S.call({o:Y,s:I},G,J)})};function S(T,I){B!==I&&x.ify(this.o,I,this.s)}}();var s=c.obj;s.as;var d=s.has,p=s.is,a=s.map,k=s.copy,D=c.num,i=D.is,j=c.fn,r=j.is,B=_._,n,E={};(function(){E.is=function(I,C,L,M){return o("graph.is"),!I||!p(I)||P(I)?!1:!a(I,S,{cb:C,fn:L,as:M})};function S(I,C){if(!I||C!==_.soul(I)||!_.is(I,this.fn,this.as))return!0;!this.cb||(T.n=I,T.as=this.as,this.cb.call(T.as,I,C,T))}function T(I){I&&_.is(T.n,I,T.as)}})(),function(){E.ify=function(M,G,J){o("graph.ify");var Y={path:[],obj:M};return G?typeof G=="string"?G={soul:G}:typeof G=="function"&&(G.map=G):G={},typeof J=="string"&&(G.soul=G.soul||J,J=n),G.soul&&(Y.link=g.link.ify(G.soul)),G.shell=(J||{}).shell,G.graph=G.graph||{},G.seen=G.seen||[],G.as=G.as||J,S(G,Y),G.root=Y.node,G.graph};function S(M,G){var J;return(J=L(M,G))?J:(G.env=M,G.soul=I,_.ify(G.obj,T,G)&&(G.link=G.link||g.link.ify(_.soul(G.node)),G.obj!==M.shell&&(M.graph[g.link.is(G.link)]=G.node)),G)}function T(M,G,J){var Y=this,K=Y.env,Z,te;if(_._===G&&d(M,g.link._))return J._;if(!!(Z=C(M,G,J,Y,K))){if(G||(Y.node=Y.node||J||{},d(M,_._)&&_.soul(M)&&(Y.node._=k(M._)),Y.node=_.soul.ify(Y.node,g.link.is(Y.link)),Y.link=Y.link||g.link.ify(_.soul(Y.node))),(te=K.map)&&(te.call(K.as||{},M,G,J,Y),d(J,G))){if(M=J[G],n===M){w(J,G);return}if(!(Z=C(M,G,J,Y,K)))return}if(!G)return Y.node;if(Z===!0)return M;if(te=S(K,{obj:M,path:Y.path.concat(G)}),!!te.node)return te.link}}function I(M){var G=this,J=g.link.is(G.link),Y=G.env.graph;G.link=G.link||g.link.ify(M),G.link[g.link._]=M,G.node&&G.node[_._]&&(G.node[_._][g.link._]=M),d(Y,J)&&(Y[M]=Y[J],w(Y,J))}function C(M,G,J,Y,K){var Z;if(g.is(M))return!0;if(p(M))return 1;if(Z=K.invalid)return M=Z.call(K.as||{},M,G,J),C(M,G,J,Y,K);K.err="Invalid value at '"+Y.path.concat(G).join(".")+"'!",c.list.is(M)&&(K.err+=" Use `.set(item)` instead of an Array.")}function L(M,G){for(var J=M.seen,Y=J.length,K;Y--;)if(K=J[Y],G.obj===K.obj)return K;J.push(G)}}(),E.node=function(S){o("graph.node");var T=_.soul(S);if(!!T)return u({},T,S)},function(){E.to=function(T,I,C){if(o("graph.to"),!!T){var L={};return C=C||{seen:{}},a(T[I],S,{obj:L,graph:T,opt:C}),L}};function S(T,I){var C,L;if(_._===I){if(P(T,g.link._))return;this.obj[I]=k(T);return}if(!(C=g.link.is(T))){this.obj[I]=T;return}if(L=this.opt.seen[C]){this.obj[I]=L;return}this.obj[I]=this.opt.seen[C]=E.to(this.graph,C,this.opt)}}();var r=c.fn.is,s=c.obj,p=s.is,w=s.del,d=s.has,P=s.empty,u=s.put,a=s.map,k=s.copy,n;c.graph=c.graph||E}}()})(Gt);var Ti=Gt.exports,Er={exports:{}};(function(y){(function(){function n(c,r){return r?ve(c):c.slice?n[l(c)]:function(s,p){c(s={exports:{}}),n[l(p)]=s.exports};function l(s){return s.split("/").slice(-1).toString().replace(".js","")}}var o=y;n(function(c){typeof window!="undefined"&&(c.window=window);var r=c.window||c,l,s=r.SEA||{};(s.window=c.window)&&(s.window.SEA=s);try{l+""!=typeof o&&(o.exports=s)}catch{}c.exports=s})(n,"./root"),n(function(c){var r=n("./root");try{r.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(n,"./https"),n(function(c){var r;if(r+""==typeof btoa){if(r+""==typeof Buffer)try{ce.Buffer=n("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}ce.btoa=function(l){return Buffer.from(l,"binary").toString("base64")},ce.atob=function(l){return Buffer.from(l,"base64").toString("binary")}}})(n,"./base64"),n(function(c){n("./base64");function r(){}Object.assign(r,{from:Array.from}),r.prototype=Object.create(Array.prototype),r.prototype.toString=function(l,s,p){l=l||"utf8",s=s||0;const d=this.length;if(l==="hex"){const a=new Uint8Array(this);return[...Array((p&&p+1||d)-s).keys()].map(g=>a[g+s].toString(16).padStart(2,"0")).join("")}if(l==="utf8")return Array.from({length:(p||d)-s},(a,g)=>String.fromCharCode(this[g+s])).join("");if(l==="base64")return btoa(this)},c.exports=r})(n,"./array"),n(function(c){n("./base64");var r=n("./array");function l(...s){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),l.from(...s)}l.prototype=Object.create(Array.prototype),Object.assign(l,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const s=arguments[0];let p;if(typeof s=="string"){const a=arguments[1]||"utf8";if(a==="hex"){const g=s.match(/([\da-fA-F]{2})/g).map(e=>parseInt(e,16));if(!g||!g.length)throw new TypeError("Invalid first argument for type 'hex'.");p=r.from(g)}else if(a==="utf8"||a==="binary"){const g=s.length,e=new Uint16Array(g);Array.from({length:g},(t,i)=>e[i]=s.charCodeAt(i)),p=r.from(e)}else if(a==="base64"){const g=atob(s),e=g.length,t=new Uint8Array(e);Array.from({length:e},(i,f)=>t[f]=g.charCodeAt(f)),p=r.from(t)}else a==="binary"?p=r.from(s):console.info("SafeBuffer.from unknown encoding: "+a);return p}if(s.byteLength,s.byteLength?s.byteLength:s.length){let a;return s instanceof ArrayBuffer&&(a=new Uint8Array(s)),r.from(a||s)}},alloc(s,p=0){return r.from(new Uint8Array(Array.from({length:s},()=>p)))},allocUnsafe(s){return r.from(new Uint8Array(Array.from({length:s})))},concat(s){if(!Array.isArray(s))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return r.from(s.reduce((p,d)=>p.concat(Array.from(d)),[]))}}),l.prototype.from=l.from,l.prototype.toString=r.prototype.toString,c.exports=l})(n,"./buffer"),n(function(c){const r=n("./root"),l={Buffer:n("./buffer")};var s={},p;if(JSON.parseAsync=JSON.parseAsync||function(a,g,e){var t;try{g(t,JSON.parse(a,e))}catch(i){g(i)}},JSON.stringifyAsync=JSON.stringifyAsync||function(a,g,e,t){var i;try{g(i,JSON.stringify(a,e,t))}catch(f){g(f)}},l.parse=function(a,g){return new Promise(function(e,t){JSON.parseAsync(a,function(i,f){i?t(i):e(f)},g)})},l.stringify=function(a,g,e){return new Promise(function(t,i){JSON.stringifyAsync(a,function(f,u){f?i(f):t(u)},g,e)})},r.window&&(l.crypto=window.crypto||window.msCrypto,l.subtle=(l.crypto||s).subtle||(l.crypto||s).webkitSubtle,l.TextEncoder=window.TextEncoder,l.TextDecoder=window.TextDecoder,l.random=a=>l.Buffer.from(l.crypto.getRandomValues(new Uint8Array(l.Buffer.alloc(a))))),!l.TextDecoder){const{TextEncoder:a,TextDecoder:g}=n((p+""==typeof o?".":"")+"./lib/text-encoding",1);l.TextDecoder=g,l.TextEncoder=a}if(!l.crypto)try{var d=n("crypto",1);Object.assign(l,{crypto:d,random:g=>l.Buffer.from(d.randomBytes(g))});const{Crypto:a}=n("@peculiar/webcrypto",1);l.ossl=l.subtle=new a({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}c.exports=l})(n,"./shim"),n(function(c){var r=n("./root"),l=n("./shim"),s={};s.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},s.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},s.ecdh={name:"ECDH",namedCurve:"P-256"},s.jwk=function(p,d){p=p.split(".");var a=p[0],g=p[1],e={kty:"EC",crv:"P-256",x:a,y:g,ext:!0};return e.key_ops=d?["sign"]:["verify"],d&&(e.d=d),e},s.keyToJwk=function(p){const a=p.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:a,ext:!1,alg:"A256GCM"}},s.recall={validity:12*60*60,hook:function(p){return p}},s.check=function(p){return typeof p=="string"&&p.slice(0,4)==="SEA{"},s.parse=async function(d){try{var a=typeof d=="string";return a&&d.slice(0,4)==="SEA{"&&(d=d.slice(3)),a?await l.parse(d):d}catch{}return d},r.opt=s,c.exports=s})(n,"./settings"),n(function(c){var r=n("./shim");c.exports=async function(l,s){var p=typeof l=="string"?l:await r.stringify(l),d=await r.subtle.digest({name:s||"SHA-256"},new r.TextEncoder().encode(p));return r.Buffer.from(d)}})(n,"./sha256"),n(function(c){const r=n("./shim"),l=r.subtle,s=r.ossl?r.ossl:l,p=d=>s.digest({name:"SHA-1"},new ArrayBuffer(d));c.exports=p})(n,"./sha1"),n(function(c){var r=n("./root"),l=n("./shim"),s=n("./settings"),p=n("./sha256"),d;r.work=r.work||(async(a,g,e,t)=>{try{var i=(g||{}).epub||g;if(t=t||{},i instanceof Function&&(e=i,i=d),a=typeof a=="string"?a:await l.stringify(a),(t.name||"").toLowerCase().slice(0,3)==="sha"){var f=l.Buffer.from(await p(a,t.name),"binary").toString(t.encode||"base64");if(e)try{e(f)}catch(v){console.log(v)}return f}i=i||l.random(9);var u=await(l.ossl||l.subtle).importKey("raw",new l.TextEncoder().encode(a),{name:t.name||"PBKDF2"},!1,["deriveBits"]),_=await(l.ossl||l.subtle).deriveBits({name:t.name||"PBKDF2",iterations:t.iterations||s.pbkdf2.iter,salt:new l.TextEncoder().encode(t.salt||i),hash:t.hash||s.pbkdf2.hash},u,t.length||s.pbkdf2.ks*8);a=l.random(a.length);var w=l.Buffer.from(_,"binary").toString(t.encode||"base64");if(e)try{e(w)}catch(v){console.log(v)}return w}catch(v){if(console.log(v),r.err=v,r.throw)throw v;e&&e();return}}),c.exports=r.work})(n,"./work"),n(function(c){var r=n("./root"),l=n("./shim");n("./settings"),r.name=r.name||(async(s,p)=>{try{if(s)try{s()}catch(d){console.log(d)}return}catch(d){if(console.log(d),r.err=d,r.throw)throw d;s&&s();return}}),r.pair=r.pair||(async(s,p)=>{try{var d=l.ossl||l.subtle,a=await l.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async t=>{var i={};i.priv=(await l.subtle.exportKey("jwk",t.privateKey)).d;var f=await l.subtle.exportKey("jwk",t.publicKey);return i.pub=f.x+"."+f.y,i});try{var g=await d.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async t=>{var i={};i.epriv=(await d.exportKey("jwk",t.privateKey)).d;var f=await d.exportKey("jwk",t.publicKey);return i.epub=f.x+"."+f.y,i})}catch(t){if(r.window)throw t;if(t=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw t}g=g||{};var e={pub:a.pub,priv:a.priv,epub:g.epub,epriv:g.epriv};if(s)try{s(e)}catch(t){console.log(t)}return e}catch(t){if(console.log(t),r.err=t,r.throw)throw t;s&&s();return}}),c.exports=r.pair})(n,"./pair"),n(function(c){var r=n("./root"),l=n("./shim"),s=n("./settings"),p=n("./sha256"),d;r.sign=r.sign||(async(a,g,e,t)=>{try{if(t=t||{},!(g||t).priv){if(!r.I)throw"No signing key.";g=await r.I(null,{what:a,how:"sign",why:t.why})}if(d===a)throw"`undefined` not allowed.";var i=await s.parse(a),f=t.check=t.check||i;if(r.verify&&(r.opt.check(f)||f&&f.s&&f.m)&&d!==await r.verify(f,g)){var m=await s.parse(f);if(t.raw||(m="SEA"+await l.stringify(m)),e)try{e(m)}catch(k){console.log(k)}return m}var u=g.pub,_=g.priv,w=s.jwk(u,_),v=await p(i),h=await(l.ossl||l.subtle).importKey("jwk",w,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(x=>(l.ossl||l.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},x,new Uint8Array(v))),m={m:i,s:l.Buffer.from(h,"binary").toString(t.encode||"base64")};if(t.raw||(m="SEA"+await l.stringify(m)),e)try{e(m)}catch(x){console.log(x)}return m}catch(x){if(console.log(x),r.err=x,r.throw)throw x;e&&e();return}}),c.exports=r.sign})(n,"./sign"),n(function(c){var r=n("./root"),l=n("./shim"),s=n("./settings"),p=n("./sha256"),d;r.verify=r.verify||(async(e,t,i,f)=>{try{var u=await s.parse(e);if(t===!1){var _=await s.parse(u.m);if(i)try{i(_)}catch(B){console.log(B)}return _}f=f||{};var w=t.pub||t,v=r.opt.slow_leak?await r.opt.slow_leak(w):await(l.ossl||l.subtle).importKey("jwk",s.jwk(w),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),h=await p(u.m),m,x,k,D;try{if(m=l.Buffer.from(u.s,f.encode||"base64"),x=new Uint8Array(m),k=await(l.ossl||l.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},v,x,new Uint8Array(h)),!k)throw"Signature did not match."}catch{if(r.opt.fallback)return await r.opt.fall_verify(e,t,i,f)}var j=k?await s.parse(u.m):d;if(i)try{i(j)}catch(B){console.log(B)}return j}catch(B){if(console.log(B),r.err=B,r.throw)throw B;i&&i();return}}),c.exports=r.verify;var a={};r.opt.slow_leak=e=>{if(a[e])return a[e];var t=s.jwk(e);return a[e]=(l.ossl||l.subtle).importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),a[e]};var g=r.opt;r.opt.fall_verify=async function(e,t,i,f,u){if(u===r.opt.fallback)throw"Signature did not match";u=u||1;var _=e||"";e=r.opt.unpack(e)||e;var w=await s.parse(e),v=t.pub||t,h=await r.opt.slow_leak(v),m=u<=r.opt.fallback?l.Buffer.from(await l.subtle.digest({name:"SHA-256"},new l.TextEncoder().encode(await s.parse(w.m)))):await p(w.m),x,k,D;try{if(x=l.Buffer.from(w.s,f.encode||"base64"),k=new Uint8Array(x),D=await(l.ossl||l.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},h,k,new Uint8Array(m)),!D)throw"Signature did not match."}catch{try{x=l.Buffer.from(w.s,"utf8"),k=new Uint8Array(x),D=await(l.ossl||l.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},h,k,new Uint8Array(m))}catch{if(!D)throw"Signature did not match."}}var j=D?await s.parse(w.m):d;if(g.fall_soul=_["#"],g.fall_key=_["."],g.fall_val=e,g.fall_state=_[">"],i)try{i(j)}catch(B){console.log(B)}return j},r.opt.fallback=2})(n,"./verify"),n(function(c){var r=n("./shim"),l=n("./settings"),s=n("./sha256");const p=async(d,a,g)=>{const e=d+(a||r.random(8)).toString("utf8"),t=r.Buffer.from(await s(e),"binary"),i=l.keyToJwk(t);return await r.subtle.importKey("jwk",i,{name:"AES-GCM"},!1,["encrypt","decrypt"])};c.exports=p})(n,"./aeskey"),n(function(c){var r=n("./root"),l=n("./shim");n("./settings");var s=n("./aeskey"),p;r.encrypt=r.encrypt||(async(d,a,g,e)=>{try{e=e||{};var t=(a||e).epriv||a;if(p===d)throw"`undefined` not allowed.";if(!t){if(!r.I)throw"No encryption key.";a=await r.I(null,{what:d,how:"encrypt",why:e.why}),t=a.epriv||a}var i=typeof d=="string"?d:await l.stringify(d),f={s:l.random(9),iv:l.random(15)},u=await s(t,f.s,e).then(w=>l.subtle.encrypt({name:e.name||"AES-GCM",iv:new Uint8Array(f.iv)},w,new l.TextEncoder().encode(i))),_={ct:l.Buffer.from(u,"binary").toString(e.encode||"base64"),iv:f.iv.toString(e.encode||"base64"),s:f.s.toString(e.encode||"base64")};if(e.raw||(_="SEA"+await l.stringify(_)),g)try{g(_)}catch(w){console.log(w)}return _}catch(w){if(console.log(w),r.err=w,r.throw)throw w;g&&g();return}}),c.exports=r.encrypt})(n,"./encrypt"),n(function(c){var r=n("./root"),l=n("./shim"),s=n("./settings"),p=n("./aeskey");r.decrypt=r.decrypt||(async(d,a,g,e)=>{try{e=e||{};var t=(a||e).epriv||a;if(!t){if(!r.I)throw"No decryption key.";a=await r.I(null,{what:d,how:"decrypt",why:e.why}),t=a.epriv||a}var i=await s.parse(d),f,u,_;try{f=l.Buffer.from(i.s,e.encode||"base64"),u=l.Buffer.from(i.iv,e.encode||"base64"),_=l.Buffer.from(i.ct,e.encode||"base64");var w=await p(t,f,e).then(h=>l.subtle.decrypt({name:e.name||"AES-GCM",iv:new Uint8Array(u),tagLength:128},h,new Uint8Array(_)))}catch{if(e.encode==="utf8")throw"Could not decrypt";if(r.opt.fallback)return e.encode="utf8",await r.decrypt(d,a,g,e)}var v=await s.parse(new l.TextDecoder("utf8").decode(w));if(g)try{g(v)}catch(h){console.log(h)}return v}catch(h){if(console.log(h),r.err=h,r.throw)throw h;g&&g();return}}),c.exports=r.decrypt})(n,"./decrypt"),n(function(c){var r=n("./root"),l=n("./shim");n("./settings"),r.secret=r.secret||(async(p,d,a,g)=>{try{if(g=g||{},!d||!d.epriv||!d.epub){if(!r.I)throw"No secret mix.";d=await r.I(null,{what:p,how:"secret",why:g.why})}var e=p.epub||p,t=d.epub,i=d.epriv,f=l.ossl||l.subtle,u=s(e),_=Object.assign({public:await f.importKey(...u,!0,[])},{name:"ECDH",namedCurve:"P-256"}),w=s(t,i),v=await f.importKey(...w,!1,["deriveBits"]).then(async m=>{var x=await f.deriveBits(_,m,256),k=new Uint8Array(x),D=await f.importKey("raw",k,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return f.exportKey("jwk",D).then(({k:j})=>j)}),h=v;if(a)try{a(h)}catch(m){console.log(m)}return h}catch(m){if(console.log(m),r.err=m,r.throw)throw m;a&&a();return}});var s=(p,d)=>{var[a,g]=p.split("."),e=d?{d}:{};return["jwk",Object.assign(e,{x:a,y:g,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};c.exports=r.secret})(n,"./secret"),n(function(c){var r=n("./root");r.certify=r.certify||(async(l,s={},p,d,a={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),l=(()=>{var h=[];if(l){if((typeof l=="string"||Array.isArray(l))&&l.indexOf("*")>-1)return"*";if(typeof l=="string")return l;if(Array.isArray(l)){if(l.length===1&&l[0])return typeof l[0]=="object"&&l[0].pub?l[0].pub:typeof l[0]=="string"?l[0]:null;l.map(m=>{typeof m=="string"?h.push(m):typeof m=="object"&&m.pub&&h.push(m.pub)})}return typeof l=="object"&&l.pub?l.pub:h.length>0?h:null}})(),!l)return console.log("No certificant found.");const e=a.expiry&&(typeof a.expiry=="number"||typeof a.expiry=="string")?parseFloat(a.expiry):null,t=(s||{}).read?s.read:null,i=(s||{}).write?s.write:typeof s=="string"||Array.isArray(s)||s["+"]||s["#"]||s["."]||s["="]||s["*"]||s[">"]||s["<"]?s:null,f=(a||{}).block||(a||{}).blacklist||(a||{}).ban||{},u=f.read&&(typeof f.read=="string"||(f.read||{})["#"])?f.read:null,_=typeof f=="string"?f:f.write&&(typeof f.write=="string"||f.write["#"])?f.write:null;if(!t&&!i)return console.log("No policy found.");const w=JSON.stringify(we(we(we(we(we({c:l},e?{e}:{}),t?{r:t}:{}),i?{w:i}:{}),u?{rb:u}:{}),_?{wb:_}:{}));var g=await r.sign(w,p,null,{raw:1});if(a.raw||(g="SEA"+JSON.stringify(g)),d)try{d(g)}catch(h){console.log(h)}return g}catch(e){if(r.err=e,r.throw)throw e;d&&d();return}}),c.exports=r.certify})(n,"./certify"),n(function(c){var r=n("./shim"),l=n("./root");l.work=n("./work"),l.sign=n("./sign"),l.verify=n("./verify"),l.encrypt=n("./encrypt"),l.decrypt=n("./decrypt"),l.certify=n("./certify"),l.random=l.random||r.random,l.Buffer=l.Buffer||n("./buffer"),l.keyid=l.keyid||(async s=>{try{const p=r.Buffer.concat(s.replace(/-/g,"+").replace(/_/g,"/").split(".").map(e=>r.Buffer.from(e,"base64"))),d=r.Buffer.concat([r.Buffer.from([153,p.length/256,p.length%256]),p]),a=await sha1hash(d),g=r.Buffer.from(a,"binary");return g.toString("hex",g.length-8)}catch(p){throw console.log(p),p}}),((l.window||{}).GUN||{}).SEA=l,c.exports=l})(n,"./sea"),n(function(c){var r=n("./sea"),l,s;r.window?l=r.window.GUN||{chain:{}}:l=n((s+""==typeof o?".":"")+"./gun",1),r.GUN=l;function p(a){this._={$:this}}p.prototype=function(){function a(){}return a.prototype=l.chain,new a}(),p.prototype.constructor=p,l.chain.user=function(a){var g=this,e=g.back(-1),t;if(a)return a=r.opt.pub((a._||"")["#"])||a,e.get("~"+a);if(t=e.back("user"))return t;var e=e._,i=e,f=i.opt.uuid||d;return(i=(t=i.user=g.chain(new p))._).opt={},i.opt.uuid=function(u){var _=f(),w=e.user;return!w||!(w=w.is)||!(w=w.pub)||(_="~"+w+"/"+_,u&&u.call&&u(null,_)),_},t};function d(){return l.state().toString(36).replace(".","")}l.User=p,p.GUN=l,p.SEA=l.SEA=r,c.exports=p})(n,"./user"),n(function(c){var r,l=""+r!=typeof window?window.Gun||{chain:{}}:n((""+r==typeof o?".":"")+"./gun",1);l.chain.then=function(s,p){var d=this,a=new Promise(function(g,e){d.once(g,p)});return s?a.then(s):a}})(n,"./then"),n(function(c){var r=n("./user"),l=r.SEA,s=r.GUN,p=function(){};r.prototype.create=function(...d){var a=typeof d[0]=="object"&&(d[0].pub||d[0].epub)?d[0]:typeof d[1]=="object"&&(d[1].pub||d[1].epub)?d[1]:null,g=a&&(a.pub||a.epub)?a.pub:typeof d[0]=="string"?d[0]:null,e=a&&(a.pub||a.epub)?a:g&&typeof d[1]=="string"?d[1]:null,t=d.filter(h=>typeof h=="function")[0]||null,i=d&&d.length>1&&typeof d[d.length-1]=="object"?d[d.length-1]:{},f=this,u=f._,_=f.back(-1);if(t=t||p,i=i||{},i.check!==!1){var w;if(g||(w="No user."),(e||"").length<8&&(w="Password too short!"),w)return t({err:s.log(w)}),f}if(u.ing)return(t||p)({err:s.log("User is already being created or authenticated!"),wait:!0}),f;u.ing=!0;var v={};return v.a=function(h){if(v.pubs=h,h&&!i.already){var m={err:s.log("User already created!")};u.ing=!1,(t||p)(m),f.leave();return}v.salt=String.random(64),l.work(e,v.salt,v.b)},v.b=function(h){v.proof=h,a?v.c(a):l.pair(v.c)},v.c=function(h){var m;v.pair=h||{},(m=u.root.user)&&(m._.sea=h,m.is={pub:h.pub,epub:h.epub,alias:g}),v.data={pub:h.pub},v.d()},v.d=function(){v.data.alias=g,v.e()},v.e=function(){v.data.epub=v.pair.epub,l.encrypt({priv:v.pair.priv,epriv:v.pair.epriv},v.proof,v.f,{raw:1})},v.f=function(h){v.data.auth=JSON.stringify({ek:h,s:v.salt}),v.g(v.data.auth)},v.g=function(h){var m;v.data.auth=v.data.auth||h,_.get(m="~"+v.pair.pub).put(v.data).on(v.h);var x={};x[m]={"#":m},_.get("~@"+g).put(x).get(m).on(v.i)},v.h=function(h,m,x,k){k.off(),v.h.ok=1,v.i()},v.i=function(h,m,x,k){k&&(v.i.ok=1,k.off()),!(!v.h.ok||!v.i.ok)&&(u.ing=!1,t({ok:0,pub:v.pair.pub}),p===t&&(a?f.auth(a):f.auth(g,e)))},_.get("~@"+g).once(v.a),f},r.prototype.leave=function(d,a){var g=this,e=g.back(-1)._.user;if(e&&(delete e.is,delete e._.is,delete e._.sea),l.window)try{var t={};t=window.sessionStorage,delete t.recall,delete t.pair}catch{}return g}})(n,"./create"),n(function(c){var r=n("./user"),l=r.SEA,s=r.GUN,p=function(){};r.prototype.auth=function(...a){var g=typeof a[0]=="object"&&(a[0].pub||a[0].epub)?a[0]:typeof a[1]=="object"&&(a[1].pub||a[1].epub)?a[1]:null,e=!g&&typeof a[0]=="string"?a[0]:null,t=e&&typeof a[1]=="string"?a[1]:null,i=a.filter(m=>typeof m=="function")[0]||null,f=a&&a.length>1&&typeof a[a.length-1]=="object"?a[a.length-1]:{},u=this,_=u._,w=u.back(-1);if(_.ing)return(i||p)({err:s.log("User is already being created or authenticated!"),wait:!0}),u;_.ing=!0;var v={},h;return v.a=function(m){if(!m)return v.b();if(!m.pub){var x=[];return Object.keys(m).forEach(function(k){k!="_"&&x.push(m[k])}),v.b(x)}if(v.name)return v.f(m);v.c((v.data=m).auth)},v.b=function(m){var x=(v.list=(v.list||[]).concat(m||[])).shift();if(h===x)return v.name?v.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):v.err("Wrong user or password.");w.get(x).once(v.a)},v.c=function(m){if(h===m)return v.b();if(typeof m=="string")return v.c(d(m));l.work(t,(v.auth=m).s,v.d,v.enc)},v.d=function(m){l.decrypt(v.auth.ek,m,v.e,v.enc)},v.e=function(m){if(h===m)return v.enc?(v.enc=null,v.b()):(v.enc={encode:"utf8"},v.c(v.auth));v.half=m,v.f(v.data)},v.f=function(m){var x=v.half||{},k=v.data||{};v.g(v.lol={pub:m.pub||k.pub,epub:m.epub||k.epub,priv:m.priv||x.priv,epriv:m.epriv||x.epriv})},v.g=function(m){if(!m||!m.pub||!m.epub)return v.b();v.pair=m;var x=w._.user,k=x._;k.tag;var D=k.opt;k=x._=w.get("~"+m.pub)._,k.opt=D,x.is={pub:m.pub,epub:m.epub,alias:e||m.pub},k.sea=v.pair,_.ing=!1;try{t&&h==(d(_.root.graph["~"+m.pub].auth)||"")[":"]&&(f.shuffle=f.change=t)}catch{}if(f.change?v.z():(i||p)(k),l.window&&(u.back("user")._.opt||f).remember)try{var j={};j=window.sessionStorage,j.recall=!0,j.pair=JSON.stringify(m)}catch{}try{w._.tag.auth?w._.on("auth",k):setTimeout(function(){w._.on("auth",k)},1)}catch(B){s.log("Your 'auth' callback crashed with:",B)}},v.z=function(){v.salt=String.random(64),l.work(f.change,v.salt,v.y)},v.y=function(m){l.encrypt({priv:v.pair.priv,epriv:v.pair.epriv},m,v.x,{raw:1})},v.x=function(m){v.w(JSON.stringify({ek:m,s:v.salt}))},v.w=function(m){if(f.shuffle){console.log("migrate core account from UTF8 & shuffle");var x={};Object.keys(v.data).forEach(function(k){x[k]=v.data[k]}),delete x._,x.auth=m,w.get("~"+v.pair.pub).put(x)}w.get("~"+v.pair.pub).get("auth").put(m,i||p)},v.err=function(m){var x={err:s.log(m||"User cannot be found!")};_.ing=!1,(i||p)(x)},v.plugin=function(m){if(!(v.name=m))return v.err();var x=[m];m[0]!=="~"&&(x[1]="~"+m,x[2]="~@"+m),v.b(x)},g?v.g(g):e?w.get("~@"+e).once(v.a):!e&&!t&&l.name(v.plugin),u};function d(a){if(typeof a!="string")return a;try{a=JSON.parse(a)}catch{a={}}return a}})(n,"./auth"),n(function(c){var r=n("./user"),l=r.SEA;r.GUN,r.prototype.recall=function(s,p){var d=this,a=d.back(-1);if(s=s||{},s&&s.sessionStorage){if(l.window)try{var g={};g=window.sessionStorage,g&&(a._.opt.remember=!0,(d.back("user")._.opt||s).remember=!0,(g.recall||g.pair)&&a.user().auth(JSON.parse(g.pair),p))}catch{}return d}return d}})(n,"./recall"),n(function(c){var r=n("./user"),l=r.SEA,s=r.GUN,p=function(){};r.prototype.pair=function(){var d=this,a;try{a=new Proxy({DANGER:"\u2620"},{get:function(g,e,t){if(!(!d.is||!(d._||"").sea))return d._.sea[e]}})}catch{}return a},r.prototype.delete=async function(d,a,g){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var e=this;e.back(-1);var t=e.back("user");try{t.auth(d,a,function(i){var f=(t.is||{}).pub;t.map().once(function(){this.put(null)}),t.leave(),(g||p)({ok:0})})}catch(i){s.log("User.delete failed! Error:",i)}return e},r.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const d=this.back(-1);try{return await authRecall(d),d._.user._}catch{const g="No session!";throw s.log(g),{err:g}}},r.prototype.trust=async function(d){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),s.is(d)&&d.get("pub").get((a,g)=>{console.log(a,g)}),d.get("trust").get(path).put(theirPubkey)},r.prototype.grant=function(d,a){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var g=this,e=g.back(-1).user(),t=e._.sea,i="";return g.back(function(f){f.is||(i+=f.get||"")}),async function(){var f,u=await e.get("grant").get(t.pub).get(i).then();u=await l.decrypt(u,t),u||(u=l.random(16).toString(),f=await l.encrypt(u,t),e.get("grant").get(t.pub).get(i).put(f));var _=d.get("pub").then(),w=d.get("epub").then();_=await _,w=await w;var v=await l.secret(w,t);f=await l.encrypt(u,v),e.get("grant").get(_).get(i).put(f,a)}(),g},r.prototype.secret=function(d,a){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var g=this,e=g.back(-1).user(),t=e.pair(),i="";return g.back(function(f){f.is||(i+=f.get||"")}),async function(){var f,u=await e.get("trust").get(t.pub).get(i).then();u=await l.decrypt(u,t),u||(u=l.random(16).toString(),f=await l.encrypt(u,t),e.get("trust").get(t.pub).get(i).put(f)),f=await l.encrypt(d,u),g.put(f,a)}(),g},c.exports=r})(n,"./share"),n(function(c){var r=n("./sea"),l=n("./settings"),s=function(){},p,d=""+p!=typeof window?window.Gun||{on:s}:n((""+p==typeof o?".":"")+"./gun",1);d.on("opt",function(u){u.sea||(u.sea={own:{}},u.on("put",a,u)),this.to.next(u)});function a(u){var _=this,w=_.as,v=u.put,h=v["#"],m=v["."],x=v[":"],k=v[">"],D=u["#"],j;if(!(!h||!m)){if((u._||"").faith&&(w.opt||"").faith&&typeof u._=="function"){r.opt.pack(v,function(E){r.verify(E,!1,function(P){v["="]=r.opt.unpack(P),_.to.next(u)})});return}var B=function(E){w.on("in",{"@":D,err:u.err=E})};if((u._||"").DBG&&((u._||"").DBG.c=+new Date),0<=h.indexOf("<?")&&(j=parseFloat(h.split("<?")[1]||""),j&&k<d.state()-j*1e3)){(j=u._)&&j.stun&&j.stun--;return}if(h==="~@"){a.alias(_,u,x,m,h,w,B);return}if(h.slice(0,2)==="~@"){a.pubs(_,u,x,m,h,w,B);return}if(j=r.opt.pub(h)){a.pub(_,u,x,m,h,w,B,w.user||"",j);return}if(0<=h.indexOf("#")){a.hash(_,u,x,m,h,w,B);return}a.any(_,u,x,m,h,w,B,w.user||"")}}a.hash=function(u,_,w,v,h,m,x){r.work(w,null,function(k){if(k&&k===v.split("#").slice(-1)[0])return u.to.next(_);x("Data hash not same as hash!")},{name:"SHA-256"})},a.alias=function(u,_,w,v,h,m,x){if(!w)return x("Data must exist!");if("~@"+v===e(w))return u.to.next(_);x("Alias not same!")},a.pubs=function(u,_,w,v,h,m,x){if(!w)return x("Alias must exist!");if(v===e(w))return u.to.next(_);x("Alias not same!")},a.pub=async function(u,_,w,v,h,m,x,k,D){var j;const B=await l.parse(w)||{},E=(P,S,T)=>{if(P.m&&P.s&&S&&D)return r.verify(P,D,I=>{if(p!==I&&p!==I.e&&_.put[">"]&&_.put[">"]>parseFloat(I.e))return x("Certificate expired.");if(p!==I&&I.c&&I.w&&(I.c===S||I.c.indexOf("*")>-1)){let L=h.indexOf("/")>-1?h.replace(h.substring(0,h.indexOf("/")+1),""):"";String.match=String.match||d.text.match;const M=Array.isArray(I.w)?I.w:typeof I.w=="object"||typeof I.w=="string"?[I.w]:[];for(const G of M)if(String.match(L,G["#"])&&String.match(v,G["."])||!G["."]&&String.match(L,G["#"])||!G["#"]&&String.match(v,G["."])||String.match(L?L+"/"+v:v,G["#"]||G)){if(G["+"]&&G["+"].indexOf("*")>-1&&L&&L.indexOf(S)==-1&&v.indexOf(S)==-1)return x(`Path "${L}" or key "${v}" must contain string "${S}".`);if(I.wb&&(typeof I.wb=="string"||(I.wb||{})["#"])){var C=u.as.root.$.back(-1);return typeof I.wb=="string"&&I.wb.slice(0,1)!=="~"&&(C=C.get("~"+D)),C.get(I.wb).get(S).once(J=>J&&(J===1||J===!0)?x(`Certificant ${S} blocked.`):T(I))}return T(I)}return x("Certificate verification fail.")}})};if(v==="pub"&&"~"+D===h)return w===D?u.to.next(_):x("Account not same!");if((j=k.is)&&j.pub&&!B["*"]&&!B["+"]&&(D===j.pub||D!==j.pub&&((_._.msg||{}).opt||{}).cert)){r.opt.pack(_.put,P=>{r.sign(P,k._.sea,async function(S){if(p===S)return x(r.err||"Signature fail.");if(_.put[":"]={":":j=r.opt.unpack(S.m),"~":S.s},_.put["="]=j,D===k.is.pub){(j=e(w))&&((m.sea.own[j]=m.sea.own[j]||{})[D]=1),JSON.stringifyAsync(_.put[":"],function(T,I){return T?x(T||"Stringify error."):(_.put[":"]=I,u.to.next(_))});return}if(D!==k.is.pub&&((_._.msg||{}).opt||{}).cert){const T=await l.parse(_._.msg.opt.cert);T&&T.m&&T.s&&E(T,k.is.pub,I=>{_.put[":"]["+"]=T,_.put[":"]["*"]=k.is.pub,JSON.stringifyAsync(_.put[":"],function(C,L){return C?x(C||"Stringify error."):(_.put[":"]=L,u.to.next(_))})})}},{raw:1})});return}r.opt.pack(_.put,P=>{r.verify(P,B["*"]||D,function(S){var T;if(S=r.opt.unpack(S),p===S)return x("Unverified data.");if((T=e(S))&&D===r.opt.pub(T)&&((m.sea.own[T]=m.sea.own[T]||{})[D]=1),B["+"]&&B["+"].m&&B["+"].s&&B["*"])E(B["+"],B["*"],I=>(_.put["="]=S,u.to.next(_)));else return _.put["="]=S,u.to.next(_)})})},a.any=function(u,_,w,v,h,m,x,k){if(m.opt.secure)return x("Soul missing public key at '"+v+"'.");m.on("secure",function(D){if(this.off(),!m.opt.secure)return u.to.next(D);x("Data cannot be changed.")}).on.on("secure",_)};var g=d.valid,e=function(u,_){return typeof(_=g(u))=="string"&&_};(d.state||"").ify;var t=/[^\w_-]/;r.opt.pub=function(u){if(!!u&&(u=u.split("~"),!(!u||!(u=u[1]))&&(u=u.split(t).slice(0,2),!(!u||u.length!=2)&&(u[0]||"")[0]!=="@")))return u=u.slice(0,2).join("."),u},r.opt.stringy=function(u){},r.opt.pack=function(u,_,w,v,h){var m,x;if(r.opt.check(u))return _(u);u&&u["#"]&&u["."]&&u[">"]&&(m=u[":"],x=1),JSON.parseAsync(x?m:u,function(k,D){var j=p!==(D||"")[":"]&&(D||"")["~"];if(!j){_(u);return}_({m:{"#":h||u["#"],".":w||u["."],":":(D||"")[":"],">":u[">"]||d.state.is(v,w)},s:j})})};var i=r.opt;r.opt.unpack=function(u,_,w){var v;if(p!==u){if(u&&p!==(v=u[":"]))return v;if(_=_||i.fall_key,!w&&i.fall_val&&(w={},w[_]=i.fall_val),!(!_||!w)){if(u===w[_]||!r.opt.check(w[_]))return u;var h=w&&w._&&w._["#"]||i.fall_soul,m=d.state.is(w,_)||i.fall_state;if(u&&u.length===4&&h===u[0]&&_===u[1]&&f(m)===f(u[3]))return u[2];if(m<r.opt.shuffle_attack)return u}}},r.opt.shuffle_attack=15463296e5;var f=Math.floor})(n,"./index")})()})(Er);var Ir={exports:{}};(function(y){(function(){function n(c,r){return r?ve(c):c.slice?n[l(c)]:function(s,p){c(s={exports:{}}),n[l(p)]=s.exports};function l(s){return s.split("/").slice(-1).toString().replace(".js","")}}var o=y;n(function(c){typeof window!="undefined"&&(c.window=window);var r=c.window||c,l=r.AXE||function(){};(l.window=c.window)&&(l.window.AXE=l);try{typeof o!="undefined"&&(o.exports=l)}catch{}c.exports=l})(n,"./root"),n(function(c){var r=n("./root"),l=(r.window||"").Gun||n("./gun",1);if((l.AXE=r).GUN=r.Gun=l,!l.window)try{n("./lib/axe",1)}catch{}l.on("opt",function(p){s(p),this.to.next(p)});function s(p){if(!p.axe){var d=p.opt,a=d.peers;if(d.axe!==!1&&!(typeof process!="undefined"&&""+(process.env||"").AXE=="false")&&!!l.window){p.axe={};var g,e;g=a[e="http://localhost:8765/gun"]=a[e]||{},g.id=g.url=e,g.retry=g.retry||0,console.log("AXE enabled: Trying to find network via (1) local peer (2) last used peers (3) hard coded peers."),console.log("Warning: AXE alpha became super slow & laggy, now in testing only mode!");var t=JSON.parse((localStorage||"")[(d.file||"")+"axe/"]||null)||{};Object.keys(t.peers||"").forEach(function(f){g=a[e=f]=a[e]||{},g.id=g.url=e}),g=a[e="https://ovh.era.eco/gun"]=a[e]||{},g.id=g.url=e;var i=d.mesh=d.mesh||l.Mesh(p);i.way=function(f){if(p.$===f.$||(f._||"").via){i.say(f,d.peers);return}var u=(f.$||"")._;if(!u){i.say(f,d.peers);return}if(f.get){if(u.axe)return;u.axe={}}i.say(f,d.peers)}}}}c.exports=r})(n,"./axe")})()})(Ir);var Ft={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(y,n){(function(o){y.exports=o()})(function(){return function o(c,r,l){function s(a,g){if(!r[a]){if(!c[a]){var e=typeof ve=="function"&&ve;if(!g&&e)return e(a,!0);if(p)return p(a,!0);var t=new Error("Cannot find module '"+a+"'");throw t.code="MODULE_NOT_FOUND",t}var i=r[a]={exports:{}};c[a][0].call(i.exports,function(f){var u=c[a][1][f];return s(u||f)},i,i.exports,o,c,r,l)}return r[a].exports}for(var p=typeof ve=="function"&&ve,d=0;d<l.length;d++)s(l[d]);return s}({1:[function(o,c,r){(function(l){var s=l.MutationObserver||l.WebKitMutationObserver,p;if(s){var d=0,a=new s(f),g=l.document.createTextNode("");a.observe(g,{characterData:!0}),p=function(){g.data=d=++d%2}}else if(!l.setImmediate&&typeof l.MessageChannel!="undefined"){var e=new l.MessageChannel;e.port1.onmessage=f,p=function(){e.port2.postMessage(0)}}else"document"in l&&"onreadystatechange"in l.document.createElement("script")?p=function(){var _=l.document.createElement("script");_.onreadystatechange=function(){f(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},l.document.documentElement.appendChild(_)}:p=function(){setTimeout(f,0)};var t,i=[];function f(){t=!0;for(var _,w,v=i.length;v;){for(w=i,i=[],_=-1;++_<v;)w[_]();v=i.length}t=!1}c.exports=u;function u(_){i.push(_)===1&&!t&&p()}}).call(this,typeof ce!="undefined"?ce:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(o,c,r){var l=o(1);function s(){}var p={},d=["REJECTED"],a=["FULFILLED"],g=["PENDING"];c.exports=e;function e(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,x!==s&&u(this,x)}e.prototype.catch=function(x){return this.then(null,x)},e.prototype.then=function(x,k){if(typeof x!="function"&&this.state===a||typeof k!="function"&&this.state===d)return this;var D=new this.constructor(s);if(this.state!==g){var j=this.state===a?x:k;i(D,j,this.outcome)}else this.queue.push(new t(D,x,k));return D};function t(x,k,D){this.promise=x,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}t.prototype.callFulfilled=function(x){p.resolve(this.promise,x)},t.prototype.otherCallFulfilled=function(x){i(this.promise,this.onFulfilled,x)},t.prototype.callRejected=function(x){p.reject(this.promise,x)},t.prototype.otherCallRejected=function(x){i(this.promise,this.onRejected,x)};function i(x,k,D){l(function(){var j;try{j=k(D)}catch(B){return p.reject(x,B)}j===x?p.reject(x,new TypeError("Cannot resolve promise with itself")):p.resolve(x,j)})}p.resolve=function(x,k){var D=_(f,k);if(D.status==="error")return p.reject(x,D.value);var j=D.value;if(j)u(x,j);else{x.state=a,x.outcome=k;for(var B=-1,E=x.queue.length;++B<E;)x.queue[B].callFulfilled(k)}return x},p.reject=function(x,k){x.state=d,x.outcome=k;for(var D=-1,j=x.queue.length;++D<j;)x.queue[D].callRejected(k);return x};function f(x){var k=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof k=="function")return function(){k.apply(x,arguments)}}function u(x,k){var D=!1;function j(S){D||(D=!0,p.reject(x,S))}function B(S){D||(D=!0,p.resolve(x,S))}function E(){k(B,j)}var P=_(E);P.status==="error"&&j(P.value)}function _(x,k){var D={};try{D.value=x(k),D.status="success"}catch(j){D.status="error",D.value=j}return D}e.resolve=w;function w(x){return x instanceof this?x:p.resolve(new this(s),x)}e.reject=v;function v(x){var k=new this(s);return p.reject(k,x)}e.all=h;function h(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=x.length,j=!1;if(!D)return this.resolve([]);for(var B=new Array(D),E=0,P=-1,S=new this(s);++P<D;)T(x[P],P);return S;function T(I,C){k.resolve(I).then(L,function(M){j||(j=!0,p.reject(S,M))});function L(M){B[C]=M,++E===D&&!j&&(j=!0,p.resolve(S,B))}}}e.race=m;function m(x){var k=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=x.length,j=!1;if(!D)return this.resolve([]);for(var B=-1,E=new this(s);++B<D;)P(x[B]);return E;function P(S){k.resolve(S).then(function(T){j||(j=!0,p.resolve(E,T))},function(T){j||(j=!0,p.reject(E,T))})}}},{"1":1}],3:[function(o,c,r){(function(l){typeof l.Promise!="function"&&(l.Promise=o(2))}).call(this,typeof ce!="undefined"?ce:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(o,c,r){var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};function s(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function p(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var d=p();function a(){try{if(!d||!d.open)return!1;var b=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),O=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!b||O)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function g(b,O){b=b||[],O=O||{};try{return new Blob(b,O)}catch($){if($.name!=="TypeError")throw $;for(var A=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,N=new A,R=0;R<b.length;R+=1)N.append(b[R]);return N.getBlob(O.type)}}typeof Promise=="undefined"&&o(3);var e=Promise;function t(b,O){O&&b.then(function(A){O(null,A)},function(A){O(A)})}function i(b,O,A){typeof O=="function"&&b.then(O),typeof A=="function"&&b.catch(A)}function f(b){return typeof b!="string"&&(console.warn(b+" used as a key, but it is not a string."),b=String(b)),b}function u(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var _="local-forage-detect-blob-support",w=void 0,v={},h=Object.prototype.toString,m="readonly",x="readwrite";function k(b){for(var O=b.length,A=new ArrayBuffer(O),N=new Uint8Array(A),R=0;R<O;R++)N[R]=b.charCodeAt(R);return A}function D(b){return new e(function(O){var A=b.transaction(_,x),N=g([""]);A.objectStore(_).put(N,"key"),A.onabort=function(R){R.preventDefault(),R.stopPropagation(),O(!1)},A.oncomplete=function(){var R=navigator.userAgent.match(/Chrome\/(\d+)/),$=navigator.userAgent.match(/Edge\//);O($||!R||parseInt(R[1],10)>=43)}}).catch(function(){return!1})}function j(b){return typeof w=="boolean"?e.resolve(w):D(b).then(function(O){return w=O,w})}function B(b){var O=v[b.name],A={};A.promise=new e(function(N,R){A.resolve=N,A.reject=R}),O.deferredOperations.push(A),O.dbReady?O.dbReady=O.dbReady.then(function(){return A.promise}):O.dbReady=A.promise}function E(b){var O=v[b.name],A=O.deferredOperations.pop();if(A)return A.resolve(),A.promise}function P(b,O){var A=v[b.name],N=A.deferredOperations.pop();if(N)return N.reject(O),N.promise}function S(b,O){return new e(function(A,N){if(v[b.name]=v[b.name]||Z(),b.db)if(O)B(b),b.db.close();else return A(b.db);var R=[b.name];O&&R.push(b.version);var $=d.open.apply(d,R);O&&($.onupgradeneeded=function(F){var H=$.result;try{H.createObjectStore(b.storeName),F.oldVersion<=1&&H.createObjectStore(_)}catch(U){if(U.name==="ConstraintError")console.warn('The database "'+b.name+'" has been upgraded from version '+F.oldVersion+" to version "+F.newVersion+', but the storage "'+b.storeName+'" already exists.');else throw U}}),$.onerror=function(F){F.preventDefault(),N($.error)},$.onsuccess=function(){var F=$.result;F.onversionchange=function(H){H.target.close()},A(F),E(b)}})}function T(b){return S(b,!1)}function I(b){return S(b,!0)}function C(b,O){if(!b.db)return!0;var A=!b.db.objectStoreNames.contains(b.storeName),N=b.version<b.db.version,R=b.version>b.db.version;if(N&&(b.version!==O&&console.warn('The database "'+b.name+`" can't be downgraded from version `+b.db.version+" to version "+b.version+"."),b.version=b.db.version),R||A){if(A){var $=b.db.version+1;$>b.version&&(b.version=$)}return!0}return!1}function L(b){return new e(function(O,A){var N=new FileReader;N.onerror=A,N.onloadend=function(R){var $=btoa(R.target.result||"");O({__local_forage_encoded_blob:!0,data:$,type:b.type})},N.readAsBinaryString(b)})}function M(b){var O=k(atob(b.data));return g([O],{type:b.type})}function G(b){return b&&b.__local_forage_encoded_blob}function J(b){var O=this,A=O._initReady().then(function(){var N=v[O._dbInfo.name];if(N&&N.dbReady)return N.dbReady});return i(A,b,b),A}function Y(b){B(b);for(var O=v[b.name],A=O.forages,N=0;N<A.length;N++){var R=A[N];R._dbInfo.db&&(R._dbInfo.db.close(),R._dbInfo.db=null)}return b.db=null,T(b).then(function($){return b.db=$,C(b)?I(b):$}).then(function($){b.db=O.db=$;for(var F=0;F<A.length;F++)A[F]._dbInfo.db=$}).catch(function($){throw P(b,$),$})}function K(b,O,A,N){N===void 0&&(N=1);try{var R=b.db.transaction(b.storeName,O);A(null,R)}catch($){if(N>0&&(!b.db||$.name==="InvalidStateError"||$.name==="NotFoundError"))return e.resolve().then(function(){if(!b.db||$.name==="NotFoundError"&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),I(b)}).then(function(){return Y(b).then(function(){K(b,O,A,N-1)})}).catch(A);A($)}}function Z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function te(b){var O=this,A={db:null};if(b)for(var N in b)A[N]=b[N];var R=v[A.name];R||(R=Z(),v[A.name]=R),R.forages.push(O),O._initReady||(O._initReady=O.ready,O.ready=J);var $=[];function F(){return e.resolve()}for(var H=0;H<R.forages.length;H++){var U=R.forages[H];U!==O&&$.push(U._initReady().catch(F))}var W=R.forages.slice(0);return e.all($).then(function(){return A.db=R.db,T(A)}).then(function(V){return A.db=V,C(A,O._defaultConfig.version)?I(A):V}).then(function(V){A.db=R.db=V,O._dbInfo=A;for(var X=0;X<W.length;X++){var q=W[X];q!==O&&(q._dbInfo.db=A.db,q._dbInfo.version=A.version)}})}function fe(b,O){var A=this;b=f(b);var N=new e(function(R,$){A.ready().then(function(){K(A._dbInfo,m,function(F,H){if(F)return $(F);try{var U=H.objectStore(A._dbInfo.storeName),W=U.get(b);W.onsuccess=function(){var V=W.result;V===void 0&&(V=null),G(V)&&(V=M(V)),R(V)},W.onerror=function(){$(W.error)}}catch(V){$(V)}})}).catch($)});return t(N,O),N}function ue(b,O){var A=this,N=new e(function(R,$){A.ready().then(function(){K(A._dbInfo,m,function(F,H){if(F)return $(F);try{var U=H.objectStore(A._dbInfo.storeName),W=U.openCursor(),V=1;W.onsuccess=function(){var X=W.result;if(X){var q=X.value;G(q)&&(q=M(q));var z=b(q,X.key,V++);z!==void 0?R(z):X.continue()}else R()},W.onerror=function(){$(W.error)}}catch(X){$(X)}})}).catch($)});return t(N,O),N}function ye(b,O,A){var N=this;b=f(b);var R=new e(function($,F){var H;N.ready().then(function(){return H=N._dbInfo,h.call(O)==="[object Blob]"?j(H.db).then(function(U){return U?O:L(O)}):O}).then(function(U){K(N._dbInfo,x,function(W,V){if(W)return F(W);try{var X=V.objectStore(N._dbInfo.storeName);U===null&&(U=void 0);var q=X.put(U,b);V.oncomplete=function(){U===void 0&&(U=null),$(U)},V.onabort=V.onerror=function(){var z=q.error?q.error:q.transaction.error;F(z)}}catch(z){F(z)}})}).catch(F)});return t(R,A),R}function Ie(b,O){var A=this;b=f(b);var N=new e(function(R,$){A.ready().then(function(){K(A._dbInfo,x,function(F,H){if(F)return $(F);try{var U=H.objectStore(A._dbInfo.storeName),W=U.delete(b);H.oncomplete=function(){R()},H.onerror=function(){$(W.error)},H.onabort=function(){var V=W.error?W.error:W.transaction.error;$(V)}}catch(V){$(V)}})}).catch($)});return t(N,O),N}function le(b){var O=this,A=new e(function(N,R){O.ready().then(function(){K(O._dbInfo,x,function($,F){if($)return R($);try{var H=F.objectStore(O._dbInfo.storeName),U=H.clear();F.oncomplete=function(){N()},F.onabort=F.onerror=function(){var W=U.error?U.error:U.transaction.error;R(W)}}catch(W){R(W)}})}).catch(R)});return t(A,b),A}function me(b){var O=this,A=new e(function(N,R){O.ready().then(function(){K(O._dbInfo,m,function($,F){if($)return R($);try{var H=F.objectStore(O._dbInfo.storeName),U=H.count();U.onsuccess=function(){N(U.result)},U.onerror=function(){R(U.error)}}catch(W){R(W)}})}).catch(R)});return t(A,b),A}function Oe(b,O){var A=this,N=new e(function(R,$){if(b<0){R(null);return}A.ready().then(function(){K(A._dbInfo,m,function(F,H){if(F)return $(F);try{var U=H.objectStore(A._dbInfo.storeName),W=!1,V=U.openKeyCursor();V.onsuccess=function(){var X=V.result;if(!X){R(null);return}b===0||W?R(X.key):(W=!0,X.advance(b))},V.onerror=function(){$(V.error)}}catch(X){$(X)}})}).catch($)});return t(N,O),N}function Ht(b){var O=this,A=new e(function(N,R){O.ready().then(function(){K(O._dbInfo,m,function($,F){if($)return R($);try{var H=F.objectStore(O._dbInfo.storeName),U=H.openKeyCursor(),W=[];U.onsuccess=function(){var V=U.result;if(!V){N(W);return}W.push(V.key),V.continue()},U.onerror=function(){R(U.error)}}catch(V){R(V)}})}).catch(R)});return t(A,b),A}function Ut(b,O){O=u.apply(this,arguments);var A=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||A.name,b.storeName=b.storeName||A.storeName);var N=this,R;if(!b.name)R=e.reject("Invalid arguments");else{var $=b.name===A.name&&N._dbInfo.db,F=$?e.resolve(N._dbInfo.db):T(b).then(function(H){var U=v[b.name],W=U.forages;U.db=H;for(var V=0;V<W.length;V++)W[V]._dbInfo.db=H;return H});b.storeName?R=F.then(function(H){if(!!H.objectStoreNames.contains(b.storeName)){var U=H.version+1;B(b);var W=v[b.name],V=W.forages;H.close();for(var X=0;X<V.length;X++){var q=V[X];q._dbInfo.db=null,q._dbInfo.version=U}var z=new e(function(ee,re){var ne=d.open(b.name,U);ne.onerror=function(se){var Te=ne.result;Te.close(),re(se)},ne.onupgradeneeded=function(){var se=ne.result;se.deleteObjectStore(b.storeName)},ne.onsuccess=function(){var se=ne.result;se.close(),ee(se)}});return z.then(function(ee){W.db=ee;for(var re=0;re<V.length;re++){var ne=V[re];ne._dbInfo.db=ee,E(ne._dbInfo)}}).catch(function(ee){throw(P(b,ee)||e.resolve()).catch(function(){}),ee})}}):R=F.then(function(H){B(b);var U=v[b.name],W=U.forages;H.close();for(var V=0;V<W.length;V++){var X=W[V];X._dbInfo.db=null}var q=new e(function(z,ee){var re=d.deleteDatabase(b.name);re.onerror=function(){var ne=re.result;ne&&ne.close(),ee(re.error)},re.onblocked=function(){console.warn('dropInstance blocked for database "'+b.name+'" until all open connections are closed')},re.onsuccess=function(){var ne=re.result;ne&&ne.close(),z(ne)}});return q.then(function(z){U.db=z;for(var ee=0;ee<W.length;ee++){var re=W[ee];E(re._dbInfo)}}).catch(function(z){throw(P(b,z)||e.resolve()).catch(function(){}),z})})}return t(R,O),R}var Wt={_driver:"asyncStorage",_initStorage:te,_support:a(),iterate:ue,getItem:fe,setItem:ye,removeItem:Ie,clear:le,length:me,key:Oe,keys:Ht,dropInstance:Ut};function Vt(){return typeof openDatabase=="function"}var de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jt="~~local_forage_type~",ft=/^~~local_forage_type~([^~]+)~/,De="__lfsc__:",Le=De.length,He="arbf",Ue="blob",st="si08",ct="ui08",lt="uic8",dt="si16",pt="si32",ht="ur16",_t="ui32",vt="fl32",yt="fl64",mt=Le+He.length,gt=Object.prototype.toString;function wt(b){var O=b.length*.75,A=b.length,N,R=0,$,F,H,U;b[b.length-1]==="="&&(O--,b[b.length-2]==="="&&O--);var W=new ArrayBuffer(O),V=new Uint8Array(W);for(N=0;N<A;N+=4)$=de.indexOf(b[N]),F=de.indexOf(b[N+1]),H=de.indexOf(b[N+2]),U=de.indexOf(b[N+3]),V[R++]=$<<2|F>>4,V[R++]=(F&15)<<4|H>>2,V[R++]=(H&3)<<6|U&63;return W}function We(b){var O=new Uint8Array(b),A="",N;for(N=0;N<O.length;N+=3)A+=de[O[N]>>2],A+=de[(O[N]&3)<<4|O[N+1]>>4],A+=de[(O[N+1]&15)<<2|O[N+2]>>6],A+=de[O[N+2]&63];return O.length%3==2?A=A.substring(0,A.length-1)+"=":O.length%3==1&&(A=A.substring(0,A.length-2)+"=="),A}function Yt(b,O){var A="";if(b&&(A=gt.call(b)),b&&(A==="[object ArrayBuffer]"||b.buffer&&gt.call(b.buffer)==="[object ArrayBuffer]")){var N,R=De;b instanceof ArrayBuffer?(N=b,R+=He):(N=b.buffer,A==="[object Int8Array]"?R+=st:A==="[object Uint8Array]"?R+=ct:A==="[object Uint8ClampedArray]"?R+=lt:A==="[object Int16Array]"?R+=dt:A==="[object Uint16Array]"?R+=ht:A==="[object Int32Array]"?R+=pt:A==="[object Uint32Array]"?R+=_t:A==="[object Float32Array]"?R+=vt:A==="[object Float64Array]"?R+=yt:O(new Error("Failed to get type for BinaryArray"))),O(R+We(N))}else if(A==="[object Blob]"){var $=new FileReader;$.onload=function(){var F=Jt+b.type+"~"+We(this.result);O(De+Ue+F)},$.readAsArrayBuffer(b)}else try{O(JSON.stringify(b))}catch(F){console.error("Couldn't convert value into a JSON string: ",b),O(null,F)}}function Kt(b){if(b.substring(0,Le)!==De)return JSON.parse(b);var O=b.substring(mt),A=b.substring(Le,mt),N;if(A===Ue&&ft.test(O)){var R=O.match(ft);N=R[1],O=O.substring(R[0].length)}var $=wt(O);switch(A){case He:return $;case Ue:return g([$],{type:N});case st:return new Int8Array($);case ct:return new Uint8Array($);case lt:return new Uint8ClampedArray($);case dt:return new Int16Array($);case ht:return new Uint16Array($);case pt:return new Int32Array($);case _t:return new Uint32Array($);case vt:return new Float32Array($);case yt:return new Float64Array($);default:throw new Error("Unkown type: "+A)}}var Ve={serialize:Yt,deserialize:Kt,stringToBuffer:wt,bufferToString:We};function bt(b,O,A,N){b.executeSql("CREATE TABLE IF NOT EXISTS "+O.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,N)}function Xt(b){var O=this,A={db:null};if(b)for(var N in b)A[N]=typeof b[N]!="string"?b[N].toString():b[N];var R=new e(function($,F){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(H){return F(H)}A.db.transaction(function(H){bt(H,A,function(){O._dbInfo=A,$()},function(U,W){F(W)})},F)});return A.serializer=Ve,R}function pe(b,O,A,N,R,$){b.executeSql(A,N,R,function(F,H){H.code===H.SYNTAX_ERR?F.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[O.storeName],function(U,W){W.rows.length?$(U,H):bt(U,O,function(){U.executeSql(A,N,R,$)},$)},$):$(F,H)},$)}function qt(b,O){var A=this;b=f(b);var N=new e(function(R,$){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(H){pe(H,F,"SELECT * FROM "+F.storeName+" WHERE key = ? LIMIT 1",[b],function(U,W){var V=W.rows.length?W.rows.item(0).value:null;V&&(V=F.serializer.deserialize(V)),R(V)},function(U,W){$(W)})})}).catch($)});return t(N,O),N}function Qt(b,O){var A=this,N=new e(function(R,$){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(H){pe(H,F,"SELECT * FROM "+F.storeName,[],function(U,W){for(var V=W.rows,X=V.length,q=0;q<X;q++){var z=V.item(q),ee=z.value;if(ee&&(ee=F.serializer.deserialize(ee)),ee=b(ee,z.key,q+1),ee!==void 0){R(ee);return}}R()},function(U,W){$(W)})})}).catch($)});return t(N,O),N}function xt(b,O,A,N){var R=this;b=f(b);var $=new e(function(F,H){R.ready().then(function(){O===void 0&&(O=null);var U=O,W=R._dbInfo;W.serializer.serialize(O,function(V,X){X?H(X):W.db.transaction(function(q){pe(q,W,"INSERT OR REPLACE INTO "+W.storeName+" (key, value) VALUES (?, ?)",[b,V],function(){F(U)},function(z,ee){H(ee)})},function(q){if(q.code===q.QUOTA_ERR){if(N>0){F(xt.apply(R,[b,U,A,N-1]));return}H(q)}})})}).catch(H)});return t($,A),$}function Zt(b,O,A){return xt.apply(this,[b,O,A,1])}function zt(b,O){var A=this;b=f(b);var N=new e(function(R,$){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(H){pe(H,F,"DELETE FROM "+F.storeName+" WHERE key = ?",[b],function(){R()},function(U,W){$(W)})})}).catch($)});return t(N,O),N}function en(b){var O=this,A=new e(function(N,R){O.ready().then(function(){var $=O._dbInfo;$.db.transaction(function(F){pe(F,$,"DELETE FROM "+$.storeName,[],function(){N()},function(H,U){R(U)})})}).catch(R)});return t(A,b),A}function tn(b){var O=this,A=new e(function(N,R){O.ready().then(function(){var $=O._dbInfo;$.db.transaction(function(F){pe(F,$,"SELECT COUNT(key) as c FROM "+$.storeName,[],function(H,U){var W=U.rows.item(0).c;N(W)},function(H,U){R(U)})})}).catch(R)});return t(A,b),A}function nn(b,O){var A=this,N=new e(function(R,$){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(H){pe(H,F,"SELECT key FROM "+F.storeName+" WHERE id = ? LIMIT 1",[b+1],function(U,W){var V=W.rows.length?W.rows.item(0).key:null;R(V)},function(U,W){$(W)})})}).catch($)});return t(N,O),N}function rn(b){var O=this,A=new e(function(N,R){O.ready().then(function(){var $=O._dbInfo;$.db.transaction(function(F){pe(F,$,"SELECT key FROM "+$.storeName,[],function(H,U){for(var W=[],V=0;V<U.rows.length;V++)W.push(U.rows.item(V).key);N(W)},function(H,U){R(U)})})}).catch(R)});return t(A,b),A}function on(b){return new e(function(O,A){b.transaction(function(N){N.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(R,$){for(var F=[],H=0;H<$.rows.length;H++)F.push($.rows.item(H).name);O({db:b,storeNames:F})},function(R,$){A($)})},function(N){A(N)})})}function an(b,O){O=u.apply(this,arguments);var A=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||A.name,b.storeName=b.storeName||A.storeName);var N=this,R;return b.name?R=new e(function($){var F;b.name===A.name?F=N._dbInfo.db:F=openDatabase(b.name,"","",0),b.storeName?$({db:F,storeNames:[b.storeName]}):$(on(F))}).then(function($){return new e(function(F,H){$.db.transaction(function(U){function W(z){return new e(function(ee,re){U.executeSql("DROP TABLE IF EXISTS "+z,[],function(){ee()},function(ne,se){re(se)})})}for(var V=[],X=0,q=$.storeNames.length;X<q;X++)V.push(W($.storeNames[X]));e.all(V).then(function(){F()}).catch(function(z){H(z)})},function(U){H(U)})})}):R=e.reject("Invalid arguments"),t(R,O),R}var un={_driver:"webSQLStorage",_initStorage:Xt,_support:Vt(),iterate:Qt,getItem:qt,setItem:Zt,removeItem:zt,clear:en,length:tn,key:nn,keys:rn,dropInstance:an};function fn(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function At(b,O){var A=b.name+"/";return b.storeName!==O.storeName&&(A+=b.storeName+"/"),A}function sn(){var b="_localforage_support_test";try{return localStorage.setItem(b,!0),localStorage.removeItem(b),!1}catch{return!0}}function cn(){return!sn()||localStorage.length>0}function ln(b){var O=this,A={};if(b)for(var N in b)A[N]=b[N];return A.keyPrefix=At(b,O._defaultConfig),cn()?(O._dbInfo=A,A.serializer=Ve,e.resolve()):e.reject()}function dn(b){var O=this,A=O.ready().then(function(){for(var N=O._dbInfo.keyPrefix,R=localStorage.length-1;R>=0;R--){var $=localStorage.key(R);$.indexOf(N)===0&&localStorage.removeItem($)}});return t(A,b),A}function pn(b,O){var A=this;b=f(b);var N=A.ready().then(function(){var R=A._dbInfo,$=localStorage.getItem(R.keyPrefix+b);return $&&($=R.serializer.deserialize($)),$});return t(N,O),N}function hn(b,O){var A=this,N=A.ready().then(function(){for(var R=A._dbInfo,$=R.keyPrefix,F=$.length,H=localStorage.length,U=1,W=0;W<H;W++){var V=localStorage.key(W);if(V.indexOf($)===0){var X=localStorage.getItem(V);if(X&&(X=R.serializer.deserialize(X)),X=b(X,V.substring(F),U++),X!==void 0)return X}}});return t(N,O),N}function _n(b,O){var A=this,N=A.ready().then(function(){var R=A._dbInfo,$;try{$=localStorage.key(b)}catch{$=null}return $&&($=$.substring(R.keyPrefix.length)),$});return t(N,O),N}function vn(b){var O=this,A=O.ready().then(function(){for(var N=O._dbInfo,R=localStorage.length,$=[],F=0;F<R;F++){var H=localStorage.key(F);H.indexOf(N.keyPrefix)===0&&$.push(H.substring(N.keyPrefix.length))}return $});return t(A,b),A}function yn(b){var O=this,A=O.keys().then(function(N){return N.length});return t(A,b),A}function mn(b,O){var A=this;b=f(b);var N=A.ready().then(function(){var R=A._dbInfo;localStorage.removeItem(R.keyPrefix+b)});return t(N,O),N}function gn(b,O,A){var N=this;b=f(b);var R=N.ready().then(function(){O===void 0&&(O=null);var $=O;return new e(function(F,H){var U=N._dbInfo;U.serializer.serialize(O,function(W,V){if(V)H(V);else try{localStorage.setItem(U.keyPrefix+b,W),F($)}catch(X){(X.name==="QuotaExceededError"||X.name==="NS_ERROR_DOM_QUOTA_REACHED")&&H(X),H(X)}})})});return t(R,A),R}function wn(b,O){if(O=u.apply(this,arguments),b=typeof b!="function"&&b||{},!b.name){var A=this.config();b.name=b.name||A.name,b.storeName=b.storeName||A.storeName}var N=this,R;return b.name?R=new e(function($){b.storeName?$(At(b,N._defaultConfig)):$(b.name+"/")}).then(function($){for(var F=localStorage.length-1;F>=0;F--){var H=localStorage.key(F);H.indexOf($)===0&&localStorage.removeItem(H)}}):R=e.reject("Invalid arguments"),t(R,O),R}var bn={_driver:"localStorageWrapper",_initStorage:ln,_support:fn(),iterate:hn,getItem:pn,setItem:gn,removeItem:mn,clear:dn,length:yn,key:_n,keys:vn,dropInstance:wn},xn=function(O,A){return O===A||typeof O=="number"&&typeof A=="number"&&isNaN(O)&&isNaN(A)},An=function(O,A){for(var N=O.length,R=0;R<N;){if(xn(O[R],A))return!0;R++}return!1},St=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},Se={},Tt={},ge={INDEXEDDB:Wt,WEBSQL:un,LOCALSTORAGE:bn},Sn=[ge.INDEXEDDB._driver,ge.WEBSQL._driver,ge.LOCALSTORAGE._driver],je=["dropInstance"],Je=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(je),Tn={description:"",driver:Sn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function kn(b,O){b[O]=function(){var A=arguments;return b.ready().then(function(){return b[O].apply(b,A)})}}function Ye(){for(var b=1;b<arguments.length;b++){var O=arguments[b];if(O)for(var A in O)O.hasOwnProperty(A)&&(St(O[A])?arguments[0][A]=O[A].slice():arguments[0][A]=O[A])}return arguments[0]}var En=function(){function b(O){s(this,b);for(var A in ge)if(ge.hasOwnProperty(A)){var N=ge[A],R=N._driver;this[A]=R,Se[R]||this.defineDriver(N)}this._defaultConfig=Ye({},Tn),this._config=Ye({},this._defaultConfig,O),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return b.prototype.config=function(A){if((typeof A=="undefined"?"undefined":l(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var N in A){if(N==="storeName"&&(A[N]=A[N].replace(/\W/g,"_")),N==="version"&&typeof A[N]!="number")return new Error("Database version must be a number.");this._config[N]=A[N]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},b.prototype.defineDriver=function(A,N,R){var $=new e(function(F,H){try{var U=A._driver,W=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){H(W);return}for(var V=Je.concat("_initStorage"),X=0,q=V.length;X<q;X++){var z=V[X],ee=!An(je,z);if((ee||A[z])&&typeof A[z]!="function"){H(W);return}}var re=function(){for(var Te=function(Dn){return function(){var jn=new Error("Method "+Dn+" is not implemented by the current driver"),kt=e.reject(jn);return t(kt,arguments[arguments.length-1]),kt}},Ke=0,On=je.length;Ke<On;Ke++){var Xe=je[Ke];A[Xe]||(A[Xe]=Te(Xe))}};re();var ne=function(Te){Se[U]&&console.info("Redefining LocalForage driver: "+U),Se[U]=A,Tt[U]=Te,F()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(ne,H):ne(!!A._support):ne(!0)}catch(se){H(se)}});return i($,N,R),$},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(A,N,R){var $=Se[A]?e.resolve(Se[A]):e.reject(new Error("Driver not found."));return i($,N,R),$},b.prototype.getSerializer=function(A){var N=e.resolve(Ve);return i(N,A),N},b.prototype.ready=function(A){var N=this,R=N._driverSet.then(function(){return N._ready===null&&(N._ready=N._initDriver()),N._ready});return i(R,A,A),R},b.prototype.setDriver=function(A,N,R){var $=this;St(A)||(A=[A]);var F=this._getSupportedDrivers(A);function H(){$._config.driver=$.driver()}function U(X){return $._extend(X),H(),$._ready=$._initStorage($._config),$._ready}function W(X){return function(){var q=0;function z(){for(;q<X.length;){var ee=X[q];return q++,$._dbInfo=null,$._ready=null,$.getDriver(ee).then(U).catch(z)}H();var re=new Error("No available storage method found.");return $._driverSet=e.reject(re),$._driverSet}return z()}}var V=this._driverSet!==null?this._driverSet.catch(function(){return e.resolve()}):e.resolve();return this._driverSet=V.then(function(){var X=F[0];return $._dbInfo=null,$._ready=null,$.getDriver(X).then(function(q){$._driver=q._driver,H(),$._wrapLibraryMethodsWithReady(),$._initDriver=W(F)})}).catch(function(){H();var X=new Error("No available storage method found.");return $._driverSet=e.reject(X),$._driverSet}),i(this._driverSet,N,R),this._driverSet},b.prototype.supports=function(A){return!!Tt[A]},b.prototype._extend=function(A){Ye(this,A)},b.prototype._getSupportedDrivers=function(A){for(var N=[],R=0,$=A.length;R<$;R++){var F=A[R];this.supports(F)&&N.push(F)}return N},b.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,N=Je.length;A<N;A++)kn(this,Je[A])},b.prototype.createInstance=function(A){return new b(A)},b}(),In=new En;c.exports=In},{"3":3}]},{},[4])(4)})})(Ft);var ki=Ft.exports,Fe,Or=new Uint8Array(16);function Dr(){if(!Fe&&(Fe=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Fe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fe(Or)}var jr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $r(y){return typeof y=="string"&&jr.test(y)}var ae=[];for(var ut=0;ut<256;++ut)ae.push((ut+256).toString(16).substr(1));function Nr(y){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=(ae[y[n+0]]+ae[y[n+1]]+ae[y[n+2]]+ae[y[n+3]]+"-"+ae[y[n+4]]+ae[y[n+5]]+"-"+ae[y[n+6]]+ae[y[n+7]]+"-"+ae[y[n+8]]+ae[y[n+9]]+"-"+ae[y[n+10]]+ae[y[n+11]]+ae[y[n+12]]+ae[y[n+13]]+ae[y[n+14]]+ae[y[n+15]]).toLowerCase();if(!$r(o))throw TypeError("Stringified UUID is invalid");return o}function Ei(y,n,o){y=y||{};var c=y.random||(y.rng||Dr)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,n){o=o||0;for(var r=0;r<16;++r)n[o+r]=c[r];return n}return Nr(c)}var Lt={exports:{}};(function(y){var n=Object.prototype.hasOwnProperty,o="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(o=!1));function r(d,a,g){this.fn=d,this.context=a,this.once=g||!1}function l(d,a,g,e,t){if(typeof g!="function")throw new TypeError("The listener must be a function");var i=new r(g,e||d,t),f=o?o+a:a;return d._events[f]?d._events[f].fn?d._events[f]=[d._events[f],i]:d._events[f].push(i):(d._events[f]=i,d._eventsCount++),d}function s(d,a){--d._eventsCount==0?d._events=new c:delete d._events[a]}function p(){this._events=new c,this._eventsCount=0}p.prototype.eventNames=function(){var a=[],g,e;if(this._eventsCount===0)return a;for(e in g=this._events)n.call(g,e)&&a.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(g)):a},p.prototype.listeners=function(a){var g=o?o+a:a,e=this._events[g];if(!e)return[];if(e.fn)return[e.fn];for(var t=0,i=e.length,f=new Array(i);t<i;t++)f[t]=e[t].fn;return f},p.prototype.listenerCount=function(a){var g=o?o+a:a,e=this._events[g];return e?e.fn?1:e.length:0},p.prototype.emit=function(a,g,e,t,i,f){var u=o?o+a:a;if(!this._events[u])return!1;var _=this._events[u],w=arguments.length,v,h;if(_.fn){switch(_.once&&this.removeListener(a,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,g),!0;case 3:return _.fn.call(_.context,g,e),!0;case 4:return _.fn.call(_.context,g,e,t),!0;case 5:return _.fn.call(_.context,g,e,t,i),!0;case 6:return _.fn.call(_.context,g,e,t,i,f),!0}for(h=1,v=new Array(w-1);h<w;h++)v[h-1]=arguments[h];_.fn.apply(_.context,v)}else{var m=_.length,x;for(h=0;h<m;h++)switch(_[h].once&&this.removeListener(a,_[h].fn,void 0,!0),w){case 1:_[h].fn.call(_[h].context);break;case 2:_[h].fn.call(_[h].context,g);break;case 3:_[h].fn.call(_[h].context,g,e);break;case 4:_[h].fn.call(_[h].context,g,e,t);break;default:if(!v)for(x=1,v=new Array(w-1);x<w;x++)v[x-1]=arguments[x];_[h].fn.apply(_[h].context,v)}}return!0},p.prototype.on=function(a,g,e){return l(this,a,g,e,!1)},p.prototype.once=function(a,g,e){return l(this,a,g,e,!0)},p.prototype.removeListener=function(a,g,e,t){var i=o?o+a:a;if(!this._events[i])return this;if(!g)return s(this,i),this;var f=this._events[i];if(f.fn)f.fn===g&&(!t||f.once)&&(!e||f.context===e)&&s(this,i);else{for(var u=0,_=[],w=f.length;u<w;u++)(f[u].fn!==g||t&&!f[u].once||e&&f[u].context!==e)&&_.push(f[u]);_.length?this._events[i]=_.length===1?_[0]:_:s(this,i)}return this},p.prototype.removeAllListeners=function(a){var g;return a?(g=o?o+a:a,this._events[g]&&s(this,g)):(this._events=new c,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=o,p.EventEmitter=p,y.exports=p})(Lt);var Ii=Lt.exports,Br={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(y){(function(){var n=function(){this.init()};n.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||g(),typeof e!="undefined"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var f=t._howls[i]._getSoundIds(),u=0;u<f.length;u++){var _=t._howls[i]._soundById(f[u]);_&&_._node&&(_._node.volume=_._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||g(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var f=t._howls[i]._getSoundIds(),u=0;u<f.length;u++){var _=t._howls[i]._soundById(f[u]);_&&_._node&&(_._node.muted=e?!0:_._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close!="undefined"&&(e.ctx.close(),e.ctx=null,g()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio!="undefined")try{var t=new Audio;typeof t.oncanplaythrough=="undefined"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t=typeof Audio!="undefined"?new Audio:null}catch{return e}if(!t||typeof t.canPlayType!="function")return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),f=e._navigator?e._navigator.userAgent:"",u=f.match(/OPR\/([0-6].)/g),_=u&&parseInt(u[0].split("/")[1],10)<33,w=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,v=f.match(/Version\/(.*?) /),h=w&&v&&parseInt(v[1],10)<15;return e._codecs={mp3:!!(!_&&(i||t.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!h&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!h&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(i){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,e._releaseHtml5Audio(f)}catch{e.noAudio=!0;break}for(var u=0;u<e._howls.length;u++)if(!e._howls[u]._webAudio)for(var _=e._howls[u]._getSoundIds(),w=0;w<_.length;w++){var v=e._howls[u]._soundById(_[w]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}e._autoResume();var h=e.ctx.createBufferSource();h.buffer=e._scratchBuffer,h.connect(e.ctx.destination),typeof h.start=="undefined"?h.noteOn(0):h.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),h.onended=function(){h.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var m=0;m<e._howls.length;m++)e._howls[m]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&typeof Promise!="undefined"&&(t instanceof Promise||typeof t.then=="function")&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend=="undefined"||!o.usingWebAudio)){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(!!e.autoSuspend){e._suspendTimer=null,e.state="suspending";var f=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(f,f)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume=="undefined"||!o.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var o=new n,c=function(e){var t=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}t.init(e)};c.prototype={init:function(e){var t=this;return o.ctx||g(),t._autoplay=e.autoplay||!1,t._format=typeof e.format!="string"?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src=typeof e.src!="string"?e.src:[e.src],t._volume=e.volume!==void 0?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,typeof o.ctx!="undefined"&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t._preload!=="none"&&t.load(),t},load:function(){var e=this,t=null;if(o.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var f,u;if(e._format&&e._format[i])f=e._format[i];else{if(u=e._src[i],typeof u!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(u),f||(f=/\.([^.]+)$/.exec(u.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&o.codecs(f)){t=e._src[i];break}}if(!t){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=t,e._state="loading",window.location.protocol==="https:"&&t.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new r(e),e._webAudio&&s(e),e},play:function(e,t){var i=this,f=null;if(typeof e=="number")f=e,e=null;else{if(typeof e=="string"&&i._state==="loaded"&&!i._sprite[e])return null;if(typeof e=="undefined"&&(e="__default",!i._playLock)){for(var u=0,_=0;_<i._sounds.length;_++)i._sounds[_]._paused&&!i._sounds[_]._ended&&(u++,f=i._sounds[_]._id);u===1?e=null:f=null}}var w=f?i._soundById(f):i._inactiveSound();if(!w)return null;if(f&&!e&&(e=w._sprite||"__default"),i._state!=="loaded"){w._sprite=e,w._ended=!1;var v=w._id;return i._queue.push({event:"play",action:function(){i.play(v)}}),v}if(f&&!w._paused)return t||i._loadQueue("play"),w._id;i._webAudio&&o._autoResume();var h=Math.max(0,w._seek>0?w._seek:i._sprite[e][0]/1e3),m=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-h),x=m*1e3/Math.abs(w._rate),k=i._sprite[e][0]/1e3,D=(i._sprite[e][0]+i._sprite[e][1])/1e3;w._sprite=e,w._ended=!1;var j=function(){w._paused=!1,w._seek=h,w._start=k,w._stop=D,w._loop=!!(w._loop||i._sprite[e][2])};if(h>=D){i._ended(w);return}var B=w._node;if(i._webAudio){var E=function(){i._playLock=!1,j(),i._refreshBuffer(w);var I=w._muted||i._muted?0:w._volume;B.gain.setValueAtTime(I,o.ctx.currentTime),w._playStart=o.ctx.currentTime,typeof B.bufferSource.start=="undefined"?w._loop?B.bufferSource.noteGrainOn(0,h,86400):B.bufferSource.noteGrainOn(0,h,m):w._loop?B.bufferSource.start(0,h,86400):B.bufferSource.start(0,h,m),x!==1/0&&(i._endTimers[w._id]=setTimeout(i._ended.bind(i,w),x)),t||setTimeout(function(){i._emit("play",w._id),i._loadQueue()},0)};o.state==="running"&&o.ctx.state!=="interrupted"?E():(i._playLock=!0,i.once("resume",E),i._clearTimer(w._id))}else{var P=function(){B.currentTime=h,B.muted=w._muted||i._muted||o._muted||B.muted,B.volume=w._volume*o.volume(),B.playbackRate=w._rate;try{var I=B.play();if(I&&typeof Promise!="undefined"&&(I instanceof Promise||typeof I.then=="function")?(i._playLock=!0,j(),I.then(function(){i._playLock=!1,B._unlocked=!0,t?i._loadQueue():i._emit("play",w._id)}).catch(function(){i._playLock=!1,i._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),w._ended=!0,w._paused=!0})):t||(i._playLock=!1,j(),i._emit("play",w._id)),B.playbackRate=w._rate,B.paused){i._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||w._loop?i._endTimers[w._id]=setTimeout(i._ended.bind(i,w),x):(i._endTimers[w._id]=function(){i._ended(w),B.removeEventListener("ended",i._endTimers[w._id],!1)},B.addEventListener("ended",i._endTimers[w._id],!1))}catch(C){i._emit("playerror",w._id,C)}};B.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(B.src=i._src,B.load());var S=window&&window.ejecta||!B.readyState&&o._navigator.isCocoonJS;if(B.readyState>=3||S)P();else{i._playLock=!0,i._state="loading";var T=function(){i._state="loaded",P(),B.removeEventListener(o._canPlayEvent,T,!1)};B.addEventListener(o._canPlayEvent,T,!1),i._clearTimer(w._id)}}return w._id},pause:function(e){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),f=0;f<i.length;f++){t._clearTimer(i[f]);var u=t._soundById(i[f]);if(u&&!u._paused&&(u._seek=t.seek(i[f]),u._rateSeek=0,u._paused=!0,t._stopFade(i[f]),u._node))if(t._webAudio){if(!u._node.bufferSource)continue;typeof u._node.bufferSource.stop=="undefined"?u._node.bufferSource.noteOff(0):u._node.bufferSource.stop(0),t._cleanBuffer(u._node)}else(!isNaN(u._node.duration)||u._node.duration===1/0)&&u._node.pause();arguments[1]||t._emit("pause",u?u._id:null)}return t},stop:function(e,t){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var f=i._getSoundIds(e),u=0;u<f.length;u++){i._clearTimer(f[u]);var _=i._soundById(f[u]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,i._stopFade(f[u]),_._node&&(i._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop=="undefined"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),i._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&i._clearSound(_._node))),t||i._emit("stop",_._id))}return i},mute:function(e,t){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(typeof t=="undefined")if(typeof e=="boolean")i._muted=e;else return i._muted;for(var f=i._getSoundIds(t),u=0;u<f.length;u++){var _=i._soundById(f[u]);_&&(_._muted=e,_._interval&&i._stopFade(_._id),i._webAudio&&_._node?_._node.gain.setValueAtTime(e?0:_._volume,o.ctx.currentTime):_._node&&(_._node.muted=o._muted?!0:e),i._emit("mute",_._id))}return i},volume:function(){var e=this,t=arguments,i,f;if(t.length===0)return e._volume;if(t.length===1||t.length===2&&typeof t[1]=="undefined"){var u=e._getSoundIds(),_=u.indexOf(t[0]);_>=0?f=parseInt(t[0],10):i=parseFloat(t[0])}else t.length>=2&&(i=parseFloat(t[0]),f=parseInt(t[1],10));var w;if(typeof i!="undefined"&&i>=0&&i<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;typeof f=="undefined"&&(e._volume=i),f=e._getSoundIds(f);for(var v=0;v<f.length;v++)w=e._soundById(f[v]),w&&(w._volume=i,t[2]||e._stopFade(f[v]),e._webAudio&&w._node&&!w._muted?w._node.gain.setValueAtTime(i,o.ctx.currentTime):w._node&&!w._muted&&(w._node.volume=i*o.volume()),e._emit("volume",w._id))}else return w=f?e._soundById(f):e._sounds[0],w?w._volume:0;return e},fade:function(e,t,i,f){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"fade",action:function(){u.fade(e,t,i,f)}}),u;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),i=parseFloat(i),u.volume(e,f);for(var _=u._getSoundIds(f),w=0;w<_.length;w++){var v=u._soundById(_[w]);if(v){if(f||u._stopFade(_[w]),u._webAudio&&!v._muted){var h=o.ctx.currentTime,m=h+i/1e3;v._volume=e,v._node.gain.setValueAtTime(e,h),v._node.gain.linearRampToValueAtTime(t,m)}u._startFadeInterval(v,e,t,i,_[w],typeof f=="undefined")}}return u},_startFadeInterval:function(e,t,i,f,u,_){var w=this,v=t,h=i-t,m=Math.abs(h/.01),x=Math.max(4,m>0?f/m:f),k=Date.now();e._fadeTo=i,e._interval=setInterval(function(){var D=(Date.now()-k)/f;k=Date.now(),v+=h*D,v=Math.round(v*100)/100,h<0?v=Math.max(i,v):v=Math.min(i,v),w._webAudio?e._volume=v:w.volume(v,e._id,!0),_&&(w._volume=v),(i<t&&v<=i||i>t&&v>=i)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,w.volume(i,e._id),w._emit("fade",e._id))},x)},_stopFade:function(e){var t=this,i=t._soundById(e);return i&&i._interval&&(t._webAudio&&i._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(i._interval),i._interval=null,t.volume(i._fadeTo,e),i._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e=this,t=arguments,i,f,u;if(t.length===0)return e._loop;if(t.length===1)if(typeof t[0]=="boolean")i=t[0],e._loop=i;else return u=e._soundById(parseInt(t[0],10)),u?u._loop:!1;else t.length===2&&(i=t[0],f=parseInt(t[1],10));for(var _=e._getSoundIds(f),w=0;w<_.length;w++)u=e._soundById(_[w]),u&&(u._loop=i,e._webAudio&&u._node&&u._node.bufferSource&&(u._node.bufferSource.loop=i,i&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop,e.playing(_[w])&&(e.pause(_[w],!0),e.play(_[w],!0)))));return e},rate:function(){var e=this,t=arguments,i,f;if(t.length===0)f=e._sounds[0]._id;else if(t.length===1){var u=e._getSoundIds(),_=u.indexOf(t[0]);_>=0?f=parseInt(t[0],10):i=parseFloat(t[0])}else t.length===2&&(i=parseFloat(t[0]),f=parseInt(t[1],10));var w;if(typeof i=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;typeof f=="undefined"&&(e._rate=i),f=e._getSoundIds(f);for(var v=0;v<f.length;v++)if(w=e._soundById(f[v]),w){e.playing(f[v])&&(w._rateSeek=e.seek(f[v]),w._playStart=e._webAudio?o.ctx.currentTime:w._playStart),w._rate=i,e._webAudio&&w._node&&w._node.bufferSource?w._node.bufferSource.playbackRate.setValueAtTime(i,o.ctx.currentTime):w._node&&(w._node.playbackRate=i);var h=e.seek(f[v]),m=(e._sprite[w._sprite][0]+e._sprite[w._sprite][1])/1e3-h,x=m*1e3/Math.abs(w._rate);(e._endTimers[f[v]]||!w._paused)&&(e._clearTimer(f[v]),e._endTimers[f[v]]=setTimeout(e._ended.bind(e,w),x)),e._emit("rate",w._id)}}else return w=e._soundById(f),w?w._rate:e._rate;return e},seek:function(){var e=this,t=arguments,i,f;if(t.length===0)e._sounds.length&&(f=e._sounds[0]._id);else if(t.length===1){var u=e._getSoundIds(),_=u.indexOf(t[0]);_>=0?f=parseInt(t[0],10):e._sounds.length&&(f=e._sounds[0]._id,i=parseFloat(t[0]))}else t.length===2&&(i=parseFloat(t[0]),f=parseInt(t[1],10));if(typeof f=="undefined")return 0;if(typeof i=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var w=e._soundById(f);if(w)if(typeof i=="number"&&i>=0){var v=e.playing(f);v&&e.pause(f,!0),w._seek=i,w._ended=!1,e._clearTimer(f),!e._webAudio&&w._node&&!isNaN(w._node.duration)&&(w._node.currentTime=i);var h=function(){v&&e.play(f,!0),e._emit("seek",f)};if(v&&!e._webAudio){var m=function(){e._playLock?setTimeout(m,0):h()};setTimeout(m,0)}else h()}else if(e._webAudio){var x=e.playing(f)?o.ctx.currentTime-w._playStart:0,k=w._rateSeek?w._rateSeek-w._seek:0;return w._seek+(k+x*Math.abs(w._rate))}else return w._node.currentTime;return e},playing:function(e){var t=this;if(typeof e=="number"){var i=t._soundById(e);return i?!i._paused:!1}for(var f=0;f<t._sounds.length;f++)if(!t._sounds[f]._paused)return!0;return!1},duration:function(e){var t=this,i=t._duration,f=t._soundById(e);return f&&(i=t._sprite[f._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(e._clearSound(t[i]._node),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(o._canPlayEvent,t[i]._loadFn,!1),t[i]._node.removeEventListener("ended",t[i]._endFn,!1),o._releaseHtml5Audio(t[i]._node)),delete t[i]._node,e._clearTimer(t[i]._id);var f=o._howls.indexOf(e);f>=0&&o._howls.splice(f,1);var u=!0;for(i=0;i<o._howls.length;i++)if(o._howls[i]._src===e._src||e._src.indexOf(o._howls[i]._src)>=0){u=!1;break}return l&&u&&delete l[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,f){var u=this,_=u["_on"+e];return typeof t=="function"&&_.push(f?{id:i,fn:t,once:f}:{id:i,fn:t}),u},off:function(e,t,i){var f=this,u=f["_on"+e],_=0;if(typeof t=="number"&&(i=t,t=null),t||i)for(_=0;_<u.length;_++){var w=i===u[_].id;if(t===u[_].fn&&w||!t&&w){u.splice(_,1);break}}else if(e)f["_on"+e]=[];else{var v=Object.keys(f);for(_=0;_<v.length;_++)v[_].indexOf("_on")===0&&Array.isArray(f[v[_]])&&(f[v[_]]=[])}return f},once:function(e,t,i){var f=this;return f.on(e,t,i,1),f},_emit:function(e,t,i){for(var f=this,u=f["_on"+e],_=u.length-1;_>=0;_--)(!u[_].id||u[_].id===t||e==="load")&&(setTimeout(function(w){w.call(this,t,i)}.bind(f,u[_].fn),0),u[_].once&&f.off(e,u[_].fn,u[_].id));return f._loadQueue(e),f},_loadQueue:function(e){var t=this;if(t._queue.length>0){var i=t._queue[0];i.event===e&&(t._queue.shift(),t._loadQueue()),e||i.action()}return t},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var f=!!(e._loop||t._sprite[i][2]);if(t._emit("end",e._id),!t._webAudio&&f&&t.stop(e._id,!0).play(e._id),t._webAudio&&f){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var u=(e._stop-e._start)*1e3/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),u)}return t._webAudio&&!f&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),o._autoSuspend()),!t._webAudio&&!f&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if(typeof t._endTimers[e]!="function")clearTimeout(t._endTimers[e]);else{var i=t._soundById(e);i&&i._node&&i._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,i=0;i<t._sounds.length;i++)if(e===t._sounds[i]._id)return t._sounds[i];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new r(e)},_drain:function(){var e=this,t=e._pool,i=0,f=0;if(!(e._sounds.length<t)){for(f=0;f<e._sounds.length;f++)e._sounds[f]._ended&&i++;for(f=e._sounds.length-1;f>=0;f--){if(i<=t)return;e._sounds[f]._ended&&(e._webAudio&&e._sounds[f]._node&&e._sounds[f]._node.disconnect(0),e._sounds.splice(f,1),i--)}}},_getSoundIds:function(e){var t=this;if(typeof e=="undefined"){for(var i=[],f=0;f<t._sounds.length;f++)i.push(t._sounds[f]._id);return i}else return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=l[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),t},_cleanBuffer:function(e){var t=this,i=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),i))try{e.bufferSource.buffer=o._scratchBuffer}catch{}return e.bufferSource=null,t},_clearSound:function(e){var t=/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent);t||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(e){this._parent=e,this.init()};r.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=o._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof o.ctx.createGain=="undefined"?o.ctx.createGainNode():o.ctx.createGain(),e._node.gain.setValueAtTime(i,o.ctx.currentTime),e._node.paused=!0,e._node.connect(o.masterGain)):o.noAudio||(e._node=o._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=t._preload===!0?"auto":t._preload,e._node.volume=i*o.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(e._node.duration*10)/10,Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(o._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(e._node.duration*10)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=t._duration*1e3),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},s=function(e){var t=e._src;if(l[t]){e._duration=l[t].duration,a(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),f=new Uint8Array(i.length),u=0;u<i.length;++u)f[u]=i.charCodeAt(u);d(f.buffer,e)}else{var _=new XMLHttpRequest;_.open(e._xhr.method,t,!0),_.withCredentials=e._xhr.withCredentials,_.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(w){_.setRequestHeader(w,e._xhr.headers[w])}),_.onload=function(){var w=(_.status+"")[0];if(w!=="0"&&w!=="2"&&w!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}d(_.response,e)},_.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},p(_)}},p=function(e){try{e.send()}catch{e.onerror()}},d=function(e,t){var i=function(){t._emit("loaderror",null,"Decoding audio data failed.")},f=function(u){u&&t._sounds.length>0?(l[t._src]=u,a(t,u)):i()};typeof Promise!="undefined"&&o.ctx.decodeAudioData.length===1?o.ctx.decodeAudioData(e).then(f).catch(i):o.ctx.decodeAudioData(e,f,i)},a=function(e,t){t&&!e._duration&&(e._duration=t.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},g=function(){if(!!o.usingWebAudio){try{typeof AudioContext!="undefined"?o.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch{o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var f=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!f&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=typeof o.ctx.createGain=="undefined"?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};y.Howler=o,y.Howl=c,typeof ce!="undefined"?(ce.HowlerGlobal=n,ce.Howler=o,ce.Howl=c,ce.Sound=r):typeof window!="undefined"&&(window.HowlerGlobal=n,window.Howler=o,window.Howl=c,window.Sound=r)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(o){var c=this;if(!c.ctx||!c.ctx.listener)return c;for(var r=c._howls.length-1;r>=0;r--)c._howls[r].stereo(o);return c},HowlerGlobal.prototype.pos=function(o,c,r){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(c=typeof c!="number"?l._pos[1]:c,r=typeof r!="number"?l._pos[2]:r,typeof o=="number")l._pos=[o,c,r],typeof l.ctx.listener.positionX!="undefined"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(o,c,r,l,s,p){var d=this;if(!d.ctx||!d.ctx.listener)return d;var a=d._orientation;if(c=typeof c!="number"?a[1]:c,r=typeof r!="number"?a[2]:r,l=typeof l!="number"?a[3]:l,s=typeof s!="number"?a[4]:s,p=typeof p!="number"?a[5]:p,typeof o=="number")d._orientation=[o,c,r,l,s,p],typeof d.ctx.listener.forwardX!="undefined"?(d.ctx.listener.forwardX.setTargetAtTime(o,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(c,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(o,c,r,l,s,p);else return a;return d},Howl.prototype.init=function(o){return function(c){var r=this;return r._orientation=c.orientation||[1,0,0],r._stereo=c.stereo||null,r._pos=c.pos||null,r._pannerAttr={coneInnerAngle:typeof c.coneInnerAngle!="undefined"?c.coneInnerAngle:360,coneOuterAngle:typeof c.coneOuterAngle!="undefined"?c.coneOuterAngle:360,coneOuterGain:typeof c.coneOuterGain!="undefined"?c.coneOuterGain:0,distanceModel:typeof c.distanceModel!="undefined"?c.distanceModel:"inverse",maxDistance:typeof c.maxDistance!="undefined"?c.maxDistance:1e4,panningModel:typeof c.panningModel!="undefined"?c.panningModel:"HRTF",refDistance:typeof c.refDistance!="undefined"?c.refDistance:1,rolloffFactor:typeof c.rolloffFactor!="undefined"?c.rolloffFactor:1},r._onstereo=c.onstereo?[{fn:c.onstereo}]:[],r._onpos=c.onpos?[{fn:c.onpos}]:[],r._onorientation=c.onorientation?[{fn:c.onorientation}]:[],o.call(this,c)}}(Howl.prototype.init),Howl.prototype.stereo=function(o,c){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(o,c)}}),r;var l=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof c=="undefined")if(typeof o=="number")r._stereo=o,r._pos=[o,0,0];else return r._stereo;for(var s=r._getSoundIds(c),p=0;p<s.length;p++){var d=r._soundById(s[p]);if(d)if(typeof o=="number")d._stereo=o,d._pos=[o,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&n(d,l),l==="spatial"?typeof d._panner.positionX!="undefined"?(d._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(o,0,0):d._panner.pan.setValueAtTime(o,Howler.ctx.currentTime)),r._emit("stereo",d._id);else return d._stereo}return r},Howl.prototype.pos=function(o,c,r,l){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(o,c,r,l)}}),s;if(c=typeof c!="number"?0:c,r=typeof r!="number"?-.5:r,typeof l=="undefined")if(typeof o=="number")s._pos=[o,c,r];else return s._pos;for(var p=s._getSoundIds(l),d=0;d<p.length;d++){var a=s._soundById(p[d]);if(a)if(typeof o=="number")a._pos=[o,c,r],a._node&&((!a._panner||a._panner.pan)&&n(a,"spatial"),typeof a._panner.positionX!="undefined"?(a._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(c,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):a._panner.setPosition(o,c,r)),s._emit("pos",a._id);else return a._pos}return s},Howl.prototype.orientation=function(o,c,r,l){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(o,c,r,l)}}),s;if(c=typeof c!="number"?s._orientation[1]:c,r=typeof r!="number"?s._orientation[2]:r,typeof l=="undefined")if(typeof o=="number")s._orientation=[o,c,r];else return s._orientation;for(var p=s._getSoundIds(l),d=0;d<p.length;d++){var a=s._soundById(p[d]);if(a)if(typeof o=="number")a._orientation=[o,c,r],a._node&&(a._panner||(a._pos||(a._pos=s._pos||[0,0,-.5]),n(a,"spatial")),typeof a._panner.orientationX!="undefined"?(a._panner.orientationX.setValueAtTime(o,Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(c,Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):a._panner.setOrientation(o,c,r)),s._emit("orientation",a._id);else return a._orientation}return s},Howl.prototype.pannerAttr=function(){var o=this,c=arguments,r,l,s;if(!o._webAudio)return o;if(c.length===0)return o._pannerAttr;if(c.length===1)if(typeof c[0]=="object")r=c[0],typeof l=="undefined"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),o._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle!="undefined"?r.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle!="undefined"?r.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain!="undefined"?r.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel!="undefined"?r.pannerAttr.distanceModel:o._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance!="undefined"?r.pannerAttr.maxDistance:o._maxDistance,refDistance:typeof r.pannerAttr.refDistance!="undefined"?r.pannerAttr.refDistance:o._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor!="undefined"?r.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel!="undefined"?r.pannerAttr.panningModel:o._panningModel});else return s=o._soundById(parseInt(c[0],10)),s?s._pannerAttr:o._pannerAttr;else c.length===2&&(r=c[0],l=parseInt(c[1],10));for(var p=o._getSoundIds(l),d=0;d<p.length;d++)if(s=o._soundById(p[d]),s){var a=s._pannerAttr;a={coneInnerAngle:typeof r.coneInnerAngle!="undefined"?r.coneInnerAngle:a.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle!="undefined"?r.coneOuterAngle:a.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain!="undefined"?r.coneOuterGain:a.coneOuterGain,distanceModel:typeof r.distanceModel!="undefined"?r.distanceModel:a.distanceModel,maxDistance:typeof r.maxDistance!="undefined"?r.maxDistance:a.maxDistance,refDistance:typeof r.refDistance!="undefined"?r.refDistance:a.refDistance,rolloffFactor:typeof r.rolloffFactor!="undefined"?r.rolloffFactor:a.rolloffFactor,panningModel:typeof r.panningModel!="undefined"?r.panningModel:a.panningModel};var g=s._panner;g?(g.coneInnerAngle=a.coneInnerAngle,g.coneOuterAngle=a.coneOuterAngle,g.coneOuterGain=a.coneOuterGain,g.distanceModel=a.distanceModel,g.maxDistance=a.maxDistance,g.refDistance=a.refDistance,g.rolloffFactor=a.rolloffFactor,g.panningModel=a.panningModel):(s._pos||(s._pos=o._pos||[0,0,-.5]),n(s,"spatial"))}return o},Sound.prototype.init=function(o){return function(){var c=this,r=c._parent;c._orientation=r._orientation,c._stereo=r._stereo,c._pos=r._pos,c._pannerAttr=r._pannerAttr,o.call(this),c._stereo?r.stereo(c._stereo):c._pos&&r.pos(c._pos[0],c._pos[1],c._pos[2],c._id)}}(Sound.prototype.init),Sound.prototype.reset=function(o){return function(){var c=this,r=c._parent;return c._orientation=r._orientation,c._stereo=r._stereo,c._pos=r._pos,c._pannerAttr=r._pannerAttr,c._stereo?r.stereo(c._stereo):c._pos?r.pos(c._pos[0],c._pos[1],c._pos[2],c._id):c._panner&&(c._panner.disconnect(0),c._panner=void 0,r._refreshBuffer(c)),o.call(this)}}(Sound.prototype.reset);var n=function(o,c){c=c||"spatial",c==="spatial"?(o._panner=Howler.ctx.createPanner(),o._panner.coneInnerAngle=o._pannerAttr.coneInnerAngle,o._panner.coneOuterAngle=o._pannerAttr.coneOuterAngle,o._panner.coneOuterGain=o._pannerAttr.coneOuterGain,o._panner.distanceModel=o._pannerAttr.distanceModel,o._panner.maxDistance=o._pannerAttr.maxDistance,o._panner.refDistance=o._pannerAttr.refDistance,o._panner.rolloffFactor=o._pannerAttr.rolloffFactor,o._panner.panningModel=o._pannerAttr.panningModel,typeof o._panner.positionX!="undefined"?(o._panner.positionX.setValueAtTime(o._pos[0],Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(o._pos[1],Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(o._pos[2],Howler.ctx.currentTime)):o._panner.setPosition(o._pos[0],o._pos[1],o._pos[2]),typeof o._panner.orientationX!="undefined"?(o._panner.orientationX.setValueAtTime(o._orientation[0],Howler.ctx.currentTime),o._panner.orientationY.setValueAtTime(o._orientation[1],Howler.ctx.currentTime),o._panner.orientationZ.setValueAtTime(o._orientation[2],Howler.ctx.currentTime)):o._panner.setOrientation(o._orientation[0],o._orientation[1],o._orientation[2])):(o._panner=Howler.ctx.createStereoPanner(),o._panner.pan.setValueAtTime(o._stereo,Howler.ctx.currentTime)),o._panner.connect(o._node),o._paused||o._parent.pause(o._id,!0).play(o._id,!0)}})()})(Br);export{Cn as $,ii as A,Rn as B,xi as C,Gr as D,ri as E,Un as F,Lr as G,Hr as H,Fr as I,be as J,ei as K,Yr as L,ke as M,ni as N,Jn as O,Qr as P,hi as Q,pi as R,bi as S,Mr as T,Ai as U,Si as V,Rt as W,yi as X,fi as Y,di as Z,Kr as _,Yn as a,ti as a0,Wr as a1,at as a2,ui as a3,Ti as a4,Ii as a5,ki as a6,Ei as a7,Pr as a8,Br as a9,Xr as b,qr as c,Wn as d,Vn as e,Ur as f,Xn as g,zr as h,wi as i,mi as j,Vr as k,Jr as l,gi as m,Zr as n,zn as o,_i as p,vi as q,si as r,Pn as s,qe as t,li as u,er as v,ci as w,Pt as x,ai as y,oi as z};
