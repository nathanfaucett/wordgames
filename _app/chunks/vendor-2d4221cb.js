var Yr=Object.defineProperty,Xr=Object.defineProperties;var Jr=Object.getOwnPropertyDescriptors;var Tn=Object.getOwnPropertySymbols;var Kr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable;var Yt=(r,e,t)=>e in r?Yr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xt=(r,e)=>{for(var t in e||(e={}))Kr.call(e,t)&&Yt(r,t,e[t]);if(Tn)for(var t of Tn(e))zr.call(e,t)&&Yt(r,t,e[t]);return r},Jt=(r,e)=>Xr(r,Jr(e));var G=(r,e,t)=>(Yt(r,typeof e!="symbol"?e+"":e,t),t);function Ge(){}function Qr(r,e){for(const t in e)r[t]=e[t];return r}function Bn(r){return r()}function kn(){return Object.create(null)}function rt(r){r.forEach(Bn)}function jr(r){return typeof r=="function"}function Zr(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function ei(r){return Object.keys(r).length===0}function Rn(r,...e){if(r==null)return Ge;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function zo(r){let e;return Rn(r,t=>e=t)(),e}function Qo(r,e,t){r.$$.on_destroy.push(Rn(e,t))}function jo(r,e,t,i){if(r){const u=Nn(r,e,t,i);return r[0](u)}}function Nn(r,e,t,i){return r[1]&&i?Qr(t.ctx.slice(),r[1](i(e))):t.ctx}function Zo(r,e,t,i){if(r[2]&&i){const u=r[2](i(t));if(e.dirty===void 0)return u;if(typeof u=="object"){const m=[],p=Math.max(e.dirty.length,u.length);for(let h=0;h<p;h+=1)m[h]=e.dirty[h]|u[h];return m}return e.dirty|u}return e.dirty}function es(r,e,t,i,u,m){if(u){const p=Nn(e,t,i,m);r.p(p,u)}}function ts(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}let xt=!1;function ti(){xt=!0}function ni(){xt=!1}function ri(r,e,t,i){for(;r<e;){const u=r+(e-r>>1);t(u)<=i?r=u+1:e=u}return r}function ii(r){if(r.hydrate_init)return;r.hydrate_init=!0;let e=r.childNodes;if(r.nodeName==="HEAD"){const v=[];for(let A=0;A<e.length;A++){const N=e[A];N.claim_order!==void 0&&v.push(N)}e=v}const t=new Int32Array(e.length+1),i=new Int32Array(e.length);t[0]=-1;let u=0;for(let v=0;v<e.length;v++){const A=e[v].claim_order,N=(u>0&&e[t[u]].claim_order<=A?u+1:ri(1,u,a=>e[t[a]].claim_order,A))-1;i[v]=t[N]+1;const n=N+1;t[n]=v,u=Math.max(n,u)}const m=[],p=[];let h=e.length-1;for(let v=t[u]+1;v!=0;v=i[v-1]){for(m.push(e[v-1]);h>=v;h--)p.push(e[h]);h--}for(;h>=0;h--)p.push(e[h]);m.reverse(),p.sort((v,A)=>v.claim_order-A.claim_order);for(let v=0,A=0;v<p.length;v++){for(;A<m.length&&p[v].claim_order>=m[A].claim_order;)A++;const N=A<m.length?m[A]:null;r.insertBefore(p[v],N)}}function oi(r,e){if(xt){for(ii(r),(r.actual_end_child===void 0||r.actual_end_child!==null&&r.actual_end_child.parentElement!==r)&&(r.actual_end_child=r.firstChild);r.actual_end_child!==null&&r.actual_end_child.claim_order===void 0;)r.actual_end_child=r.actual_end_child.nextSibling;e!==r.actual_end_child?(e.claim_order!==void 0||e.parentNode!==r)&&r.insertBefore(e,r.actual_end_child):r.actual_end_child=e.nextSibling}else(e.parentNode!==r||e.nextSibling!==null)&&r.appendChild(e)}function ns(r,e,t){xt&&!t?oi(r,e):(e.parentNode!==r||e.nextSibling!=t)&&r.insertBefore(e,t||null)}function si(r){r.parentNode.removeChild(r)}function rs(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function ai(r){return document.createElement(r)}function ui(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Kt(r){return document.createTextNode(r)}function is(){return Kt(" ")}function os(){return Kt("")}function ss(r,e,t,i){return r.addEventListener(e,t,i),()=>r.removeEventListener(e,t,i)}function as(r){return function(e){return e.preventDefault(),r.call(this,e)}}function us(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function ci(r){return Array.from(r.childNodes)}function fi(r){r.claim_info===void 0&&(r.claim_info={last_index:0,total_claimed:0})}function Cn(r,e,t,i,u=!1){fi(r);const m=(()=>{for(let p=r.claim_info.last_index;p<r.length;p++){const h=r[p];if(e(h)){const v=t(h);return v===void 0?r.splice(p,1):r[p]=v,u||(r.claim_info.last_index=p),h}}for(let p=r.claim_info.last_index-1;p>=0;p--){const h=r[p];if(e(h)){const v=t(h);return v===void 0?r.splice(p,1):r[p]=v,u?v===void 0&&r.claim_info.last_index--:r.claim_info.last_index=p,h}}return i()})();return m.claim_order=r.claim_info.total_claimed,r.claim_info.total_claimed+=1,m}function On(r,e,t,i){return Cn(r,u=>u.nodeName===e,u=>{const m=[];for(let p=0;p<u.attributes.length;p++){const h=u.attributes[p];t[h.name]||m.push(h.name)}m.forEach(p=>u.removeAttribute(p))},()=>i(e))}function cs(r,e,t){return On(r,e,t,ai)}function fs(r,e,t){return On(r,e,t,ui)}function li(r,e){return Cn(r,t=>t.nodeType===3,t=>{const i=""+e;if(t.data.startsWith(i)){if(t.data.length!==i.length)return t.splitText(i.length)}else t.data=i},()=>Kt(e),!0)}function ls(r){return li(r," ")}function hs(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function ds(r,e){r.value=e==null?"":e}function ps(r,e){for(let t=0;t<r.options.length;t+=1){const i=r.options[t];if(i.__value===e){i.selected=!0;return}}r.selectedIndex=-1}function _s(r,e,t){r.classList[t?"add":"remove"](e)}function ms(r,e=document.body){return Array.from(e.querySelectorAll(r))}let bt;function At(r){bt=r}function zt(){if(!bt)throw new Error("Function called outside component initialization");return bt}function ys(r){zt().$$.on_mount.push(r)}function gs(r){zt().$$.after_update.push(r)}function vs(r,e){zt().$$.context.set(r,e)}function ws(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const it=[],Fn=[],Et=[],Qt=[],hi=Promise.resolve();let jt=!1;function di(){jt||(jt=!0,hi.then(Pn))}function Zt(r){Et.push(r)}function xs(r){Qt.push(r)}let en=!1;const tn=new Set;function Pn(){if(!en){en=!0;do{for(let r=0;r<it.length;r+=1){const e=it[r];At(e),pi(e.$$)}for(At(null),it.length=0;Fn.length;)Fn.pop()();for(let r=0;r<Et.length;r+=1){const e=Et[r];tn.has(e)||(tn.add(e),e())}Et.length=0}while(it.length);for(;Qt.length;)Qt.pop()();jt=!1,en=!1,tn.clear()}}function pi(r){if(r.fragment!==null){r.update(),rt(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Zt)}}const St=new Set;let Le;function bs(){Le={r:0,c:[],p:Le}}function As(){Le.r||rt(Le.c),Le=Le.p}function Dn(r,e){r&&r.i&&(St.delete(r),r.i(e))}function Es(r,e,t,i){if(r&&r.o){if(St.has(r))return;St.add(r),Le.c.push(()=>{St.delete(r),i&&(t&&r.d(1),i())}),r.o(e)}}const Ss=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Is(r,e){r.d(1),e.delete(r.key)}function Ts(r,e,t,i,u,m,p,h,v,A,N,n){let a=r.length,l=m.length,y=a;const T={};for(;y--;)T[r[y].key]=y;const S=[],I=new Map,D=new Map;for(y=l;y--;){const $=n(u,m,y),V=t($);let q=p.get(V);q?i&&q.p($,e):(q=A(V,$),q.c()),I.set(V,S[y]=q),V in T&&D.set(V,Math.abs(y-T[V]))}const M=new Set,X=new Set;function O($){Dn($,1),$.m(h,N),p.set($.key,$),N=$.first,l--}for(;a&&l;){const $=S[l-1],V=r[a-1],q=$.key,H=V.key;$===V?(N=$.first,a--,l--):I.has(H)?!p.has(q)||M.has(q)?O($):X.has(H)?a--:D.get(q)>D.get(H)?(X.add(q),O($)):(M.add(H),a--):(v(V,p),a--)}for(;a--;){const $=r[a];I.has($.key)||v($,p)}for(;l;)O(S[l-1]);return S}function Bs(r,e){const t={},i={},u={$$scope:1};let m=r.length;for(;m--;){const p=r[m],h=e[m];if(h){for(const v in p)v in h||(i[v]=1);for(const v in h)u[v]||(t[v]=h[v],u[v]=1);r[m]=h}else for(const v in p)u[v]=1}for(const p in i)p in t||(t[p]=void 0);return t}function ks(r){return typeof r=="object"&&r!==null?r:{}}function Rs(r,e,t){const i=r.$$.props[e];i!==void 0&&(r.$$.bound[i]=t,t(r.$$.ctx[i]))}function Ns(r){r&&r.c()}function Cs(r,e){r&&r.l(e)}function _i(r,e,t,i){const{fragment:u,on_mount:m,on_destroy:p,after_update:h}=r.$$;u&&u.m(e,t),i||Zt(()=>{const v=m.map(Bn).filter(jr);p?p.push(...v):rt(v),r.$$.on_mount=[]}),h.forEach(Zt)}function mi(r,e){const t=r.$$;t.fragment!==null&&(rt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function yi(r,e){r.$$.dirty[0]===-1&&(it.push(r),di(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Os(r,e,t,i,u,m,p,h=[-1]){const v=bt;At(r);const A=r.$$={fragment:null,ctx:null,props:m,update:Ge,not_equal:u,bound:kn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(v?v.$$.context:[])),callbacks:kn(),dirty:h,skip_bound:!1,root:e.target||v.$$.root};p&&p(A.root);let N=!1;if(A.ctx=t?t(r,e.props||{},(n,a,...l)=>{const y=l.length?l[0]:a;return A.ctx&&u(A.ctx[n],A.ctx[n]=y)&&(!A.skip_bound&&A.bound[n]&&A.bound[n](y),N&&yi(r,n)),a}):[],A.update(),N=!0,rt(A.before_update),A.fragment=i?i(A.ctx):!1,e.target){if(e.hydrate){ti();const n=ci(e.target);A.fragment&&A.fragment.l(n),n.forEach(si)}else A.fragment&&A.fragment.c();e.intro&&Dn(r.$$.fragment),_i(r,e.target,e.anchor,e.customElement),ni(),Pn()}At(v)}class Fs{$destroy(){mi(this,1),this.$destroy=Ge}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const u=i.indexOf(t);u!==-1&&i.splice(u,1)}}$set(e){this.$$set&&!ei(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ye=[];function Ps(r,e=Ge){let t;const i=new Set;function u(h){if(Zr(r,h)&&(r=h,t)){const v=!Ye.length;for(const A of i)A[1](),Ye.push(A,r);if(v){for(let A=0;A<Ye.length;A+=2)Ye[A][0](Ye[A+1]);Ye.length=0}}}function m(h){u(h(r))}function p(h,v=Ge){const A=[h,v];return i.add(A),i.size===1&&(t=e(u)||Ge),h(r),()=>{i.delete(A),i.size===0&&(t(),t=null)}}return{set:u,update:m,subscribe:p}}const Me=Math.pow(2,31)-1|0,nn={},It={};class Tt{constructor(e,t){if(e!==nn)throw new TypeError("Options can only be created with the some or none functions");this._value=t}static some(e){return le(e)}static none(){return he()}static from(e){return e!=null?le(e):he()}static fromJSON(e){return Tt.from(e)}isNone(){return this._value===It}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error(typeof e=="function"?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(e){return this.isSome()?le(e(this._value)):he()}mapOr(e,t){return this.isSome()?le(e(this._value)):le(t)}mapOrElse(e,t){return this.isSome()?le(e(this._value)):le(t())}flatMap(e){return this.isSome()?e(this._value):he()}flatMapOr(e,t){return this.isSome()?e(this._value):t}flatMapOrElse(e,t){return this.isSome()?e(this._value):t()}and(e){return this.isSome()?e:he()}andThen(e){return this.isSome()?e(this._value):he()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(e){const t=this.isSome(),i=e.isSome();return t&&!i?this:!t&&i?e:he()}filter(e){return this.isSome()&&e(this._value)?this:he()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}take(){if(this.isSome()){const e=this._value;return this._value=It,le(e)}else return he()}from(e){return e!=null?this._value=e:this.clear(),this}replace(e){return this._value=e,this}clear(){return this._value=It,this}ifSome(e,t){return this.isSome()?e(this._value):t&&t(),this}ifNone(e,t){return this.isNone()?e():t&&t(this._value),this}toJSON(){return this.unwrapOr(null)}toJS(){return this.unwrapOr(null)}}const le=r=>new Tt(nn,r),he=()=>new Tt(nn,It);class K{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(e){throw new Error("iter/ForEach was not imported!")}map(e){throw new Error("iter/Map was not imported!")}merge(e){throw new Error("iter/Merge was not imported!")}concat(e){return this.merge(e)}filter(e){throw new Error("iter/Filter was not imported!")}step(e){throw new Error("iter/Step was not imported!")}skip(e){throw new Error("iter/Skip was not imported!")}take(e){throw new Error("iter/Take was not imported!")}toMap(e,t){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,e=>e+1)}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],(e,t)=>(e.push(t),e))}join(e){return this.toArray().join(e)}indexOf(e){let t=this.next(),i=0;for(;!t.done;){if(t.value===e)return i;i++,t=this.next()}return-1}findIndex(e){let t=this.nextWithIndex();for(;!t.done;){const[i,u]=t.value;if(e(i,u))return u;t=this.nextWithIndex()}return-1}find(e){let t=this.nextWithIndex();for(;!t.done;){const[i,u]=t.value;if(e(i,u))return le(i);t=this.nextWithIndex()}return he()}findAll(e){return this.filter(e)}nth(e=0){let t=this.next();for(e<0&&(e=0);!t.done;){if(e--<=0)return le(t.value);t=this.next()}return he()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const t=this.next();if(t.done)return le(e.value);e=t}return he()}any(e){return this.findIndex(e)!==-1}some(e){return this.any(e)}none(e){return this.findIndex(e)===-1}all(e){let t=this.nextWithIndex();for(;!t.done;){const[i,u]=t.value;if(!e(i,u))return!1;t=this.nextWithIndex()}return!0}unflatten(e){throw new Error("iter/Unflatten was not imported!")}reduce(e,t){let i=this.next();for(;!i.done;){const u=i.value;e=t(e,u,this._index-1),i=this.next()}return e}reverse(){return Bt(this.toArray().reverse())}}function Bt(r){return r!=null?typeof r[Symbol.iterator]=="function"?new K(r[Symbol.iterator]()):typeof r.next=="function"?r instanceof K?r:new K(r):Bt(typeof r=="object"?Object.entries(r):[r]):Bt([])}class gi extends K{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:vi(e.value)}}}K.prototype.enumerate=function(){return new gi(this)};function vi(r){const e=r[0],t=r;return t[0]=r[1],t[1]=e,t}class wi extends K{constructor(e,t){super(e);this._fn=t}next(){let e=super.nextWithIndex();for(;!e.done;){const[t,i]=e.value;if(this._fn(t,i))return{done:!1,value:t};e=super.nextWithIndex()}return{done:!0,value:void 0}}}K.prototype.filter=function(e){return new wi(this,e)};class xi extends K{constructor(e,t){super(e);this._fn=([i,u])=>(t(i,u),i)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}K.prototype.forEach=function(e){return new xi(this,e)};class bi extends K{constructor(e,t){super(e);this._fn=([i,u])=>t(i,u)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}K.prototype.map=function(e){return new bi(this,e)};class Ai extends K{constructor(e,t){super(e);this._other=t}next(){const e=super.next();return e.done?this._other.next():e}}K.prototype.merge=function(e){return new Ai(this,e)};class Ei extends K{constructor(){super(...arguments);this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?le(this.peeked.shift()):he()}peek(e=0){if(e<this.peeked.length)return le(this.peeked[e]);{let t=this.peeked.length-e-1,i=super.next();for(;!i.done&&(this.peeked.push(i.value),!(--t<=0));)i=super.next();return i.done?he():le(i.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const t=super.next();return t.done?t:{done:!1,value:t.value}}}K.prototype.peekable=function(){return new Ei(this)};class Si extends K{constructor(e,t){super(e);this._skipped=0,this._skip=(t<=0?0:t)|0}next(){let e=super.next();for(;!e.done;)if(this._skipped<=this._skip)this._skipped+=1,e=super.next();else return e;return{done:!0,value:void 0}}}K.prototype.skip=function r(r){return new Si(this,r)};class Ii extends K{constructor(e,t){super(e);this._stepped=0,this._step=t<=0?1:t|0}next(){let e=super.next();for(;!e.done;)if(this._stepped<this._step)this._stepped+=1,e=super.next();else return this._stepped=0,e;return{done:!0,value:void 0}}}K.prototype.step=function r(r){return new Ii(this,r)};class Ti extends K{constructor(e,t){super(e);this._taken=0,this._count=(t<=0?0:t)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}K.prototype.take=function(e){return new Ti(this,e)};const Bi=r=>r,ki=r=>r;class Ri extends K{constructor(e,t=Bi,i=ki){super(e);this._map=([u,m])=>[t(u,m),i(u,m)]}toObject(){return this.reduce({},(e,t)=>(e[t[0]]=t[1],e))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}K.prototype.toMap=function(e,t){return new Ri(this,e,t)};class Ni extends K{constructor(e,t){super(e);this._fn=t}next(){return this._fn(this._iter)}}K.prototype.unflatten=function(e){return new Ni(this,e)};function Ci(r,e){return r[0]=(e&4278190080)>>24,r[1]=(e&16711680)>>16,r[2]=(e&65280)>>8,r[3]=e&255,r}class Oi extends K{constructor(e){super(e);this.rng=e}iter(){return new K(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class Fi extends K{constructor(e,t=0,i=1){super(e);this.rng=e,this.min=t,this.max=i}iter(){return new K(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class Pi extends K{constructor(e,t=0,i=Me){super(e);this.rng=e,this.min=t|0,this.max=i|0}iter(){return new K(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const Di=new Uint8Array(4);class rn{nextFloat(){return this.nextInt()/Me}nextFloatInRange(e=0,t=1){return e+this.nextFloat()*(t-e)}nextIntInRange(e=0,t=Me){return Math.round(this.nextFloatInRange(e,t))}shuffle(e){const t=e.length;for(let i=0;i<t;i++){const u=i+this.nextIntInRange(0,t-i-1),m=e[i];e[i]=e[u],e[u]=m}return e}fromArray(e){return e.length?le(e[this.nextIntInRange(0,e.length-1)]):he()}keyFromObject(e){return this.fromArray(Object.keys(e))}valueFromObject(e){return this.fromArray(Object.values(e))}fillBytes(e){const t=Di;for(let i=0,u=e.length;i<u;i++){const m=i%4;m===0&&Ci(t,this.nextInt()),e[i]=t[m]}return e}[Symbol.iterator](){return this}iter(){return new K(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new Oi(this)}uniformFloat(e=0,t=1){return new Fi(this,e,t)}uniformInt(e=0,t=Me){return new Pi(this,e,t)}}class Li extends rn{nextInt(){return Math.random()*Me|0}nextFloat(){return Math.random()}}class Ln extends rn{constructor(e=423257940){super();this.seed=e}setSeed(e=423257940){return this.seed=e,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%Me,this.seed&Me}}const Mi=new Ln;class on extends rn{constructor(e,t,i,u){super();this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(e,t,i,u)}static fromSeed(e){return new on().setSeed(e)}setSeed(e){const t=Mi.setSeed(e);return this.set(t.nextInt(),t.nextInt(),t.nextInt(),t.nextInt())}set(e=423257940,t=2829571177,i=2541948421,u=289122235){return this.x=e|0,this.y=t|0,this.z=i|0,this.w=u|0,this}nextInt(){const e=this.x,t=e^e<<11;this.x=this.y,this.y=this.z,this.z=this.w;const i=this.w;return this.w=i^i>>19^(t^t>>8),this.w}}new Ln;new on;const Ui=new Li;let $i=Ui;function Ds(){return $i.nextFloat()}var Xe;(function(r){r[r.Forward=0]="Forward",r[r.Backward=1]="Backward"})(Xe||(Xe={}));class sn{constructor(e,t,i=1){this.start=e,this.end=t,this.step=Math.abs(i),this.direction=e>t?Xe.Backward:Xe.Forward}static from(e,t,i=1){return new sn(e,t,i)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===Xe.Forward?this.start>this.end:this.start<this.end}iter(){return new K(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===Xe.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const Ls=sn.from;var Te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ot={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function u(v,A,N){this.fn=v,this.context=A,this.once=N||!1}function m(v,A,N,n,a){if(typeof N!="function")throw new TypeError("The listener must be a function");var l=new u(N,n||v,a),y=t?t+A:A;return v._events[y]?v._events[y].fn?v._events[y]=[v._events[y],l]:v._events[y].push(l):(v._events[y]=l,v._eventsCount++),v}function p(v,A){--v._eventsCount==0?v._events=new i:delete v._events[A]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var A=[],N,n;if(this._eventsCount===0)return A;for(n in N=this._events)e.call(N,n)&&A.push(t?n.slice(1):n);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(N)):A},h.prototype.listeners=function(A){var N=t?t+A:A,n=this._events[N];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,l=n.length,y=new Array(l);a<l;a++)y[a]=n[a].fn;return y},h.prototype.listenerCount=function(A){var N=t?t+A:A,n=this._events[N];return n?n.fn?1:n.length:0},h.prototype.emit=function(A,N,n,a,l,y){var T=t?t+A:A;if(!this._events[T])return!1;var S=this._events[T],I=arguments.length,D,M;if(S.fn){switch(S.once&&this.removeListener(A,S.fn,void 0,!0),I){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,N),!0;case 3:return S.fn.call(S.context,N,n),!0;case 4:return S.fn.call(S.context,N,n,a),!0;case 5:return S.fn.call(S.context,N,n,a,l),!0;case 6:return S.fn.call(S.context,N,n,a,l,y),!0}for(M=1,D=new Array(I-1);M<I;M++)D[M-1]=arguments[M];S.fn.apply(S.context,D)}else{var X=S.length,O;for(M=0;M<X;M++)switch(S[M].once&&this.removeListener(A,S[M].fn,void 0,!0),I){case 1:S[M].fn.call(S[M].context);break;case 2:S[M].fn.call(S[M].context,N);break;case 3:S[M].fn.call(S[M].context,N,n);break;case 4:S[M].fn.call(S[M].context,N,n,a);break;default:if(!D)for(O=1,D=new Array(I-1);O<I;O++)D[O-1]=arguments[O];S[M].fn.apply(S[M].context,D)}}return!0},h.prototype.on=function(A,N,n){return m(this,A,N,n,!1)},h.prototype.once=function(A,N,n){return m(this,A,N,n,!0)},h.prototype.removeListener=function(A,N,n,a){var l=t?t+A:A;if(!this._events[l])return this;if(!N)return p(this,l),this;var y=this._events[l];if(y.fn)y.fn===N&&(!a||y.once)&&(!n||y.context===n)&&p(this,l);else{for(var T=0,S=[],I=y.length;T<I;T++)(y[T].fn!==N||a&&!y[T].once||n&&y[T].context!==n)&&S.push(y[T]);S.length?this._events[l]=S.length===1?S[0]:S:p(this,l)}return this},h.prototype.removeAllListeners=function(A){var N;return A?(N=t?t+A:A,this._events[N]&&p(this,N)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,r.exports=h})(ot);var Ms=ot.exports;const Ue="/";class Mn{constructor(e,t,i,u){G(this,"graph");G(this,"parent");G(this,"key");G(this,"state");this.graph=e,this.parent=t,this.key=i,this.state=u}getValue(){return this.graph.getValueAtPath(this.getPath())}getPath(){return this.parent?this.parent.getPath()+Ue+this.key:this.key}toJSON(){return{state:this.state}}}class we extends Mn{constructor(){super(...arguments);G(this,"children",new Map)}toJSON(){const e={};for(const[t,i]of this.children)i instanceof we?e[t]={state:i.state,id:i.getPath()}:e[t]=i.toJSON();return Jt(Xt({},super.toJSON()),{children:e})}}class Je extends Mn{constructor(e,t,i,u,m){super(e,t,i,u);G(this,"value");this.value=m}getPath(){return this.value instanceof ye?this.value.getPath():super.getPath()}toJSON(){return this.value instanceof ye?this.value.toJSON():Jt(Xt({},super.toJSON()),{value:this.value})}}class ye{constructor(e,t,i){G(this,"graph");G(this,"path");G(this,"state");G(this,"waitMS");this.graph=e,this.path=t,this.state=i,this.waitMS=e.getWaitMS()}get(e){return new ye(this.graph,this.path+Ue+e,this.state)}set(e){return this.graph.set(this.path,e),this}getValue(){return this.graph.getValueAtPath(this.path)}getPath(){return this.path}getNode(){return this.graph.getNodeAtPath(this.path)}getState(){return this.state}on(e){let t=this.getNode();const i=m=>{const p=this.getNode();if(p){const h=p.getValue();t!==p&&(this.graph.listenAtPath(p.getPath(),h===void 0),t=p),m.startsWith(p.getPath())&&e(h)}else t=p};this.graph.on("change",i);const u=t==null?void 0:t.getValue();return this.graph.listenAtPath((t==null?void 0:t.getPath())||this.path,u===void 0),u!==void 0&&e(u),()=>{this.graph.off("change",i)}}getWaitMS(){return this.waitMS}setWaitMS(e){return this.waitMS=e,this}then(e,t){const i=this.getValue();let u;return i!==void 0?u=Promise.resolve(i):u=new Promise((m,p)=>{let h=!1;const v=this.on(A=>{h=!0,v(),m(A)});setTimeout(()=>{h||(p(new Error(`Request took longer than ${this.waitMS}ms to resolve`)),v())},this.waitMS)}),u.then(e,t)}toJSON(){return{id:this.path,state:this.state}}}class Us extends ot.exports.EventEmitter{constructor(){super(...arguments);G(this,"state",Date.now());G(this,"entries",new Map);G(this,"listeningPaths",new Set);G(this,"waitMS",5e3)}setWaitMS(e){return this.waitMS=e,this}getWaitMS(){return this.waitMS}getEntries(){return this.entries}get(e){return new ye(this,e,this.state)}getValueAtPath(e){const t=this.getNodeAtPath(e);let i;return t?(i=$n(this,t),i===void 0&&this.listenAtPath(e)):this.listenAtPath(e),i}getNodeAtPath(e){return Un(this,e,new Map)}set(e,t){return this.state=Date.now(),this.setPathInternal(e,t,this.state),this}merge(e,t){return this.isListening(e)&&this.mergePathInternal(e,t),this}listenAtPath(e,t=!0){return t&&this.emit("get",e),this.listeningPaths.add(e),this}isListening(e){for(const t of this.listeningPaths)if(e.startsWith(t))return!0;return!1}mergePathInternal(e,t){const i=t.state;let u=this.getNodeAtPath(e);if("children"in t){if(u instanceof Je?un(u.value,u.state,u.value,i)&&(u=this.createNodeAt(e,i),this.emit("change",u.getPath(),u.toJSON())):u||(u=this.createNodeAt(e,i),this.emit("change",u.getPath(),u.toJSON())),u instanceof we)for(const[m,p]of Object.entries(t.children))this.mergePathInternal(u.getPath()+Ue+m,p)}else{const m="value"in t?t.value:new ye(this,t.id,i);if(u instanceof Je)un(u.value,u.state,m,i)&&(u.value=m,u.state=i,this.emit("change",u.getPath(),u.toJSON()));else if(u instanceof we){if(un(new ye(this,u.getPath(),i),u.state,m,i)){const p=this.createEdgeAt(e,i);p.value=m,this.emit("change",p.getPath(),p.toJSON())}}else{const p=this.createEdgeAt(e,i);p.value=m,this.emit("change",p.getPath(),p.toJSON())}}return this}setPathInternal(e,t,i){if(t instanceof ye)this.setEdgePathInternal(e,t,i);else if(t!==null&&typeof t=="object")for(const[u,m]of Object.entries(t))this.setPathInternal(e+Ue+u,m,i);else this.setEdgePathInternal(e,t,i)}setEdgePathInternal(e,t,i){const u=this.createEdgeAt(e,i);u.value=t;const m=u.getPath(),p=u.toJSON();return this.emit("change",m,p),this.emit("set",m,p),u}createNodeAt(e,t){const i=e.split(Ue),u=i.shift();let m=this.entries.get(u);return m instanceof we||(m=new we(this,null,u,t),this.entries.set(u,m)),i.reduce((p,h)=>{const v=p.children.get(h);if(v instanceof we)return v;if(v instanceof Je&&v.value instanceof ye){const N=v.value.getNode();if(N instanceof we)return N}const A=new we(this,p,h,t);return p.children.set(h,A),A},m)}createEdgeAt(e,t){const[i,u]=Vi(e),m=i?this.createNodeAt(i,t):null;let p=m==null?void 0:m.children.get(u);return p instanceof Je?(p.state=t,p):(p=new Je(this,m,u,t,null),m?m==null||m.children.set(u,p):this.entries.set(u,p),p)}}function Vi(r){const e=r.lastIndexOf("/");return e===-1?[void 0,r]:[r.substring(0,e),r.substring(e+1)]}function Un(r,e,t){const i=t.get(e);if(i!==void 0)return i||void 0;{const u=e.split(Ue),m=u.shift(),p=r.getEntries().get(m);return p&&u.length?(t.set(m,p),an(r,m,p,u,t)):p}}function an(r,e,t,i,u=new Map){if(t instanceof we){const m=i.shift();if(m){const p=t.children.get(m),h=e+Ue+m;if(p)return u.set(h,p),an(r,h,p,i,u);u.set(h,null);return}else return u.set(e,t),t}else if(t.value instanceof ye){const m=t.value.getPath(),p=Un(r,m,u);if(p&&p!==t)return an(r,e,p,i,u);u.set(m,null);return}else return u.set(e,t),t}function $n(r,e,t=new Set){if(e)if(e instanceof we){const i={};for(const[u,m]of e.children){const p=m instanceof Je?m.value:i[u]=new ye(r,m.getPath(),m.state);i[u]=p}return i}else return e.value instanceof ye?t.has(e.value.getPath())?void 0:(t.add(e.value.getPath()),$n(r,e.value.getNode(),t)):e.value;else return}function un(r,e,t,i){return i>=e&&(e===i?JSON.stringify(t).length>JSON.stringify(r).length:!0)}var Vn={},Rt={};Rt.byteLength=Wi;Rt.toByteArray=Yi;Rt.fromByteArray=Ki;var Ae=[],ge=[],Hi=typeof Uint8Array!="undefined"?Uint8Array:Array,cn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ke=0,qi=cn.length;Ke<qi;++Ke)Ae[Ke]=cn[Ke],ge[cn.charCodeAt(Ke)]=Ke;ge["-".charCodeAt(0)]=62;ge["_".charCodeAt(0)]=63;function Hn(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function Wi(r){var e=Hn(r),t=e[0],i=e[1];return(t+i)*3/4-i}function Gi(r,e,t){return(e+t)*3/4-t}function Yi(r){var e,t=Hn(r),i=t[0],u=t[1],m=new Hi(Gi(r,i,u)),p=0,h=u>0?i-4:i,v;for(v=0;v<h;v+=4)e=ge[r.charCodeAt(v)]<<18|ge[r.charCodeAt(v+1)]<<12|ge[r.charCodeAt(v+2)]<<6|ge[r.charCodeAt(v+3)],m[p++]=e>>16&255,m[p++]=e>>8&255,m[p++]=e&255;return u===2&&(e=ge[r.charCodeAt(v)]<<2|ge[r.charCodeAt(v+1)]>>4,m[p++]=e&255),u===1&&(e=ge[r.charCodeAt(v)]<<10|ge[r.charCodeAt(v+1)]<<4|ge[r.charCodeAt(v+2)]>>2,m[p++]=e>>8&255,m[p++]=e&255),m}function Xi(r){return Ae[r>>18&63]+Ae[r>>12&63]+Ae[r>>6&63]+Ae[r&63]}function Ji(r,e,t){for(var i,u=[],m=e;m<t;m+=3)i=(r[m]<<16&16711680)+(r[m+1]<<8&65280)+(r[m+2]&255),u.push(Xi(i));return u.join("")}function Ki(r){for(var e,t=r.length,i=t%3,u=[],m=16383,p=0,h=t-i;p<h;p+=m)u.push(Ji(r,p,p+m>h?h:p+m));return i===1?(e=r[t-1],u.push(Ae[e>>2]+Ae[e<<4&63]+"==")):i===2&&(e=(r[t-2]<<8)+r[t-1],u.push(Ae[e>>10]+Ae[e>>4&63]+Ae[e<<2&63]+"=")),u.join("")}var fn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */fn.read=function(r,e,t,i,u){var m,p,h=u*8-i-1,v=(1<<h)-1,A=v>>1,N=-7,n=t?u-1:0,a=t?-1:1,l=r[e+n];for(n+=a,m=l&(1<<-N)-1,l>>=-N,N+=h;N>0;m=m*256+r[e+n],n+=a,N-=8);for(p=m&(1<<-N)-1,m>>=-N,N+=i;N>0;p=p*256+r[e+n],n+=a,N-=8);if(m===0)m=1-A;else{if(m===v)return p?NaN:(l?-1:1)*(1/0);p=p+Math.pow(2,i),m=m-A}return(l?-1:1)*p*Math.pow(2,m-i)};fn.write=function(r,e,t,i,u,m){var p,h,v,A=m*8-u-1,N=(1<<A)-1,n=N>>1,a=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=i?0:m-1,y=i?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,p=N):(p=Math.floor(Math.log(e)/Math.LN2),e*(v=Math.pow(2,-p))<1&&(p--,v*=2),p+n>=1?e+=a/v:e+=a*Math.pow(2,1-n),e*v>=2&&(p++,v/=2),p+n>=N?(h=0,p=N):p+n>=1?(h=(e*v-1)*Math.pow(2,u),p=p+n):(h=e*Math.pow(2,n-1)*Math.pow(2,u),p=0));u>=8;r[t+l]=h&255,l+=y,h/=256,u-=8);for(p=p<<u|h,A+=u;A>0;r[t+l]=p&255,l+=y,p/=256,A-=8);r[t+l-y]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Rt,t=fn,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;const u=2147483647;r.kMaxLength=u,h.TYPED_ARRAY_SUPPORT=m(),!h.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const c=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(c,o),c.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function p(c){if(c>u)throw new RangeError('The value "'+c+'" is invalid for option "size"');const o=new Uint8Array(c);return Object.setPrototypeOf(o,h.prototype),o}function h(c,o,s){if(typeof c=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return n(c)}return v(c,o,s)}h.poolSize=8192;function v(c,o,s){if(typeof c=="string")return a(c,o);if(ArrayBuffer.isView(c))return y(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(_e(c,ArrayBuffer)||c&&_e(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(_e(c,SharedArrayBuffer)||c&&_e(c.buffer,SharedArrayBuffer)))return T(c,o,s);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=c.valueOf&&c.valueOf();if(_!=null&&_!==c)return h.from(_,o,s);const x=S(c);if(x)return x;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return h.from(c[Symbol.toPrimitive]("string"),o,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}h.from=function(c,o,s){return v(c,o,s)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function A(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function N(c,o,s){return A(c),c<=0?p(c):o!==void 0?typeof s=="string"?p(c).fill(o,s):p(c).fill(o):p(c)}h.alloc=function(c,o,s){return N(c,o,s)};function n(c){return A(c),p(c<0?0:I(c)|0)}h.allocUnsafe=function(c){return n(c)},h.allocUnsafeSlow=function(c){return n(c)};function a(c,o){if((typeof o!="string"||o==="")&&(o="utf8"),!h.isEncoding(o))throw new TypeError("Unknown encoding: "+o);const s=M(c,o)|0;let _=p(s);const x=_.write(c,o);return x!==s&&(_=_.slice(0,x)),_}function l(c){const o=c.length<0?0:I(c.length)|0,s=p(o);for(let _=0;_<o;_+=1)s[_]=c[_]&255;return s}function y(c){if(_e(c,Uint8Array)){const o=new Uint8Array(c);return T(o.buffer,o.byteOffset,o.byteLength)}return l(c)}function T(c,o,s){if(o<0||c.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<o+(s||0))throw new RangeError('"length" is outside of buffer bounds');let _;return o===void 0&&s===void 0?_=new Uint8Array(c):s===void 0?_=new Uint8Array(c,o):_=new Uint8Array(c,o,s),Object.setPrototypeOf(_,h.prototype),_}function S(c){if(h.isBuffer(c)){const o=I(c.length)|0,s=p(o);return s.length===0||c.copy(s,0,0,o),s}if(c.length!==void 0)return typeof c.length!="number"||qe(c.length)?p(0):l(c);if(c.type==="Buffer"&&Array.isArray(c.data))return l(c.data)}function I(c){if(c>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return c|0}function D(c){return+c!=c&&(c=0),h.alloc(+c)}h.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==h.prototype},h.compare=function(o,s){if(_e(o,Uint8Array)&&(o=h.from(o,o.offset,o.byteLength)),_e(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(o)||!h.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===s)return 0;let _=o.length,x=s.length;for(let B=0,k=Math.min(_,x);B<k;++B)if(o[B]!==s[B]){_=o[B],x=s[B];break}return _<x?-1:x<_?1:0},h.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(o,s){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return h.alloc(0);let _;if(s===void 0)for(s=0,_=0;_<o.length;++_)s+=o[_].length;const x=h.allocUnsafe(s);let B=0;for(_=0;_<o.length;++_){let k=o[_];if(_e(k,Uint8Array))B+k.length>x.length?(h.isBuffer(k)||(k=h.from(k)),k.copy(x,B)):Uint8Array.prototype.set.call(x,k,B);else if(h.isBuffer(k))k.copy(x,B);else throw new TypeError('"list" argument must be an Array of Buffers');B+=k.length}return x};function M(c,o){if(h.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||_e(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const s=c.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&s===0)return 0;let x=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return $e(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return He(c).length;default:if(x)return _?-1:$e(c).length;o=(""+o).toLowerCase(),x=!0}}h.byteLength=M;function X(c,o,s){let _=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,o>>>=0,s<=o))return"";for(c||(c="utf8");;)switch(c){case"hex":return Mt(this,o,s);case"utf8":case"utf-8":return fe(this,o,s);case"ascii":return ke(this,o,s);case"latin1":case"binary":return ft(this,o,s);case"base64":return pe(this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ut(this,o,s);default:if(_)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),_=!0}}h.prototype._isBuffer=!0;function O(c,o,s){const _=c[o];c[o]=c[s],c[s]=_}h.prototype.swap16=function(){const o=this.length;if(o%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<o;s+=2)O(this,s,s+1);return this},h.prototype.swap32=function(){const o=this.length;if(o%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<o;s+=4)O(this,s,s+3),O(this,s+1,s+2);return this},h.prototype.swap64=function(){const o=this.length;if(o%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<o;s+=8)O(this,s,s+7),O(this,s+1,s+6),O(this,s+2,s+5),O(this,s+3,s+4);return this},h.prototype.toString=function(){const o=this.length;return o===0?"":arguments.length===0?fe(this,0,o):X.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(o){if(!h.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:h.compare(this,o)===0},h.prototype.inspect=function(){let o="";const s=r.INSPECT_MAX_BYTES;return o=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(o+=" ... "),"<Buffer "+o+">"},i&&(h.prototype[i]=h.prototype.inspect),h.prototype.compare=function(o,s,_,x,B){if(_e(o,Uint8Array)&&(o=h.from(o,o.offset,o.byteLength)),!h.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(s===void 0&&(s=0),_===void 0&&(_=o?o.length:0),x===void 0&&(x=0),B===void 0&&(B=this.length),s<0||_>o.length||x<0||B>this.length)throw new RangeError("out of range index");if(x>=B&&s>=_)return 0;if(x>=B)return-1;if(s>=_)return 1;if(s>>>=0,_>>>=0,x>>>=0,B>>>=0,this===o)return 0;let k=B-x,W=_-s;const ne=Math.min(k,W),ee=this.slice(x,B),te=o.slice(s,_);for(let z=0;z<ne;++z)if(ee[z]!==te[z]){k=ee[z],W=te[z];break}return k<W?-1:W<k?1:0};function $(c,o,s,_,x){if(c.length===0)return-1;if(typeof s=="string"?(_=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,qe(s)&&(s=x?0:c.length-1),s<0&&(s=c.length+s),s>=c.length){if(x)return-1;s=c.length-1}else if(s<0)if(x)s=0;else return-1;if(typeof o=="string"&&(o=h.from(o,_)),h.isBuffer(o))return o.length===0?-1:V(c,o,s,_,x);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(c,o,s):Uint8Array.prototype.lastIndexOf.call(c,o,s):V(c,[o],s,_,x);throw new TypeError("val must be string, number or Buffer")}function V(c,o,s,_,x){let B=1,k=c.length,W=o.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(c.length<2||o.length<2)return-1;B=2,k/=2,W/=2,s/=2}function ne(te,z){return B===1?te[z]:te.readUInt16BE(z*B)}let ee;if(x){let te=-1;for(ee=s;ee<k;ee++)if(ne(c,ee)===ne(o,te===-1?0:ee-te)){if(te===-1&&(te=ee),ee-te+1===W)return te*B}else te!==-1&&(ee-=ee-te),te=-1}else for(s+W>k&&(s=k-W),ee=s;ee>=0;ee--){let te=!0;for(let z=0;z<W;z++)if(ne(c,ee+z)!==ne(o,z)){te=!1;break}if(te)return ee}return-1}h.prototype.includes=function(o,s,_){return this.indexOf(o,s,_)!==-1},h.prototype.indexOf=function(o,s,_){return $(this,o,s,_,!0)},h.prototype.lastIndexOf=function(o,s,_){return $(this,o,s,_,!1)};function q(c,o,s,_){s=Number(s)||0;const x=c.length-s;_?(_=Number(_),_>x&&(_=x)):_=x;const B=o.length;_>B/2&&(_=B/2);let k;for(k=0;k<_;++k){const W=parseInt(o.substr(k*2,2),16);if(qe(W))return k;c[s+k]=W}return k}function H(c,o,s,_){return Ce($e(o,c.length-s),c,s,_)}function oe(c,o,s,_){return Ce(Ve(o),c,s,_)}function se(c,o,s,_){return Ce(He(o),c,s,_)}function ce(c,o,s,_){return Ce(et(o,c.length-s),c,s,_)}h.prototype.write=function(o,s,_,x){if(s===void 0)x="utf8",_=this.length,s=0;else if(_===void 0&&typeof s=="string")x=s,_=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(_)?(_=_>>>0,x===void 0&&(x="utf8")):(x=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const B=this.length-s;if((_===void 0||_>B)&&(_=B),o.length>0&&(_<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let k=!1;for(;;)switch(x){case"hex":return q(this,o,s,_);case"utf8":case"utf-8":return H(this,o,s,_);case"ascii":case"latin1":case"binary":return oe(this,o,s,_);case"base64":return se(this,o,s,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,o,s,_);default:if(k)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),k=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function pe(c,o,s){return o===0&&s===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(o,s))}function fe(c,o,s){s=Math.min(c.length,s);const _=[];let x=o;for(;x<s;){const B=c[x];let k=null,W=B>239?4:B>223?3:B>191?2:1;if(x+W<=s){let ne,ee,te,z;switch(W){case 1:B<128&&(k=B);break;case 2:ne=c[x+1],(ne&192)==128&&(z=(B&31)<<6|ne&63,z>127&&(k=z));break;case 3:ne=c[x+1],ee=c[x+2],(ne&192)==128&&(ee&192)==128&&(z=(B&15)<<12|(ne&63)<<6|ee&63,z>2047&&(z<55296||z>57343)&&(k=z));break;case 4:ne=c[x+1],ee=c[x+2],te=c[x+3],(ne&192)==128&&(ee&192)==128&&(te&192)==128&&(z=(B&15)<<18|(ne&63)<<12|(ee&63)<<6|te&63,z>65535&&z<1114112&&(k=z))}}k===null?(k=65533,W=1):k>65535&&(k-=65536,_.push(k>>>10&1023|55296),k=56320|k&1023),_.push(k),x+=W}return je(_)}const Ie=4096;function je(c){const o=c.length;if(o<=Ie)return String.fromCharCode.apply(String,c);let s="",_=0;for(;_<o;)s+=String.fromCharCode.apply(String,c.slice(_,_+=Ie));return s}function ke(c,o,s){let _="";s=Math.min(c.length,s);for(let x=o;x<s;++x)_+=String.fromCharCode(c[x]&127);return _}function ft(c,o,s){let _="";s=Math.min(c.length,s);for(let x=o;x<s;++x)_+=String.fromCharCode(c[x]);return _}function Mt(c,o,s){const _=c.length;(!o||o<0)&&(o=0),(!s||s<0||s>_)&&(s=_);let x="";for(let B=o;B<s;++B)x+=gt[c[B]];return x}function Ut(c,o,s){const _=c.slice(o,s);let x="";for(let B=0;B<_.length-1;B+=2)x+=String.fromCharCode(_[B]+_[B+1]*256);return x}h.prototype.slice=function(o,s){const _=this.length;o=~~o,s=s===void 0?_:~~s,o<0?(o+=_,o<0&&(o=0)):o>_&&(o=_),s<0?(s+=_,s<0&&(s=0)):s>_&&(s=_),s<o&&(s=o);const x=this.subarray(o,s);return Object.setPrototypeOf(x,h.prototype),x};function Z(c,o,s){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+o>s)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(o,s,_){o=o>>>0,s=s>>>0,_||Z(o,s,this.length);let x=this[o],B=1,k=0;for(;++k<s&&(B*=256);)x+=this[o+k]*B;return x},h.prototype.readUintBE=h.prototype.readUIntBE=function(o,s,_){o=o>>>0,s=s>>>0,_||Z(o,s,this.length);let x=this[o+--s],B=1;for(;s>0&&(B*=256);)x+=this[o+--s]*B;return x},h.prototype.readUint8=h.prototype.readUInt8=function(o,s){return o=o>>>0,s||Z(o,1,this.length),this[o]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(o,s){return o=o>>>0,s||Z(o,2,this.length),this[o]|this[o+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(o,s){return o=o>>>0,s||Z(o,2,this.length),this[o]<<8|this[o+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(o,s){return o=o>>>0,s||Z(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(o,s){return o=o>>>0,s||Z(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},h.prototype.readBigUInt64LE=ve(function(o){o=o>>>0,Ne(o,"offset");const s=this[o],_=this[o+7];(s===void 0||_===void 0)&&De(o,this.length-8);const x=s+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,B=this[++o]+this[++o]*2**8+this[++o]*2**16+_*2**24;return BigInt(x)+(BigInt(B)<<BigInt(32))}),h.prototype.readBigUInt64BE=ve(function(o){o=o>>>0,Ne(o,"offset");const s=this[o],_=this[o+7];(s===void 0||_===void 0)&&De(o,this.length-8);const x=s*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],B=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+_;return(BigInt(x)<<BigInt(32))+BigInt(B)}),h.prototype.readIntLE=function(o,s,_){o=o>>>0,s=s>>>0,_||Z(o,s,this.length);let x=this[o],B=1,k=0;for(;++k<s&&(B*=256);)x+=this[o+k]*B;return B*=128,x>=B&&(x-=Math.pow(2,8*s)),x},h.prototype.readIntBE=function(o,s,_){o=o>>>0,s=s>>>0,_||Z(o,s,this.length);let x=s,B=1,k=this[o+--x];for(;x>0&&(B*=256);)k+=this[o+--x]*B;return B*=128,k>=B&&(k-=Math.pow(2,8*s)),k},h.prototype.readInt8=function(o,s){return o=o>>>0,s||Z(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},h.prototype.readInt16LE=function(o,s){o=o>>>0,s||Z(o,2,this.length);const _=this[o]|this[o+1]<<8;return _&32768?_|4294901760:_},h.prototype.readInt16BE=function(o,s){o=o>>>0,s||Z(o,2,this.length);const _=this[o+1]|this[o]<<8;return _&32768?_|4294901760:_},h.prototype.readInt32LE=function(o,s){return o=o>>>0,s||Z(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},h.prototype.readInt32BE=function(o,s){return o=o>>>0,s||Z(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},h.prototype.readBigInt64LE=ve(function(o){o=o>>>0,Ne(o,"offset");const s=this[o],_=this[o+7];(s===void 0||_===void 0)&&De(o,this.length-8);const x=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(_<<24);return(BigInt(x)<<BigInt(32))+BigInt(s+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),h.prototype.readBigInt64BE=ve(function(o){o=o>>>0,Ne(o,"offset");const s=this[o],_=this[o+7];(s===void 0||_===void 0)&&De(o,this.length-8);const x=(s<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(x)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+_)}),h.prototype.readFloatLE=function(o,s){return o=o>>>0,s||Z(o,4,this.length),t.read(this,o,!0,23,4)},h.prototype.readFloatBE=function(o,s){return o=o>>>0,s||Z(o,4,this.length),t.read(this,o,!1,23,4)},h.prototype.readDoubleLE=function(o,s){return o=o>>>0,s||Z(o,8,this.length),t.read(this,o,!0,52,8)},h.prototype.readDoubleBE=function(o,s){return o=o>>>0,s||Z(o,8,this.length),t.read(this,o,!1,52,8)};function ae(c,o,s,_,x,B){if(!h.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>x||o<B)throw new RangeError('"value" argument is out of bounds');if(s+_>c.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(o,s,_,x){if(o=+o,s=s>>>0,_=_>>>0,!x){const W=Math.pow(2,8*_)-1;ae(this,o,s,_,W,0)}let B=1,k=0;for(this[s]=o&255;++k<_&&(B*=256);)this[s+k]=o/B&255;return s+_},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(o,s,_,x){if(o=+o,s=s>>>0,_=_>>>0,!x){const W=Math.pow(2,8*_)-1;ae(this,o,s,_,W,0)}let B=_-1,k=1;for(this[s+B]=o&255;--B>=0&&(k*=256);)this[s+B]=o/k&255;return s+_},h.prototype.writeUint8=h.prototype.writeUInt8=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,1,255,0),this[s]=o&255,s+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,2,65535,0),this[s]=o&255,this[s+1]=o>>>8,s+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,2,65535,0),this[s]=o>>>8,this[s+1]=o&255,s+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,4,4294967295,0),this[s+3]=o>>>24,this[s+2]=o>>>16,this[s+1]=o>>>8,this[s]=o&255,s+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,4,4294967295,0),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4};function lt(c,o,s,_,x){yt(o,_,x,c,s,7);let B=Number(o&BigInt(4294967295));c[s++]=B,B=B>>8,c[s++]=B,B=B>>8,c[s++]=B,B=B>>8,c[s++]=B;let k=Number(o>>BigInt(32)&BigInt(4294967295));return c[s++]=k,k=k>>8,c[s++]=k,k=k>>8,c[s++]=k,k=k>>8,c[s++]=k,s}function ht(c,o,s,_,x){yt(o,_,x,c,s,7);let B=Number(o&BigInt(4294967295));c[s+7]=B,B=B>>8,c[s+6]=B,B=B>>8,c[s+5]=B,B=B>>8,c[s+4]=B;let k=Number(o>>BigInt(32)&BigInt(4294967295));return c[s+3]=k,k=k>>8,c[s+2]=k,k=k>>8,c[s+1]=k,k=k>>8,c[s]=k,s+8}h.prototype.writeBigUInt64LE=ve(function(o,s=0){return lt(this,o,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=ve(function(o,s=0){return ht(this,o,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(o,s,_,x){if(o=+o,s=s>>>0,!x){const ne=Math.pow(2,8*_-1);ae(this,o,s,_,ne-1,-ne)}let B=0,k=1,W=0;for(this[s]=o&255;++B<_&&(k*=256);)o<0&&W===0&&this[s+B-1]!==0&&(W=1),this[s+B]=(o/k>>0)-W&255;return s+_},h.prototype.writeIntBE=function(o,s,_,x){if(o=+o,s=s>>>0,!x){const ne=Math.pow(2,8*_-1);ae(this,o,s,_,ne-1,-ne)}let B=_-1,k=1,W=0;for(this[s+B]=o&255;--B>=0&&(k*=256);)o<0&&W===0&&this[s+B+1]!==0&&(W=1),this[s+B]=(o/k>>0)-W&255;return s+_},h.prototype.writeInt8=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,1,127,-128),o<0&&(o=255+o+1),this[s]=o&255,s+1},h.prototype.writeInt16LE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,2,32767,-32768),this[s]=o&255,this[s+1]=o>>>8,s+2},h.prototype.writeInt16BE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,2,32767,-32768),this[s]=o>>>8,this[s+1]=o&255,s+2},h.prototype.writeInt32LE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,4,2147483647,-2147483648),this[s]=o&255,this[s+1]=o>>>8,this[s+2]=o>>>16,this[s+3]=o>>>24,s+4},h.prototype.writeInt32BE=function(o,s,_){return o=+o,s=s>>>0,_||ae(this,o,s,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4},h.prototype.writeBigInt64LE=ve(function(o,s=0){return lt(this,o,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=ve(function(o,s=0){return ht(this,o,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dt(c,o,s,_,x,B){if(s+_>c.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function pt(c,o,s,_,x){return o=+o,s=s>>>0,x||dt(c,o,s,4),t.write(c,o,s,_,23,4),s+4}h.prototype.writeFloatLE=function(o,s,_){return pt(this,o,s,!0,_)},h.prototype.writeFloatBE=function(o,s,_){return pt(this,o,s,!1,_)};function _t(c,o,s,_,x){return o=+o,s=s>>>0,x||dt(c,o,s,8),t.write(c,o,s,_,52,8),s+8}h.prototype.writeDoubleLE=function(o,s,_){return _t(this,o,s,!0,_)},h.prototype.writeDoubleBE=function(o,s,_){return _t(this,o,s,!1,_)},h.prototype.copy=function(o,s,_,x){if(!h.isBuffer(o))throw new TypeError("argument should be a Buffer");if(_||(_=0),!x&&x!==0&&(x=this.length),s>=o.length&&(s=o.length),s||(s=0),x>0&&x<_&&(x=_),x===_||o.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),o.length-s<x-_&&(x=o.length-s+_);const B=x-_;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,_,x):Uint8Array.prototype.set.call(o,this.subarray(_,x),s),B},h.prototype.fill=function(o,s,_,x){if(typeof o=="string"){if(typeof s=="string"?(x=s,s=0,_=this.length):typeof _=="string"&&(x=_,_=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!h.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(o.length===1){const k=o.charCodeAt(0);(x==="utf8"&&k<128||x==="latin1")&&(o=k)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(s<0||this.length<s||this.length<_)throw new RangeError("Out of range index");if(_<=s)return this;s=s>>>0,_=_===void 0?this.length:_>>>0,o||(o=0);let B;if(typeof o=="number")for(B=s;B<_;++B)this[B]=o;else{const k=h.isBuffer(o)?o:h.from(o,x),W=k.length;if(W===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(B=0;B<_-s;++B)this[B+s]=k[B%W]}return this};const Re={};function Ze(c,o,s){Re[c]=class extends s{constructor(){super();Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(c,o){return`The "${c}" argument must be of type number. Received type ${typeof o}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(c,o,s){let _=`The value of "${c}" is out of range.`,x=s;return Number.isInteger(s)&&Math.abs(s)>2**32?x=mt(String(s)):typeof s=="bigint"&&(x=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(x=mt(x)),x+="n"),_+=` It must be ${o}. Received ${x}`,_},RangeError);function mt(c){let o="",s=c.length;const _=c[0]==="-"?1:0;for(;s>=_+4;s-=3)o=`_${c.slice(s-3,s)}${o}`;return`${c.slice(0,s)}${o}`}function $t(c,o,s){Ne(o,"offset"),(c[o]===void 0||c[o+s]===void 0)&&De(o,c.length-(s+1))}function yt(c,o,s,_,x,B){if(c>s||c<o){const k=typeof o=="bigint"?"n":"";let W;throw B>3?o===0||o===BigInt(0)?W=`>= 0${k} and < 2${k} ** ${(B+1)*8}${k}`:W=`>= -(2${k} ** ${(B+1)*8-1}${k}) and < 2 ** ${(B+1)*8-1}${k}`:W=`>= ${o}${k} and <= ${s}${k}`,new Re.ERR_OUT_OF_RANGE("value",W,c)}$t(_,x,B)}function Ne(c,o){if(typeof c!="number")throw new Re.ERR_INVALID_ARG_TYPE(o,"number",c)}function De(c,o,s){throw Math.floor(c)!==c?(Ne(c,s),new Re.ERR_OUT_OF_RANGE(s||"offset","an integer",c)):o<0?new Re.ERR_BUFFER_OUT_OF_BOUNDS:new Re.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${o}`,c)}const be=/[^+/0-9A-Za-z-_]/g;function Vt(c){if(c=c.split("=")[0],c=c.trim().replace(be,""),c.length<2)return"";for(;c.length%4!=0;)c=c+"=";return c}function $e(c,o){o=o||1/0;let s;const _=c.length;let x=null;const B=[];for(let k=0;k<_;++k){if(s=c.charCodeAt(k),s>55295&&s<57344){if(!x){if(s>56319){(o-=3)>-1&&B.push(239,191,189);continue}else if(k+1===_){(o-=3)>-1&&B.push(239,191,189);continue}x=s;continue}if(s<56320){(o-=3)>-1&&B.push(239,191,189),x=s;continue}s=(x-55296<<10|s-56320)+65536}else x&&(o-=3)>-1&&B.push(239,191,189);if(x=null,s<128){if((o-=1)<0)break;B.push(s)}else if(s<2048){if((o-=2)<0)break;B.push(s>>6|192,s&63|128)}else if(s<65536){if((o-=3)<0)break;B.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((o-=4)<0)break;B.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return B}function Ve(c){const o=[];for(let s=0;s<c.length;++s)o.push(c.charCodeAt(s)&255);return o}function et(c,o){let s,_,x;const B=[];for(let k=0;k<c.length&&!((o-=2)<0);++k)s=c.charCodeAt(k),_=s>>8,x=s%256,B.push(x),B.push(_);return B}function He(c){return e.toByteArray(Vt(c))}function Ce(c,o,s,_){let x;for(x=0;x<_&&!(x+s>=o.length||x>=c.length);++x)o[x+s]=c[x];return x}function _e(c,o){return c instanceof o||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===o.name}function qe(c){return c!==c}const gt=function(){const c="0123456789abcdef",o=new Array(256);for(let s=0;s<16;++s){const _=s*16;for(let x=0;x<16;++x)o[_+x]=c[s]+c[x]}return o}();function ve(c){return typeof BigInt=="undefined"?vt:c}function vt(){throw new Error("BigInt not supported")}})(Vn);const zi=3e4,Qi=6e4,ji=6e4;class Vs extends ot.exports.EventEmitter{constructor(e,t={}){super();G(this,"peer");G(this,"maxConnections",6);G(this,"syncMS",zi);G(this,"messageLastSeenDeleteMS",Qi);G(this,"replaceOldPeerMS",ji);G(this,"messageId",0);G(this,"messages",new Map);G(this,"connections",new Map);G(this,"payloadsToSend",[]);G(this,"syncTimeoutId");G(this,"onData",(e,t)=>{if(typeof e=="string"||Vn.Buffer.isBuffer(e)){const i=JSON.parse(e.toString()),u=`${i.from}-${i.id}`;this.messages.has(u)||(this.messages.set(u,Date.now()),this.peer.broadcast(e),this.emit("data",i.payload,i.from))}});G(this,"onDiscover",e=>{if(!this.peer.getConnections().has(e))if(this.needsConnection())this.peer.connectToInBackground(e);else{const t=Zi(this.connections.entries());if(t){const[i,u]=t;u<Date.now()-this.replaceOldPeerMS&&this.peer.connectTo(e).then(()=>this.peer.disconnectFrom(i))}}});G(this,"onConnection",(e,t)=>{this.payloadsToSend.length&&(this.payloadsToSend.forEach(i=>this.broadcastInternal(i)),this.payloadsToSend.length=0),this.connections.set(t,Date.now())});G(this,"onDisconnection",(e,t)=>{this.needsConnection()&&this.peer.announce(),this.connections.delete(t)});G(this,"onDisconnect",()=>{this.connections.clear(),this.syncTimeoutId&&(clearTimeout(this.syncTimeoutId),this.syncTimeoutId=void 0)});G(this,"onSync",()=>{this.needsConnection()&&this.peer.announce(),this.cleanOldMessages(),this.syncTimeoutId=void 0,this.sync()});G(this,"sync",()=>{this.syncTimeoutId=setTimeout(this.onSync,this.syncMS*.5+Math.random()*this.syncMS*.5)});this.peer=e,this.peer.on("data",this.onData),this.peer.on("join",this.onDiscover),this.peer.on("announce",this.onDiscover),this.peer.on("connection",this.onConnection),this.peer.on("disconnection",this.onDisconnection),this.peer.on("connect",this.sync),this.peer.on("disconnect",this.onDisconnect),typeof t.maxConnections=="number"&&t.maxConnections>0&&(this.maxConnections=t.maxConnections),typeof t.syncMS=="number"&&t.syncMS>5e3&&(this.syncMS=t.syncMS),typeof t.messageLastSeenDeleteMS=="number"&&t.messageLastSeenDeleteMS>0&&(this.messageLastSeenDeleteMS=t.messageLastSeenDeleteMS),typeof t.replaceOldPeerMS=="number"&&t.replaceOldPeerMS>0&&(this.replaceOldPeerMS=t.replaceOldPeerMS),this.peer.isConnected()&&this.sync()}getPeer(){return this.peer}broadcast(e){if(this.connections.size===0)this.payloadsToSend.push(e);else return this.broadcastInternal(e)}broadcastInternal(e){const t=this.peer.getId(),i=this.messageId++,u=`${t}-${i}`;return this.messages.set(u,Date.now()),this.peer.broadcast(JSON.stringify({id:i,from:t,payload:e})),this}needsConnection(){return this.connections.size<this.maxConnections}cleanOldMessages(){if(this.messages.size){const e=Date.now();for(const[t,i]of this.messages.entries())e-i>this.messageLastSeenDeleteMS&&this.messages.delete(t)}}}function Zi(r){let e=Number.MAX_SAFE_INTEGER,t;for(const i of r){const u=i[1];u<e&&(e=u,t=i)}return t}var eo=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,to=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ln=function(e){var t=e,i=e.indexOf("["),u=e.indexOf("]");i!=-1&&u!=-1&&(e=e.substring(0,i)+e.substring(i,u).replace(/:/g,";")+e.substring(u,e.length));for(var m=eo.exec(e||""),p={},h=14;h--;)p[to[h]]=m[h]||"";return i!=-1&&u!=-1&&(p.source=t,p.host=p.host.substring(1,p.host.length-1).replace(/;/g,":"),p.authority=p.authority.replace("[","").replace("]","").replace(/;/g,":"),p.ipv6uri=!0),p.pathNames=no(p,p.path),p.queryKey=ro(p,p.query),p};function no(r,e){var t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&i.splice(0,1),e.substr(e.length-1,1)=="/"&&i.splice(i.length-1,1),i}function ro(r,e){var t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,u,m){u&&(t[u]=m)}),t}function io(r,e="",t){let i=r;t=t||typeof location!="undefined"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t!="undefined"?r=t.protocol+"//"+r:r="https://"+r),i=ln(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const m=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+m+":"+i.port+e,i.href=i.protocol+"://"+m+(t&&t.port===i.port?"":":"+i.port),i}var hn={exports:{}};try{hn.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{hn.exports=!1}var oo=hn.exports,Fe=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function qn(r){const e=r.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||oo))return new XMLHttpRequest}catch{}if(!e)try{return new Fe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Wn(r,...e){return e.reduce((t,i)=>(r.hasOwnProperty(i)&&(t[i]=r[i]),t),{})}const so=setTimeout,ao=clearTimeout;function Nt(r,e){e.useNativeTimers?(r.setTimeoutFn=so.bind(Fe),r.clearTimeoutFn=ao.bind(Fe)):(r.setTimeoutFn=setTimeout.bind(Fe),r.clearTimeoutFn=clearTimeout.bind(Fe))}var ze=de;function de(r){if(r)return uo(r)}function uo(r){for(var e in de.prototype)r[e]=de.prototype[e];return r}de.prototype.on=de.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};de.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};de.prototype.off=de.prototype.removeListener=de.prototype.removeAllListeners=de.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,u=0;u<t.length;u++)if(i=t[u],i===e||i.fn===e){t.splice(u,1);break}return t.length===0&&delete this._callbacks["$"+r],this};de.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,u=t.length;i<u;++i)t[i].apply(this,e)}return this};de.prototype.emitReserved=de.prototype.emit;de.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};de.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Ee=Object.create(null);Ee.open="0";Ee.close="1";Ee.ping="2";Ee.pong="3";Ee.message="4";Ee.upgrade="5";Ee.noop="6";const Ct=Object.create(null);Object.keys(Ee).forEach(r=>{Ct[Ee[r]]=r});const co={type:"error",data:"parser error"},fo=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",lo=typeof ArrayBuffer=="function",ho=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,Gn=({type:r,data:e},t,i)=>fo&&e instanceof Blob?t?i(e):Yn(e,i):lo&&(e instanceof ArrayBuffer||ho(e))?t?i(e):Yn(new Blob([e]),i):i(Ee[r]+(e||"")),Yn=(r,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+i)},t.readAsDataURL(r)};var Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",st=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(var Ot=0;Ot<Xn.length;Ot++)st[Xn.charCodeAt(Ot)]=Ot;var po=function(r){var e=r.length*.75,t=r.length,i,u=0,m,p,h,v;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var A=new ArrayBuffer(e),N=new Uint8Array(A);for(i=0;i<t;i+=4)m=st[r.charCodeAt(i)],p=st[r.charCodeAt(i+1)],h=st[r.charCodeAt(i+2)],v=st[r.charCodeAt(i+3)],N[u++]=m<<2|p>>4,N[u++]=(p&15)<<4|h>>2,N[u++]=(h&3)<<6|v&63;return A};const _o=typeof ArrayBuffer=="function",Jn=(r,e)=>{if(typeof r!="string")return{type:"message",data:Kn(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:mo(r.substring(1),e)}:Ct[t]?r.length>1?{type:Ct[t],data:r.substring(1)}:{type:Ct[t]}:co},mo=(r,e)=>{if(_o){const t=po(r);return Kn(t,e)}else return{base64:!0,data:r}},Kn=(r,e)=>{switch(e){case"blob":return r instanceof ArrayBuffer?new Blob([r]):r;case"arraybuffer":default:return r}},zn=String.fromCharCode(30),yo=(r,e)=>{const t=r.length,i=new Array(t);let u=0;r.forEach((m,p)=>{Gn(m,!1,h=>{i[p]=h,++u===t&&e(i.join(zn))})})},go=(r,e)=>{const t=r.split(zn),i=[];for(let u=0;u<t.length;u++){const m=Jn(t[u],e);if(i.push(m),m.type==="error")break}return i},Qn=4;class jn extends ze{constructor(e){super();this.writable=!1,Nt(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const i=new Error(e);return i.type="TransportError",i.description=t,super.emit("error",i),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){const t=Jn(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}}var Zn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ft=64,er={},tr=0,Pe=0,nr;function dn(r){var e="";do e=Zn[r%Ft]+e,r=Math.floor(r/Ft);while(r>0);return e}function vo(r){var e=0;for(Pe=0;Pe<r.length;Pe++)e=e*Ft+er[r.charAt(Pe)];return e}function pn(){var r=dn(+new Date);return r!==nr?(tr=0,nr=r):r+"."+dn(tr++)}for(;Pe<Ft;Pe++)er[Zn[Pe]]=Pe;pn.encode=dn;pn.decode=vo;var rr=pn,at={};at.encode=function(r){var e="";for(var t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e};at.decode=function(r){for(var e={},t=r.split("&"),i=0,u=t.length;i<u;i++){var m=t[i].split("=");e[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return e};class wo extends jn{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose(),!1;this.onPacket(i)};go(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,yo(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let i="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=rr()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);const u=at.encode(e),m=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(m?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(u.length?"?"+u:"")}}function xo(){}const bo=function(){return new qn({xdomain:!1}).responseType!=null}();class Ao extends wo{constructor(e){super(e);if(typeof location!="undefined"){const i=location.protocol==="https:";let u=location.port;u||(u=i?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||u!==e.port,this.xs=e.secure!==i}const t=e&&e.forceBase64;this.supportsBinary=bo&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Se(this.uri(),e)}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",u=>{this.onError("xhr post error",u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",t=>{this.onError("xhr poll error",t)}),this.pollXhr=e}}class Se extends ze{constructor(e,t){super();Nt(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=Wn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new qn(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document!="undefined"&&(this.index=Se.requestsCount++,Se.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=xo,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete Se.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&this.onData(e)}abort(){this.cleanup()}}Se.requestsCount=0;Se.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",ir);else if(typeof addEventListener=="function"){const r="onpagehide"in Fe?"pagehide":"unload";addEventListener(r,ir,!1)}}function ir(){for(let r in Se.requests)Se.requests.hasOwnProperty(r)&&Se.requests[r].abort()}const Eo=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),ut=Fe.WebSocket||Fe.MozWebSocket,or=!0,So="arraybuffer",sr=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _n extends jn{constructor(e){super(e);this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,i=sr?{}:Wn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=or&&!sr?t?new ut(e,t):new ut(e):new ut(e,t,i)}catch(u){return this.emit("error",u)}this.ws.binaryType=this.socket.binaryType||So,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],u=t===e.length-1;Gn(i,this.supportsBinary,m=>{const p={};try{or&&this.ws.send(m)}catch{}u&&Eo(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let i="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=rr()),this.supportsBinary||(e.b64=1);const u=at.encode(e),m=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(m?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(u.length?"?"+u:"")}check(){return!!ut&&!("__initialize"in ut&&this.name===_n.prototype.name)}}const Io={websocket:_n,polling:Ao};class Be extends ze{constructor(e,t={}){super();e&&typeof e=="object"&&(t=e,e=null),e?(e=ln(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=ln(t.host).host),Nt(this,t),this.secure=t.secure!=null?t.secure:typeof location!="undefined"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=t.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=at.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=To(this.opts.query);t.EIO=Qn,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Io[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Be.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){let t=this.createTransport(e),i=!1;Be.priorWebsocketSuccess=!1;const u=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",n=>{if(!i)if(n.type==="pong"&&n.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Be.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(N(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const a=new Error("probe error");a.transport=t.name,this.emitReserved("upgradeError",a)}}))};function m(){i||(i=!0,N(),t.close(),t=null)}const p=n=>{const a=new Error("probe error: "+n);a.transport=t.name,m(),this.emitReserved("upgradeError",a)};function h(){p("transport closed")}function v(){p("socket closed")}function A(n){t&&n.name!==t.name&&m()}const N=()=>{t.removeListener("open",u),t.removeListener("error",p),t.removeListener("close",h),this.off("close",v),this.off("upgrading",A)};t.once("open",u),t.once("error",p),t.once("close",h),this.once("close",v),this.once("upgrading",A),t.open()}onOpen(){if(this.readyState="open",Be.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,t,i){return this.sendPacket("message",e,t,i),this}send(e,t,i){return this.sendPacket("message",e,t,i),this}sendPacket(e,t,i,u){if(typeof t=="function"&&(u=t,t=void 0),typeof i=="function"&&(u=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const m={type:e,data:t,options:i};this.emitReserved("packetCreate",m),this.writeBuffer.push(m),u&&this.once("flush",u),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){Be.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let i=0;const u=e.length;for(;i<u;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}Be.protocol=Qn;function To(r){const e={};for(let t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}Be.protocol;const Bo=typeof ArrayBuffer=="function",ko=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,ar=Object.prototype.toString,Ro=typeof Blob=="function"||typeof Blob!="undefined"&&ar.call(Blob)==="[object BlobConstructor]",No=typeof File=="function"||typeof File!="undefined"&&ar.call(File)==="[object FileConstructor]";function mn(r){return Bo&&(r instanceof ArrayBuffer||ko(r))||Ro&&r instanceof Blob||No&&r instanceof File}function Pt(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,i=r.length;t<i;t++)if(Pt(r[t]))return!0;return!1}if(mn(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Pt(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&Pt(r[t]))return!0;return!1}function Co(r){const e=[],t=r.data,i=r;return i.data=yn(t,e),i.attachments=e.length,{packet:i,buffers:e}}function yn(r,e){if(!r)return r;if(mn(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let i=0;i<r.length;i++)t[i]=yn(r[i],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const i in r)r.hasOwnProperty(i)&&(t[i]=yn(r[i],e));return t}return r}function Oo(r,e){return r.data=gn(r.data,e),r.attachments=void 0,r}function gn(r,e){if(!r)return r;if(r&&r._placeholder)return e[r.num];if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=gn(r[t],e);else if(typeof r=="object")for(const t in r)r.hasOwnProperty(t)&&(r[t]=gn(r[t],e));return r}const Fo=5;var J;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(J||(J={}));class Po{encode(e){return(e.type===J.EVENT||e.type===J.ACK)&&Pt(e)?(e.type=e.type===J.EVENT?J.BINARY_EVENT:J.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===J.BINARY_EVENT||e.type===J.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data)),t}encodeAsBinary(e){const t=Co(e),i=this.encodeAsString(t.packet),u=t.buffers;return u.unshift(i),u}}class vn extends ze{constructor(){super()}add(e){let t;if(typeof e=="string")t=this.decodeString(e),t.type===J.BINARY_EVENT||t.type===J.BINARY_ACK?(this.reconstructor=new Lo(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t);else if(mn(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(J[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===J.BINARY_EVENT||i.type===J.BINARY_ACK){const m=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const p=e.substring(m,t);if(p!=Number(p)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(p)}if(e.charAt(t+1)==="/"){const m=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(m,t)}else i.nsp="/";const u=e.charAt(t+1);if(u!==""&&Number(u)==u){const m=t+1;for(;++t;){const p=e.charAt(t);if(p==null||Number(p)!=p){--t;break}if(t===e.length)break}i.id=Number(e.substring(m,t+1))}if(e.charAt(++t)){const m=Do(e.substr(t));if(vn.isPayloadValid(i.type,m))i.data=m;else throw new Error("invalid payload")}return i}static isPayloadValid(e,t){switch(e){case J.CONNECT:return typeof t=="object";case J.DISCONNECT:return t===void 0;case J.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case J.EVENT:case J.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case J.ACK:case J.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function Do(r){try{return JSON.parse(r)}catch{return!1}}class Lo{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Oo(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Mo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",protocol:Fo,get PacketType(){return J},Encoder:Po,Decoder:vn});function xe(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const Uo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ur extends ze{constructor(e,t,i){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[xe(e,"open",this.onopen.bind(this)),xe(e,"packet",this.onpacket.bind(this)),xe(e,"error",this.onerror.bind(this)),xe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Uo.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const i={type:J.EVENT,data:t};i.options={},i.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"&&(this.acks[this.ids]=t.pop(),i.id=this.ids++);const u=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!u||!this.connected)||(this.connected?this.packet(i):this.sendBuffer.push(i)),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:J.CONNECT,data:e})}):this.packet({type:J.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case J.CONNECT:if(e.data&&e.data.sid){const u=e.data.sid;this.onconnect(u)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case J.EVENT:this.onevent(e);break;case J.BINARY_EVENT:this.onevent(e);break;case J.ACK:this.onack(e);break;case J.BINARY_ACK:this.onack(e);break;case J.DISCONNECT:this.ondisconnect();break;case J.CONNECT_ERROR:const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let i=!1;return function(...u){i||(i=!0,t.packet({type:J.ACK,id:e,data:u}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:J.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var $o=Qe;function Qe(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Qe.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};Qe.prototype.reset=function(){this.attempts=0};Qe.prototype.setMin=function(r){this.ms=r};Qe.prototype.setMax=function(r){this.max=r};Qe.prototype.setJitter=function(r){this.jitter=r};class wn extends ze{constructor(e,t){var i;super();this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Nt(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new $o({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const u=t.parser||Mo;this.encoder=new u.Encoder,this.decoder=new u.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Be(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const u=xe(t,"open",function(){i.onopen(),e&&e()}),m=xe(t,"error",p=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",p),e?e(p):i.maybeReconnectOnOpen()});if(this._timeout!==!1){const p=this._timeout;p===0&&u();const h=this.setTimeoutFn(()=>{u(),t.close(),t.emit("error",new Error("timeout"))},p);this.opts.autoUnref&&h.unref(),this.subs.push(function(){clearTimeout(h)})}return this.subs.push(u),this.subs.push(m),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(xe(e,"ping",this.onping.bind(this)),xe(e,"data",this.ondata.bind(this)),xe(e,"error",this.onerror.bind(this)),xe(e,"close",this.onclose.bind(this)),xe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i||(i=new ur(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this._readyState==="opening"&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(u=>{u?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",u)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ct={};function Dt(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=io(r,e.path||"/socket.io"),i=t.source,u=t.id,m=t.path,p=ct[u]&&m in ct[u].nsps,h=e.forceNew||e["force new connection"]||e.multiplex===!1||p;let v;return h?v=new wn(i,e):(ct[u]||(ct[u]=new wn(i,e)),v=ct[u]),t.query&&!e.query&&(e.query=t.queryKey),v.socket(t.path,e)}Object.assign(Dt,{Manager:wn,Socket:ur,io:Dt,connect:Dt});class Hs extends ot.exports.EventEmitter{constructor(e,t={}){super();G(this,"socket");G(this,"connections",new Map);G(this,"SimplePeer");G(this,"onSignal",(e,t)=>{let i=this.connections.get(t);e.type==="offer"&&(i==null?void 0:i.initiator)&&(this.disconnectFrom(t,!1),i=void 0),i||(i=this.createConnection(t,!1)),i.destroyed||i.signal(e)});G(this,"onConnect",()=>{this.emit("connect",this.socket.id)});G(this,"onDisonnect",()=>{this.emit("disconnect");for(const[e,t]of this.connections.entries())this.emit("disconnection",t,e),t.destroy();this.connections.clear()});G(this,"onJoin",e=>{e!==this.socket.id&&this.emit("join",e)});G(this,"onAnnounce",e=>{e!==this.socket.id&&this.emit("announce",e)});G(this,"onLeave",(e,t)=>{this.disconnectFrom(e)});this.SimplePeer=e,this.socket=Dt(`${t.origin||"wss://mesh.aicacia.com"}/${t.namespace||""}`),this.socket.on("signal",this.onSignal),this.socket.on("connect",this.onConnect),this.socket.on("disconnect",this.onDisonnect),this.socket.on("join",this.onJoin),this.socket.on("announce",this.onAnnounce),this.socket.on("leave",this.onLeave)}getId(){return this.socket.id}isConnected(){return this.socket.connected}connected(){return Vo(this.socket)}getConnections(){return this.connections}send(e,t){const i=this.connections.get(e);return(i==null?void 0:i.connected)&&i.send(t),this}broadcast(e){for(const t of this.connections.values())t.connected&&t.send(e);return this}announce(){return this.socket.emit("announce"),this}get(e){return this.connections.get(e)}connectToInBackground(e){return this.getOrCreateConnection(e,!0),this}connectTo(e){const t=this.getOrCreateConnection(e,!0);return new Promise((i,u)=>{if(t.connected)i(t);else{const m=()=>{v(),i(t)},p=()=>{v(),u()},h=A=>{v(),u(A)},v=()=>{t.off("connect",m),t.off("disconnect",p),t.off("error",h)};t.once("connect",m),t.once("disconnect",p),t.once("error",h)}})}disconnectFrom(e,t=!0){const i=this.connections.get(e);return i&&(t&&this.emit("disconnection",i,e),this.connections.delete(e),i.destroy()),this}getOrCreateConnection(e,t){const i=this.connections.get(e);return i||this.createConnection(e,t)}createConnection(e,t){const i=new this.SimplePeer({initiator:t,trickle:!1});return i.on("signal",u=>{this.socket.emit("signal",e,u)}),i.on("data",u=>{this.emit("data",u,e)}),i.on("error",u=>{this.disconnectFrom(e),this.emit("error",u)}),i.on("connect",()=>{this.emit("connection",i,e)}),i.on("disconnect",()=>{this.disconnectFrom(e)}),this.connections.set(e,i),i}}function Vo(r){return new Promise((e,t)=>{if(r.connected)e(r);else{const i=()=>{p(),e(r)},u=()=>{p(),t()},m=h=>{p(),t(h)},p=()=>{r.off("connect",i),r.off("disconnect",u),r.off("error",m)};r.once("connect",i),r.once("disconnect",u),r.once("error",m)}})}var cr={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(i,u,m){function p(A,N){if(!u[A]){if(!i[A]){var n=typeof kt=="function"&&kt;if(!N&&n)return n(A,!0);if(h)return h(A,!0);var a=new Error("Cannot find module '"+A+"'");throw a.code="MODULE_NOT_FOUND",a}var l=u[A]={exports:{}};i[A][0].call(l.exports,function(y){var T=i[A][1][y];return p(T||y)},l,l.exports,t,i,u,m)}return u[A].exports}for(var h=typeof kt=="function"&&kt,v=0;v<m.length;v++)p(m[v]);return p}({1:[function(t,i,u){(function(m){var p=m.MutationObserver||m.WebKitMutationObserver,h;if(p){var v=0,A=new p(y),N=m.document.createTextNode("");A.observe(N,{characterData:!0}),h=function(){N.data=v=++v%2}}else if(!m.setImmediate&&typeof m.MessageChannel!="undefined"){var n=new m.MessageChannel;n.port1.onmessage=y,h=function(){n.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?h=function(){var S=m.document.createElement("script");S.onreadystatechange=function(){y(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},m.document.documentElement.appendChild(S)}:h=function(){setTimeout(y,0)};var a,l=[];function y(){a=!0;for(var S,I,D=l.length;D;){for(I=l,l=[],S=-1;++S<D;)I[S]();D=l.length}a=!1}i.exports=T;function T(S){l.push(S)===1&&!a&&h()}}).call(this,typeof Te!="undefined"?Te:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(t,i,u){var m=t(1);function p(){}var h={},v=["REJECTED"],A=["FULFILLED"],N=["PENDING"];i.exports=n;function n(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,O!==p&&T(this,O)}n.prototype.catch=function(O){return this.then(null,O)},n.prototype.then=function(O,$){if(typeof O!="function"&&this.state===A||typeof $!="function"&&this.state===v)return this;var V=new this.constructor(p);if(this.state!==N){var q=this.state===A?O:$;l(V,q,this.outcome)}else this.queue.push(new a(V,O,$));return V};function a(O,$,V){this.promise=O,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof V=="function"&&(this.onRejected=V,this.callRejected=this.otherCallRejected)}a.prototype.callFulfilled=function(O){h.resolve(this.promise,O)},a.prototype.otherCallFulfilled=function(O){l(this.promise,this.onFulfilled,O)},a.prototype.callRejected=function(O){h.reject(this.promise,O)},a.prototype.otherCallRejected=function(O){l(this.promise,this.onRejected,O)};function l(O,$,V){m(function(){var q;try{q=$(V)}catch(H){return h.reject(O,H)}q===O?h.reject(O,new TypeError("Cannot resolve promise with itself")):h.resolve(O,q)})}h.resolve=function(O,$){var V=S(y,$);if(V.status==="error")return h.reject(O,V.value);var q=V.value;if(q)T(O,q);else{O.state=A,O.outcome=$;for(var H=-1,oe=O.queue.length;++H<oe;)O.queue[H].callFulfilled($)}return O},h.reject=function(O,$){O.state=v,O.outcome=$;for(var V=-1,q=O.queue.length;++V<q;)O.queue[V].callRejected($);return O};function y(O){var $=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof $=="function")return function(){$.apply(O,arguments)}}function T(O,$){var V=!1;function q(ce){V||(V=!0,h.reject(O,ce))}function H(ce){V||(V=!0,h.resolve(O,ce))}function oe(){$(H,q)}var se=S(oe);se.status==="error"&&q(se.value)}function S(O,$){var V={};try{V.value=O($),V.status="success"}catch(q){V.status="error",V.value=q}return V}n.resolve=I;function I(O){return O instanceof this?O:h.resolve(new this(p),O)}n.reject=D;function D(O){var $=new this(p);return h.reject($,O)}n.all=M;function M(O){var $=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var V=O.length,q=!1;if(!V)return this.resolve([]);for(var H=new Array(V),oe=0,se=-1,ce=new this(p);++se<V;)pe(O[se],se);return ce;function pe(fe,Ie){$.resolve(fe).then(je,function(ke){q||(q=!0,h.reject(ce,ke))});function je(ke){H[Ie]=ke,++oe===V&&!q&&(q=!0,h.resolve(ce,H))}}}n.race=X;function X(O){var $=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var V=O.length,q=!1;if(!V)return this.resolve([]);for(var H=-1,oe=new this(p);++H<V;)se(O[H]);return oe;function se(ce){$.resolve(ce).then(function(pe){q||(q=!0,h.resolve(oe,pe))},function(pe){q||(q=!0,h.reject(oe,pe))})}}},{"1":1}],3:[function(t,i,u){(function(m){typeof m.Promise!="function"&&(m.Promise=t(2))}).call(this,typeof Te!="undefined"?Te:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(t,i,u){var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f};function p(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var v=h();function A(){try{if(!v||!v.open)return!1;var f=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),g=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!f||g)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function N(f,g){f=f||[],g=g||{};try{return new Blob(f,g)}catch(w){if(w.name!=="TypeError")throw w;for(var d=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,b=new d,E=0;E<f.length;E+=1)b.append(f[E]);return b.getBlob(g.type)}}typeof Promise=="undefined"&&t(3);var n=Promise;function a(f,g){g&&f.then(function(d){g(null,d)},function(d){g(d)})}function l(f,g,d){typeof g=="function"&&f.then(g),typeof d=="function"&&f.catch(d)}function y(f){return typeof f!="string"&&(console.warn(f+" used as a key, but it is not a string."),f=String(f)),f}function T(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var S="local-forage-detect-blob-support",I=void 0,D={},M=Object.prototype.toString,X="readonly",O="readwrite";function $(f){for(var g=f.length,d=new ArrayBuffer(g),b=new Uint8Array(d),E=0;E<g;E++)b[E]=f.charCodeAt(E);return d}function V(f){return new n(function(g){var d=f.transaction(S,O),b=N([""]);d.objectStore(S).put(b,"key"),d.onabort=function(E){E.preventDefault(),E.stopPropagation(),g(!1)},d.oncomplete=function(){var E=navigator.userAgent.match(/Chrome\/(\d+)/),w=navigator.userAgent.match(/Edge\//);g(w||!E||parseInt(E[1],10)>=43)}}).catch(function(){return!1})}function q(f){return typeof I=="boolean"?n.resolve(I):V(f).then(function(g){return I=g,I})}function H(f){var g=D[f.name],d={};d.promise=new n(function(b,E){d.resolve=b,d.reject=E}),g.deferredOperations.push(d),g.dbReady?g.dbReady=g.dbReady.then(function(){return d.promise}):g.dbReady=d.promise}function oe(f){var g=D[f.name],d=g.deferredOperations.pop();if(d)return d.resolve(),d.promise}function se(f,g){var d=D[f.name],b=d.deferredOperations.pop();if(b)return b.reject(g),b.promise}function ce(f,g){return new n(function(d,b){if(D[f.name]=D[f.name]||ae(),f.db)if(g)H(f),f.db.close();else return d(f.db);var E=[f.name];g&&E.push(f.version);var w=v.open.apply(v,E);g&&(w.onupgradeneeded=function(R){var C=w.result;try{C.createObjectStore(f.storeName),R.oldVersion<=1&&C.createObjectStore(S)}catch(F){if(F.name==="ConstraintError")console.warn('The database "'+f.name+'" has been upgraded from version '+R.oldVersion+" to version "+R.newVersion+', but the storage "'+f.storeName+'" already exists.');else throw F}}),w.onerror=function(R){R.preventDefault(),b(w.error)},w.onsuccess=function(){var R=w.result;R.onversionchange=function(C){C.target.close()},d(R),oe(f)}})}function pe(f){return ce(f,!1)}function fe(f){return ce(f,!0)}function Ie(f,g){if(!f.db)return!0;var d=!f.db.objectStoreNames.contains(f.storeName),b=f.version<f.db.version,E=f.version>f.db.version;if(b&&(f.version!==g&&console.warn('The database "'+f.name+`" can't be downgraded from version `+f.db.version+" to version "+f.version+"."),f.version=f.db.version),E||d){if(d){var w=f.db.version+1;w>f.version&&(f.version=w)}return!0}return!1}function je(f){return new n(function(g,d){var b=new FileReader;b.onerror=d,b.onloadend=function(E){var w=btoa(E.target.result||"");g({__local_forage_encoded_blob:!0,data:w,type:f.type})},b.readAsBinaryString(f)})}function ke(f){var g=$(atob(f.data));return N([g],{type:f.type})}function ft(f){return f&&f.__local_forage_encoded_blob}function Mt(f){var g=this,d=g._initReady().then(function(){var b=D[g._dbInfo.name];if(b&&b.dbReady)return b.dbReady});return l(d,f,f),d}function Ut(f){H(f);for(var g=D[f.name],d=g.forages,b=0;b<d.length;b++){var E=d[b];E._dbInfo.db&&(E._dbInfo.db.close(),E._dbInfo.db=null)}return f.db=null,pe(f).then(function(w){return f.db=w,Ie(f)?fe(f):w}).then(function(w){f.db=g.db=w;for(var R=0;R<d.length;R++)d[R]._dbInfo.db=w}).catch(function(w){throw se(f,w),w})}function Z(f,g,d,b){b===void 0&&(b=1);try{var E=f.db.transaction(f.storeName,g);d(null,E)}catch(w){if(b>0&&(!f.db||w.name==="InvalidStateError"||w.name==="NotFoundError"))return n.resolve().then(function(){if(!f.db||w.name==="NotFoundError"&&!f.db.objectStoreNames.contains(f.storeName)&&f.version<=f.db.version)return f.db&&(f.version=f.db.version+1),fe(f)}).then(function(){return Ut(f).then(function(){Z(f,g,d,b-1)})}).catch(d);d(w)}}function ae(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function lt(f){var g=this,d={db:null};if(f)for(var b in f)d[b]=f[b];var E=D[d.name];E||(E=ae(),D[d.name]=E),E.forages.push(g),g._initReady||(g._initReady=g.ready,g.ready=Mt);var w=[];function R(){return n.resolve()}for(var C=0;C<E.forages.length;C++){var F=E.forages[C];F!==g&&w.push(F._initReady().catch(R))}var P=E.forages.slice(0);return n.all(w).then(function(){return d.db=E.db,pe(d)}).then(function(L){return d.db=L,Ie(d,g._defaultConfig.version)?fe(d):L}).then(function(L){d.db=E.db=L,g._dbInfo=d;for(var U=0;U<P.length;U++){var Y=P[U];Y!==g&&(Y._dbInfo.db=d.db,Y._dbInfo.version=d.version)}})}function ht(f,g){var d=this;f=y(f);var b=new n(function(E,w){d.ready().then(function(){Z(d._dbInfo,X,function(R,C){if(R)return w(R);try{var F=C.objectStore(d._dbInfo.storeName),P=F.get(f);P.onsuccess=function(){var L=P.result;L===void 0&&(L=null),ft(L)&&(L=ke(L)),E(L)},P.onerror=function(){w(P.error)}}catch(L){w(L)}})}).catch(w)});return a(b,g),b}function dt(f,g){var d=this,b=new n(function(E,w){d.ready().then(function(){Z(d._dbInfo,X,function(R,C){if(R)return w(R);try{var F=C.objectStore(d._dbInfo.storeName),P=F.openCursor(),L=1;P.onsuccess=function(){var U=P.result;if(U){var Y=U.value;ft(Y)&&(Y=ke(Y));var Q=f(Y,U.key,L++);Q!==void 0?E(Q):U.continue()}else E()},P.onerror=function(){w(P.error)}}catch(U){w(U)}})}).catch(w)});return a(b,g),b}function pt(f,g,d){var b=this;f=y(f);var E=new n(function(w,R){var C;b.ready().then(function(){return C=b._dbInfo,M.call(g)==="[object Blob]"?q(C.db).then(function(F){return F?g:je(g)}):g}).then(function(F){Z(b._dbInfo,O,function(P,L){if(P)return R(P);try{var U=L.objectStore(b._dbInfo.storeName);F===null&&(F=void 0);var Y=U.put(F,f);L.oncomplete=function(){F===void 0&&(F=null),w(F)},L.onabort=L.onerror=function(){var Q=Y.error?Y.error:Y.transaction.error;R(Q)}}catch(Q){R(Q)}})}).catch(R)});return a(E,d),E}function _t(f,g){var d=this;f=y(f);var b=new n(function(E,w){d.ready().then(function(){Z(d._dbInfo,O,function(R,C){if(R)return w(R);try{var F=C.objectStore(d._dbInfo.storeName),P=F.delete(f);C.oncomplete=function(){E()},C.onerror=function(){w(P.error)},C.onabort=function(){var L=P.error?P.error:P.transaction.error;w(L)}}catch(L){w(L)}})}).catch(w)});return a(b,g),b}function Re(f){var g=this,d=new n(function(b,E){g.ready().then(function(){Z(g._dbInfo,O,function(w,R){if(w)return E(w);try{var C=R.objectStore(g._dbInfo.storeName),F=C.clear();R.oncomplete=function(){b()},R.onabort=R.onerror=function(){var P=F.error?F.error:F.transaction.error;E(P)}}catch(P){E(P)}})}).catch(E)});return a(d,f),d}function Ze(f){var g=this,d=new n(function(b,E){g.ready().then(function(){Z(g._dbInfo,X,function(w,R){if(w)return E(w);try{var C=R.objectStore(g._dbInfo.storeName),F=C.count();F.onsuccess=function(){b(F.result)},F.onerror=function(){E(F.error)}}catch(P){E(P)}})}).catch(E)});return a(d,f),d}function mt(f,g){var d=this,b=new n(function(E,w){if(f<0){E(null);return}d.ready().then(function(){Z(d._dbInfo,X,function(R,C){if(R)return w(R);try{var F=C.objectStore(d._dbInfo.storeName),P=!1,L=F.openKeyCursor();L.onsuccess=function(){var U=L.result;if(!U){E(null);return}f===0||P?E(U.key):(P=!0,U.advance(f))},L.onerror=function(){w(L.error)}}catch(U){w(U)}})}).catch(w)});return a(b,g),b}function $t(f){var g=this,d=new n(function(b,E){g.ready().then(function(){Z(g._dbInfo,X,function(w,R){if(w)return E(w);try{var C=R.objectStore(g._dbInfo.storeName),F=C.openKeyCursor(),P=[];F.onsuccess=function(){var L=F.result;if(!L){b(P);return}P.push(L.key),L.continue()},F.onerror=function(){E(F.error)}}catch(L){E(L)}})}).catch(E)});return a(d,f),d}function yt(f,g){g=T.apply(this,arguments);var d=this.config();f=typeof f!="function"&&f||{},f.name||(f.name=f.name||d.name,f.storeName=f.storeName||d.storeName);var b=this,E;if(!f.name)E=n.reject("Invalid arguments");else{var w=f.name===d.name&&b._dbInfo.db,R=w?n.resolve(b._dbInfo.db):pe(f).then(function(C){var F=D[f.name],P=F.forages;F.db=C;for(var L=0;L<P.length;L++)P[L]._dbInfo.db=C;return C});f.storeName?E=R.then(function(C){if(!!C.objectStoreNames.contains(f.storeName)){var F=C.version+1;H(f);var P=D[f.name],L=P.forages;C.close();for(var U=0;U<L.length;U++){var Y=L[U];Y._dbInfo.db=null,Y._dbInfo.version=F}var Q=new n(function(j,ie){var re=v.open(f.name,F);re.onerror=function(me){var nt=re.result;nt.close(),ie(me)},re.onupgradeneeded=function(){var me=re.result;me.deleteObjectStore(f.storeName)},re.onsuccess=function(){var me=re.result;me.close(),j(me)}});return Q.then(function(j){P.db=j;for(var ie=0;ie<L.length;ie++){var re=L[ie];re._dbInfo.db=j,oe(re._dbInfo)}}).catch(function(j){throw(se(f,j)||n.resolve()).catch(function(){}),j})}}):E=R.then(function(C){H(f);var F=D[f.name],P=F.forages;C.close();for(var L=0;L<P.length;L++){var U=P[L];U._dbInfo.db=null}var Y=new n(function(Q,j){var ie=v.deleteDatabase(f.name);ie.onerror=function(){var re=ie.result;re&&re.close(),j(ie.error)},ie.onblocked=function(){console.warn('dropInstance blocked for database "'+f.name+'" until all open connections are closed')},ie.onsuccess=function(){var re=ie.result;re&&re.close(),Q(re)}});return Y.then(function(Q){F.db=Q;for(var j=0;j<P.length;j++){var ie=P[j];oe(ie._dbInfo)}}).catch(function(Q){throw(se(f,Q)||n.resolve()).catch(function(){}),Q})})}return a(E,g),E}var Ne={_driver:"asyncStorage",_initStorage:lt,_support:A(),iterate:dt,getItem:ht,setItem:pt,removeItem:_t,clear:Re,length:Ze,key:mt,keys:$t,dropInstance:yt};function De(){return typeof openDatabase=="function"}var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vt="~~local_forage_type~",$e=/^~~local_forage_type~([^~]+)~/,Ve="__lfsc__:",et=Ve.length,He="arbf",Ce="blob",_e="si08",qe="ui08",gt="uic8",ve="si16",vt="si32",c="ur16",o="ui32",s="fl32",_="fl64",x=et+He.length,B=Object.prototype.toString;function k(f){var g=f.length*.75,d=f.length,b,E=0,w,R,C,F;f[f.length-1]==="="&&(g--,f[f.length-2]==="="&&g--);var P=new ArrayBuffer(g),L=new Uint8Array(P);for(b=0;b<d;b+=4)w=be.indexOf(f[b]),R=be.indexOf(f[b+1]),C=be.indexOf(f[b+2]),F=be.indexOf(f[b+3]),L[E++]=w<<2|R>>4,L[E++]=(R&15)<<4|C>>2,L[E++]=(C&3)<<6|F&63;return P}function W(f){var g=new Uint8Array(f),d="",b;for(b=0;b<g.length;b+=3)d+=be[g[b]>>2],d+=be[(g[b]&3)<<4|g[b+1]>>4],d+=be[(g[b+1]&15)<<2|g[b+2]>>6],d+=be[g[b+2]&63];return g.length%3==2?d=d.substring(0,d.length-1)+"=":g.length%3==1&&(d=d.substring(0,d.length-2)+"=="),d}function ne(f,g){var d="";if(f&&(d=B.call(f)),f&&(d==="[object ArrayBuffer]"||f.buffer&&B.call(f.buffer)==="[object ArrayBuffer]")){var b,E=Ve;f instanceof ArrayBuffer?(b=f,E+=He):(b=f.buffer,d==="[object Int8Array]"?E+=_e:d==="[object Uint8Array]"?E+=qe:d==="[object Uint8ClampedArray]"?E+=gt:d==="[object Int16Array]"?E+=ve:d==="[object Uint16Array]"?E+=c:d==="[object Int32Array]"?E+=vt:d==="[object Uint32Array]"?E+=o:d==="[object Float32Array]"?E+=s:d==="[object Float64Array]"?E+=_:g(new Error("Failed to get type for BinaryArray"))),g(E+W(b))}else if(d==="[object Blob]"){var w=new FileReader;w.onload=function(){var R=Vt+f.type+"~"+W(this.result);g(Ve+Ce+R)},w.readAsArrayBuffer(f)}else try{g(JSON.stringify(f))}catch(R){console.error("Couldn't convert value into a JSON string: ",f),g(null,R)}}function ee(f){if(f.substring(0,et)!==Ve)return JSON.parse(f);var g=f.substring(x),d=f.substring(et,x),b;if(d===Ce&&$e.test(g)){var E=g.match($e);b=E[1],g=g.substring(E[0].length)}var w=k(g);switch(d){case He:return w;case Ce:return N([w],{type:b});case _e:return new Int8Array(w);case qe:return new Uint8Array(w);case gt:return new Uint8ClampedArray(w);case ve:return new Int16Array(w);case c:return new Uint16Array(w);case vt:return new Int32Array(w);case o:return new Uint32Array(w);case s:return new Float32Array(w);case _:return new Float64Array(w);default:throw new Error("Unkown type: "+d)}}var te={serialize:ne,deserialize:ee,stringToBuffer:k,bufferToString:W};function z(f,g,d,b){f.executeSql("CREATE TABLE IF NOT EXISTS "+g.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],d,b)}function fr(f){var g=this,d={db:null};if(f)for(var b in f)d[b]=typeof f[b]!="string"?f[b].toString():f[b];var E=new n(function(w,R){try{d.db=openDatabase(d.name,String(d.version),d.description,d.size)}catch(C){return R(C)}d.db.transaction(function(C){z(C,d,function(){g._dbInfo=d,w()},function(F,P){R(P)})},R)});return d.serializer=te,E}function Oe(f,g,d,b,E,w){f.executeSql(d,b,E,function(R,C){C.code===C.SYNTAX_ERR?R.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[g.storeName],function(F,P){P.rows.length?w(F,C):z(F,g,function(){F.executeSql(d,b,E,w)},w)},w):w(R,C)},w)}function lr(f,g){var d=this;f=y(f);var b=new n(function(E,w){d.ready().then(function(){var R=d._dbInfo;R.db.transaction(function(C){Oe(C,R,"SELECT * FROM "+R.storeName+" WHERE key = ? LIMIT 1",[f],function(F,P){var L=P.rows.length?P.rows.item(0).value:null;L&&(L=R.serializer.deserialize(L)),E(L)},function(F,P){w(P)})})}).catch(w)});return a(b,g),b}function hr(f,g){var d=this,b=new n(function(E,w){d.ready().then(function(){var R=d._dbInfo;R.db.transaction(function(C){Oe(C,R,"SELECT * FROM "+R.storeName,[],function(F,P){for(var L=P.rows,U=L.length,Y=0;Y<U;Y++){var Q=L.item(Y),j=Q.value;if(j&&(j=R.serializer.deserialize(j)),j=f(j,Q.key,Y+1),j!==void 0){E(j);return}}E()},function(F,P){w(P)})})}).catch(w)});return a(b,g),b}function bn(f,g,d,b){var E=this;f=y(f);var w=new n(function(R,C){E.ready().then(function(){g===void 0&&(g=null);var F=g,P=E._dbInfo;P.serializer.serialize(g,function(L,U){U?C(U):P.db.transaction(function(Y){Oe(Y,P,"INSERT OR REPLACE INTO "+P.storeName+" (key, value) VALUES (?, ?)",[f,L],function(){R(F)},function(Q,j){C(j)})},function(Y){if(Y.code===Y.QUOTA_ERR){if(b>0){R(bn.apply(E,[f,F,d,b-1]));return}C(Y)}})})}).catch(C)});return a(w,d),w}function dr(f,g,d){return bn.apply(this,[f,g,d,1])}function pr(f,g){var d=this;f=y(f);var b=new n(function(E,w){d.ready().then(function(){var R=d._dbInfo;R.db.transaction(function(C){Oe(C,R,"DELETE FROM "+R.storeName+" WHERE key = ?",[f],function(){E()},function(F,P){w(P)})})}).catch(w)});return a(b,g),b}function _r(f){var g=this,d=new n(function(b,E){g.ready().then(function(){var w=g._dbInfo;w.db.transaction(function(R){Oe(R,w,"DELETE FROM "+w.storeName,[],function(){b()},function(C,F){E(F)})})}).catch(E)});return a(d,f),d}function mr(f){var g=this,d=new n(function(b,E){g.ready().then(function(){var w=g._dbInfo;w.db.transaction(function(R){Oe(R,w,"SELECT COUNT(key) as c FROM "+w.storeName,[],function(C,F){var P=F.rows.item(0).c;b(P)},function(C,F){E(F)})})}).catch(E)});return a(d,f),d}function yr(f,g){var d=this,b=new n(function(E,w){d.ready().then(function(){var R=d._dbInfo;R.db.transaction(function(C){Oe(C,R,"SELECT key FROM "+R.storeName+" WHERE id = ? LIMIT 1",[f+1],function(F,P){var L=P.rows.length?P.rows.item(0).key:null;E(L)},function(F,P){w(P)})})}).catch(w)});return a(b,g),b}function gr(f){var g=this,d=new n(function(b,E){g.ready().then(function(){var w=g._dbInfo;w.db.transaction(function(R){Oe(R,w,"SELECT key FROM "+w.storeName,[],function(C,F){for(var P=[],L=0;L<F.rows.length;L++)P.push(F.rows.item(L).key);b(P)},function(C,F){E(F)})})}).catch(E)});return a(d,f),d}function vr(f){return new n(function(g,d){f.transaction(function(b){b.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(E,w){for(var R=[],C=0;C<w.rows.length;C++)R.push(w.rows.item(C).name);g({db:f,storeNames:R})},function(E,w){d(w)})},function(b){d(b)})})}function wr(f,g){g=T.apply(this,arguments);var d=this.config();f=typeof f!="function"&&f||{},f.name||(f.name=f.name||d.name,f.storeName=f.storeName||d.storeName);var b=this,E;return f.name?E=new n(function(w){var R;f.name===d.name?R=b._dbInfo.db:R=openDatabase(f.name,"","",0),f.storeName?w({db:R,storeNames:[f.storeName]}):w(vr(R))}).then(function(w){return new n(function(R,C){w.db.transaction(function(F){function P(Q){return new n(function(j,ie){F.executeSql("DROP TABLE IF EXISTS "+Q,[],function(){j()},function(re,me){ie(me)})})}for(var L=[],U=0,Y=w.storeNames.length;U<Y;U++)L.push(P(w.storeNames[U]));n.all(L).then(function(){R()}).catch(function(Q){C(Q)})},function(F){C(F)})})}):E=n.reject("Invalid arguments"),a(E,g),E}var xr={_driver:"webSQLStorage",_initStorage:fr,_support:De(),iterate:hr,getItem:lr,setItem:dr,removeItem:pr,clear:_r,length:mr,key:yr,keys:gr,dropInstance:wr};function br(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function An(f,g){var d=f.name+"/";return f.storeName!==g.storeName&&(d+=f.storeName+"/"),d}function Ar(){var f="_localforage_support_test";try{return localStorage.setItem(f,!0),localStorage.removeItem(f),!1}catch{return!0}}function Er(){return!Ar()||localStorage.length>0}function Sr(f){var g=this,d={};if(f)for(var b in f)d[b]=f[b];return d.keyPrefix=An(f,g._defaultConfig),Er()?(g._dbInfo=d,d.serializer=te,n.resolve()):n.reject()}function Ir(f){var g=this,d=g.ready().then(function(){for(var b=g._dbInfo.keyPrefix,E=localStorage.length-1;E>=0;E--){var w=localStorage.key(E);w.indexOf(b)===0&&localStorage.removeItem(w)}});return a(d,f),d}function Tr(f,g){var d=this;f=y(f);var b=d.ready().then(function(){var E=d._dbInfo,w=localStorage.getItem(E.keyPrefix+f);return w&&(w=E.serializer.deserialize(w)),w});return a(b,g),b}function Br(f,g){var d=this,b=d.ready().then(function(){for(var E=d._dbInfo,w=E.keyPrefix,R=w.length,C=localStorage.length,F=1,P=0;P<C;P++){var L=localStorage.key(P);if(L.indexOf(w)===0){var U=localStorage.getItem(L);if(U&&(U=E.serializer.deserialize(U)),U=f(U,L.substring(R),F++),U!==void 0)return U}}});return a(b,g),b}function kr(f,g){var d=this,b=d.ready().then(function(){var E=d._dbInfo,w;try{w=localStorage.key(f)}catch{w=null}return w&&(w=w.substring(E.keyPrefix.length)),w});return a(b,g),b}function Rr(f){var g=this,d=g.ready().then(function(){for(var b=g._dbInfo,E=localStorage.length,w=[],R=0;R<E;R++){var C=localStorage.key(R);C.indexOf(b.keyPrefix)===0&&w.push(C.substring(b.keyPrefix.length))}return w});return a(d,f),d}function Nr(f){var g=this,d=g.keys().then(function(b){return b.length});return a(d,f),d}function Cr(f,g){var d=this;f=y(f);var b=d.ready().then(function(){var E=d._dbInfo;localStorage.removeItem(E.keyPrefix+f)});return a(b,g),b}function Or(f,g,d){var b=this;f=y(f);var E=b.ready().then(function(){g===void 0&&(g=null);var w=g;return new n(function(R,C){var F=b._dbInfo;F.serializer.serialize(g,function(P,L){if(L)C(L);else try{localStorage.setItem(F.keyPrefix+f,P),R(w)}catch(U){(U.name==="QuotaExceededError"||U.name==="NS_ERROR_DOM_QUOTA_REACHED")&&C(U),C(U)}})})});return a(E,d),E}function Fr(f,g){if(g=T.apply(this,arguments),f=typeof f!="function"&&f||{},!f.name){var d=this.config();f.name=f.name||d.name,f.storeName=f.storeName||d.storeName}var b=this,E;return f.name?E=new n(function(w){f.storeName?w(An(f,b._defaultConfig)):w(f.name+"/")}).then(function(w){for(var R=localStorage.length-1;R>=0;R--){var C=localStorage.key(R);C.indexOf(w)===0&&localStorage.removeItem(C)}}):E=n.reject("Invalid arguments"),a(E,g),E}var Pr={_driver:"localStorageWrapper",_initStorage:Sr,_support:br(),iterate:Br,getItem:Tr,setItem:Or,removeItem:Cr,clear:Ir,length:Nr,key:kr,keys:Rr,dropInstance:Fr},Dr=function(g,d){return g===d||typeof g=="number"&&typeof d=="number"&&isNaN(g)&&isNaN(d)},Lr=function(g,d){for(var b=g.length,E=0;E<b;){if(Dr(g[E],d))return!0;E++}return!1},En=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"},tt={},Sn={},We={INDEXEDDB:Ne,WEBSQL:xr,LOCALSTORAGE:Pr},Mr=[We.INDEXEDDB._driver,We.WEBSQL._driver,We.LOCALSTORAGE._driver],wt=["dropInstance"],Ht=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(wt),Ur={description:"",driver:Mr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function $r(f,g){f[g]=function(){var d=arguments;return f.ready().then(function(){return f[g].apply(f,d)})}}function qt(){for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g)for(var d in g)g.hasOwnProperty(d)&&(En(g[d])?arguments[0][d]=g[d].slice():arguments[0][d]=g[d])}return arguments[0]}var Vr=function(){function f(g){p(this,f);for(var d in We)if(We.hasOwnProperty(d)){var b=We[d],E=b._driver;this[d]=E,tt[E]||this.defineDriver(b)}this._defaultConfig=qt({},Ur),this._config=qt({},this._defaultConfig,g),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return f.prototype.config=function(d){if((typeof d=="undefined"?"undefined":m(d))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in d){if(b==="storeName"&&(d[b]=d[b].replace(/\W/g,"_")),b==="version"&&typeof d[b]!="number")return new Error("Database version must be a number.");this._config[b]=d[b]}return"driver"in d&&d.driver?this.setDriver(this._config.driver):!0}else return typeof d=="string"?this._config[d]:this._config},f.prototype.defineDriver=function(d,b,E){var w=new n(function(R,C){try{var F=d._driver,P=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!d._driver){C(P);return}for(var L=Ht.concat("_initStorage"),U=0,Y=L.length;U<Y;U++){var Q=L[U],j=!Lr(wt,Q);if((j||d[Q])&&typeof d[Q]!="function"){C(P);return}}var ie=function(){for(var nt=function(Wr){return function(){var Gr=new Error("Method "+Wr+" is not implemented by the current driver"),In=n.reject(Gr);return a(In,arguments[arguments.length-1]),In}},Wt=0,qr=wt.length;Wt<qr;Wt++){var Gt=wt[Wt];d[Gt]||(d[Gt]=nt(Gt))}};ie();var re=function(nt){tt[F]&&console.info("Redefining LocalForage driver: "+F),tt[F]=d,Sn[F]=nt,R()};"_support"in d?d._support&&typeof d._support=="function"?d._support().then(re,C):re(!!d._support):re(!0)}catch(me){C(me)}});return l(w,b,E),w},f.prototype.driver=function(){return this._driver||null},f.prototype.getDriver=function(d,b,E){var w=tt[d]?n.resolve(tt[d]):n.reject(new Error("Driver not found."));return l(w,b,E),w},f.prototype.getSerializer=function(d){var b=n.resolve(te);return l(b,d),b},f.prototype.ready=function(d){var b=this,E=b._driverSet.then(function(){return b._ready===null&&(b._ready=b._initDriver()),b._ready});return l(E,d,d),E},f.prototype.setDriver=function(d,b,E){var w=this;En(d)||(d=[d]);var R=this._getSupportedDrivers(d);function C(){w._config.driver=w.driver()}function F(U){return w._extend(U),C(),w._ready=w._initStorage(w._config),w._ready}function P(U){return function(){var Y=0;function Q(){for(;Y<U.length;){var j=U[Y];return Y++,w._dbInfo=null,w._ready=null,w.getDriver(j).then(F).catch(Q)}C();var ie=new Error("No available storage method found.");return w._driverSet=n.reject(ie),w._driverSet}return Q()}}var L=this._driverSet!==null?this._driverSet.catch(function(){return n.resolve()}):n.resolve();return this._driverSet=L.then(function(){var U=R[0];return w._dbInfo=null,w._ready=null,w.getDriver(U).then(function(Y){w._driver=Y._driver,C(),w._wrapLibraryMethodsWithReady(),w._initDriver=P(R)})}).catch(function(){C();var U=new Error("No available storage method found.");return w._driverSet=n.reject(U),w._driverSet}),l(this._driverSet,b,E),this._driverSet},f.prototype.supports=function(d){return!!Sn[d]},f.prototype._extend=function(d){qt(this,d)},f.prototype._getSupportedDrivers=function(d){for(var b=[],E=0,w=d.length;E<w;E++){var R=d[E];this.supports(R)&&b.push(R)}return b},f.prototype._wrapLibraryMethodsWithReady=function(){for(var d=0,b=Ht.length;d<b;d++)$r(this,Ht[d])},f.prototype.createInstance=function(d){return new f(d)},f}(),Hr=new Vr;i.exports=Hr},{"3":3}]},{},[4])(4)})})(cr);var qs=cr.exports,Lt,Ho=new Uint8Array(16);function qo(){if(!Lt&&(Lt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lt(Ho)}var Wo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Go(r){return typeof r=="string"&&Wo.test(r)}var ue=[];for(var xn=0;xn<256;++xn)ue.push((xn+256).toString(16).substr(1));function Yo(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(ue[r[e+0]]+ue[r[e+1]]+ue[r[e+2]]+ue[r[e+3]]+"-"+ue[r[e+4]]+ue[r[e+5]]+"-"+ue[r[e+6]]+ue[r[e+7]]+"-"+ue[r[e+8]]+ue[r[e+9]]+"-"+ue[r[e+10]]+ue[r[e+11]]+ue[r[e+12]]+ue[r[e+13]]+ue[r[e+14]]+ue[r[e+15]]).toLowerCase();if(!Go(t))throw TypeError("Stringified UUID is invalid");return t}function Ws(r,e,t){r=r||{};var i=r.random||(r.rng||qo)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(var u=0;u<16;++u)e[t+u]=i[u];return e}return Yo(i)}var Xo={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var n=this||t;return n._counter=1e3,n._html5AudioPool=[],n.html5PoolSize=10,n._codecs={},n._howls=[],n._muted=!1,n._volume=1,n._canPlayEvent="canplaythrough",n._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,n.masterGain=null,n.noAudio=!1,n.usingWebAudio=!0,n.autoSuspend=!0,n.ctx=null,n.autoUnlock=!0,n._setup(),n},volume:function(n){var a=this||t;if(n=parseFloat(n),a.ctx||N(),typeof n!="undefined"&&n>=0&&n<=1){if(a._volume=n,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(n,t.ctx.currentTime);for(var l=0;l<a._howls.length;l++)if(!a._howls[l]._webAudio)for(var y=a._howls[l]._getSoundIds(),T=0;T<y.length;T++){var S=a._howls[l]._soundById(y[T]);S&&S._node&&(S._node.volume=S._volume*n)}return a}return a._volume},mute:function(n){var a=this||t;a.ctx||N(),a._muted=n,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(n?0:a._volume,t.ctx.currentTime);for(var l=0;l<a._howls.length;l++)if(!a._howls[l]._webAudio)for(var y=a._howls[l]._getSoundIds(),T=0;T<y.length;T++){var S=a._howls[l]._soundById(y[T]);S&&S._node&&(S._node.muted=n?!0:S._muted)}return a},stop:function(){for(var n=this||t,a=0;a<n._howls.length;a++)n._howls[a].stop();return n},unload:function(){for(var n=this||t,a=n._howls.length-1;a>=0;a--)n._howls[a].unload();return n.usingWebAudio&&n.ctx&&typeof n.ctx.close!="undefined"&&(n.ctx.close(),n.ctx=null,N()),n},codecs:function(n){return(this||t)._codecs[n.replace(/^x-/,"")]},_setup:function(){var n=this||t;if(n.state=n.ctx&&n.ctx.state||"suspended",n._autoSuspend(),!n.usingWebAudio)if(typeof Audio!="undefined")try{var a=new Audio;typeof a.oncanplaythrough=="undefined"&&(n._canPlayEvent="canplay")}catch{n.noAudio=!0}else n.noAudio=!0;try{var a=new Audio;a.muted&&(n.noAudio=!0)}catch{}return n.noAudio||n._setupCodecs(),n},_setupCodecs:function(){var n=this||t,a=null;try{a=typeof Audio!="undefined"?new Audio:null}catch{return n}if(!a||typeof a.canPlayType!="function")return n;var l=a.canPlayType("audio/mpeg;").replace(/^no$/,""),y=n._navigator?n._navigator.userAgent:"",T=y.match(/OPR\/([0-6].)/g),S=T&&parseInt(T[0].split("/")[1],10)<33,I=y.indexOf("Safari")!==-1&&y.indexOf("Chrome")===-1,D=y.match(/Version\/(.*?) /),M=I&&D&&parseInt(D[1],10)<15;return n._codecs={mp3:!!(!S&&(l||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!l,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!M&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!M&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},n},_unlockAudio:function(){var n=this||t;if(!(n._audioUnlocked||!n.ctx)){n._audioUnlocked=!1,n.autoUnlock=!1,!n._mobileUnloaded&&n.ctx.sampleRate!==44100&&(n._mobileUnloaded=!0,n.unload()),n._scratchBuffer=n.ctx.createBuffer(1,1,22050);var a=function(l){for(;n._html5AudioPool.length<n.html5PoolSize;)try{var y=new Audio;y._unlocked=!0,n._releaseHtml5Audio(y)}catch{n.noAudio=!0;break}for(var T=0;T<n._howls.length;T++)if(!n._howls[T]._webAudio)for(var S=n._howls[T]._getSoundIds(),I=0;I<S.length;I++){var D=n._howls[T]._soundById(S[I]);D&&D._node&&!D._node._unlocked&&(D._node._unlocked=!0,D._node.load())}n._autoResume();var M=n.ctx.createBufferSource();M.buffer=n._scratchBuffer,M.connect(n.ctx.destination),typeof M.start=="undefined"?M.noteOn(0):M.start(0),typeof n.ctx.resume=="function"&&n.ctx.resume(),M.onended=function(){M.disconnect(0),n._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var X=0;X<n._howls.length;X++)n._howls[X]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),n}},_obtainHtml5Audio:function(){var n=this||t;if(n._html5AudioPool.length)return n._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise!="undefined"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(n){var a=this||t;return n._unlocked&&a._html5AudioPool.push(n),a},_autoSuspend:function(){var n=this;if(!(!n.autoSuspend||!n.ctx||typeof n.ctx.suspend=="undefined"||!t.usingWebAudio)){for(var a=0;a<n._howls.length;a++)if(n._howls[a]._webAudio){for(var l=0;l<n._howls[a]._sounds.length;l++)if(!n._howls[a]._sounds[l]._paused)return n}return n._suspendTimer&&clearTimeout(n._suspendTimer),n._suspendTimer=setTimeout(function(){if(!!n.autoSuspend){n._suspendTimer=null,n.state="suspending";var y=function(){n.state="suspended",n._resumeAfterSuspend&&(delete n._resumeAfterSuspend,n._autoResume())};n.ctx.suspend().then(y,y)}},3e4),n}},_autoResume:function(){var n=this;if(!(!n.ctx||typeof n.ctx.resume=="undefined"||!t.usingWebAudio))return n.state==="running"&&n.ctx.state!=="interrupted"&&n._suspendTimer?(clearTimeout(n._suspendTimer),n._suspendTimer=null):n.state==="suspended"||n.state==="running"&&n.ctx.state==="interrupted"?(n.ctx.resume().then(function(){n.state="running";for(var a=0;a<n._howls.length;a++)n._howls[a]._emit("resume")}),n._suspendTimer&&(clearTimeout(n._suspendTimer),n._suspendTimer=null)):n.state==="suspending"&&(n._resumeAfterSuspend=!0),n}};var t=new e,i=function(n){var a=this;if(!n.src||n.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(n)};i.prototype={init:function(n){var a=this;return t.ctx||N(),a._autoplay=n.autoplay||!1,a._format=typeof n.format!="string"?n.format:[n.format],a._html5=n.html5||!1,a._muted=n.mute||!1,a._loop=n.loop||!1,a._pool=n.pool||5,a._preload=typeof n.preload=="boolean"||n.preload==="metadata"?n.preload:!0,a._rate=n.rate||1,a._sprite=n.sprite||{},a._src=typeof n.src!="string"?n.src:[n.src],a._volume=n.volume!==void 0?n.volume:1,a._xhr={method:n.xhr&&n.xhr.method?n.xhr.method:"GET",headers:n.xhr&&n.xhr.headers?n.xhr.headers:null,withCredentials:n.xhr&&n.xhr.withCredentials?n.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=n.onend?[{fn:n.onend}]:[],a._onfade=n.onfade?[{fn:n.onfade}]:[],a._onload=n.onload?[{fn:n.onload}]:[],a._onloaderror=n.onloaderror?[{fn:n.onloaderror}]:[],a._onplayerror=n.onplayerror?[{fn:n.onplayerror}]:[],a._onpause=n.onpause?[{fn:n.onpause}]:[],a._onplay=n.onplay?[{fn:n.onplay}]:[],a._onstop=n.onstop?[{fn:n.onstop}]:[],a._onmute=n.onmute?[{fn:n.onmute}]:[],a._onvolume=n.onvolume?[{fn:n.onvolume}]:[],a._onrate=n.onrate?[{fn:n.onrate}]:[],a._onseek=n.onseek?[{fn:n.onseek}]:[],a._onunlock=n.onunlock?[{fn:n.onunlock}]:[],a._onresume=[],a._webAudio=t.usingWebAudio&&!a._html5,typeof t.ctx!="undefined"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var n=this,a=null;if(t.noAudio){n._emit("loaderror",null,"No audio support.");return}typeof n._src=="string"&&(n._src=[n._src]);for(var l=0;l<n._src.length;l++){var y,T;if(n._format&&n._format[l])y=n._format[l];else{if(T=n._src[l],typeof T!="string"){n._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}y=/^data:audio\/([^;,]+);/i.exec(T),y||(y=/\.([^.]+)$/.exec(T.split("?",1)[0])),y&&(y=y[1].toLowerCase())}if(y||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),y&&t.codecs(y)){a=n._src[l];break}}if(!a){n._emit("loaderror",null,"No codec support for selected audio sources.");return}return n._src=a,n._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(n._html5=!0,n._webAudio=!1),new u(n),n._webAudio&&p(n),n},play:function(n,a){var l=this,y=null;if(typeof n=="number")y=n,n=null;else{if(typeof n=="string"&&l._state==="loaded"&&!l._sprite[n])return null;if(typeof n=="undefined"&&(n="__default",!l._playLock)){for(var T=0,S=0;S<l._sounds.length;S++)l._sounds[S]._paused&&!l._sounds[S]._ended&&(T++,y=l._sounds[S]._id);T===1?n=null:y=null}}var I=y?l._soundById(y):l._inactiveSound();if(!I)return null;if(y&&!n&&(n=I._sprite||"__default"),l._state!=="loaded"){I._sprite=n,I._ended=!1;var D=I._id;return l._queue.push({event:"play",action:function(){l.play(D)}}),D}if(y&&!I._paused)return a||l._loadQueue("play"),I._id;l._webAudio&&t._autoResume();var M=Math.max(0,I._seek>0?I._seek:l._sprite[n][0]/1e3),X=Math.max(0,(l._sprite[n][0]+l._sprite[n][1])/1e3-M),O=X*1e3/Math.abs(I._rate),$=l._sprite[n][0]/1e3,V=(l._sprite[n][0]+l._sprite[n][1])/1e3;I._sprite=n,I._ended=!1;var q=function(){I._paused=!1,I._seek=M,I._start=$,I._stop=V,I._loop=!!(I._loop||l._sprite[n][2])};if(M>=V){l._ended(I);return}var H=I._node;if(l._webAudio){var oe=function(){l._playLock=!1,q(),l._refreshBuffer(I);var fe=I._muted||l._muted?0:I._volume;H.gain.setValueAtTime(fe,t.ctx.currentTime),I._playStart=t.ctx.currentTime,typeof H.bufferSource.start=="undefined"?I._loop?H.bufferSource.noteGrainOn(0,M,86400):H.bufferSource.noteGrainOn(0,M,X):I._loop?H.bufferSource.start(0,M,86400):H.bufferSource.start(0,M,X),O!==1/0&&(l._endTimers[I._id]=setTimeout(l._ended.bind(l,I),O)),a||setTimeout(function(){l._emit("play",I._id),l._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?oe():(l._playLock=!0,l.once("resume",oe),l._clearTimer(I._id))}else{var se=function(){H.currentTime=M,H.muted=I._muted||l._muted||t._muted||H.muted,H.volume=I._volume*t.volume(),H.playbackRate=I._rate;try{var fe=H.play();if(fe&&typeof Promise!="undefined"&&(fe instanceof Promise||typeof fe.then=="function")?(l._playLock=!0,q(),fe.then(function(){l._playLock=!1,H._unlocked=!0,a?l._loadQueue():l._emit("play",I._id)}).catch(function(){l._playLock=!1,l._emit("playerror",I._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),I._ended=!0,I._paused=!0})):a||(l._playLock=!1,q(),l._emit("play",I._id)),H.playbackRate=I._rate,H.paused){l._emit("playerror",I._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}n!=="__default"||I._loop?l._endTimers[I._id]=setTimeout(l._ended.bind(l,I),O):(l._endTimers[I._id]=function(){l._ended(I),H.removeEventListener("ended",l._endTimers[I._id],!1)},H.addEventListener("ended",l._endTimers[I._id],!1))}catch(Ie){l._emit("playerror",I._id,Ie)}};H.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(H.src=l._src,H.load());var ce=window&&window.ejecta||!H.readyState&&t._navigator.isCocoonJS;if(H.readyState>=3||ce)se();else{l._playLock=!0,l._state="loading";var pe=function(){l._state="loaded",se(),H.removeEventListener(t._canPlayEvent,pe,!1)};H.addEventListener(t._canPlayEvent,pe,!1),l._clearTimer(I._id)}}return I._id},pause:function(n){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(n)}}),a;for(var l=a._getSoundIds(n),y=0;y<l.length;y++){a._clearTimer(l[y]);var T=a._soundById(l[y]);if(T&&!T._paused&&(T._seek=a.seek(l[y]),T._rateSeek=0,T._paused=!0,a._stopFade(l[y]),T._node))if(a._webAudio){if(!T._node.bufferSource)continue;typeof T._node.bufferSource.stop=="undefined"?T._node.bufferSource.noteOff(0):T._node.bufferSource.stop(0),a._cleanBuffer(T._node)}else(!isNaN(T._node.duration)||T._node.duration===1/0)&&T._node.pause();arguments[1]||a._emit("pause",T?T._id:null)}return a},stop:function(n,a){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"stop",action:function(){l.stop(n)}}),l;for(var y=l._getSoundIds(n),T=0;T<y.length;T++){l._clearTimer(y[T]);var S=l._soundById(y[T]);S&&(S._seek=S._start||0,S._rateSeek=0,S._paused=!0,S._ended=!0,l._stopFade(y[T]),S._node&&(l._webAudio?S._node.bufferSource&&(typeof S._node.bufferSource.stop=="undefined"?S._node.bufferSource.noteOff(0):S._node.bufferSource.stop(0),l._cleanBuffer(S._node)):(!isNaN(S._node.duration)||S._node.duration===1/0)&&(S._node.currentTime=S._start||0,S._node.pause(),S._node.duration===1/0&&l._clearSound(S._node))),a||l._emit("stop",S._id))}return l},mute:function(n,a){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"mute",action:function(){l.mute(n,a)}}),l;if(typeof a=="undefined")if(typeof n=="boolean")l._muted=n;else return l._muted;for(var y=l._getSoundIds(a),T=0;T<y.length;T++){var S=l._soundById(y[T]);S&&(S._muted=n,S._interval&&l._stopFade(S._id),l._webAudio&&S._node?S._node.gain.setValueAtTime(n?0:S._volume,t.ctx.currentTime):S._node&&(S._node.muted=t._muted?!0:n),l._emit("mute",S._id))}return l},volume:function(){var n=this,a=arguments,l,y;if(a.length===0)return n._volume;if(a.length===1||a.length===2&&typeof a[1]=="undefined"){var T=n._getSoundIds(),S=T.indexOf(a[0]);S>=0?y=parseInt(a[0],10):l=parseFloat(a[0])}else a.length>=2&&(l=parseFloat(a[0]),y=parseInt(a[1],10));var I;if(typeof l!="undefined"&&l>=0&&l<=1){if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,a)}}),n;typeof y=="undefined"&&(n._volume=l),y=n._getSoundIds(y);for(var D=0;D<y.length;D++)I=n._soundById(y[D]),I&&(I._volume=l,a[2]||n._stopFade(y[D]),n._webAudio&&I._node&&!I._muted?I._node.gain.setValueAtTime(l,t.ctx.currentTime):I._node&&!I._muted&&(I._node.volume=l*t.volume()),n._emit("volume",I._id))}else return I=y?n._soundById(y):n._sounds[0],I?I._volume:0;return n},fade:function(n,a,l,y){var T=this;if(T._state!=="loaded"||T._playLock)return T._queue.push({event:"fade",action:function(){T.fade(n,a,l,y)}}),T;n=Math.min(Math.max(0,parseFloat(n)),1),a=Math.min(Math.max(0,parseFloat(a)),1),l=parseFloat(l),T.volume(n,y);for(var S=T._getSoundIds(y),I=0;I<S.length;I++){var D=T._soundById(S[I]);if(D){if(y||T._stopFade(S[I]),T._webAudio&&!D._muted){var M=t.ctx.currentTime,X=M+l/1e3;D._volume=n,D._node.gain.setValueAtTime(n,M),D._node.gain.linearRampToValueAtTime(a,X)}T._startFadeInterval(D,n,a,l,S[I],typeof y=="undefined")}}return T},_startFadeInterval:function(n,a,l,y,T,S){var I=this,D=a,M=l-a,X=Math.abs(M/.01),O=Math.max(4,X>0?y/X:y),$=Date.now();n._fadeTo=l,n._interval=setInterval(function(){var V=(Date.now()-$)/y;$=Date.now(),D+=M*V,D=Math.round(D*100)/100,M<0?D=Math.max(l,D):D=Math.min(l,D),I._webAudio?n._volume=D:I.volume(D,n._id,!0),S&&(I._volume=D),(l<a&&D<=l||l>a&&D>=l)&&(clearInterval(n._interval),n._interval=null,n._fadeTo=null,I.volume(l,n._id),I._emit("fade",n._id))},O)},_stopFade:function(n){var a=this,l=a._soundById(n);return l&&l._interval&&(a._webAudio&&l._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(l._interval),l._interval=null,a.volume(l._fadeTo,n),l._fadeTo=null,a._emit("fade",n)),a},loop:function(){var n=this,a=arguments,l,y,T;if(a.length===0)return n._loop;if(a.length===1)if(typeof a[0]=="boolean")l=a[0],n._loop=l;else return T=n._soundById(parseInt(a[0],10)),T?T._loop:!1;else a.length===2&&(l=a[0],y=parseInt(a[1],10));for(var S=n._getSoundIds(y),I=0;I<S.length;I++)T=n._soundById(S[I]),T&&(T._loop=l,n._webAudio&&T._node&&T._node.bufferSource&&(T._node.bufferSource.loop=l,l&&(T._node.bufferSource.loopStart=T._start||0,T._node.bufferSource.loopEnd=T._stop,n.playing(S[I])&&(n.pause(S[I],!0),n.play(S[I],!0)))));return n},rate:function(){var n=this,a=arguments,l,y;if(a.length===0)y=n._sounds[0]._id;else if(a.length===1){var T=n._getSoundIds(),S=T.indexOf(a[0]);S>=0?y=parseInt(a[0],10):l=parseFloat(a[0])}else a.length===2&&(l=parseFloat(a[0]),y=parseInt(a[1],10));var I;if(typeof l=="number"){if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,a)}}),n;typeof y=="undefined"&&(n._rate=l),y=n._getSoundIds(y);for(var D=0;D<y.length;D++)if(I=n._soundById(y[D]),I){n.playing(y[D])&&(I._rateSeek=n.seek(y[D]),I._playStart=n._webAudio?t.ctx.currentTime:I._playStart),I._rate=l,n._webAudio&&I._node&&I._node.bufferSource?I._node.bufferSource.playbackRate.setValueAtTime(l,t.ctx.currentTime):I._node&&(I._node.playbackRate=l);var M=n.seek(y[D]),X=(n._sprite[I._sprite][0]+n._sprite[I._sprite][1])/1e3-M,O=X*1e3/Math.abs(I._rate);(n._endTimers[y[D]]||!I._paused)&&(n._clearTimer(y[D]),n._endTimers[y[D]]=setTimeout(n._ended.bind(n,I),O)),n._emit("rate",I._id)}}else return I=n._soundById(y),I?I._rate:n._rate;return n},seek:function(){var n=this,a=arguments,l,y;if(a.length===0)n._sounds.length&&(y=n._sounds[0]._id);else if(a.length===1){var T=n._getSoundIds(),S=T.indexOf(a[0]);S>=0?y=parseInt(a[0],10):n._sounds.length&&(y=n._sounds[0]._id,l=parseFloat(a[0]))}else a.length===2&&(l=parseFloat(a[0]),y=parseInt(a[1],10));if(typeof y=="undefined")return 0;if(typeof l=="number"&&(n._state!=="loaded"||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,a)}}),n;var I=n._soundById(y);if(I)if(typeof l=="number"&&l>=0){var D=n.playing(y);D&&n.pause(y,!0),I._seek=l,I._ended=!1,n._clearTimer(y),!n._webAudio&&I._node&&!isNaN(I._node.duration)&&(I._node.currentTime=l);var M=function(){D&&n.play(y,!0),n._emit("seek",y)};if(D&&!n._webAudio){var X=function(){n._playLock?setTimeout(X,0):M()};setTimeout(X,0)}else M()}else if(n._webAudio){var O=n.playing(y)?t.ctx.currentTime-I._playStart:0,$=I._rateSeek?I._rateSeek-I._seek:0;return I._seek+($+O*Math.abs(I._rate))}else return I._node.currentTime;return n},playing:function(n){var a=this;if(typeof n=="number"){var l=a._soundById(n);return l?!l._paused:!1}for(var y=0;y<a._sounds.length;y++)if(!a._sounds[y]._paused)return!0;return!1},duration:function(n){var a=this,l=a._duration,y=a._soundById(n);return y&&(l=a._sprite[y._sprite][1]/1e3),l},state:function(){return this._state},unload:function(){for(var n=this,a=n._sounds,l=0;l<a.length;l++)a[l]._paused||n.stop(a[l]._id),n._webAudio||(n._clearSound(a[l]._node),a[l]._node.removeEventListener("error",a[l]._errorFn,!1),a[l]._node.removeEventListener(t._canPlayEvent,a[l]._loadFn,!1),a[l]._node.removeEventListener("ended",a[l]._endFn,!1),t._releaseHtml5Audio(a[l]._node)),delete a[l]._node,n._clearTimer(a[l]._id);var y=t._howls.indexOf(n);y>=0&&t._howls.splice(y,1);var T=!0;for(l=0;l<t._howls.length;l++)if(t._howls[l]._src===n._src||n._src.indexOf(t._howls[l]._src)>=0){T=!1;break}return m&&T&&delete m[n._src],t.noAudio=!1,n._state="unloaded",n._sounds=[],n=null,null},on:function(n,a,l,y){var T=this,S=T["_on"+n];return typeof a=="function"&&S.push(y?{id:l,fn:a,once:y}:{id:l,fn:a}),T},off:function(n,a,l){var y=this,T=y["_on"+n],S=0;if(typeof a=="number"&&(l=a,a=null),a||l)for(S=0;S<T.length;S++){var I=l===T[S].id;if(a===T[S].fn&&I||!a&&I){T.splice(S,1);break}}else if(n)y["_on"+n]=[];else{var D=Object.keys(y);for(S=0;S<D.length;S++)D[S].indexOf("_on")===0&&Array.isArray(y[D[S]])&&(y[D[S]]=[])}return y},once:function(n,a,l){var y=this;return y.on(n,a,l,1),y},_emit:function(n,a,l){for(var y=this,T=y["_on"+n],S=T.length-1;S>=0;S--)(!T[S].id||T[S].id===a||n==="load")&&(setTimeout(function(I){I.call(this,a,l)}.bind(y,T[S].fn),0),T[S].once&&y.off(n,T[S].fn,T[S].id));return y._loadQueue(n),y},_loadQueue:function(n){var a=this;if(a._queue.length>0){var l=a._queue[0];l.event===n&&(a._queue.shift(),a._loadQueue()),n||l.action()}return a},_ended:function(n){var a=this,l=n._sprite;if(!a._webAudio&&n._node&&!n._node.paused&&!n._node.ended&&n._node.currentTime<n._stop)return setTimeout(a._ended.bind(a,n),100),a;var y=!!(n._loop||a._sprite[l][2]);if(a._emit("end",n._id),!a._webAudio&&y&&a.stop(n._id,!0).play(n._id),a._webAudio&&y){a._emit("play",n._id),n._seek=n._start||0,n._rateSeek=0,n._playStart=t.ctx.currentTime;var T=(n._stop-n._start)*1e3/Math.abs(n._rate);a._endTimers[n._id]=setTimeout(a._ended.bind(a,n),T)}return a._webAudio&&!y&&(n._paused=!0,n._ended=!0,n._seek=n._start||0,n._rateSeek=0,a._clearTimer(n._id),a._cleanBuffer(n._node),t._autoSuspend()),!a._webAudio&&!y&&a.stop(n._id,!0),a},_clearTimer:function(n){var a=this;if(a._endTimers[n]){if(typeof a._endTimers[n]!="function")clearTimeout(a._endTimers[n]);else{var l=a._soundById(n);l&&l._node&&l._node.removeEventListener("ended",a._endTimers[n],!1)}delete a._endTimers[n]}return a},_soundById:function(n){for(var a=this,l=0;l<a._sounds.length;l++)if(n===a._sounds[l]._id)return a._sounds[l];return null},_inactiveSound:function(){var n=this;n._drain();for(var a=0;a<n._sounds.length;a++)if(n._sounds[a]._ended)return n._sounds[a].reset();return new u(n)},_drain:function(){var n=this,a=n._pool,l=0,y=0;if(!(n._sounds.length<a)){for(y=0;y<n._sounds.length;y++)n._sounds[y]._ended&&l++;for(y=n._sounds.length-1;y>=0;y--){if(l<=a)return;n._sounds[y]._ended&&(n._webAudio&&n._sounds[y]._node&&n._sounds[y]._node.disconnect(0),n._sounds.splice(y,1),l--)}}},_getSoundIds:function(n){var a=this;if(typeof n=="undefined"){for(var l=[],y=0;y<a._sounds.length;y++)l.push(a._sounds[y]._id);return l}else return[n]},_refreshBuffer:function(n){var a=this;return n._node.bufferSource=t.ctx.createBufferSource(),n._node.bufferSource.buffer=m[a._src],n._panner?n._node.bufferSource.connect(n._panner):n._node.bufferSource.connect(n._node),n._node.bufferSource.loop=n._loop,n._loop&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop||0),n._node.bufferSource.playbackRate.setValueAtTime(n._rate,t.ctx.currentTime),a},_cleanBuffer:function(n){var a=this,l=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&n.bufferSource&&(n.bufferSource.onended=null,n.bufferSource.disconnect(0),l))try{n.bufferSource.buffer=t._scratchBuffer}catch{}return n.bufferSource=null,a},_clearSound:function(n){var a=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);a||(n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var u=function(n){this._parent=n,this.init()};u.prototype={init:function(){var n=this,a=n._parent;return n._muted=a._muted,n._loop=a._loop,n._volume=a._volume,n._rate=a._rate,n._seek=0,n._paused=!0,n._ended=!0,n._sprite="__default",n._id=++t._counter,a._sounds.push(n),n.create(),n},create:function(){var n=this,a=n._parent,l=t._muted||n._muted||n._parent._muted?0:n._volume;return a._webAudio?(n._node=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),n._node.gain.setValueAtTime(l,t.ctx.currentTime),n._node.paused=!0,n._node.connect(t.masterGain)):t.noAudio||(n._node=t._obtainHtml5Audio(),n._errorFn=n._errorListener.bind(n),n._node.addEventListener("error",n._errorFn,!1),n._loadFn=n._loadListener.bind(n),n._node.addEventListener(t._canPlayEvent,n._loadFn,!1),n._endFn=n._endListener.bind(n),n._node.addEventListener("ended",n._endFn,!1),n._node.src=a._src,n._node.preload=a._preload===!0?"auto":a._preload,n._node.volume=l*t.volume(),n._node.load()),n},reset:function(){var n=this,a=n._parent;return n._muted=a._muted,n._loop=a._loop,n._volume=a._volume,n._rate=a._rate,n._seek=0,n._rateSeek=0,n._paused=!0,n._ended=!0,n._sprite="__default",n._id=++t._counter,n},_errorListener:function(){var n=this;n._parent._emit("loaderror",n._id,n._node.error?n._node.error.code:0),n._node.removeEventListener("error",n._errorFn,!1)},_loadListener:function(){var n=this,a=n._parent;a._duration=Math.ceil(n._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),n._node.removeEventListener(t._canPlayEvent,n._loadFn,!1)},_endListener:function(){var n=this,a=n._parent;a._duration===1/0&&(a._duration=Math.ceil(n._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(n)),n._node.removeEventListener("ended",n._endFn,!1)}};var m={},p=function(n){var a=n._src;if(m[a]){n._duration=m[a].duration,A(n);return}if(/^data:[^;]+;base64,/.test(a)){for(var l=atob(a.split(",")[1]),y=new Uint8Array(l.length),T=0;T<l.length;++T)y[T]=l.charCodeAt(T);v(y.buffer,n)}else{var S=new XMLHttpRequest;S.open(n._xhr.method,a,!0),S.withCredentials=n._xhr.withCredentials,S.responseType="arraybuffer",n._xhr.headers&&Object.keys(n._xhr.headers).forEach(function(I){S.setRequestHeader(I,n._xhr.headers[I])}),S.onload=function(){var I=(S.status+"")[0];if(I!=="0"&&I!=="2"&&I!=="3"){n._emit("loaderror",null,"Failed loading audio file with status: "+S.status+".");return}v(S.response,n)},S.onerror=function(){n._webAudio&&(n._html5=!0,n._webAudio=!1,n._sounds=[],delete m[a],n.load())},h(S)}},h=function(n){try{n.send()}catch{n.onerror()}},v=function(n,a){var l=function(){a._emit("loaderror",null,"Decoding audio data failed.")},y=function(T){T&&a._sounds.length>0?(m[a._src]=T,A(a,T)):l()};typeof Promise!="undefined"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(n).then(y).catch(l):t.ctx.decodeAudioData(n,y,l)},A=function(n,a){a&&!n._duration&&(n._duration=a.duration),Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue())},N=function(){if(!!t.usingWebAudio){try{typeof AudioContext!="undefined"?t.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var n=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),a=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),l=a?parseInt(a[1],10):null;if(n&&l&&l<9){var y=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!y&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=i,typeof Te!="undefined"?(Te.HowlerGlobal=e,Te.Howler=t,Te.Howl=i,Te.Sound=u):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=u)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var u=i._howls.length-1;u>=0;u--)i._howls[u].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,u){var m=this;if(!m.ctx||!m.ctx.listener)return m;if(i=typeof i!="number"?m._pos[1]:i,u=typeof u!="number"?m._pos[2]:u,typeof t=="number")m._pos=[t,i,u],typeof m.ctx.listener.positionX!="undefined"?(m.ctx.listener.positionX.setTargetAtTime(m._pos[0],Howler.ctx.currentTime,.1),m.ctx.listener.positionY.setTargetAtTime(m._pos[1],Howler.ctx.currentTime,.1),m.ctx.listener.positionZ.setTargetAtTime(m._pos[2],Howler.ctx.currentTime,.1)):m.ctx.listener.setPosition(m._pos[0],m._pos[1],m._pos[2]);else return m._pos;return m},HowlerGlobal.prototype.orientation=function(t,i,u,m,p,h){var v=this;if(!v.ctx||!v.ctx.listener)return v;var A=v._orientation;if(i=typeof i!="number"?A[1]:i,u=typeof u!="number"?A[2]:u,m=typeof m!="number"?A[3]:m,p=typeof p!="number"?A[4]:p,h=typeof h!="number"?A[5]:h,typeof t=="number")v._orientation=[t,i,u,m,p,h],typeof v.ctx.listener.forwardX!="undefined"?(v.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),v.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),v.ctx.listener.forwardZ.setTargetAtTime(u,Howler.ctx.currentTime,.1),v.ctx.listener.upX.setTargetAtTime(m,Howler.ctx.currentTime,.1),v.ctx.listener.upY.setTargetAtTime(p,Howler.ctx.currentTime,.1),v.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):v.ctx.listener.setOrientation(t,i,u,m,p,h);else return A;return v},Howl.prototype.init=function(t){return function(i){var u=this;return u._orientation=i.orientation||[1,0,0],u._stereo=i.stereo||null,u._pos=i.pos||null,u._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle!="undefined"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle!="undefined"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain!="undefined"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel!="undefined"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance!="undefined"?i.maxDistance:1e4,panningModel:typeof i.panningModel!="undefined"?i.panningModel:"HRTF",refDistance:typeof i.refDistance!="undefined"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor!="undefined"?i.rolloffFactor:1},u._onstereo=i.onstereo?[{fn:i.onstereo}]:[],u._onpos=i.onpos?[{fn:i.onpos}]:[],u._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"stereo",action:function(){u.stereo(t,i)}}),u;var m=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof i=="undefined")if(typeof t=="number")u._stereo=t,u._pos=[t,0,0];else return u._stereo;for(var p=u._getSoundIds(i),h=0;h<p.length;h++){var v=u._soundById(p[h]);if(v)if(typeof t=="number")v._stereo=t,v._pos=[t,0,0],v._node&&(v._pannerAttr.panningModel="equalpower",(!v._panner||!v._panner.pan)&&e(v,m),m==="spatial"?typeof v._panner.positionX!="undefined"?(v._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),v._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):v._panner.setPosition(t,0,0):v._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),u._emit("stereo",v._id);else return v._stereo}return u},Howl.prototype.pos=function(t,i,u,m){var p=this;if(!p._webAudio)return p;if(p._state!=="loaded")return p._queue.push({event:"pos",action:function(){p.pos(t,i,u,m)}}),p;if(i=typeof i!="number"?0:i,u=typeof u!="number"?-.5:u,typeof m=="undefined")if(typeof t=="number")p._pos=[t,i,u];else return p._pos;for(var h=p._getSoundIds(m),v=0;v<h.length;v++){var A=p._soundById(h[v]);if(A)if(typeof t=="number")A._pos=[t,i,u],A._node&&((!A._panner||A._panner.pan)&&e(A,"spatial"),typeof A._panner.positionX!="undefined"?(A._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),A._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),A._panner.positionZ.setValueAtTime(u,Howler.ctx.currentTime)):A._panner.setPosition(t,i,u)),p._emit("pos",A._id);else return A._pos}return p},Howl.prototype.orientation=function(t,i,u,m){var p=this;if(!p._webAudio)return p;if(p._state!=="loaded")return p._queue.push({event:"orientation",action:function(){p.orientation(t,i,u,m)}}),p;if(i=typeof i!="number"?p._orientation[1]:i,u=typeof u!="number"?p._orientation[2]:u,typeof m=="undefined")if(typeof t=="number")p._orientation=[t,i,u];else return p._orientation;for(var h=p._getSoundIds(m),v=0;v<h.length;v++){var A=p._soundById(h[v]);if(A)if(typeof t=="number")A._orientation=[t,i,u],A._node&&(A._panner||(A._pos||(A._pos=p._pos||[0,0,-.5]),e(A,"spatial")),typeof A._panner.orientationX!="undefined"?(A._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),A._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),A._panner.orientationZ.setValueAtTime(u,Howler.ctx.currentTime)):A._panner.setOrientation(t,i,u)),p._emit("orientation",A._id);else return A._orientation}return p},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,u,m,p;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")u=i[0],typeof m=="undefined"&&(u.pannerAttr||(u.pannerAttr={coneInnerAngle:u.coneInnerAngle,coneOuterAngle:u.coneOuterAngle,coneOuterGain:u.coneOuterGain,distanceModel:u.distanceModel,maxDistance:u.maxDistance,refDistance:u.refDistance,rolloffFactor:u.rolloffFactor,panningModel:u.panningModel}),t._pannerAttr={coneInnerAngle:typeof u.pannerAttr.coneInnerAngle!="undefined"?u.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof u.pannerAttr.coneOuterAngle!="undefined"?u.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof u.pannerAttr.coneOuterGain!="undefined"?u.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof u.pannerAttr.distanceModel!="undefined"?u.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof u.pannerAttr.maxDistance!="undefined"?u.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof u.pannerAttr.refDistance!="undefined"?u.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof u.pannerAttr.rolloffFactor!="undefined"?u.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof u.pannerAttr.panningModel!="undefined"?u.pannerAttr.panningModel:t._panningModel});else return p=t._soundById(parseInt(i[0],10)),p?p._pannerAttr:t._pannerAttr;else i.length===2&&(u=i[0],m=parseInt(i[1],10));for(var h=t._getSoundIds(m),v=0;v<h.length;v++)if(p=t._soundById(h[v]),p){var A=p._pannerAttr;A={coneInnerAngle:typeof u.coneInnerAngle!="undefined"?u.coneInnerAngle:A.coneInnerAngle,coneOuterAngle:typeof u.coneOuterAngle!="undefined"?u.coneOuterAngle:A.coneOuterAngle,coneOuterGain:typeof u.coneOuterGain!="undefined"?u.coneOuterGain:A.coneOuterGain,distanceModel:typeof u.distanceModel!="undefined"?u.distanceModel:A.distanceModel,maxDistance:typeof u.maxDistance!="undefined"?u.maxDistance:A.maxDistance,refDistance:typeof u.refDistance!="undefined"?u.refDistance:A.refDistance,rolloffFactor:typeof u.rolloffFactor!="undefined"?u.rolloffFactor:A.rolloffFactor,panningModel:typeof u.panningModel!="undefined"?u.panningModel:A.panningModel};var N=p._panner;N?(N.coneInnerAngle=A.coneInnerAngle,N.coneOuterAngle=A.coneOuterAngle,N.coneOuterGain=A.coneOuterGain,N.distanceModel=A.distanceModel,N.maxDistance=A.maxDistance,N.refDistance=A.refDistance,N.rolloffFactor=A.rolloffFactor,N.panningModel=A.panningModel):(p._pos||(p._pos=t._pos||[0,0,-.5]),e(p,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var i=this,u=i._parent;i._orientation=u._orientation,i._stereo=u._stereo,i._pos=u._pos,i._pannerAttr=u._pannerAttr,t.call(this),i._stereo?u.stereo(i._stereo):i._pos&&u.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,u=i._parent;return i._orientation=u._orientation,i._stereo=u._stereo,i._pos=u._pos,i._pannerAttr=u._pannerAttr,i._stereo?u.stereo(i._stereo):i._pos?u.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,u._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX!="undefined"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX!="undefined"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(Xo);export{as as $,ys as A,Qr as B,Ps as C,jo as D,ms as E,oi as F,es as G,ts as H,Zo as I,Ge as J,ds as K,ss as L,rt as M,_s as N,ui as O,fs as P,Ts as Q,Is as R,Fs as S,Qo as T,Ls as U,Ds as V,Fn as W,Rs as X,xs as Y,on as Z,Ss as _,ci as a,jr as a0,ps as a1,rs as a2,ws as a3,Us as a4,Hs as a5,Vs as a6,Ms as a7,qs as a8,Ws as a9,zo as aa,Xo as ab,us as b,cs as c,si as d,ai as e,ns as f,li as g,hs as h,Os as i,Ns as j,is as k,os as l,Cs as m,ls as n,_i as o,Bs as p,ks as q,bs as r,Zr as s,Kt as t,Es as u,mi as v,As as w,Dn as x,vs as y,gs as z};
