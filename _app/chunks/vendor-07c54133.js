var oa=Object.defineProperty,aa=Object.defineProperties;var la=Object.getOwnPropertyDescriptors;var Ii=Object.getOwnPropertySymbols;var ca=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable;var Di=(n,e,t)=>e in n?oa(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sn=(n,e)=>{for(var t in e||(e={}))ca.call(e,t)&&Di(n,t,e[t]);if(Ii)for(var t of Ii(e))ua.call(e,t)&&Di(n,t,e[t]);return n},Oi=(n,e)=>aa(n,la(e));function vt(){}function fa(n,e){for(const t in e)n[t]=e[t];return n}function Li(n){return n()}function Ni(){return Object.create(null)}function Vt(n){n.forEach(Li)}function Mi(n){return typeof n=="function"}function ha(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function da(n){return Object.keys(n).length===0}function gr(n,...e){if(n==null)return vt;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function nf(n){let e;return gr(n,t=>e=t)(),e}function rf(n,e,t){n.$$.on_destroy.push(gr(e,t))}function sf(n,e,t,i){if(n){const a=Bi(n,e,t,i);return n[0](a)}}function Bi(n,e,t,i){return n[1]&&i?fa(t.ctx.slice(),n[1](i(e))):t.ctx}function of(n,e,t,i){if(n[2]&&i){const a=n[2](i(t));if(e.dirty===void 0)return a;if(typeof a=="object"){const l=[],d=Math.max(e.dirty.length,a.length);for(let f=0;f<d;f+=1)l[f]=e.dirty[f]|a[f];return l}return e.dirty|a}return e.dirty}function af(n,e,t,i,a,l){if(a){const d=Bi(e,t,i,l);n.p(d,a)}}function lf(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}let An=!1;function pa(){An=!0}function ga(){An=!1}function _a(n,e,t,i){for(;n<e;){const a=n+(e-n>>1);t(a)<=i?n=a+1:e=a}return n}function ma(n){if(n.hydrate_init)return;n.hydrate_init=!0;let e=n.childNodes;if(n.nodeName==="HEAD"){const u=[];for(let g=0;g<e.length;g++){const v=e[g];v.claim_order!==void 0&&u.push(v)}e=u}const t=new Int32Array(e.length+1),i=new Int32Array(e.length);t[0]=-1;let a=0;for(let u=0;u<e.length;u++){const g=e[u].claim_order,v=(a>0&&e[t[a]].claim_order<=g?a+1:_a(1,a,o=>e[t[o]].claim_order,g))-1;i[u]=t[v]+1;const r=v+1;t[r]=u,a=Math.max(r,a)}const l=[],d=[];let f=e.length-1;for(let u=t[a]+1;u!=0;u=i[u-1]){for(l.push(e[u-1]);f>=u;f--)d.push(e[f]);f--}for(;f>=0;f--)d.push(e[f]);l.reverse(),d.sort((u,g)=>u.claim_order-g.claim_order);for(let u=0,g=0;u<d.length;u++){for(;g<l.length&&d[u].claim_order>=l[g].claim_order;)g++;const v=g<l.length?l[g]:null;n.insertBefore(d[u],v)}}function ya(n,e){if(An){for(ma(n),(n.actual_end_child===void 0||n.actual_end_child!==null&&n.actual_end_child.parentElement!==n)&&(n.actual_end_child=n.firstChild);n.actual_end_child!==null&&n.actual_end_child.claim_order===void 0;)n.actual_end_child=n.actual_end_child.nextSibling;e!==n.actual_end_child?(e.claim_order!==void 0||e.parentNode!==n)&&n.insertBefore(e,n.actual_end_child):n.actual_end_child=e.nextSibling}else(e.parentNode!==n||e.nextSibling!==null)&&n.appendChild(e)}function cf(n,e,t){An&&!t?ya(n,e):(e.parentNode!==n||e.nextSibling!=t)&&n.insertBefore(e,t||null)}function wa(n){n.parentNode.removeChild(n)}function uf(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function va(n){return document.createElement(n)}function ba(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function _r(n){return document.createTextNode(n)}function ff(){return _r(" ")}function hf(){return _r("")}function df(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function pf(n){return function(e){return e.preventDefault(),n.call(this,e)}}function gf(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Sa(n){return Array.from(n.childNodes)}function Ea(n){n.claim_info===void 0&&(n.claim_info={last_index:0,total_claimed:0})}function Fi(n,e,t,i,a=!1){Ea(n);const l=(()=>{for(let d=n.claim_info.last_index;d<n.length;d++){const f=n[d];if(e(f)){const u=t(f);return u===void 0?n.splice(d,1):n[d]=u,a||(n.claim_info.last_index=d),f}}for(let d=n.claim_info.last_index-1;d>=0;d--){const f=n[d];if(e(f)){const u=t(f);return u===void 0?n.splice(d,1):n[d]=u,a?u===void 0&&n.claim_info.last_index--:n.claim_info.last_index=d,f}}return i()})();return l.claim_order=n.claim_info.total_claimed,n.claim_info.total_claimed+=1,l}function Ui(n,e,t,i){return Fi(n,a=>a.nodeName===e,a=>{const l=[];for(let d=0;d<a.attributes.length;d++){const f=a.attributes[d];t[f.name]||l.push(f.name)}l.forEach(d=>a.removeAttribute(d))},()=>i(e))}function _f(n,e,t){return Ui(n,e,t,va)}function mf(n,e,t){return Ui(n,e,t,ba)}function Aa(n,e){return Fi(n,t=>t.nodeType===3,t=>{const i=""+e;if(t.data.startsWith(i)){if(t.data.length!==i.length)return t.splitText(i.length)}else t.data=i},()=>_r(e),!0)}function yf(n){return Aa(n," ")}function wf(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function vf(n,e){n.value=e==null?"":e}function bf(n,e){for(let t=0;t<n.options.length;t+=1){const i=n.options[t];if(i.__value===e){i.selected=!0;return}}n.selectedIndex=-1}function Sf(n,e,t){n.classList[t?"add":"remove"](e)}function Ef(n,e=document.body){return Array.from(e.querySelectorAll(n))}let kn;function Cn(n){kn=n}function mr(){if(!kn)throw new Error("Function called outside component initialization");return kn}function Af(n){mr().$$.on_mount.push(n)}function kf(n){mr().$$.after_update.push(n)}function Cf(n,e){mr().$$.context.set(n,e)}function Tf(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const on=[],Pi=[],Tn=[],yr=[],ka=Promise.resolve();let wr=!1;function Ca(){wr||(wr=!0,ka.then(ji))}function vr(n){Tn.push(n)}function xf(n){yr.push(n)}let br=!1;const Sr=new Set;function ji(){if(!br){br=!0;do{for(let n=0;n<on.length;n+=1){const e=on[n];Cn(e),Ta(e.$$)}for(Cn(null),on.length=0;Pi.length;)Pi.pop()();for(let n=0;n<Tn.length;n+=1){const e=Tn[n];Sr.has(e)||(Sr.add(e),e())}Tn.length=0}while(on.length);for(;yr.length;)yr.pop()();wr=!1,br=!1,Sr.clear()}}function Ta(n){if(n.fragment!==null){n.update(),Vt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(vr)}}const xn=new Set;let Rt;function Rf(){Rt={r:0,c:[],p:Rt}}function If(){Rt.r||Vt(Rt.c),Rt=Rt.p}function Vi(n,e){n&&n.i&&(xn.delete(n),n.i(e))}function Df(n,e,t,i){if(n&&n.o){if(xn.has(n))return;xn.add(n),Rt.c.push(()=>{xn.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}}const Of=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Lf(n,e){n.d(1),e.delete(n.key)}function Nf(n,e,t,i,a,l,d,f,u,g,v,r){let o=n.length,c=l.length,h=o;const m={};for(;h--;)m[n[h].key]=h;const E=[],S=new Map,O=new Map;for(h=c;h--;){const x=r(a,l,h),T=t(x);let L=d.get(T);L?i&&L.p(x,e):(L=g(T,x),L.c()),S.set(T,E[h]=L),T in m&&O.set(T,Math.abs(h-m[T]))}const y=new Set,C=new Set;function b(x){Vi(x,1),x.m(f,v),d.set(x.key,x),v=x.first,c--}for(;o&&c;){const x=E[c-1],T=n[o-1],L=x.key,j=T.key;x===T?(v=x.first,o--,c--):S.has(j)?!d.has(L)||y.has(L)?b(x):C.has(j)?o--:O.get(L)>O.get(j)?(C.add(L),b(x)):(y.add(j),o--):(u(T,d),o--)}for(;o--;){const x=n[o];S.has(x.key)||u(x,d)}for(;c;)b(E[c-1]);return E}function Mf(n,e){const t={},i={},a={$$scope:1};let l=n.length;for(;l--;){const d=n[l],f=e[l];if(f){for(const u in d)u in f||(i[u]=1);for(const u in f)a[u]||(t[u]=f[u],a[u]=1);n[l]=f}else for(const u in d)a[u]=1}for(const d in i)d in t||(t[d]=void 0);return t}function Bf(n){return typeof n=="object"&&n!==null?n:{}}function Ff(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function Uf(n){n&&n.c()}function Pf(n,e){n&&n.l(e)}function xa(n,e,t,i){const{fragment:a,on_mount:l,on_destroy:d,after_update:f}=n.$$;a&&a.m(e,t),i||vr(()=>{const u=l.map(Li).filter(Mi);d?d.push(...u):Vt(u),n.$$.on_mount=[]}),f.forEach(vr)}function Ra(n,e){const t=n.$$;t.fragment!==null&&(Vt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ia(n,e){n.$$.dirty[0]===-1&&(on.push(n),Ca(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function jf(n,e,t,i,a,l,d,f=[-1]){const u=kn;Cn(n);const g=n.$$={fragment:null,ctx:null,props:l,update:vt,not_equal:a,bound:Ni(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ni(),dirty:f,skip_bound:!1,root:e.target||u.$$.root};d&&d(g.root);let v=!1;if(g.ctx=t?t(n,e.props||{},(r,o,...c)=>{const h=c.length?c[0]:o;return g.ctx&&a(g.ctx[r],g.ctx[r]=h)&&(!g.skip_bound&&g.bound[r]&&g.bound[r](h),v&&Ia(n,r)),o}):[],g.update(),v=!0,Vt(g.before_update),g.fragment=i?i(g.ctx):!1,e.target){if(e.hydrate){pa();const r=Sa(e.target);g.fragment&&g.fragment.l(r),r.forEach(wa)}else g.fragment&&g.fragment.c();e.intro&&Vi(n.$$.fragment),xa(n,e.target,e.anchor,e.customElement),ga(),ji()}Cn(u)}class Vf{$destroy(){Ra(this,1),this.$destroy=vt}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}$set(e){this.$$set&&!da(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ht=[];function Da(n,e){return{subscribe:Oa(n,e).subscribe}}function Oa(n,e=vt){let t;const i=new Set;function a(f){if(ha(n,f)&&(n=f,t)){const u=!Ht.length;for(const g of i)g[1](),Ht.push(g,n);if(u){for(let g=0;g<Ht.length;g+=2)Ht[g][0](Ht[g+1]);Ht.length=0}}}function l(f){a(f(n))}function d(f,u=vt){const g=[f,u];return i.add(g),i.size===1&&(t=e(a)||vt),f(n),()=>{i.delete(g),i.size===0&&(t(),t=null)}}return{set:a,update:l,subscribe:d}}function Hf(n,e,t){const i=!Array.isArray(n),a=i?[n]:n,l=e.length<2;return Da(t,d=>{let f=!1;const u=[];let g=0,v=vt;const r=()=>{if(g)return;v();const c=e(i?u[0]:u,d);l?d(c):v=Mi(c)?c:vt},o=a.map((c,h)=>gr(c,m=>{u[h]=m,g&=~(1<<h),f&&r()},()=>{g|=1<<h}));return f=!0,r(),function(){Vt(o),v()}})}const It=Math.pow(2,31)-1|0;function La(n,e){return n[0]=(e&4278190080)>>24,n[1]=(e&16711680)>>16,n[2]=(e&65280)>>8,n[3]=e&255,n}function Na(n){return n!=null&&typeof n.toJS=="function"?n.toJS():n}function Ma(n){return n!=null&&typeof n.toJSON=="function"?n.toJSON():n}const Er={},Rn={};class In{constructor(e,t){if(e!==Er)throw new TypeError("Options can only be created with the some or none functions");this._value=t}static some(e){return De(e)}static none(){return Oe()}static from(e){return e!=null?De(e):Oe()}static fromResult(e){return e.isOk()?De(e.unwrap()):Oe()}isNone(){return this._value===Rn}isSome(){return!this.isNone()}expect(e){if(this.isSome())return this._value;throw new Error(typeof e=="function"?e():e)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(e){return this.isSome()?this._value:e}unwrapOrElse(e){return this.isSome()?this._value:e()}map(e){return this.isSome()?De(e(this._value)):Oe()}mapOr(e,t){return this.isSome()?De(e(this._value)):De(t)}mapOrElse(e,t){return this.isSome()?De(e(this._value)):De(t())}flatMap(e){return this.isSome()?e(this._value):Oe()}flatMapOr(e,t){return this.isSome()?e(this._value):t}flatMapOrElse(e,t){return this.isSome()?e(this._value):t()}and(e){return this.isSome()?e:Oe()}andThen(e){return this.isSome()?e(this._value):Oe()}or(e){return this.isNone()?e:this}orElse(e){return this.isNone()?e():this}xor(e){const t=this.isSome(),i=e.isSome();return t&&!i?this:!t&&i?e:Oe()}filter(e){return this.isSome()&&e(this._value)?this:Oe()}getOrInsert(e){return this.isNone()&&(this._value=e),this}getOrInsertWith(e){return this.isNone()&&(this._value=e()),this}take(){if(this.isSome()){const e=this._value;return this._value=Rn,De(e)}else return Oe()}from(e){return e!=null?this._value=e:this.clear(),this}replace(e){return this._value=e,this}clear(){return this._value=Rn,this}fromResult(e){return e.isOk()?De(e.unwrap()):Oe()}ifSome(e,t){return this.isSome()?e(this._value):t&&t(),this}ifNone(e,t){return this.isNone()?e():t&&t(this._value),this}fromJSON(e){return In.from(e)}toJSON(){return this.map(Ma).unwrapOr(null)}toJS(){return this.map(Na).unwrapOr(null)}}const De=n=>new In(Er,n),Oe=()=>new In(Er,Rn);class fe{constructor(e){this._index=0,this._iter=e}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const e=this._iter.next();return e.done?e:{value:[e.value,this._index++]}}enumerate(){throw new Error("iter/Enumerate was not imported!")}peekable(){throw new Error("iter/Peekable was not imported!")}forEach(e){throw new Error("iter/ForEach was not imported!")}map(e){throw new Error("iter/Map was not imported!")}merge(e){throw new Error("iter/Merge was not imported!")}concat(e){return this.merge(e)}filter(e){throw new Error("iter/Filter was not imported!")}step(e){throw new Error("iter/Step was not imported!")}skip(e){throw new Error("iter/Skip was not imported!")}take(e){throw new Error("iter/Take was not imported!")}toMap(e,t){throw new Error("iter/ToMap was not imported!")}count(){return this.reduce(0,e=>e+1)}consume(){let e=this.next();for(;!e.done;)e=this.next();return this}toArray(){return this.reduce([],(e,t)=>(e.push(t),e))}join(e){return this.toArray().join(e)}indexOf(e){let t=this.next(),i=0;for(;!t.done;){if(t.value===e)return i;i++,t=this.next()}return-1}findIndex(e){let t=this.nextWithIndex();for(;!t.done;){const[i,a]=t.value;if(e(i,a))return a;t=this.nextWithIndex()}return-1}find(e){let t=this.nextWithIndex();for(;!t.done;){const[i,a]=t.value;if(e(i,a))return De(i);t=this.nextWithIndex()}return Oe()}findAll(e){return this.filter(e)}nth(e=0){let t=this.next();for(e<0&&(e=0);!t.done;){if(e--<=0)return De(t.value);t=this.next()}return Oe()}first(){return this.nth(0)}last(){let e=this.next();for(;!e.done;){const t=this.next();if(t.done)return De(e.value);e=t}return Oe()}any(e){return this.findIndex(e)!==-1}some(e){return this.any(e)}none(e){return this.findIndex(e)===-1}all(e){let t=this.nextWithIndex();for(;!t.done;){const[i,a]=t.value;if(!e(i,a))return!1;t=this.nextWithIndex()}return!0}unflatten(e){throw new Error("iter/Unflatten was not imported!")}reduce(e,t){let i=this.next();for(;!i.done;){const a=i.value;e=t(e,a,this._index-1),i=this.next()}return e}reverse(){return Dn(this.toArray().reverse())}}function Dn(n){return n!=null?typeof n[Symbol.iterator]=="function"?new fe(n[Symbol.iterator]()):typeof n.next=="function"?n instanceof fe?n:new fe(n):Dn(typeof n=="object"?Object.entries(n):[n]):Dn([])}class Ba extends fe{constructor(e){super(e)}next(){const e=super.nextWithIndex();return e.done?e:{value:Fa(e.value)}}}fe.prototype.enumerate=function(){return new Ba(this)};function Fa(n){const e=n[0],t=n;return t[0]=n[1],t[1]=e,t}class Ua extends fe{constructor(e,t){super(e);this._fn=t}next(){let e=super.nextWithIndex();for(;!e.done;){const[t,i]=e.value;if(this._fn(t,i))return{done:!1,value:t};e=super.nextWithIndex()}return{done:!0,value:void 0}}}fe.prototype.filter=function(e){return new Ua(this,e)};class Pa extends fe{constructor(e,t){super(e);this._fn=([i,a])=>(t(i,a),i)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}fe.prototype.forEach=function(e){return new Pa(this,e)};class ja extends fe{constructor(e,t){super(e);this._fn=([i,a])=>t(i,a)}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._fn(e.value)}}}fe.prototype.map=function(e){return new ja(this,e)};class Va extends fe{constructor(e,t){super(e);this._other=t}next(){const e=super.next();return e.done?this._other.next():e}}fe.prototype.merge=function(e){return new Va(this,e)};class Ha extends fe{constructor(){super(...arguments);this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?De(this.peeked.shift()):Oe()}peek(e=0){if(e<this.peeked.length)return De(this.peeked[e]);{let t=this.peeked.length-e-1,i=super.next();for(;!i.done&&(this.peeked.push(i.value),!(--t<=0));)i=super.next();return i.done?Oe():De(i.value)}}next(){const e=this.unpeek();if(e.isSome())return{done:!1,value:e.unwrap()};const t=super.next();return t.done?t:{done:!1,value:t.value}}}fe.prototype.peekable=function(){return new Ha(this)};class Wa extends fe{constructor(e,t){super(e);this._skipped=0,this._skip=(t<=0?0:t)|0}next(){let e=super.next();for(;!e.done;)if(this._skipped<=this._skip)this._skipped+=1,e=super.next();else return e;return{done:!0,value:void 0}}}fe.prototype.skip=function n(n){return new Wa(this,n)};class $a extends fe{constructor(e,t){super(e);this._stepped=0,this._step=t<=0?1:t|0}next(){let e=super.next();for(;!e.done;)if(this._stepped<this._step)this._stepped+=1,e=super.next();else return this._stepped=0,e;return{done:!0,value:void 0}}}fe.prototype.step=function n(n){return new $a(this,n)};class qa extends fe{constructor(e,t){super(e);this._taken=0,this._count=(t<=0?0:t)|0}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}fe.prototype.take=function(e){return new qa(this,e)};const Ga=n=>n,Ya=n=>n;class Ja extends fe{constructor(e,t=Ga,i=Ya){super(e);this._map=([a,l])=>[t(a,l),i(a,l)]}toObject(){return this.reduce({},(e,t)=>(e[t[0]]=t[1],e))}next(){const e=super.nextWithIndex();return e.done?e:{done:!1,value:this._map(e.value)}}}fe.prototype.toMap=function(e,t){return new Ja(this,e,t)};class Xa extends fe{constructor(e,t){super(e);this._fn=t}next(){return this._fn(this._iter)}}fe.prototype.unflatten=function(e){return new Xa(this,e)};var Wt;(function(n){n[n.Forward=0]="Forward",n[n.Backward=1]="Backward"})(Wt||(Wt={}));class Ar{constructor(e,t,i=1){this.start=e,this.end=t,this.step=Math.abs(i),this.direction=e>t?Wt.Backward:Wt.Forward}static from(e,t,i=1){return new Ar(e,t,i)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(e){return this.start<=e&&e<=this.end}isEmpty(){return this.direction===Wt.Forward?this.start>this.end:this.start<this.end}iter(){return new fe(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===Wt.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const Wf=Ar.from;class Ka extends fe{constructor(e){super(e);this.rng=e}iter(){return new fe(this)}next(){return{done:!1,value:this.rng.nextFloat()}}}class za extends fe{constructor(e,t=0,i=1){super(e);this.rng=e,this.min=t,this.max=i}iter(){return new fe(this)}nextFloat(){return this.rng.nextFloatInRange(this.min,this.max)}next(){return{done:!1,value:this.nextFloat()}}}class Qa extends fe{constructor(e,t=0,i=It){super(e);this.rng=e,this.min=t|0,this.max=i|0}iter(){return new fe(this)}nextInt(){return this.rng.nextIntInRange(this.min,this.max)}next(){return{done:!1,value:this.nextInt()}}}const Za=new Uint8Array(4);class kr{nextFloat(){return this.nextInt()/It}nextFloatInRange(e=0,t=1){return e+this.nextFloat()*(t-e)}nextIntInRange(e=0,t=It){return Math.round(this.nextFloatInRange(e,t))}shuffle(e){const t=e.length;for(let i=0;i<t;i++){const a=i+this.nextIntInRange(0,t-i-1),l=e[i];e[i]=e[a],e[a]=l}return e}fromArray(e){return e.length?De(e[this.nextIntInRange(0,e.length-1)]):Oe()}keyFromObject(e){return this.fromArray(Object.keys(e))}valueFromObject(e){return this.fromArray(Object.values(e))}fillBytes(e){const t=Za;for(let i=0,a=e.length;i<a;i++){const l=i%4;l===0&&La(t,this.nextInt()),e[i]=t[l]}return e}[Symbol.iterator](){return this}iter(){return new fe(this)}next(){return{done:!1,value:this.nextInt()}}float(){return new Ka(this)}uniformFloat(e=0,t=1){return new za(this,e,t)}uniformInt(e=0,t=It){return new Qa(this,e,t)}}class el extends kr{nextInt(){return Math.random()*It|0}nextFloat(){return Math.random()}}class Hi extends kr{constructor(e=423257940){super();this.seed=e}setSeed(e=423257940){return this.seed=e,this}nextInt(){return this.seed=Math.imul(48271,this.seed)|0%It,this.seed&It}}const tl=new Hi;class Cr extends kr{constructor(e,t,i,a){super();this.x=423257940,this.y=2829571177,this.z=2541948421,this.w=289122235,this.set(e,t,i,a)}static fromSeed(e){return new Cr().setSeed(e)}setSeed(e){const t=tl.setSeed(e);return this.set(t.nextInt(),t.nextInt(),t.nextInt(),t.nextInt())}set(e=423257940,t=2829571177,i=2541948421,a=289122235){return this.x=e|0,this.y=t|0,this.z=i|0,this.w=a|0,this}nextInt(){const e=this.x,t=e^e<<11;this.x=this.y,this.y=this.z,this.z=this.w;const i=this.w;return this.w=i^i>>19^(t^t>>8),this.w}}new Hi;new Cr;const nl=new el;let rl=nl;function $f(){return rl.nextFloat()}const Qe=()=>new Map,On=n=>{const e=Qe();return n.forEach((t,i)=>{e.set(i,t)}),e},We=(n,e,t)=>{let i=n.get(e);return i===void 0&&n.set(e,i=t()),i},il=(n,e)=>{const t=[];for(const[i,a]of n)t.push(e(a,i));return t},sl=(n,e)=>{for(const[t,i]of n)if(e(i,t))return!0;return!1},an=()=>new Set,Tr=n=>n[n.length-1],ol=(n,e)=>{for(let t=0;t<e.length;t++)n.push(e[t])},Wi=Array.from;class Ln{constructor(){this._observers=Qe()}on(e,t){We(this._observers,e,an).add(t)}once(e,t){const i=(...a)=>{this.off(e,i),t(...a)};this.on(e,i)}off(e,t){const i=this._observers.get(e);i!==void 0&&(i.delete(t),i.size===0&&this._observers.delete(e))}emit(e,t){return Wi((this._observers.get(e)||Qe()).values()).forEach(i=>i(...t))}destroy(){this._observers=Qe()}}const $t=Math.floor,xr=Math.abs,al=Math.log10,Rr=(n,e)=>n<e?n:e,Dt=(n,e)=>n>e?n:e,$i=n=>n!==0?n<0:1/n<0,ut=Date.now,ll=1200,cl=2500,Nn=3e4,Ir=n=>{if(n.shouldConnect&&n.ws===null){const e=new WebSocket(n.url),t=n.binaryType;let i=null;t&&(e.binaryType=t),n.ws=e,n.connecting=!0,n.connected=!1,e.onmessage=d=>{n.lastMessageReceived=ut();const f=d.data,u=typeof f=="string"?JSON.parse(f):f;u&&u.type==="pong"&&(clearTimeout(i),i=setTimeout(l,Nn/2)),n.emit("message",[u,n])};const a=d=>{n.ws!==null&&(n.ws=null,n.connecting=!1,n.connected?(n.connected=!1,n.emit("disconnect",[{type:"disconnect",error:d},n])):n.unsuccessfulReconnects++,setTimeout(Ir,Rr(al(n.unsuccessfulReconnects+1)*ll,cl),n)),clearTimeout(i)},l=()=>{n.ws===e&&n.send({type:"ping"})};e.onclose=()=>a(null),e.onerror=d=>a(d),e.onopen=()=>{n.lastMessageReceived=ut(),n.connecting=!1,n.connected=!0,n.unsuccessfulReconnects=0,n.emit("connect",[{type:"connect"},n]),i=setTimeout(l,Nn/2)}}};class ul extends Ln{constructor(e,{binaryType:t}={}){super();this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Nn<ut()-this.lastMessageReceived&&this.ws.close()},Nn/2),Ir(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Ir(this)}}const qt=n=>new Error(n),Ze=()=>{throw qt("Method unimplemented")},et=()=>{throw qt("Unexpected case")},qi=typeof crypto=="undefined"?null:crypto,fl=qi!==null?n=>{const e=new ArrayBuffer(n),t=new Uint8Array(e);return qi.getRandomValues(t),e}:n=>{const e=new ArrayBuffer(n),t=new Uint8Array(e);for(let i=0;i<n;i++)t[i]=Math.ceil(Math.random()*4294967295>>>0);return e},hl=Math.random,Gi=()=>new Uint32Array(fl(4))[0],dl=[1e7]+-1e3+-4e3+-8e3+-1e11,Yi=()=>dl.replace(/[018]/g,n=>(n^Gi()&15>>n/4).toString(16)),pl=String.fromCharCode,gl=n=>n.toLowerCase(),_l=/^\s*/g,ml=n=>n.replace(_l,""),yl=/([A-Z])/g,Ji=(n,e)=>ml(n.replace(yl,t=>`${e}${gl(t)}`)),wl=n=>{const e=unescape(encodeURIComponent(n)),t=e.length,i=new Uint8Array(t);for(let a=0;a<t;a++)i[a]=e.codePointAt(a);return i},Xi=typeof TextEncoder!="undefined"?new TextEncoder:null,vl=n=>Xi.encode(n),Ki=Xi?vl:wl;let Dr=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Dr&&Dr.decode(new Uint8Array).length===1&&(Dr=null);const zi=n=>n===void 0?null:n;class bl{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let Qi=new bl,Zi=!0;try{typeof localStorage!="undefined"&&(Qi=localStorage,Zi=!1)}catch{}const es=Qi,Sl=n=>Zi||addEventListener("storage",n),Mn=typeof process!="undefined"&&process.release&&/node|io\.js/.test(process.release.name),ts=typeof window!="undefined"&&!Mn;typeof navigator!="undefined"&&/Mac/.test(navigator.platform);let tt;const El=()=>{if(tt===void 0)if(Mn){tt=Qe();const n=process.argv;let e=null;for(let t=0;t<n.length;t++){const i=n[t];i[0]==="-"?(e!==null&&tt.set(e,""),e=i):e!==null&&(tt.set(e,i),e=null)}e!==null&&tt.set(e,"")}else typeof location=="object"?(tt=Qe(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[e,t]=n.split("=");tt.set(`--${Ji(e,"-")}`,t),tt.set(`-${Ji(e,"-")}`,t)}})):tt=Qe();return tt},Al=n=>El().has(n),ns=n=>zi(Mn?process.env[n.toUpperCase()]:es.getItem(n)),kl=n=>Al("--"+n)||ns(n)!==null;kl("production");const rs=1,is=2,Or=4,Lr=8,ln=32,ft=64,je=128,Bn=31,Nr=63,Ot=127,Cl=2147483647;class Fn{constructor(e){this.arr=e,this.pos=0}}const nt=n=>new Fn(n),Tl=n=>n.pos!==n.arr.length,xl=(n,e)=>{const t=Ur(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,t},Le=n=>xl(n,ie(n)),Lt=n=>n.arr[n.pos++],ie=n=>{let e=0,t=0;for(;;){const i=n.arr[n.pos++];if(e=e|(i&Ot)<<t,t+=7,i<je)return e>>>0;if(t>35)throw new Error("Integer out of range!")}},Mr=n=>{let e=n.arr[n.pos++],t=e&Nr,i=6;const a=(e&ft)>0?-1:1;if((e&je)==0)return a*t;for(;;){if(e=n.arr[n.pos++],t=t|(e&Ot)<<i,i+=7,e<je)return a*(t>>>0);if(i>41)throw new Error("Integer out of range!")}},ht=n=>{let e=ie(n);if(e===0)return"";{let t=String.fromCodePoint(Lt(n));if(--e<100)for(;e--;)t+=String.fromCodePoint(Lt(n));else for(;e>0;){const i=e<1e4?e:1e4,a=n.arr.subarray(n.pos,n.pos+i);n.pos+=i,t+=String.fromCodePoint.apply(null,a),e-=i}return decodeURIComponent(escape(t))}},Br=(n,e)=>{const t=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,e);return n.pos+=e,t},Rl=n=>Br(n,4).getFloat32(0,!1),Il=n=>Br(n,8).getFloat64(0,!1),Dl=n=>Br(n,8).getBigInt64(0,!1),Ol=[n=>{},n=>null,Mr,Rl,Il,Dl,n=>!1,n=>!0,ht,n=>{const e=ie(n),t={};for(let i=0;i<e;i++){const a=ht(n);t[a]=Gt(n)}return t},n=>{const e=ie(n),t=[];for(let i=0;i<e;i++)t.push(Gt(n));return t},Le],Gt=n=>Ol[127-Lt(n)](n);class ss extends Fn{constructor(e,t){super(e);this.reader=t,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Tl(this)?this.count=ie(this)+1:this.count=-1),this.count--,this.s}}class Un extends Fn{constructor(e){super(e);this.s=0,this.count=0}read(){if(this.count===0){this.s=Mr(this);const e=$i(this.s);this.count=1,e&&(this.s=-this.s,this.count=ie(this)+2)}return this.count--,this.s}}class Fr extends Fn{constructor(e){super(e);this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Mr(this),t=e&1;this.diff=e>>1,this.count=1,t&&(this.count=ie(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Ll{constructor(e){this.decoder=new Un(e),this.str=ht(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const os=n=>new Uint8Array(n),Ur=(n,e,t)=>new Uint8Array(n,e,t),Nl=n=>new Uint8Array(n),Ml=n=>{let e="";for(let t=0;t<n.byteLength;t++)e+=pl(n[t]);return btoa(e)},Bl=n=>Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("base64"),Fl=n=>{const e=atob(n),t=os(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t},Ul=n=>{const e=Buffer.from(n,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},as=ts?Ml:Bl,ls=ts?Fl:Ul,Pl=n=>{const e=os(n.byteLength);return e.set(n),e},jl=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&$t(n)===n);class cn{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Te=()=>new cn,Vl=n=>{let e=n.cpos;for(let t=0;t<n.bufs.length;t++)e+=n.bufs[t].length;return e},we=n=>{const e=new Uint8Array(Vl(n));let t=0;for(let i=0;i<n.bufs.length;i++){const a=n.bufs[i];e.set(a,t),t+=a.length}return e.set(Ur(n.cbuf.buffer,0,n.cpos),t),e},Hl=(n,e)=>{const t=n.cbuf.length;t-n.cpos<e&&(n.bufs.push(Ur(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(Dt(t,e)*2),n.cpos=0)},Ne=(n,e)=>{const t=n.cbuf.length;n.cpos===t&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(t*2),n.cpos=0),n.cbuf[n.cpos++]=e},un=Ne,te=(n,e)=>{for(;e>Ot;)Ne(n,je|Ot&e),e>>>=7;Ne(n,Ot&e)},Pr=(n,e)=>{const t=$i(e);for(t&&(e=-e),Ne(n,(e>Nr?je:0)|(t?ft:0)|Nr&e),e>>>=6;e>0;)Ne(n,(e>Ot?je:0)|Ot&e),e>>>=7},rt=(n,e)=>{const t=unescape(encodeURIComponent(e)),i=t.length;te(n,i);for(let a=0;a<i;a++)Ne(n,t.codePointAt(a))},Pn=(n,e)=>{const t=n.cbuf.length,i=n.cpos,a=Rr(t-i,e.length),l=e.length-a;n.cbuf.set(e.subarray(0,a),i),n.cpos+=a,l>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Dt(t*2,l)),n.cbuf.set(e.subarray(a)),n.cpos=l)},Se=(n,e)=>{te(n,e.byteLength),Pn(n,e)},jr=(n,e)=>{Hl(n,e);const t=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,t},Wl=(n,e)=>jr(n,4).setFloat32(0,e,!1),$l=(n,e)=>jr(n,8).setFloat64(0,e,!1),ql=(n,e)=>jr(n,8).setBigInt64(0,e,!1),cs=new DataView(new ArrayBuffer(4)),Gl=n=>(cs.setFloat32(0,n),cs.getFloat32(0)===n),Yt=(n,e)=>{switch(typeof e){case"string":Ne(n,119),rt(n,e);break;case"number":jl(e)&&e<=Cl?(Ne(n,125),Pr(n,e)):Gl(e)?(Ne(n,124),Wl(n,e)):(Ne(n,123),$l(n,e));break;case"bigint":Ne(n,122),ql(n,e);break;case"object":if(e===null)Ne(n,126);else if(e instanceof Array){Ne(n,117),te(n,e.length);for(let t=0;t<e.length;t++)Yt(n,e[t])}else if(e instanceof Uint8Array)Ne(n,116),Se(n,e);else{Ne(n,118);const t=Object.keys(e);te(n,t.length);for(let i=0;i<t.length;i++){const a=t[i];rt(n,a),Yt(n,e[a])}}break;case"boolean":Ne(n,e?120:121);break;default:Ne(n,127)}};class us extends cn{constructor(e){super();this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&te(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const fs=n=>{n.count>0&&(Pr(n.encoder,n.count===1?n.s:-n.s),n.count>1&&te(n.encoder,n.count-2))};class jn{constructor(){this.encoder=new cn,this.s=0,this.count=0}write(e){this.s===e?this.count++:(fs(this),this.count=1,this.s=e)}toUint8Array(){return fs(this),we(this.encoder)}}const hs=n=>{if(n.count>0){const e=n.diff<<1|(n.count===1?0:1);Pr(n.encoder,e),n.count>1&&te(n.encoder,n.count-2)}};class Vr{constructor(){this.encoder=new cn,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(hs(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return hs(this),we(this.encoder)}}class Yl{constructor(){this.sarr=[],this.s="",this.lensE=new jn}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new cn;return this.sarr.push(this.s),this.s="",rt(e,this.sarr.join("")),Pn(e,this.lensE.toUint8Array()),we(e)}}const dt=Symbol;class Jl{constructor(e,t){this.left=e,this.right=t}}const pt=(n,e)=>new Jl(n,e),Nt=typeof document!="undefined"?document:{};typeof DOMParser!="undefined"&&new DOMParser;const Xl=n=>il(n,(e,t)=>`${t}:${e};`).join("");Nt.ELEMENT_NODE;Nt.TEXT_NODE;Nt.CDATA_SECTION_NODE;Nt.COMMENT_NODE;Nt.DOCUMENT_NODE;Nt.DOCUMENT_TYPE_NODE;Nt.DOCUMENT_FRAGMENT_NODE;const Kl=Object.keys,Vn=n=>Kl(n).length,zl=(n,e)=>{for(const t in n)if(!e(n[t],t))return!1;return!0},ds=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),Ql=(n,e)=>n===e||Vn(n)===Vn(e)&&zl(n,(t,i)=>(t!==void 0||ds(e,i))&&e[i]===t),Hr=(n,e,t=0)=>{try{for(;t<n.length;t++)n[t](...e)}finally{t<n.length&&Hr(n,e,t+1)}},Zl=()=>{},ec=(n,e)=>n===e,fn=(n,e)=>{if(n==null||e==null)return ec(n,e);if(n.constructor!==e.constructor)return!1;if(n===e)return!0;switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),e=new Uint8Array(e);case Uint8Array:{if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;break}case Set:{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;break}case Map:{if(n.size!==e.size)return!1;for(const t of n.keys())if(!e.has(t)||!fn(n.get(t),e.get(t)))return!1;break}case Object:if(Vn(n)!==Vn(e))return!1;for(const t in n)if(!ds(n,t)||!fn(n[t],e[t]))return!1;break;case Array:if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!fn(n[t],e[t]))return!1;break;default:return!1}return!0},Ve=dt(),bt=dt(),Wr=dt(),Hn=dt(),$r=dt(),qr=dt(),Gr=dt(),Wn=dt(),hn=dt(),tc={[Ve]:pt("font-weight","bold"),[bt]:pt("font-weight","normal"),[Wr]:pt("color","blue"),[$r]:pt("color","green"),[Hn]:pt("color","grey"),[qr]:pt("color","red"),[Gr]:pt("color","purple"),[Wn]:pt("color","orange"),[hn]:pt("color","black")},nc={[Ve]:"[1m",[bt]:"[2m",[Wr]:"[34m",[$r]:"[32m",[Hn]:"[37m",[qr]:"[31m",[Gr]:"[35m",[Wn]:"[38;5;208m",[hn]:"[0m"},rc=n=>{const e=[],t=[],i=Qe();let a=[],l=0;for(;l<n.length;l++){const d=n[l],f=tc[d];if(f!==void 0)i.set(f.left,f.right);else if(d.constructor===String||d.constructor===Number){const u=Xl(i);l>0||u.length>0?(e.push("%c"+d),t.push(u)):e.push(d)}else break}for(l>0&&(a=t,a.unshift(e.join("")));l<n.length;l++){const d=n[l];d instanceof Symbol||a.push(d)}return a},ic=n=>{const e=[],t=[];let i=0;for(;i<n.length;i++){const a=n[i],l=nc[a];if(l!==void 0)e.push(l);else if(a.constructor===String||a.constructor===Number)e.push(a);else break}for(i>0&&(e.push("[0m"),t.push(e.join("")));i<n.length;i++){const a=n[i];a instanceof Symbol||t.push(a)}return t},sc=Mn?ic:rc,ps=(...n)=>{console.log(...sc(n)),oc.forEach(e=>e.print(n))},oc=new Set,gs=[$r,Gr,Wn,Wr];let Yr=0,_s=ut();const ac=n=>{const e=gs[Yr],t=ns("log"),i=t!==null&&(t==="*"||t==="true"||new RegExp(t,"gi").test(n));return Yr=(Yr+1)%gs.length,n+=": ",i?(...a)=>{const l=ut(),d=l-_s;_s=l,ps(e,n,hn,...a.map(f=>typeof f=="string"||typeof f=="symbol"?f:JSON.stringify(f)),e," +"+d+"ms")}:Zl},lc=n=>Promise.reject(n),Jr=n=>Promise.resolve(n),cc=new Map;class uc{constructor(e){this.room=e,this.onmessage=null,Sl(t=>t.key===e&&this.onmessage!==null&&this.onmessage({data:ls(t.newValue||"")}))}postMessage(e){es.setItem(this.room,as(Nl(e)))}}const fc=typeof BroadcastChannel=="undefined"?uc:BroadcastChannel,Xr=n=>We(cc,n,()=>{const e=new Set,t=new fc(n);return t.onmessage=i=>e.forEach(a=>a(i.data)),{bc:t,subs:e}}),hc=(n,e)=>Xr(n).subs.add(e),dc=(n,e)=>Xr(n).subs.delete(e),pc=(n,e)=>{const t=Xr(n);t.bc.postMessage(e),t.subs.forEach(i=>i(e))},gc=()=>{let n=!0;return(e,t)=>{if(n){n=!1;try{e()}finally{n=!0}}else t!==void 0&&t()}},ms=n=>({[Symbol.iterator](){return this},next:n}),_c=(n,e)=>ms(()=>{let t;do t=n.next();while(!t.done&&!e(t.value));return t}),Kr=(n,e)=>ms(()=>{const{done:t,value:i}=n.next();return{done:t,value:t?void 0:e(i)}});class zr{constructor(e,t){this.clock=e,this.len=t}}class dn{constructor(){this.clients=new Map}}const Qr=(n,e,t)=>e.clients.forEach((i,a)=>{const l=n.doc.store.clients.get(a);for(let d=0;d<i.length;d++){const f=i[d];Bs(n,l,f.clock,f.len,t)}}),mc=(n,e)=>{let t=0,i=n.length-1;for(;t<=i;){const a=$t((t+i)/2),l=n[a],d=l.clock;if(d<=e){if(e<d+l.len)return a;t=a+1}else i=a-1}return null},ys=(n,e)=>{const t=n.clients.get(e.client);return t!==void 0&&mc(t,e.clock)!==null},Zr=n=>{n.clients.forEach(e=>{e.sort((a,l)=>a.clock-l.clock);let t,i;for(t=1,i=1;t<e.length;t++){const a=e[i-1],l=e[t];a.clock+a.len>=l.clock?a.len=Dt(a.len,l.clock+l.len-a.clock):(i<t&&(e[i]=l),i++)}e.length=i})},yc=n=>{const e=new dn;for(let t=0;t<n.length;t++)n[t].clients.forEach((i,a)=>{if(!e.clients.has(a)){const l=i.slice();for(let d=t+1;d<n.length;d++)ol(l,n[d].clients.get(a)||[]);e.clients.set(a,l)}});return Zr(e),e},$n=(n,e,t,i)=>{We(n.clients,e,()=>[]).push(new zr(t,i))},ws=()=>new dn,wc=n=>{const e=ws();return n.clients.forEach((t,i)=>{const a=[];for(let l=0;l<t.length;l++){const d=t[l];if(d.deleted){const f=d.id.clock;let u=d.length;if(l+1<t.length)for(let g=t[l+1];l+1<t.length&&g.deleted;g=t[++l+1])u+=g.length;a.push(new zr(f,u))}}a.length>0&&e.clients.set(i,a)}),e},Jt=(n,e)=>{te(n.restEncoder,e.clients.size),e.clients.forEach((t,i)=>{n.resetDsCurVal(),te(n.restEncoder,i);const a=t.length;te(n.restEncoder,a);for(let l=0;l<a;l++){const d=t[l];n.writeDsClock(d.clock),n.writeDsLen(d.len)}})},ei=n=>{const e=new dn,t=ie(n.restDecoder);for(let i=0;i<t;i++){n.resetDsCurVal();const a=ie(n.restDecoder),l=ie(n.restDecoder);if(l>0){const d=We(e.clients,a,()=>[]);for(let f=0;f<l;f++)d.push(new zr(n.readDsClock(),n.readDsLen()))}}return e},vs=(n,e,t)=>{const i=new dn,a=ie(n.restDecoder);for(let l=0;l<a;l++){n.resetDsCurVal();const d=ie(n.restDecoder),f=ie(n.restDecoder),u=t.clients.get(d)||[],g=xe(t,d);for(let v=0;v<f;v++){const r=n.readDsClock(),o=r+n.readDsLen();if(r<g){g<o&&$n(i,d,g,o-g);let c=it(u,r),h=u[c];for(!h.deleted&&h.id.clock<r&&(u.splice(c+1,0,or(e,h,r-h.id.clock)),c++);c<u.length&&(h=u[c++],h.id.clock<o);)h.deleted||(o<h.id.clock+h.length&&u.splice(c,0,or(e,h,o-h.id.clock)),h.delete(e))}else $n(i,d,r,o-r)}}if(i.clients.size>0){const l=new Mt;return te(l.restEncoder,0),Jt(l,i),l.toUint8Array()}return null},bs=Gi;class pn extends Ln{constructor({guid:e=Yi(),gc:t=!0,gcFilter:i=()=>!0,meta:a=null,autoLoad:l=!1}={}){super();this.gc=t,this.gcFilter=i,this.clientID=bs(),this.guid=e,this.share=new Map,this.store=new Ls,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=l,this.meta=a}load(){const e=this._item;e!==null&&!this.shouldLoad&&me(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(e=>e.guid))}transact(e,t=null){me(this,e,t)}get(e,t=Me){const i=We(this.share,e,()=>{const l=new t;return l._integrate(this,null),l}),a=i.constructor;if(t!==Me&&a!==t)if(a===Me){const l=new t;l._map=i._map,i._map.forEach(d=>{for(;d!==null;d=d.left)d.parent=l}),l._start=i._start;for(let d=l._start;d!==null;d=d.right)d.parent=l;return l._length=i._length,this.share.set(e,l),l._integrate(this,null),l}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,zt)}getText(e=""){return this.get(e,en)}getMap(e=""){return this.get(e,Qt)}getXmlFragment(e=""){return this.get(e,Bt)}toJSON(){const e={};return this.share.forEach((t,i)=>{e[i]=t.toJSON()}),e}destroy(){Wi(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;e.deleted?t.doc=null:(t.doc=new pn(sn({guid:this.guid},t.opts)),t.doc._item=e),me(e.parent.doc,i=>{e.deleted||i.subdocsAdded.add(t.doc),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class Ss{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ie(this.restDecoder)}readDsLen(){return ie(this.restDecoder)}}class Es extends Ss{readLeftID(){return ue(ie(this.restDecoder),ie(this.restDecoder))}readRightID(){return ue(ie(this.restDecoder),ie(this.restDecoder))}readClient(){return ie(this.restDecoder)}readInfo(){return Lt(this.restDecoder)}readString(){return ht(this.restDecoder)}readParentInfo(){return ie(this.restDecoder)===1}readTypeRef(){return ie(this.restDecoder)}readLen(){return ie(this.restDecoder)}readAny(){return Gt(this.restDecoder)}readBuf(){return Pl(Le(this.restDecoder))}readJSON(){return JSON.parse(ht(this.restDecoder))}readKey(){return ht(this.restDecoder)}}class vc{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ie(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ie(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Xt extends vc{constructor(e){super(e);this.keys=[],ie(e),this.keyClockDecoder=new Fr(Le(e)),this.clientDecoder=new Un(Le(e)),this.leftClockDecoder=new Fr(Le(e)),this.rightClockDecoder=new Fr(Le(e)),this.infoDecoder=new ss(Le(e),Lt),this.stringDecoder=new Ll(Le(e)),this.parentInfoDecoder=new ss(Le(e),Lt),this.typeRefDecoder=new Un(Le(e)),this.lenDecoder=new Un(Le(e))}readLeftID(){return new Kt(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Kt(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Gt(this.restDecoder)}readBuf(){return Le(this.restDecoder)}readJSON(){return Gt(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class As{constructor(){this.restEncoder=Te()}toUint8Array(){return we(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){te(this.restEncoder,e)}writeDsLen(e){te(this.restEncoder,e)}}class gn extends As{writeLeftID(e){te(this.restEncoder,e.client),te(this.restEncoder,e.clock)}writeRightID(e){te(this.restEncoder,e.client),te(this.restEncoder,e.clock)}writeClient(e){te(this.restEncoder,e)}writeInfo(e){un(this.restEncoder,e)}writeString(e){rt(this.restEncoder,e)}writeParentInfo(e){te(this.restEncoder,e?1:0)}writeTypeRef(e){te(this.restEncoder,e)}writeLen(e){te(this.restEncoder,e)}writeAny(e){Yt(this.restEncoder,e)}writeBuf(e){Se(this.restEncoder,e)}writeJSON(e){rt(this.restEncoder,JSON.stringify(e))}writeKey(e){rt(this.restEncoder,e)}}class ks{constructor(){this.restEncoder=Te(),this.dsCurrVal=0}toUint8Array(){return we(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,te(this.restEncoder,t)}writeDsLen(e){e===0&&et(),te(this.restEncoder,e-1),this.dsCurrVal+=e}}class Mt extends ks{constructor(){super();this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Vr,this.clientEncoder=new jn,this.leftClockEncoder=new Vr,this.rightClockEncoder=new Vr,this.infoEncoder=new us(un),this.stringEncoder=new Yl,this.parentInfoEncoder=new us(un),this.typeRefEncoder=new jn,this.lenEncoder=new jn}toUint8Array(){const e=Te();return te(e,0),Se(e,this.keyClockEncoder.toUint8Array()),Se(e,this.clientEncoder.toUint8Array()),Se(e,this.leftClockEncoder.toUint8Array()),Se(e,this.rightClockEncoder.toUint8Array()),Se(e,we(this.infoEncoder)),Se(e,this.stringEncoder.toUint8Array()),Se(e,we(this.parentInfoEncoder)),Se(e,this.typeRefEncoder.toUint8Array()),Se(e,this.lenEncoder.toUint8Array()),Pn(e,we(this.restEncoder)),we(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Yt(this.restEncoder,e)}writeBuf(e){Se(this.restEncoder,e)}writeJSON(e){Yt(this.restEncoder,e)}writeKey(e){this.keyMap.get(e)===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(this.keyClock++)}}const bc=(n,e,t,i)=>{i=Dt(i,e[0].id.clock);const a=it(e,i);te(n.restEncoder,e.length-a),n.writeClient(t),te(n.restEncoder,i);const l=e[a];l.write(n,i-l.id.clock);for(let d=a+1;d<e.length;d++)e[d].write(n,0)},ti=(n,e,t)=>{const i=new Map;t.forEach((a,l)=>{xe(e,l)>a&&i.set(l,a)}),Yn(e).forEach((a,l)=>{t.has(l)||i.set(l,0)}),te(n.restEncoder,i.size),Array.from(i.entries()).sort((a,l)=>l[0]-a[0]).forEach(([a,l])=>{bc(n,e.clients.get(a),a,l)})},Sc=(n,e)=>{const t=Qe(),i=ie(n.restDecoder);for(let a=0;a<i;a++){const l=ie(n.restDecoder),d=new Array(l),f=n.readClient();let u=ie(n.restDecoder);t.set(f,{i:0,refs:d});for(let g=0;g<l;g++){const v=n.readInfo();switch(Bn&v){case 0:{const r=n.readLen();d[g]=new $e(ue(f,u),r),u+=r;break}case 10:{const r=ie(n.restDecoder);d[g]=new qe(ue(f,u),r),u+=r;break}default:{const r=(v&(ft|je))==0,o=new ke(ue(f,u),null,(v&je)===je?n.readLeftID():null,null,(v&ft)===ft?n.readRightID():null,r?n.readParentInfo()?e.get(n.readString()):n.readLeftID():null,r&&(v&ln)===ln?n.readString():null,so(n,v));d[g]=o,u+=o.length}}}}return t},Ec=(n,e,t)=>{const i=[];let a=Array.from(t.keys()).sort((c,h)=>c-h);if(a.length===0)return null;const l=()=>{if(a.length===0)return null;let c=t.get(a[a.length-1]);for(;c.refs.length===c.i;)if(a.pop(),a.length>0)c=t.get(a[a.length-1]);else return null;return c};let d=l();if(d===null&&i.length===0)return null;const f=new Ls,u=new Map,g=(c,h)=>{const m=u.get(c);(m==null||m>h)&&u.set(c,h)};let v=d.refs[d.i++];const r=new Map,o=()=>{for(const c of i){const h=c.id.client,m=t.get(h);m?(m.i--,f.clients.set(h,m.refs.slice(m.i)),t.delete(h),m.i=0,m.refs=[]):f.clients.set(h,[c]),a=a.filter(E=>E!==h)}i.length=0};for(;;){if(v.constructor!==qe){const h=We(r,v.id.client,()=>xe(e,v.id.client))-v.id.clock;if(h<0)i.push(v),g(v.id.client,v.id.clock-1),o();else{const m=v.getMissing(n,e);if(m!==null){i.push(v);const E=t.get(m)||{refs:[],i:0};if(E.refs.length===E.i)g(m,xe(e,m)),o();else{v=E.refs[E.i++];continue}}else(h===0||h<v.length)&&(v.integrate(n,h),r.set(v.id.client,v.id.clock+v.length))}}if(i.length>0)v=i.pop();else if(d!==null&&d.i<d.refs.length)v=d.refs[d.i++];else{if(d=l(),d===null)break;v=d.refs[d.i++]}}if(f.clients.size>0){const c=new Mt;return ti(c,f,new Map),te(c.restEncoder,0),{missing:u,update:c.toUint8Array()}}return null},Ac=(n,e)=>ti(n,e.doc.store,e.beforeState),kc=(n,e,t,i=new Xt(n))=>me(e,a=>{a.local=!1;let l=!1;const d=a.doc,f=d.store,u=Sc(i,d),g=Ec(a,f,u),v=f.pendingStructs;if(v){for(const[o,c]of v.missing)if(c<xe(f,o)){l=!0;break}if(g){for(const[o,c]of g.missing){const h=v.missing.get(o);(h==null||h>c)&&v.missing.set(o,c)}v.update=Xn([v.update,g.update])}}else f.pendingStructs=g;const r=vs(i,a,f);if(f.pendingDs){const o=new Xt(nt(f.pendingDs));ie(o.restDecoder);const c=vs(o,a,f);r&&c?f.pendingDs=Xn([r,c]):f.pendingDs=r||c}else f.pendingDs=r;if(l){const o=f.pendingStructs.update;f.pendingStructs=null,Cs(a.doc,o)}},t,!1),Cs=(n,e,t,i=Xt)=>{const a=nt(e);kc(a,n,t,new i(a))},Cc=(n,e,t)=>Cs(n,e,t,Es),Tc=(n,e,t=new Map)=>{ti(n,e.store,t),Jt(n,wc(e.store))},xc=(n,e=new Uint8Array([0]),t=new Mt)=>{const i=Ts(e);Tc(t,n,i);const a=[t.toUint8Array()];if(n.store.pendingDs&&a.push(n.store.pendingDs),n.store.pendingStructs&&a.push(Gc(n.store.pendingStructs.update,e)),a.length>1){if(t.constructor===gn)return $c(a.map((l,d)=>d===0?l:Jc(l)));if(t.constructor===Mt)return Xn(a)}return a[0]},Rc=(n,e)=>xc(n,e,new gn),Ic=n=>{const e=new Map,t=ie(n.restDecoder);for(let i=0;i<t;i++){const a=ie(n.restDecoder),l=ie(n.restDecoder);e.set(a,l)}return e},Ts=n=>Ic(new Ss(nt(n))),xs=(n,e)=>(te(n.restEncoder,e.size),e.forEach((t,i)=>{te(n.restEncoder,i),te(n.restEncoder,t)}),n),Dc=(n,e)=>xs(n,Yn(e.store)),Oc=(n,e=new ks)=>(n instanceof Map?xs(e,n):Dc(e,n),e.toUint8Array()),Lc=n=>Oc(n,new As);class Nc{constructor(){this.l=[]}}const Rs=()=>new Nc,Is=(n,e)=>n.l.push(e),Ds=(n,e)=>{const t=n.l,i=t.length;n.l=t.filter(a=>e!==a),i===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Os=(n,e,t)=>Hr(n.l,[e,t]);class Kt{constructor(e,t){this.client=e,this.clock=t}}const qn=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,ue=(n,e)=>new Kt(n,e),Mc=n=>{for(const[e,t]of n.doc.share.entries())if(t===n)return e;throw et()};class Bc{constructor(e,t){this.ds=e,this.sv=t}}const Fc=(n,e)=>new Bc(n,e);Fc(ws(),new Map);const _n=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!ys(e.ds,n.id),Gn=(n,e)=>{const t=We(n.meta,Gn,an),i=n.doc.store;t.has(e)||(e.sv.forEach((a,l)=>{a<xe(i,l)&&St(n,ue(l,a))}),Qr(n,e.ds,a=>{}),t.add(e))};class Ls{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Yn=n=>{const e=new Map;return n.clients.forEach((t,i)=>{const a=t[t.length-1];e.set(i,a.id.clock+a.length)}),e},xe=(n,e)=>{const t=n.clients.get(e);if(t===void 0)return 0;const i=t[t.length-1];return i.id.clock+i.length},Ns=(n,e)=>{let t=n.clients.get(e.id.client);if(t===void 0)t=[],n.clients.set(e.id.client,t);else{const i=t[t.length-1];if(i.id.clock+i.length!==e.id.clock)throw et()}t.push(e)},it=(n,e)=>{let t=0,i=n.length-1,a=n[i],l=a.id.clock;if(l===e)return i;let d=$t(e/(l+a.length-1)*i);for(;t<=i;){if(a=n[d],l=a.id.clock,l<=e){if(e<l+a.length)return d;t=d+1}else i=d-1;d=$t((t+i)/2)}throw et()},Uc=(n,e)=>{const t=n.clients.get(e.client);return t[it(t,e.clock)]},ni=Uc,ri=(n,e,t)=>{const i=it(e,t),a=e[i];return a.id.clock<t&&a instanceof ke?(e.splice(i+1,0,or(n,a,t-a.id.clock)),i+1):i},St=(n,e)=>{const t=n.doc.store.clients.get(e.client);return t[ri(n,t,e.clock)]},Ms=(n,e,t)=>{const i=e.clients.get(t.client),a=it(i,t.clock),l=i[a];return t.clock!==l.id.clock+l.length-1&&l.constructor!==$e&&i.splice(a+1,0,or(n,l,t.clock-l.id.clock+1)),l},Pc=(n,e,t)=>{const i=n.clients.get(e.id.client);i[it(i,e.id.clock)]=t},Bs=(n,e,t,i,a)=>{if(i===0)return;const l=t+i;let d=ri(n,e,t),f;do f=e[d++],l<f.id.clock+f.length&&ri(n,e,l),a(f);while(d<e.length&&e[d].id.clock<l)};class jc{constructor(e,t,i){this.doc=e,this.deleteSet=new dn,this.beforeState=Yn(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Fs=(n,e)=>e.deleteSet.clients.size===0&&!sl(e.afterState,(t,i)=>e.beforeState.get(i)!==t)?!1:(Zr(e.deleteSet),Ac(n,e),Jt(n,e.deleteSet),!0),Us=(n,e,t)=>{const i=e._item;(i===null||i.id.clock<(n.beforeState.get(i.id.client)||0)&&!i.deleted)&&We(n.changed,e,an).add(t)},Jn=(n,e)=>{const t=n[e-1],i=n[e];t.deleted===i.deleted&&t.constructor===i.constructor&&t.mergeWith(i)&&(n.splice(e,1),i instanceof ke&&i.parentSub!==null&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,t))},Vc=(n,e,t)=>{for(const[i,a]of n.clients.entries()){const l=e.clients.get(i);for(let d=a.length-1;d>=0;d--){const f=a[d],u=f.clock+f.len;for(let g=it(l,f.clock),v=l[g];g<l.length&&v.id.clock<u;v=l[++g]){const r=l[g];if(f.clock+f.len<=r.id.clock)break;r instanceof ke&&r.deleted&&!r.keep&&t(r)&&r.gc(e,!1)}}}},Hc=(n,e)=>{n.clients.forEach((t,i)=>{const a=e.clients.get(i);for(let l=t.length-1;l>=0;l--){const d=t[l],f=Rr(a.length-1,1+it(a,d.clock+d.len-1));for(let u=f,g=a[u];u>0&&g.id.clock>=d.clock;g=a[--u])Jn(a,u)}})},Ps=(n,e)=>{if(e<n.length){const t=n[e],i=t.doc,a=i.store,l=t.deleteSet,d=t._mergeStructs;try{Zr(l),t.afterState=Yn(t.doc.store),i._transaction=null,i.emit("beforeObserverCalls",[t,i]);const f=[];t.changed.forEach((u,g)=>f.push(()=>{(g._item===null||!g._item.deleted)&&g._callObserver(t,u)})),f.push(()=>{t.changedParentTypes.forEach((u,g)=>f.push(()=>{(g._item===null||!g._item.deleted)&&(u=u.filter(v=>v.target._item===null||!v.target._item.deleted),u.forEach(v=>{v.currentTarget=g}),u.sort((v,r)=>v.path.length-r.path.length),Os(g._dEH,u,t))})),f.push(()=>i.emit("afterTransaction",[t,i]))}),Hr(f,[])}finally{i.gc&&Vc(l,a,i.gcFilter),Hc(l,a),t.afterState.forEach((f,u)=>{const g=t.beforeState.get(u)||0;if(g!==f){const v=a.clients.get(u),r=Dt(it(v,g),1);for(let o=v.length-1;o>=r;o--)Jn(v,o)}});for(let f=0;f<d.length;f++){const{client:u,clock:g}=d[f].id,v=a.clients.get(u),r=it(v,g);r+1<v.length&&Jn(v,r+1),r>0&&Jn(v,r)}if(!t.local&&t.afterState.get(i.clientID)!==t.beforeState.get(i.clientID)&&(i.clientID=bs(),ps(Wn,Ve,"[yjs] ",bt,qr,"Changed the client-id because another client seems to be using it.")),i.emit("afterTransactionCleanup",[t,i]),i._observers.has("update")){const f=new gn;Fs(f,t)&&i.emit("update",[f.toUint8Array(),t.origin,i,t])}if(i._observers.has("updateV2")){const f=new Mt;Fs(f,t)&&i.emit("updateV2",[f.toUint8Array(),t.origin,i,t])}t.subdocsAdded.forEach(f=>i.subdocs.add(f)),t.subdocsRemoved.forEach(f=>i.subdocs.delete(f)),i.emit("subdocs",[{loaded:t.subdocsLoaded,added:t.subdocsAdded,removed:t.subdocsRemoved}]),t.subdocsRemoved.forEach(f=>f.destroy()),n.length<=e+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,n])):Ps(n,e+1)}}},me=(n,e,t=null,i=!0)=>{const a=n._transactionCleanups;let l=!1;n._transaction===null&&(l=!0,n._transaction=new jc(n,t,i),a.push(n._transaction),a.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{e(n._transaction)}finally{l&&a[0]===n._transaction&&Ps(a,0)}};function*Wc(n){const e=ie(n.restDecoder);for(let t=0;t<e;t++){const i=ie(n.restDecoder),a=n.readClient();let l=ie(n.restDecoder);for(let d=0;d<i;d++){const f=n.readInfo();if(f===10){const u=ie(n.restDecoder);yield new qe(ue(a,l),u),l+=u}else if((Bn&f)!=0){const u=(f&(ft|je))==0,g=new ke(ue(a,l),null,(f&je)===je?n.readLeftID():null,null,(f&ft)===ft?n.readRightID():null,u?n.readParentInfo()?n.readString():n.readLeftID():null,u&&(f&ln)===ln?n.readString():null,so(n,f));yield g,l+=g.length}else{const u=n.readLen();yield new $e(ue(a,l),u),l+=u}}}}class ii{constructor(e,t){this.gen=Wc(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===qe);return this.curr}}class si{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const $c=n=>Xn(n,Es,gn),qc=(n,e)=>{if(n.constructor===$e){const{client:t,clock:i}=n.id;return new $e(ue(t,i+e),n.length-e)}else if(n.constructor===qe){const{client:t,clock:i}=n.id;return new qe(ue(t,i+e),n.length-e)}else{const t=n,{client:i,clock:a}=t.id;return new ke(ue(i,a+e),null,ue(i,a+e-1),null,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e))}},Xn=(n,e=Xt,t=Mt)=>{if(n.length===1)return n[0];const i=n.map(v=>new e(nt(v)));let a=i.map(v=>new ii(v,!0)),l=null;const d=new t,f=new si(d);for(;a=a.filter(o=>o.curr!==null),a.sort((o,c)=>{if(o.curr.id.client===c.curr.id.client){const h=o.curr.id.clock-c.curr.id.clock;return h===0?o.curr.constructor===c.curr.constructor?0:o.curr.constructor===qe?1:-1:h}else return c.curr.id.client-o.curr.id.client}),a.length!==0;){const v=a[0],r=v.curr.id.client;if(l!==null){let o=v.curr,c=!1;for(;o!==null&&o.id.clock+o.length<=l.struct.id.clock+l.struct.length&&o.id.client>=l.struct.id.client;)o=v.next(),c=!0;if(o===null||o.id.client!==r||c&&o.id.clock>l.struct.id.clock+l.struct.length)continue;if(r!==l.struct.id.client)Et(f,l.struct,l.offset),l={struct:o,offset:0},v.next();else if(l.struct.id.clock+l.struct.length<o.id.clock)if(l.struct.constructor===qe)l.struct.length=o.id.clock+o.length-l.struct.id.clock;else{Et(f,l.struct,l.offset);const h=o.id.clock-l.struct.id.clock-l.struct.length;l={struct:new qe(ue(r,l.struct.id.clock+l.struct.length),h),offset:0}}else{const h=l.struct.id.clock+l.struct.length-o.id.clock;h>0&&(l.struct.constructor===qe?l.struct.length-=h:o=qc(o,h)),l.struct.mergeWith(o)||(Et(f,l.struct,l.offset),l={struct:o,offset:0},v.next())}}else l={struct:v.curr,offset:0},v.next();for(let o=v.curr;o!==null&&o.id.client===r&&o.id.clock===l.struct.id.clock+l.struct.length&&o.constructor!==qe;o=v.next())Et(f,l.struct,l.offset),l={struct:o,offset:0}}l!==null&&(Et(f,l.struct,l.offset),l=null),oi(f);const u=i.map(v=>ei(v)),g=yc(u);return Jt(d,g),d.toUint8Array()},Gc=(n,e,t=Xt,i=Mt)=>{const a=Ts(e),l=new i,d=new si(l),f=new t(nt(n)),u=new ii(f,!1);for(;u.curr;){const v=u.curr,r=v.id.client,o=a.get(r)||0;if(u.curr.constructor===qe){u.next();continue}if(v.id.clock+v.length>o)for(Et(d,v,Dt(o-v.id.clock,0)),u.next();u.curr&&u.curr.id.client===r;)Et(d,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===r&&u.curr.id.clock+u.curr.length<=o;)u.next()}oi(d);const g=ei(f);return Jt(l,g),l.toUint8Array()},js=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:we(n.encoder.restEncoder)}),n.encoder.restEncoder=Te(),n.written=0)},Et=(n,e,t)=>{n.written>0&&n.currClient!==e.id.client&&js(n),n.written===0&&(n.currClient=e.id.client,n.encoder.writeClient(e.id.client),te(n.encoder.restEncoder,e.id.clock+t)),e.write(n.encoder,t),n.written++},oi=n=>{js(n);const e=n.encoder.restEncoder;te(e,n.clientStructs.length);for(let t=0;t<n.clientStructs.length;t++){const i=n.clientStructs[t];te(e,i.written),Pn(e,i.restEncoder)}},Yc=(n,e,t)=>{const i=new e(nt(n)),a=new ii(i,!1),l=new t,d=new si(l);for(let u=a.curr;u!==null;u=a.next())Et(d,u,0);oi(d);const f=ei(i);return Jt(l,f),l.toUint8Array()},Jc=n=>Yc(n,Xt,gn);class Kn{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null}get path(){return Xc(this.currentTarget,this.target)}deletes(e){return ys(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(a=>{if(a!==null){const l=t._map.get(a);let d,f;if(this.adds(l)){let u=l.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(l))if(u!==null&&this.deletes(u))d="delete",f=Tr(u.content.getContent());else return;else u!==null&&this.deletes(u)?(d="update",f=Tr(u.content.getContent())):(d="add",f=void 0)}else if(this.deletes(l))d="delete",f=Tr(l.content.getContent());else return;e.set(a,{action:d,oldValue:f})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){const t=this.target,i=an(),a=an(),l=[];if(e={added:i,deleted:a,delta:l,keys:this.keys},this.transaction.changed.get(t).has(null)){let f=null;const u=()=>{f&&l.push(f)};for(let g=t._start;g!==null;g=g.right)g.deleted?this.deletes(g)&&!this.adds(g)&&((f===null||f.delete===void 0)&&(u(),f={delete:0}),f.delete+=g.length,a.add(g)):this.adds(g)?((f===null||f.insert===void 0)&&(u(),f={insert:[]}),f.insert=f.insert.concat(g.content.getContent()),i.add(g)):((f===null||f.retain===void 0)&&(u(),f={retain:0}),f.retain+=g.length);f!==null&&f.retain===void 0&&u()}this._changes=e}return e}}const Xc=(n,e)=>{const t=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let i=0,a=e._item.parent._start;for(;a!==e._item&&a!==null;)a.deleted||i++,a=a.right;t.unshift(i)}e=e._item.parent}return t},Vs=80;let ai=0;class Kc{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=ai++}}const zc=n=>{n.timestamp=ai++},Hs=(n,e,t)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=t,n.timestamp=ai++},Qc=(n,e,t)=>{if(n.length>=Vs){const i=n.reduce((a,l)=>a.timestamp<l.timestamp?a:l);return Hs(i,e,t),i}else{const i=new Kc(e,t);return n.push(i),i}},zn=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;const t=n._searchMarker.length===0?null:n._searchMarker.reduce((l,d)=>xr(e-l.index)<xr(e-d.index)?l:d);let i=n._start,a=0;for(t!==null&&(i=t.p,a=t.index,zc(t));i.right!==null&&a<e;){if(!i.deleted&&i.countable){if(e<a+i.length)break;a+=i.length}i=i.right}for(;i.left!==null&&a>e;)i=i.left,!i.deleted&&i.countable&&(a-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(a-=i.length);return t!==null&&xr(t.index-a)<i.parent.length/Vs?(Hs(t,i,a),t):Qc(n._searchMarker,i,a)},mn=(n,e,t)=>{for(let i=n.length-1;i>=0;i--){const a=n[i];if(t>0){let l=a.p;for(l.marker=!1;l&&(l.deleted||!l.countable);)l=l.left,l&&!l.deleted&&l.countable&&(a.index-=l.length);if(l===null||l.marker===!0){n.splice(i,1);continue}a.p=l,l.marker=!0}(e<a.index||t>0&&e===a.index)&&(a.index=Dt(e,a.index+t))}},Qn=(n,e,t)=>{const i=n,a=e.changedParentTypes;for(;We(a,n,()=>[]).push(t),n._item!==null;)n=n._item.parent;Os(i._eH,t,e)};class Me{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Rs(),this._dEH=Rs(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Ze()}clone(){throw Ze()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Is(this._eH,e)}observeDeep(e){Is(this._dEH,e)}unobserve(e){Ds(this._eH,e)}unobserveDeep(e){Ds(this._dEH,e)}toJSON(){}}const Ws=(n,e,t)=>{e<0&&(e=n._length+e),t<0&&(t=n._length+t);let i=t-e;const a=[];let l=n._start;for(;l!==null&&i>0;){if(l.countable&&!l.deleted){const d=l.content.getContent();if(d.length<=e)e-=d.length;else{for(let f=e;f<d.length&&i>0;f++)a.push(d[f]),i--;e=0}}l=l.right}return a},$s=n=>{const e=[];let t=n._start;for(;t!==null;){if(t.countable&&!t.deleted){const i=t.content.getContent();for(let a=0;a<i.length;a++)e.push(i[a])}t=t.right}return e},Zn=(n,e)=>{let t=0,i=n._start;for(;i!==null;){if(i.countable&&!i.deleted){const a=i.content.getContent();for(let l=0;l<a.length;l++)e(a[l],t++,n)}i=i.right}},qs=(n,e)=>{const t=[];return Zn(n,(i,a)=>{t.push(e(i,a,n))}),t},Zc=n=>{let e=n._start,t=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),i=0,e=e.right}const a=t[i++];return t.length<=i&&(t=null),{done:!1,value:a}}}},Gs=(n,e)=>{const t=zn(n,e);let i=n._start;for(t!==null&&(i=t.p,e-=t.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(e<i.length)return i.content.getContent()[e];e-=i.length}},li=(n,e,t,i)=>{let a=t;const l=n.doc,d=l.clientID,f=l.store,u=t===null?e._start:t.right;let g=[];const v=()=>{g.length>0&&(a=new ke(ue(d,xe(f,d)),a,a&&a.lastId,u,u&&u.id,e,null,new Ut(g)),a.integrate(n,0),g=[])};i.forEach(r=>{if(r===null)g.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:g.push(r);break;default:switch(v(),r.constructor){case Uint8Array:case ArrayBuffer:a=new ke(ue(d,xe(f,d)),a,a&&a.lastId,u,u&&u.id,e,null,new wn(new Uint8Array(r))),a.integrate(n,0);break;case pn:a=new ke(ue(d,xe(f,d)),a,a&&a.lastId,u,u&&u.id,e,null,new bn(r)),a.integrate(n,0);break;default:if(r instanceof Me)a=new ke(ue(d,xe(f,d)),a,a&&a.lastId,u,u&&u.id,e,null,new gt(r)),a.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),v()},Ys=qt("Length exceeded!"),Js=(n,e,t,i)=>{if(t>e._length)throw Ys;if(t===0)return e._searchMarker&&mn(e._searchMarker,t,i.length),li(n,e,null,i);const a=t,l=zn(e,t);let d=e._start;for(l!==null&&(d=l.p,t-=l.index,t===0&&(d=d.prev,t+=d&&d.countable&&!d.deleted?d.length:0));d!==null;d=d.right)if(!d.deleted&&d.countable){if(t<=d.length){t<d.length&&St(n,ue(d.id.client,d.id.clock+t));break}t-=d.length}return e._searchMarker&&mn(e._searchMarker,a,i.length),li(n,e,d,i)},Xs=(n,e,t,i)=>{if(i===0)return;const a=t,l=i,d=zn(e,t);let f=e._start;for(d!==null&&(f=d.p,t-=d.index);f!==null&&t>0;f=f.right)!f.deleted&&f.countable&&(t<f.length&&St(n,ue(f.id.client,f.id.clock+t)),t-=f.length);for(;i>0&&f!==null;)f.deleted||(i<f.length&&St(n,ue(f.id.client,f.id.clock+i)),f.delete(n),i-=f.length),f=f.right;if(i>0)throw Ys;e._searchMarker&&mn(e._searchMarker,a,-l+i)},er=(n,e,t)=>{const i=e._map.get(t);i!==void 0&&i.delete(n)},ci=(n,e,t,i)=>{const a=e._map.get(t)||null,l=n.doc,d=l.clientID;let f;if(i==null)f=new Ut([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:f=new Ut([i]);break;case Uint8Array:f=new wn(i);break;case pn:f=new bn(i);break;default:if(i instanceof Me)f=new gt(i);else throw new Error("Unexpected content type")}new ke(ue(d,xe(l.store,d)),a,a&&a.lastId,null,null,e,t,f).integrate(n,0)},ui=(n,e)=>{const t=n._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},Ks=n=>{const e={};return n._map.forEach((t,i)=>{t.deleted||(e[i]=t.content.getContent()[t.length-1])}),e},zs=(n,e)=>{const t=n._map.get(e);return t!==void 0&&!t.deleted},tr=n=>_c(n.entries(),e=>!e[1].deleted);class eu extends Kn{constructor(e,t){super(e,t);this._transaction=t}}class zt extends Me{constructor(){super();this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new zt;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new zt}clone(){const e=new zt;return e.insert(0,this.toArray().map(t=>t instanceof Me?t.clone():t)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),Qn(this,e,new eu(this,e))}insert(e,t){this.doc!==null?me(this.doc,i=>{Js(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?me(this.doc,i=>{Xs(i,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return Gs(this,e)}toArray(){return $s(this)}slice(e=0,t=this.length){return Ws(this,e,t)}toJSON(){return this.map(e=>e instanceof Me?e.toJSON():e)}map(e){return qs(this,e)}forEach(e){Zn(this,e)}[Symbol.iterator](){return Zc(this)}_write(e){e.writeTypeRef(Eu)}}const tu=n=>new zt;class nu extends Kn{constructor(e,t,i){super(e,t);this.keysChanged=i}}class Qt extends Me{constructor(e){super();this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((i,a)=>{this.set(a,i)}),this._prelimContent=null}_copy(){return new Qt}clone(){const e=new Qt;return this.forEach((t,i)=>{e.set(i,t instanceof Me?t.clone():t)}),e}_callObserver(e,t){Qn(this,e,new nu(this,e,t))}toJSON(){const e={};return this._map.forEach((t,i)=>{if(!t.deleted){const a=t.content.getContent()[t.length-1];e[i]=a instanceof Me?a.toJSON():a}}),e}get size(){return[...tr(this._map)].length}keys(){return Kr(tr(this._map),e=>e[0])}values(){return Kr(tr(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Kr(tr(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){const t={};return this._map.forEach((i,a)=>{i.deleted||e(i.content.getContent()[i.length-1],a,this)}),t}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?me(this.doc,t=>{er(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?me(this.doc,i=>{ci(i,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return ui(this,e)}has(e){return zs(this,e)}clear(){this.doc!==null?me(this.doc,e=>{this.forEach(function(t,i,a){er(e,a,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Au)}}const ru=n=>new Qt,At=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&Ql(n,e);class fi{constructor(e,t,i,a){this.left=e,this.right=t,this.index=i,this.currentAttributes=a}forward(){switch(this.right===null&&et(),this.right.content.constructor){case Re:this.right.deleted||Zt(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Qs=(n,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case Re:e.right.deleted||Zt(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&St(n,ue(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},nr=(n,e,t)=>{const i=new Map,a=zn(e,t);if(a){const l=new fi(a.p.left,a.p,a.index,i);return Qs(n,l,t-a.index)}else{const l=new fi(null,e._start,0,i);return Qs(n,l,t)}},Zs=(n,e,t,i)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===Re&&At(i.get(t.right.content.key),t.right.content.value));)t.right.deleted||i.delete(t.right.content.key),t.forward();const a=n.doc,l=a.clientID;i.forEach((d,f)=>{const u=t.left,g=t.right,v=new ke(ue(l,xe(a.store,l)),u,u&&u.lastId,g,g&&g.id,e,null,new Re(f,d));v.integrate(n,0),t.right=v,t.forward()})},Zt=(n,e)=>{const{key:t,value:i}=e;i===null?n.delete(t):n.set(t,i)},eo=(n,e)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===Re&&At(e[n.right.content.key]||null,n.right.content.value)))break;n.forward()}},to=(n,e,t,i)=>{const a=n.doc,l=a.clientID,d=new Map;for(const f in i){const u=i[f],g=t.currentAttributes.get(f)||null;if(!At(g,u)){d.set(f,g);const{left:v,right:r}=t;t.right=new ke(ue(l,xe(a.store,l)),v,v&&v.lastId,r,r&&r.id,e,null,new Re(f,u)),t.right.integrate(n,0),t.forward()}}return d},hi=(n,e,t,i,a)=>{t.currentAttributes.forEach((o,c)=>{a[c]===void 0&&(a[c]=null)});const l=n.doc,d=l.clientID;eo(t,a);const f=to(n,e,t,a),u=i.constructor===String?new st(i):i instanceof Me?new gt(i):new Ft(i);let{left:g,right:v,index:r}=t;e._searchMarker&&mn(e._searchMarker,t.index,u.getLength()),v=new ke(ue(d,xe(l.store,d)),g,g&&g.lastId,v,v&&v.id,e,null,u),v.integrate(n,0),t.right=v,t.index=r,t.forward(),Zs(n,e,t,f)},no=(n,e,t,i,a)=>{const l=n.doc,d=l.clientID;eo(t,a);const f=to(n,e,t,a);for(;i>0&&t.right!==null;){if(!t.right.deleted)switch(t.right.content.constructor){case Re:{const{key:u,value:g}=t.right.content,v=a[u];v!==void 0&&(At(v,g)?f.delete(u):f.set(u,g),t.right.delete(n));break}default:i<t.right.length&&St(n,ue(t.right.id.client,t.right.id.clock+i)),i-=t.right.length;break}t.forward()}if(i>0){let u="";for(;i>0;i--)u+=`
`;t.right=new ke(ue(d,xe(l.store,d)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new st(u)),t.right.integrate(n,0),t.forward()}Zs(n,e,t,f)},ro=(n,e,t,i,a)=>{for(;t&&(!t.countable||t.deleted);)!t.deleted&&t.content.constructor===Re&&Zt(a,t.content),t=t.right;let l=0;for(;e!==t;){if(!e.deleted){const d=e.content;switch(d.constructor){case Re:{const{key:f,value:u}=d;((a.get(f)||null)!==u||(i.get(f)||null)===u)&&(e.delete(n),l++);break}}}e=e.right}return l},iu=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Re){const i=e.content.key;t.has(i)?e.delete(n):t.add(i)}e=e.left}},su=n=>{let e=0;return me(n.doc,t=>{let i=n._start,a=n._start,l=Qe();const d=On(l);for(;a;){if(a.deleted===!1)switch(a.content.constructor){case Re:Zt(d,a.content);break;default:e+=ro(t,i,a,l,d),l=On(d),i=a;break}a=a.right}}),e},io=(n,e,t)=>{const i=t,a=On(e.currentAttributes),l=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case gt:case Ft:case st:t<e.right.length&&St(n,ue(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(n);break}e.forward()}l&&ro(n,l,e.right,a,On(e.currentAttributes));const d=(e.left||e.right).parent;return d._searchMarker&&mn(d._searchMarker,e.index,-i+t),e};class ou extends Kn{constructor(e,t,i){super(e,t);this.childListChanged=!1,this.keysChanged=new Set,i.forEach(a=>{a===null?this.childListChanged=!0:this.keysChanged.add(a)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];me(e,i=>{const a=new Map,l=new Map;let d=this.target._start,f=null;const u={};let g="",v=0,r=0;const o=()=>{if(f!==null){let c;switch(f){case"delete":c={delete:r},r=0;break;case"insert":c={insert:g},a.size>0&&(c.attributes={},a.forEach((h,m)=>{h!==null&&(c.attributes[m]=h)})),g="";break;case"retain":if(c={retain:v},Object.keys(u).length>0){c.attributes={};for(const h in u)c.attributes[h]=u[h]}v=0;break}t.push(c),f=null}};for(;d!==null;){switch(d.content.constructor){case gt:case Ft:this.adds(d)?this.deletes(d)||(o(),f="insert",g=d.content.getContent()[0],o()):this.deletes(d)?(f!=="delete"&&(o(),f="delete"),r+=1):d.deleted||(f!=="retain"&&(o(),f="retain"),v+=1);break;case st:this.adds(d)?this.deletes(d)||(f!=="insert"&&(o(),f="insert"),g+=d.content.str):this.deletes(d)?(f!=="delete"&&(o(),f="delete"),r+=d.length):d.deleted||(f!=="retain"&&(o(),f="retain"),v+=d.length);break;case Re:{const{key:c,value:h}=d.content;if(this.adds(d)){if(!this.deletes(d)){const m=a.get(c)||null;At(m,h)?d.delete(i):(f==="retain"&&o(),At(h,l.get(c)||null)?delete u[c]:u[c]=h)}}else if(this.deletes(d)){l.set(c,h);const m=a.get(c)||null;At(m,h)||(f==="retain"&&o(),u[c]=m)}else if(!d.deleted){l.set(c,h);const m=u[c];m!==void 0&&(At(m,h)?d.delete(i):(f==="retain"&&o(),h===null?u[c]=h:delete u[c]))}d.deleted||(f==="insert"&&o(),Zt(a,d.content));break}}d=d.right}for(o();t.length>0;){const c=t[t.length-1];if(c.retain!==void 0&&c.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class en extends Me{constructor(e){super();this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new en}clone(){const e=new en;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const i=new ou(this,e,t),a=e.doc;if(Qn(this,e,i),!e.local){let l=!1;for(const[d,f]of e.afterState.entries()){const u=e.beforeState.get(d)||0;if(f!==u&&(Bs(e,a.store.clients.get(d),u,f,g=>{!g.deleted&&g.content.constructor===Re&&(l=!0)}),l))break}l||Qr(e,e.deleteSet,d=>{d instanceof $e||l||d.parent===this&&d.content.constructor===Re&&(l=!0)}),me(a,d=>{l?su(this):Qr(d,d.deleteSet,f=>{f instanceof $e||f.parent===this&&iu(d,f)})})}}toString(){let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===st&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?me(this.doc,i=>{const a=new fi(null,this._start,0,new Map);for(let l=0;l<e.length;l++){const d=e[l];if(d.insert!==void 0){const f=!t&&typeof d.insert=="string"&&l===e.length-1&&a.right===null&&d.insert.slice(-1)===`
`?d.insert.slice(0,-1):d.insert;(typeof f!="string"||f.length>0)&&hi(i,this,a,f,d.attributes||{})}else d.retain!==void 0?no(i,this,a,d.retain,d.attributes||{}):d.delete!==void 0&&io(i,a,d.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,i){const a=[],l=new Map,d=this.doc;let f="",u=this._start;function g(){if(f.length>0){const v={};let r=!1;l.forEach((c,h)=>{r=!0,v[h]=c});const o={insert:f};r&&(o.attributes=v),a.push(o),f=""}}return me(d,v=>{for(e&&Gn(v,e),t&&Gn(v,t);u!==null;){if(_n(u,e)||t!==void 0&&_n(u,t))switch(u.content.constructor){case st:{const r=l.get("ychange");e!==void 0&&!_n(u,e)?(r===void 0||r.user!==u.id.client||r.state!=="removed")&&(g(),l.set("ychange",i?i("removed",u.id):{type:"removed"})):t!==void 0&&!_n(u,t)?(r===void 0||r.user!==u.id.client||r.state!=="added")&&(g(),l.set("ychange",i?i("added",u.id):{type:"added"})):r!==void 0&&(g(),l.delete("ychange")),f+=u.content.str;break}case gt:case Ft:{g();const r={insert:u.content.getContent()[0]};if(l.size>0){const o={};r.attributes=o,l.forEach((c,h)=>{o[h]=c})}a.push(r);break}case Re:_n(u,e)&&(g(),Zt(l,u.content));break}u=u.right}g()},Gn),a}insert(e,t,i){if(t.length<=0)return;const a=this.doc;a!==null?me(a,l=>{const d=nr(l,this,e);i||(i={},d.currentAttributes.forEach((f,u)=>{i[u]=f})),hi(l,this,d,t,i)}):this._pending.push(()=>this.insert(e,t,i))}insertEmbed(e,t,i={}){const a=this.doc;a!==null?me(a,l=>{const d=nr(l,this,e);hi(l,this,d,t,i)}):this._pending.push(()=>this.insertEmbed(e,t,i))}delete(e,t){if(t===0)return;const i=this.doc;i!==null?me(i,a=>{io(a,nr(a,this,e),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,i){if(t===0)return;const a=this.doc;a!==null?me(a,l=>{const d=nr(l,this,e);d.right!==null&&no(l,this,d,t,i)}):this._pending.push(()=>this.format(e,t,i))}removeAttribute(e){this.doc!==null?me(this.doc,t=>{er(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?me(this.doc,i=>{ci(i,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return ui(this,e)}getAttributes(e){return Ks(this)}_write(e){e.writeTypeRef(ku)}}const au=n=>new en;class di{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===yn||t.constructor===Bt)&&t._start!==null)e=t._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Bt extends Me{constructor(){super();this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Bt}clone(){const e=new Bt;return e.insert(0,this.toArray().map(t=>t instanceof Me?t.clone():t)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new di(this,e)}querySelector(e){e=e.toUpperCase();const i=new di(this,a=>a.nodeName&&a.nodeName.toUpperCase()===e).next();return i.done?null:i.value}querySelectorAll(e){return e=e.toUpperCase(),Array.from(new di(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){Qn(this,e,new uu(this,t,e))}toString(){return qs(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},i){const a=e.createDocumentFragment();return i!==void 0&&i._createAssociation(a,this),Zn(this,l=>{a.insertBefore(l.toDOM(e,t,i),null)}),a}insert(e,t){this.doc!==null?me(this.doc,i=>{Js(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)me(this.doc,i=>{const a=e&&e instanceof Me?e._item:e;li(i,this,a,t)});else{const i=this._prelimContent,a=e===null?0:i.findIndex(l=>l===e)+1;if(a===0&&e!==null)throw qt("Reference item not found");i.splice(a,0,...t)}}delete(e,t=1){this.doc!==null?me(this.doc,i=>{Xs(i,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return $s(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Gs(this,e)}slice(e=0,t=this.length){return Ws(this,e,t)}_write(e){e.writeTypeRef(Tu)}}const lu=n=>new Bt;class yn extends Bt{constructor(e="UNDEFINED"){super();this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((i,a)=>{this.setAttribute(a,i)}),this._prelimAttrs=null}_copy(){return new yn(this.nodeName)}clone(){const e=new yn(this.nodeName),t=this.getAttributes();for(const i in t)e.setAttribute(i,t[i]);return e.insert(0,this.toArray().map(i=>i instanceof Me?i.clone():i)),e}toString(){const e=this.getAttributes(),t=[],i=[];for(const f in e)i.push(f);i.sort();const a=i.length;for(let f=0;f<a;f++){const u=i[f];t.push(u+'="'+e[u]+'"')}const l=this.nodeName.toLocaleLowerCase(),d=t.length>0?" "+t.join(" "):"";return`<${l}${d}>${super.toString()}</${l}>`}removeAttribute(e){this.doc!==null?me(this.doc,t=>{er(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?me(this.doc,i=>{ci(i,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return ui(this,e)}hasAttribute(e){return zs(this,e)}getAttributes(e){return Ks(this)}toDOM(e=document,t={},i){const a=e.createElement(this.nodeName),l=this.getAttributes();for(const d in l)a.setAttribute(d,l[d]);return Zn(this,d=>{a.appendChild(d.toDOM(e,t,i))}),i!==void 0&&i._createAssociation(a,this),a}_write(e){e.writeTypeRef(Cu),e.writeKey(this.nodeName)}}const cu=n=>new yn(n.readKey());class uu extends Kn{constructor(e,t,i){super(e,i);this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(a=>{a===null?this.childListChanged=!0:this.attributesChanged.add(a)})}}class rr extends Qt{constructor(e){super();this.hookName=e}_copy(){return new rr(this.hookName)}clone(){const e=new rr(this.hookName);return this.forEach((t,i)=>{e.set(i,t)}),e}toDOM(e=document,t={},i){const a=t[this.hookName];let l;return a!==void 0?l=a.createDom(this):l=document.createElement(this.hookName),l.setAttribute("data-yjs-hook",this.hookName),i!==void 0&&i._createAssociation(l,this),l}_write(e){e.writeTypeRef(xu),e.writeKey(this.hookName)}}const fu=n=>new rr(n.readKey());class ir extends en{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ir}clone(){const e=new ir;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,i){const a=e.createTextNode(this.toString());return i!==void 0&&i._createAssociation(a,this),a}toString(){return this.toDelta().map(e=>{const t=[];for(const a in e.attributes){const l=[];for(const d in e.attributes[a])l.push({key:d,value:e.attributes[a][d]});l.sort((d,f)=>d.key<f.key?-1:1),t.push({nodeName:a,attrs:l})}t.sort((a,l)=>a.nodeName<l.nodeName?-1:1);let i="";for(let a=0;a<t.length;a++){const l=t[a];i+=`<${l.nodeName}`;for(let d=0;d<l.attrs.length;d++){const f=l.attrs[d];i+=` ${f.key}="${f.value}"`}i+=">"}i+=e.insert;for(let a=t.length-1;a>=0;a--)i+=`</${t[a].nodeName}>`;return i}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Ru)}}const hu=n=>new ir;class pi{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Ze()}mergeWith(e){return!1}write(e,t,i){throw Ze()}integrate(e,t){throw Ze()}}const du=0;class $e extends pi{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Ns(e.doc.store,this)}write(e,t){e.writeInfo(du),e.writeLen(this.length-t)}getMissing(e,t){return null}}class wn{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new wn(this.content)}splice(e){throw Ze()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}const pu=n=>new wn(n.readBuf());class vn{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new vn(this.len)}splice(e){const t=new vn(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){$n(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const gu=n=>new vn(n.readLen());class bn{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new bn(this.doc)}splice(e){throw Ze()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const _u=n=>new bn(new pn(sn({guid:n.readString()},n.readAny())));class Ft{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Ft(this.embed)}splice(e){throw Ze()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}const mu=n=>new Ft(n.readJSON());class Re{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Re(this.key,this.value)}splice(e){throw Ze()}mergeWith(e){return!1}integrate(e,t){t.parent._searchMarker=null}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const yu=n=>new Re(n.readString(),n.readJSON());class sr{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new sr(this.arr)}splice(e){const t=new sr(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let a=t;a<i;a++){const l=this.arr[a];e.writeString(l===void 0?"undefined":JSON.stringify(l))}}getRef(){return 2}}const wu=n=>{const e=n.readLen(),t=[];for(let i=0;i<e;i++){const a=n.readString();a==="undefined"?t.push(void 0):t.push(JSON.parse(a))}return new sr(t)};class Ut{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ut(this.arr)}splice(e){const t=new Ut(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let a=t;a<i;a++){const l=this.arr[a];e.writeAny(l)}}getRef(){return 8}}const vu=n=>{const e=n.readLen(),t=[];for(let i=0;i<e;i++)t.push(n.readAny());return new Ut(t)};class st{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new st(this.str)}splice(e){const t=new st(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",t.str="\uFFFD"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const bu=n=>new st(n.readString()),Su=[tu,ru,au,cu,lu,fu,hu],Eu=0,Au=1,ku=2,Cu=3,Tu=4,xu=5,Ru=6;class gt{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new gt(this.type._copy())}splice(e){throw Ze()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(i=>{i.deleted?e._mergeStructs.push(i):i.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(e,!0),i=i.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Iu=n=>new gt(Su[n.readTypeRef()](n));const or=(n,e,t)=>{const{client:i,clock:a}=e.id,l=new ke(ue(i,a+t),e,ue(i,a+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&l.markDeleted(),e.keep&&(l.keep=!0),e.redone!==null&&(l.redone=ue(e.redone.client,e.redone.clock+t)),e.right=l,l.right!==null&&(l.right.left=l),n._mergeStructs.push(l),l.parentSub!==null&&l.right===null&&l.parent._map.set(l.parentSub,l),e.length=t,l};class ke extends pi{constructor(e,t,i,a,l,d,f,u){super(e,u.getLength());this.origin=i,this.left=t,this.right=a,this.rightOrigin=l,this.parent=d,this.parentSub=f,this.redone=null,this.content=u,this.info=this.content.isCountable()?is:0}set marker(e){(this.info&Lr)>0!==e&&(this.info^=Lr)}get marker(){return(this.info&Lr)>0}get keep(){return(this.info&rs)>0}set keep(e){this.keep!==e&&(this.info^=rs)}get countable(){return(this.info&is)>0}get deleted(){return(this.info&Or)>0}set deleted(e){this.deleted!==e&&(this.info^=Or)}markDeleted(){this.info|=Or}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=xe(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=xe(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Kt&&this.id.client!==this.parent.client&&this.parent.clock>=xe(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ms(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=St(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===$e||this.right&&this.right.constructor===$e)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===ke&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===ke&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Kt){const i=ni(t,this.parent);i.constructor===$e?this.parent=null:this.parent=i.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Ms(e,e.doc.store,ue(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,a;if(i!==null)a=i.right;else if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start;const l=new Set,d=new Set;for(;a!==null&&a!==this.right;){if(d.add(a),l.add(a),qn(this.origin,a.origin)){if(a.id.client<this.id.client)i=a,l.clear();else if(qn(this.rightOrigin,a.rightOrigin))break}else if(a.origin!==null&&d.has(ni(e.doc.store,a.origin)))l.has(ni(e.doc.store,a.origin))||(i=a,l.clear());else break;a=a.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Ns(e.doc.store,this),this.content.integrate(e,this),Us(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new $e(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:ue(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&qn(e.origin,this.lastId)&&this.right===e&&qn(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(i=>{i.p===e&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),$n(e.deleteSet,this.id.client,this.id.clock,this.length),Us(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw et();this.content.gc(e),t?Pc(e,this,new $e(this.id,this.length)):this.content=new vn(this.length)}write(e,t){const i=t>0?ue(this.id.client,this.id.clock+t-1):this.origin,a=this.rightOrigin,l=this.parentSub,d=this.content.getRef()&Bn|(i===null?0:je)|(a===null?0:ft)|(l===null?0:ln);if(e.writeInfo(d),i!==null&&e.writeLeftID(i),a!==null&&e.writeRightID(a),i===null&&a===null){const f=this.parent;if(f._item!==void 0){const u=f._item;if(u===null){const g=Mc(f);e.writeParentInfo(!0),e.writeString(g)}else e.writeParentInfo(!1),e.writeLeftID(u.id)}else f.constructor===String?(e.writeParentInfo(!0),e.writeString(f)):f.constructor===Kt?(e.writeParentInfo(!1),e.writeLeftID(f)):et();l!==null&&e.writeString(l)}this.content.write(e,t)}}const so=(n,e)=>Du[e&Bn](n),Du=[()=>{et()},gu,wu,pu,bu,mu,yu,Iu,vu,_u,()=>{et()}],Ou=10;class qe extends pi{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){et()}write(e,t){e.writeInfo(Ou),te(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const oo=typeof window!="undefined"?window:typeof global!="undefined"?global:{},ao="__ $YJS$ __";oo[ao]===!0&&console.warn("Yjs was already imported. Importing different versions of Yjs often leads to issues.");oo[ao]=!0;var Ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kt(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lo={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){var t=Math.floor,i=Math.abs,a=Math.pow;return function(){function l(d,f,u){function g(o,c){if(!f[o]){if(!d[o]){var h=typeof kt=="function"&&kt;if(!c&&h)return h(o,!0);if(v)return v(o,!0);var m=new Error("Cannot find module '"+o+"'");throw m.code="MODULE_NOT_FOUND",m}var E=f[o]={exports:{}};d[o][0].call(E.exports,function(S){var O=d[o][1][S];return g(O||S)},E,E.exports,l,d,f,u)}return f[o].exports}for(var v=typeof kt=="function"&&kt,r=0;r<u.length;r++)g(u[r]);return g}return l}()({1:[function(l,d,f){function u(C){var b=C.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");var x=C.indexOf("=");x===-1&&(x=b);var T=x===b?0:4-x%4;return[x,T]}function g(C,b,x){return 3*(b+x)/4-x}function v(C){var b,x,T=u(C),L=T[0],j=T[1],D=new E(g(C,L,j)),B=0,W=0<j?L-4:L;for(x=0;x<W;x+=4)b=m[C.charCodeAt(x)]<<18|m[C.charCodeAt(x+1)]<<12|m[C.charCodeAt(x+2)]<<6|m[C.charCodeAt(x+3)],D[B++]=255&b>>16,D[B++]=255&b>>8,D[B++]=255&b;return j===2&&(b=m[C.charCodeAt(x)]<<2|m[C.charCodeAt(x+1)]>>4,D[B++]=255&b),j===1&&(b=m[C.charCodeAt(x)]<<10|m[C.charCodeAt(x+1)]<<4|m[C.charCodeAt(x+2)]>>2,D[B++]=255&b>>8,D[B++]=255&b),D}function r(C){return h[63&C>>18]+h[63&C>>12]+h[63&C>>6]+h[63&C]}function o(C,b,x){for(var T,L=[],j=b;j<x;j+=3)T=(16711680&C[j]<<16)+(65280&C[j+1]<<8)+(255&C[j+2]),L.push(r(T));return L.join("")}function c(C){for(var b,x=C.length,T=x%3,L=[],j=16383,D=0,B=x-T;D<B;D+=j)L.push(o(C,D,D+j>B?B:D+j));return T===1?(b=C[x-1],L.push(h[b>>2]+h[63&b<<4]+"==")):T===2&&(b=(C[x-2]<<8)+C[x-1],L.push(h[b>>10]+h[63&b>>4]+h[63&b<<2]+"=")),L.join("")}f.byteLength=function(C){var b=u(C),x=b[0],T=b[1];return 3*(x+T)/4-T},f.toByteArray=v,f.fromByteArray=c;for(var h=[],m=[],E=typeof Uint8Array=="undefined"?Array:Uint8Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,y=S.length;O<y;++O)h[O]=S[O],m[S.charCodeAt(O)]=O;m[45]=62,m[95]=63},{}],2:[function(){},{}],3:[function(l,d,f){(function(){(function(){var u=String.fromCharCode,g=Math.min;function v(s){if(2147483647<s)throw new RangeError('The value "'+s+'" is invalid for option "size"');var p=new Uint8Array(s);return p.__proto__=r.prototype,p}function r(s,p,_){if(typeof s=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(s)}return o(s,p,_)}function o(s,p,_){if(typeof s=="string")return E(s,p);if(ArrayBuffer.isView(s))return S(s);if(s==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s);if(P(s,ArrayBuffer)||s&&P(s.buffer,ArrayBuffer))return O(s,p,_);if(typeof s=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var I=s.valueOf&&s.valueOf();if(I!=null&&I!==s)return r.from(I,p,_);var U=y(s);if(U)return U;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof s[Symbol.toPrimitive]=="function")return r.from(s[Symbol.toPrimitive]("string"),p,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof s)}function c(s){if(typeof s!="number")throw new TypeError('"size" argument must be of type number');if(0>s)throw new RangeError('The value "'+s+'" is invalid for option "size"')}function h(s,p,_){return c(s),0>=s||p===void 0?v(s):typeof _=="string"?v(s).fill(p,_):v(s).fill(p)}function m(s){return c(s),v(0>s?0:0|C(s))}function E(s,p){if((typeof p!="string"||p==="")&&(p="utf8"),!r.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var _=0|b(s,p),I=v(_),U=I.write(s,p);return U!==_&&(I=I.slice(0,U)),I}function S(s){for(var p=0>s.length?0:0|C(s.length),_=v(p),I=0;I<p;I+=1)_[I]=255&s[I];return _}function O(s,p,_){if(0>p||s.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(s.byteLength<p+(_||0))throw new RangeError('"length" is outside of buffer bounds');var I;return I=p===void 0&&_===void 0?new Uint8Array(s):_===void 0?new Uint8Array(s,p):new Uint8Array(s,p,_),I.__proto__=r.prototype,I}function y(s){if(r.isBuffer(s)){var p=0|C(s.length),_=v(p);return _.length===0||s.copy(_,0,0,p),_}return s.length===void 0?s.type==="Buffer"&&Array.isArray(s.data)?S(s.data):void 0:typeof s.length!="number"||H(s.length)?v(0):S(s)}function C(s){if(s>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|s}function b(s,p){if(r.isBuffer(s))return s.length;if(ArrayBuffer.isView(s)||P(s,ArrayBuffer))return s.byteLength;if(typeof s!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof s);var _=s.length,I=2<arguments.length&&arguments[2]===!0;if(!I&&_===0)return 0;for(var U=!1;;)switch(p){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return at(s).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_;case"hex":return _>>>1;case"base64":return Ue(s).length;default:if(U)return I?-1:at(s).length;p=(""+p).toLowerCase(),U=!0}}function x(s,p,_){var I=!1;if((p===void 0||0>p)&&(p=0),p>this.length||((_===void 0||_>this.length)&&(_=this.length),0>=_)||(_>>>=0,p>>>=0,_<=p))return"";for(s||(s="utf8");;)switch(s){case"hex":return ve(this,p,_);case"utf8":case"utf-8":return _e(this,p,_);case"ascii":return ne(this,p,_);case"latin1":case"binary":return _t(this,p,_);case"base64":return ce(this,p,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,p,_);default:if(I)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),I=!0}}function T(s,p,_){var I=s[p];s[p]=s[_],s[_]=I}function L(s,p,_,I,U){if(s.length===0)return-1;if(typeof _=="string"?(I=_,_=0):2147483647<_?_=2147483647:-2147483648>_&&(_=-2147483648),_=+_,H(_)&&(_=U?0:s.length-1),0>_&&(_=s.length+_),_>=s.length){if(U)return-1;_=s.length-1}else if(0>_)if(U)_=0;else return-1;if(typeof p=="string"&&(p=r.from(p,I)),r.isBuffer(p))return p.length===0?-1:j(s,p,_,I,U);if(typeof p=="number")return p&=255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(s,p,_):Uint8Array.prototype.lastIndexOf.call(s,p,_):j(s,[p],_,I,U);throw new TypeError("val must be string, number or Buffer")}function j(s,p,_,I,U){function V(lt,ct){return Q===1?lt[ct]:lt.readUInt16BE(ct*Q)}var Q=1,oe=s.length,ge=p.length;if(I!==void 0&&(I=(I+"").toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(2>s.length||2>p.length)return-1;Q=2,oe/=2,ge/=2,_/=2}var ae;if(U){var se=-1;for(ae=_;ae<oe;ae++)if(V(s,ae)!==V(p,se===-1?0:ae-se))se!==-1&&(ae-=ae-se),se=-1;else if(se===-1&&(se=ae),ae-se+1===ge)return se*Q}else for(_+ge>oe&&(_=oe-ge),ae=_;0<=ae;ae--){for(var Ee=!0,ze=0;ze<ge;ze++)if(V(s,ae+ze)!==V(p,ze)){Ee=!1;break}if(Ee)return ae}return-1}function D(s,p,_,I){_=+_||0;var U=s.length-_;I?(I=+I,I>U&&(I=U)):I=U;var V=p.length;I>V/2&&(I=V/2);for(var Q,oe=0;oe<I;++oe){if(Q=parseInt(p.substr(2*oe,2),16),H(Q))return oe;s[_+oe]=Q}return oe}function B(s,p,_,I){return Pe(at(p,s.length-_),s,_,I)}function W(s,p,_,I){return Pe(xt(p),s,_,I)}function X(s,p,_,I){return W(s,p,_,I)}function ee(s,p,_,I){return Pe(Ue(p),s,_,I)}function re(s,p,_,I){return Pe(Ke(p,s.length-_),s,_,I)}function ce(s,p,_){return p===0&&_===s.length?G.fromByteArray(s):G.fromByteArray(s.slice(p,_))}function _e(s,p,_){_=g(s.length,_);for(var I=[],U=p;U<_;){var V=s[U],Q=null,oe=239<V?4:223<V?3:191<V?2:1;if(U+oe<=_){var ge,ae,se,Ee;oe===1?128>V&&(Q=V):oe===2?(ge=s[U+1],(192&ge)==128&&(Ee=(31&V)<<6|63&ge,127<Ee&&(Q=Ee))):oe===3?(ge=s[U+1],ae=s[U+2],(192&ge)==128&&(192&ae)==128&&(Ee=(15&V)<<12|(63&ge)<<6|63&ae,2047<Ee&&(55296>Ee||57343<Ee)&&(Q=Ee))):oe===4&&(ge=s[U+1],ae=s[U+2],se=s[U+3],(192&ge)==128&&(192&ae)==128&&(192&se)==128&&(Ee=(15&V)<<18|(63&ge)<<12|(63&ae)<<6|63&se,65535<Ee&&1114112>Ee&&(Q=Ee)))}Q===null?(Q=65533,oe=1):65535<Q&&(Q-=65536,I.push(55296|1023&Q>>>10),Q=56320|1023&Q),I.push(Q),U+=oe}return Ie(I)}function Ie(s){var p=s.length;if(p<=4096)return u.apply(String,s);for(var _="",I=0;I<p;)_+=u.apply(String,s.slice(I,I+=4096));return _}function ne(s,p,_){var I="";_=g(s.length,_);for(var U=p;U<_;++U)I+=u(127&s[U]);return I}function _t(s,p,_){var I="";_=g(s.length,_);for(var U=p;U<_;++U)I+=u(s[U]);return I}function ve(s,p,_){var I=s.length;(!p||0>p)&&(p=0),(!_||0>_||_>I)&&(_=I);for(var U="",V=p;V<_;++V)U+=ot(s[V]);return U}function Ge(s,p,_){for(var I=s.slice(p,_),U="",V=0;V<I.length;V+=2)U+=u(I[V]+256*I[V+1]);return U}function ye(s,p,_){if(s%1!=0||0>s)throw new RangeError("offset is not uint");if(s+p>_)throw new RangeError("Trying to access beyond buffer length")}function de(s,p,_,I,U,V){if(!r.isBuffer(s))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>U||p<V)throw new RangeError('"value" argument is out of bounds');if(_+I>s.length)throw new RangeError("Index out of range")}function Fe(s,p,_,I){if(_+I>s.length)throw new RangeError("Index out of range");if(0>_)throw new RangeError("Index out of range")}function Je(s,p,_,I,U){return p=+p,_>>>=0,U||Fe(s,p,_,4),z.write(s,p,_,I,23,4),_+4}function Xe(s,p,_,I,U){return p=+p,_>>>=0,U||Fe(s,p,_,8),z.write(s,p,_,I,52,8),_+8}function Tt(s){if(s=s.split("=")[0],s=s.trim().replace(k,""),2>s.length)return"";for(;s.length%4!=0;)s+="=";return s}function ot(s){return 16>s?"0"+s.toString(16):s.toString(16)}function at(s,p){p=p||1/0;for(var _,I=s.length,U=null,V=[],Q=0;Q<I;++Q){if(_=s.charCodeAt(Q),55295<_&&57344>_){if(!U){if(56319<_){-1<(p-=3)&&V.push(239,191,189);continue}else if(Q+1===I){-1<(p-=3)&&V.push(239,191,189);continue}U=_;continue}if(56320>_){-1<(p-=3)&&V.push(239,191,189),U=_;continue}_=(U-55296<<10|_-56320)+65536}else U&&-1<(p-=3)&&V.push(239,191,189);if(U=null,128>_){if(0>(p-=1))break;V.push(_)}else if(2048>_){if(0>(p-=2))break;V.push(192|_>>6,128|63&_)}else if(65536>_){if(0>(p-=3))break;V.push(224|_>>12,128|63&_>>6,128|63&_)}else if(1114112>_){if(0>(p-=4))break;V.push(240|_>>18,128|63&_>>12,128|63&_>>6,128|63&_)}else throw new Error("Invalid code point")}return V}function xt(s){for(var p=[],_=0;_<s.length;++_)p.push(255&s.charCodeAt(_));return p}function Ke(s,p){for(var _,I,U,V=[],Q=0;Q<s.length&&!(0>(p-=2));++Q)_=s.charCodeAt(Q),I=_>>8,U=_%256,V.push(U),V.push(I);return V}function Ue(s){return G.toByteArray(Tt(s))}function Pe(s,p,_,I){for(var U=0;U<I&&!(U+_>=p.length||U>=s.length);++U)p[U+_]=s[U];return U}function P(s,p){return s instanceof p||s!=null&&s.constructor!=null&&s.constructor.name!=null&&s.constructor.name===p.name}function H(s){return s!==s}var G=l("base64-js"),z=l("ieee754");f.Buffer=r,f.SlowBuffer=function(s){return+s!=s&&(s=0),r.alloc(+s)},f.INSPECT_MAX_BYTES=50,f.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var s=new Uint8Array(1);return s.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},s.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){return r.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){return r.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol!="undefined"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(s,p,_){return o(s,p,_)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(s,p,_){return h(s,p,_)},r.allocUnsafe=function(s){return m(s)},r.allocUnsafeSlow=function(s){return m(s)},r.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==r.prototype},r.compare=function(s,p){if(P(s,Uint8Array)&&(s=r.from(s,s.offset,s.byteLength)),P(p,Uint8Array)&&(p=r.from(p,p.offset,p.byteLength)),!r.isBuffer(s)||!r.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===p)return 0;for(var _=s.length,I=p.length,U=0,V=g(_,I);U<V;++U)if(s[U]!==p[U]){_=s[U],I=p[U];break}return _<I?-1:I<_?1:0},r.isEncoding=function(s){switch((s+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(s,p){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return r.alloc(0);var _;if(p===void 0)for(p=0,_=0;_<s.length;++_)p+=s[_].length;var I=r.allocUnsafe(p),U=0;for(_=0;_<s.length;++_){var V=s[_];if(P(V,Uint8Array)&&(V=r.from(V)),!r.isBuffer(V))throw new TypeError('"list" argument must be an Array of Buffers');V.copy(I,U),U+=V.length}return I},r.byteLength=b,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var s=this.length;if(s%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var p=0;p<s;p+=2)T(this,p,p+1);return this},r.prototype.swap32=function(){var s=this.length;if(s%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var p=0;p<s;p+=4)T(this,p,p+3),T(this,p+1,p+2);return this},r.prototype.swap64=function(){var s=this.length;if(s%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var p=0;p<s;p+=8)T(this,p,p+7),T(this,p+1,p+6),T(this,p+2,p+5),T(this,p+3,p+4);return this},r.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?_e(this,0,s):x.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(s){if(!r.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s||r.compare(this,s)===0},r.prototype.inspect=function(){var s="",p=f.INSPECT_MAX_BYTES;return s=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(s+=" ... "),"<Buffer "+s+">"},r.prototype.compare=function(s,p,_,I,U){if(P(s,Uint8Array)&&(s=r.from(s,s.offset,s.byteLength)),!r.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(p===void 0&&(p=0),_===void 0&&(_=s?s.length:0),I===void 0&&(I=0),U===void 0&&(U=this.length),0>p||_>s.length||0>I||U>this.length)throw new RangeError("out of range index");if(I>=U&&p>=_)return 0;if(I>=U)return-1;if(p>=_)return 1;if(p>>>=0,_>>>=0,I>>>=0,U>>>=0,this===s)return 0;for(var V=U-I,Q=_-p,oe=g(V,Q),ge=this.slice(I,U),ae=s.slice(p,_),se=0;se<oe;++se)if(ge[se]!==ae[se]){V=ge[se],Q=ae[se];break}return V<Q?-1:Q<V?1:0},r.prototype.includes=function(s,p,_){return this.indexOf(s,p,_)!==-1},r.prototype.indexOf=function(s,p,_){return L(this,s,p,_,!0)},r.prototype.lastIndexOf=function(s,p,_){return L(this,s,p,_,!1)},r.prototype.write=function(s,p,_,I){if(p===void 0)I="utf8",_=this.length,p=0;else if(_===void 0&&typeof p=="string")I=p,_=this.length,p=0;else if(isFinite(p))p>>>=0,isFinite(_)?(_>>>=0,I===void 0&&(I="utf8")):(I=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-p;if((_===void 0||_>U)&&(_=U),0<s.length&&(0>_||0>p)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");for(var V=!1;;)switch(I){case"hex":return D(this,s,p,_);case"utf8":case"utf-8":return B(this,s,p,_);case"ascii":return W(this,s,p,_);case"latin1":case"binary":return X(this,s,p,_);case"base64":return ee(this,s,p,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,s,p,_);default:if(V)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),V=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(s,p){var _=this.length;s=~~s,p=p===void 0?_:~~p,0>s?(s+=_,0>s&&(s=0)):s>_&&(s=_),0>p?(p+=_,0>p&&(p=0)):p>_&&(p=_),p<s&&(p=s);var I=this.subarray(s,p);return I.__proto__=r.prototype,I},r.prototype.readUIntLE=function(s,p,_){s>>>=0,p>>>=0,_||ye(s,p,this.length);for(var I=this[s],U=1,V=0;++V<p&&(U*=256);)I+=this[s+V]*U;return I},r.prototype.readUIntBE=function(s,p,_){s>>>=0,p>>>=0,_||ye(s,p,this.length);for(var I=this[s+--p],U=1;0<p&&(U*=256);)I+=this[s+--p]*U;return I},r.prototype.readUInt8=function(s,p){return s>>>=0,p||ye(s,1,this.length),this[s]},r.prototype.readUInt16LE=function(s,p){return s>>>=0,p||ye(s,2,this.length),this[s]|this[s+1]<<8},r.prototype.readUInt16BE=function(s,p){return s>>>=0,p||ye(s,2,this.length),this[s]<<8|this[s+1]},r.prototype.readUInt32LE=function(s,p){return s>>>=0,p||ye(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+16777216*this[s+3]},r.prototype.readUInt32BE=function(s,p){return s>>>=0,p||ye(s,4,this.length),16777216*this[s]+(this[s+1]<<16|this[s+2]<<8|this[s+3])},r.prototype.readIntLE=function(s,p,_){s>>>=0,p>>>=0,_||ye(s,p,this.length);for(var I=this[s],U=1,V=0;++V<p&&(U*=256);)I+=this[s+V]*U;return U*=128,I>=U&&(I-=a(2,8*p)),I},r.prototype.readIntBE=function(s,p,_){s>>>=0,p>>>=0,_||ye(s,p,this.length);for(var I=p,U=1,V=this[s+--I];0<I&&(U*=256);)V+=this[s+--I]*U;return U*=128,V>=U&&(V-=a(2,8*p)),V},r.prototype.readInt8=function(s,p){return s>>>=0,p||ye(s,1,this.length),128&this[s]?-1*(255-this[s]+1):this[s]},r.prototype.readInt16LE=function(s,p){s>>>=0,p||ye(s,2,this.length);var _=this[s]|this[s+1]<<8;return 32768&_?4294901760|_:_},r.prototype.readInt16BE=function(s,p){s>>>=0,p||ye(s,2,this.length);var _=this[s+1]|this[s]<<8;return 32768&_?4294901760|_:_},r.prototype.readInt32LE=function(s,p){return s>>>=0,p||ye(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},r.prototype.readInt32BE=function(s,p){return s>>>=0,p||ye(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},r.prototype.readFloatLE=function(s,p){return s>>>=0,p||ye(s,4,this.length),z.read(this,s,!0,23,4)},r.prototype.readFloatBE=function(s,p){return s>>>=0,p||ye(s,4,this.length),z.read(this,s,!1,23,4)},r.prototype.readDoubleLE=function(s,p){return s>>>=0,p||ye(s,8,this.length),z.read(this,s,!0,52,8)},r.prototype.readDoubleBE=function(s,p){return s>>>=0,p||ye(s,8,this.length),z.read(this,s,!1,52,8)},r.prototype.writeUIntLE=function(s,p,_,I){if(s=+s,p>>>=0,_>>>=0,!I){var U=a(2,8*_)-1;de(this,s,p,_,U,0)}var V=1,Q=0;for(this[p]=255&s;++Q<_&&(V*=256);)this[p+Q]=255&s/V;return p+_},r.prototype.writeUIntBE=function(s,p,_,I){if(s=+s,p>>>=0,_>>>=0,!I){var U=a(2,8*_)-1;de(this,s,p,_,U,0)}var V=_-1,Q=1;for(this[p+V]=255&s;0<=--V&&(Q*=256);)this[p+V]=255&s/Q;return p+_},r.prototype.writeUInt8=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,1,255,0),this[p]=255&s,p+1},r.prototype.writeUInt16LE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,2,65535,0),this[p]=255&s,this[p+1]=s>>>8,p+2},r.prototype.writeUInt16BE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,2,65535,0),this[p]=s>>>8,this[p+1]=255&s,p+2},r.prototype.writeUInt32LE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,4,4294967295,0),this[p+3]=s>>>24,this[p+2]=s>>>16,this[p+1]=s>>>8,this[p]=255&s,p+4},r.prototype.writeUInt32BE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,4,4294967295,0),this[p]=s>>>24,this[p+1]=s>>>16,this[p+2]=s>>>8,this[p+3]=255&s,p+4},r.prototype.writeIntLE=function(s,p,_,I){if(s=+s,p>>>=0,!I){var U=a(2,8*_-1);de(this,s,p,_,U-1,-U)}var V=0,Q=1,oe=0;for(this[p]=255&s;++V<_&&(Q*=256);)0>s&&oe===0&&this[p+V-1]!==0&&(oe=1),this[p+V]=255&(s/Q>>0)-oe;return p+_},r.prototype.writeIntBE=function(s,p,_,I){if(s=+s,p>>>=0,!I){var U=a(2,8*_-1);de(this,s,p,_,U-1,-U)}var V=_-1,Q=1,oe=0;for(this[p+V]=255&s;0<=--V&&(Q*=256);)0>s&&oe===0&&this[p+V+1]!==0&&(oe=1),this[p+V]=255&(s/Q>>0)-oe;return p+_},r.prototype.writeInt8=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,1,127,-128),0>s&&(s=255+s+1),this[p]=255&s,p+1},r.prototype.writeInt16LE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,2,32767,-32768),this[p]=255&s,this[p+1]=s>>>8,p+2},r.prototype.writeInt16BE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,2,32767,-32768),this[p]=s>>>8,this[p+1]=255&s,p+2},r.prototype.writeInt32LE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,4,2147483647,-2147483648),this[p]=255&s,this[p+1]=s>>>8,this[p+2]=s>>>16,this[p+3]=s>>>24,p+4},r.prototype.writeInt32BE=function(s,p,_){return s=+s,p>>>=0,_||de(this,s,p,4,2147483647,-2147483648),0>s&&(s=4294967295+s+1),this[p]=s>>>24,this[p+1]=s>>>16,this[p+2]=s>>>8,this[p+3]=255&s,p+4},r.prototype.writeFloatLE=function(s,p,_){return Je(this,s,p,!0,_)},r.prototype.writeFloatBE=function(s,p,_){return Je(this,s,p,!1,_)},r.prototype.writeDoubleLE=function(s,p,_){return Xe(this,s,p,!0,_)},r.prototype.writeDoubleBE=function(s,p,_){return Xe(this,s,p,!1,_)},r.prototype.copy=function(s,p,_,I){if(!r.isBuffer(s))throw new TypeError("argument should be a Buffer");if(_||(_=0),I||I===0||(I=this.length),p>=s.length&&(p=s.length),p||(p=0),0<I&&I<_&&(I=_),I===_||s.length===0||this.length===0)return 0;if(0>p)throw new RangeError("targetStart out of bounds");if(0>_||_>=this.length)throw new RangeError("Index out of range");if(0>I)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),s.length-p<I-_&&(I=s.length-p+_);var U=I-_;if(this===s&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(p,_,I);else if(this===s&&_<p&&p<I)for(var V=U-1;0<=V;--V)s[V+p]=this[V+_];else Uint8Array.prototype.set.call(s,this.subarray(_,I),p);return U},r.prototype.fill=function(s,p,_,I){if(typeof s=="string"){if(typeof p=="string"?(I=p,p=0,_=this.length):typeof _=="string"&&(I=_,_=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!r.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(s.length===1){var U=s.charCodeAt(0);(I==="utf8"&&128>U||I==="latin1")&&(s=U)}}else typeof s=="number"&&(s&=255);if(0>p||this.length<p||this.length<_)throw new RangeError("Out of range index");if(_<=p)return this;p>>>=0,_=_===void 0?this.length:_>>>0,s||(s=0);var V;if(typeof s=="number")for(V=p;V<_;++V)this[V]=s;else{var Q=r.isBuffer(s)?s:r.from(s,I),oe=Q.length;if(oe===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(V=0;V<_-p;++V)this[V+p]=Q[V%oe]}return this};var k=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(l,d,f){(function(u){(function(){function g(){let r;try{r=f.storage.getItem("debug")}catch{}return!r&&typeof u!="undefined"&&"env"in u&&(r=u.env.DEBUG),r}f.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;r.splice(1,0,o,"color: inherit");let c=0,h=0;r[0].replace(/%[a-zA-Z%]/g,m=>{m==="%%"||(c++,m==="%c"&&(h=c))}),r.splice(h,0,o)},f.save=function(r){try{r?f.storage.setItem("debug",r):f.storage.removeItem("debug")}catch{}},f.load=g,f.useColors=function(){return!!(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},f.storage=function(){try{return localStorage}catch{}}(),f.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),f.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],f.log=console.debug||console.log||(()=>{}),d.exports=l("./common")(f);const{formatters:v}=d.exports;v.j=function(r){try{return JSON.stringify(r)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}}).call(this)}).call(this,l("_process"))},{"./common":5,_process:12}],5:[function(l,d){d.exports=function(f){function u(r){function o(...m){if(!o.enabled)return;const E=o,S=+new Date,O=S-(c||S);E.diff=O,E.prev=c,E.curr=S,c=S,m[0]=u.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let y=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(b,x)=>{if(b==="%%")return"%";y++;const T=u.formatters[x];if(typeof T=="function"){const L=m[y];b=T.call(E,L),m.splice(y,1),y--}return b}),u.formatArgs.call(E,m),(E.log||u.log).apply(E,m)}let c,h=null;return o.namespace=r,o.useColors=u.useColors(),o.color=u.selectColor(r),o.extend=g,o.destroy=u.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>h===null?u.enabled(r):h,set:m=>{h=m}}),typeof u.init=="function"&&u.init(o),o}function g(r,o){const c=u(this.namespace+(typeof o=="undefined"?":":o)+r);return c.log=this.log,c}function v(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}return u.debug=u,u.default=u,u.coerce=function(r){return r instanceof Error?r.stack||r.message:r},u.disable=function(){const r=[...u.names.map(v),...u.skips.map(v).map(o=>"-"+o)].join(",");return u.enable(""),r},u.enable=function(r){u.save(r),u.names=[],u.skips=[];let o;const c=(typeof r=="string"?r:"").split(/[\s,]+/),h=c.length;for(o=0;o<h;o++)c[o]&&(r=c[o].replace(/\*/g,".*?"),r[0]==="-"?u.skips.push(new RegExp("^"+r.substr(1)+"$")):u.names.push(new RegExp("^"+r+"$")))},u.enabled=function(r){if(r[r.length-1]==="*")return!0;let o,c;for(o=0,c=u.skips.length;o<c;o++)if(u.skips[o].test(r))return!1;for(o=0,c=u.names.length;o<c;o++)if(u.names[o].test(r))return!0;return!1},u.humanize=l("ms"),u.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(f).forEach(r=>{u[r]=f[r]}),u.names=[],u.skips=[],u.formatters={},u.selectColor=function(r){let o=0;for(let c=0;c<r.length;c++)o=(o<<5)-o+r.charCodeAt(c),o|=0;return u.colors[i(o)%u.colors.length]},u.enable(u.load()),u}},{ms:11}],6:[function(l,d){function f(u,g){for(const v in g)Object.defineProperty(u,v,{value:g[v],enumerable:!0,configurable:!0});return u}d.exports=function(u,g,v){if(!u||typeof u=="string")throw new TypeError("Please pass an Error to err-code");v||(v={}),typeof g=="object"&&(v=g,g=""),g&&(v.code=g);try{return f(u,v)}catch{v.message=u.message,v.stack=u.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(u)),f(new o,v)}}},{}],7:[function(l,d){function f(D){console&&console.warn&&console.warn(D)}function u(){u.init.call(this)}function g(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}function v(D){return D._maxListeners===void 0?u.defaultMaxListeners:D._maxListeners}function r(D,B,W,X){var ee,re,ce;if(g(W),re=D._events,re===void 0?(re=D._events=Object.create(null),D._eventsCount=0):(re.newListener!==void 0&&(D.emit("newListener",B,W.listener?W.listener:W),re=D._events),ce=re[B]),ce===void 0)ce=re[B]=W,++D._eventsCount;else if(typeof ce=="function"?ce=re[B]=X?[W,ce]:[ce,W]:X?ce.unshift(W):ce.push(W),ee=v(D),0<ee&&ce.length>ee&&!ce.warned){ce.warned=!0;var _e=new Error("Possible EventEmitter memory leak detected. "+ce.length+" "+(B+" listeners added. Use emitter.setMaxListeners() to increase limit"));_e.name="MaxListenersExceededWarning",_e.emitter=D,_e.type=B,_e.count=ce.length,f(_e)}return D}function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(D,B,W){var X={fired:!1,wrapFn:void 0,target:D,type:B,listener:W},ee=o.bind(X);return ee.listener=W,X.wrapFn=ee,ee}function h(D,B,W){var X=D._events;if(X===void 0)return[];var ee=X[B];return ee===void 0?[]:typeof ee=="function"?W?[ee.listener||ee]:[ee]:W?O(ee):E(ee,ee.length)}function m(D){var B=this._events;if(B!==void 0){var W=B[D];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}function E(D,B){for(var W=Array(B),X=0;X<B;++X)W[X]=D[X];return W}function S(D,B){for(;B+1<D.length;B++)D[B]=D[B+1];D.pop()}function O(D){for(var B=Array(D.length),W=0;W<B.length;++W)B[W]=D[W].listener||D[W];return B}function y(D,B,W){typeof D.on=="function"&&C(D,"error",B,W)}function C(D,B,W,X){if(typeof D.on=="function")X.once?D.once(B,W):D.on(B,W);else if(typeof D.addEventListener=="function")D.addEventListener(B,function ee(re){X.once&&D.removeEventListener(B,ee),W(re)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D)}var b,x=typeof Reflect=="object"?Reflect:null,T=x&&typeof x.apply=="function"?x.apply:function(D,B,W){return Function.prototype.apply.call(D,B,W)};b=x&&typeof x.ownKeys=="function"?x.ownKeys:Object.getOwnPropertySymbols?function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:function(D){return Object.getOwnPropertyNames(D)};var L=Number.isNaN||function(D){return D!==D};d.exports=u,d.exports.once=function(D,B){return new Promise(function(W,X){function ee(ce){D.removeListener(B,re),X(ce)}function re(){typeof D.removeListener=="function"&&D.removeListener("error",ee),W([].slice.call(arguments))}C(D,B,re,{once:!0}),B!=="error"&&y(D,ee,{once:!0})})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var j=10;Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(D){if(typeof D!="number"||0>D||L(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");j=D}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(D){if(typeof D!="number"||0>D||L(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this},u.prototype.getMaxListeners=function(){return v(this)},u.prototype.emit=function(D){for(var B=[],W=1;W<arguments.length;W++)B.push(arguments[W]);var X=D==="error",ee=this._events;if(ee!==void 0)X=X&&ee.error===void 0;else if(!X)return!1;if(X){var re;if(0<B.length&&(re=B[0]),re instanceof Error)throw re;var ce=new Error("Unhandled error."+(re?" ("+re.message+")":""));throw ce.context=re,ce}var _e=ee[D];if(_e===void 0)return!1;if(typeof _e=="function")T(_e,this,B);else for(var Ie=_e.length,ne=E(_e,Ie),W=0;W<Ie;++W)T(ne[W],this,B);return!0},u.prototype.addListener=function(D,B){return r(this,D,B,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(D,B){return r(this,D,B,!0)},u.prototype.once=function(D,B){return g(B),this.on(D,c(this,D,B)),this},u.prototype.prependOnceListener=function(D,B){return g(B),this.prependListener(D,c(this,D,B)),this},u.prototype.removeListener=function(D,B){var W,X,ee,re,ce;if(g(B),X=this._events,X===void 0)return this;if(W=X[D],W===void 0)return this;if(W===B||W.listener===B)--this._eventsCount==0?this._events=Object.create(null):(delete X[D],X.removeListener&&this.emit("removeListener",D,W.listener||B));else if(typeof W!="function"){for(ee=-1,re=W.length-1;0<=re;re--)if(W[re]===B||W[re].listener===B){ce=W[re].listener,ee=re;break}if(0>ee)return this;ee===0?W.shift():S(W,ee),W.length===1&&(X[D]=W[0]),X.removeListener!==void 0&&this.emit("removeListener",D,ce||B)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(D){var B,W,X;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[D]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete W[D]),this;if(arguments.length===0){var ee,re=Object.keys(W);for(X=0;X<re.length;++X)ee=re[X],ee!=="removeListener"&&this.removeAllListeners(ee);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=W[D],typeof B=="function")this.removeListener(D,B);else if(B!==void 0)for(X=B.length-1;0<=X;X--)this.removeListener(D,B[X]);return this},u.prototype.listeners=function(D){return h(this,D,!0)},u.prototype.rawListeners=function(D){return h(this,D,!1)},u.listenerCount=function(D,B){return typeof D.listenerCount=="function"?D.listenerCount(B):m.call(D,B)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return 0<this._eventsCount?b(this._events):[]}},{}],8:[function(l,d){d.exports=function(){if(typeof globalThis=="undefined")return null;var f={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return f.RTCPeerConnection?f:null}},{}],9:[function(l,d,f){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */f.read=function(u,g,v,r,o){var c,h,m=8*o-r-1,E=(1<<m)-1,S=E>>1,O=-7,y=v?o-1:0,C=v?-1:1,b=u[g+y];for(y+=C,c=b&(1<<-O)-1,b>>=-O,O+=m;0<O;c=256*c+u[g+y],y+=C,O-=8);for(h=c&(1<<-O)-1,c>>=-O,O+=r;0<O;h=256*h+u[g+y],y+=C,O-=8);if(c===0)c=1-S;else{if(c===E)return h?NaN:(b?-1:1)*(1/0);h+=a(2,r),c-=S}return(b?-1:1)*h*a(2,c-r)},f.write=function(u,g,v,r,o,c){var h,m,E,S=Math.LN2,O=Math.log,y=8*c-o-1,C=(1<<y)-1,b=C>>1,x=o===23?a(2,-24)-a(2,-77):0,T=r?0:c-1,L=r?1:-1,j=0>g||g===0&&0>1/g?1:0;for(g=i(g),isNaN(g)||g===1/0?(m=isNaN(g)?1:0,h=C):(h=t(O(g)/S),1>g*(E=a(2,-h))&&(h--,E*=2),g+=1<=h+b?x/E:x*a(2,1-b),2<=g*E&&(h++,E/=2),h+b>=C?(m=0,h=C):1<=h+b?(m=(g*E-1)*a(2,o),h+=b):(m=g*a(2,b-1)*a(2,o),h=0));8<=o;u[v+T]=255&m,T+=L,m/=256,o-=8);for(h=h<<o|m,y+=o;0<y;u[v+T]=255&h,T+=L,h/=256,y-=8);u[v+T-L]|=128*j}},{}],10:[function(l,d){d.exports=typeof Object.create=="function"?function(f,u){u&&(f.super_=u,f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,u){if(u){f.super_=u;var g=function(){};g.prototype=u.prototype,f.prototype=new g,f.prototype.constructor=f}}},{}],11:[function(l,d){var f=Math.round;function u(o){if(o+="",!(100<o.length)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(c){var h=parseFloat(c[1]),m=(c[2]||"ms").toLowerCase();return m==="years"||m==="year"||m==="yrs"||m==="yr"||m==="y"?315576e5*h:m==="weeks"||m==="week"||m==="w"?6048e5*h:m==="days"||m==="day"||m==="d"?864e5*h:m==="hours"||m==="hour"||m==="hrs"||m==="hr"||m==="h"?36e5*h:m==="minutes"||m==="minute"||m==="mins"||m==="min"||m==="m"?6e4*h:m==="seconds"||m==="second"||m==="secs"||m==="sec"||m==="s"?1e3*h:m==="milliseconds"||m==="millisecond"||m==="msecs"||m==="msec"||m==="ms"?h:void 0}}}function g(o){var c=i(o);return 864e5<=c?f(o/864e5)+"d":36e5<=c?f(o/36e5)+"h":6e4<=c?f(o/6e4)+"m":1e3<=c?f(o/1e3)+"s":o+"ms"}function v(o){var c=i(o);return 864e5<=c?r(o,c,864e5,"day"):36e5<=c?r(o,c,36e5,"hour"):6e4<=c?r(o,c,6e4,"minute"):1e3<=c?r(o,c,1e3,"second"):o+" ms"}function r(o,c,h,m){return f(o/h)+" "+m+(c>=1.5*h?"s":"")}d.exports=function(o,c){c=c||{};var h=typeof o;if(h=="string"&&0<o.length)return u(o);if(h==="number"&&isFinite(o))return c.long?v(o):g(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}},{}],12:[function(l,d){function f(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function g(x){if(m===setTimeout)return setTimeout(x,0);if((m===f||!m)&&setTimeout)return m=setTimeout,setTimeout(x,0);try{return m(x,0)}catch{try{return m.call(null,x,0)}catch{return m.call(this,x,0)}}}function v(x){if(E===clearTimeout)return clearTimeout(x);if((E===u||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(x);try{return E(x)}catch{try{return E.call(null,x)}catch{return E.call(this,x)}}}function r(){C&&O&&(C=!1,O.length?y=O.concat(y):b=-1,y.length&&o())}function o(){if(!C){var x=g(r);C=!0;for(var T=y.length;T;){for(O=y,y=[];++b<T;)O&&O[b].run();b=-1,T=y.length}O=null,C=!1,v(x)}}function c(x,T){this.fun=x,this.array=T}function h(){}var m,E,S=d.exports={};(function(){try{m=typeof setTimeout=="function"?setTimeout:f}catch{m=f}try{E=typeof clearTimeout=="function"?clearTimeout:u}catch{E=u}})();var O,y=[],C=!1,b=-1;S.nextTick=function(x){var T=Array(arguments.length-1);if(1<arguments.length)for(var L=1;L<arguments.length;L++)T[L-1]=arguments[L];y.push(new c(x,T)),y.length!==1||C||g(o)},c.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=h,S.addListener=h,S.once=h,S.off=h,S.removeListener=h,S.removeAllListeners=h,S.emit=h,S.prependListener=h,S.prependOnceListener=h,S.listeners=function(){return[]},S.binding=function(){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],13:[function(l,d){(function(f){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let u;d.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window=="undefined"?f:window):g=>(u||(u=Promise.resolve())).then(g).catch(v=>setTimeout(()=>{throw v},0))}).call(this)}).call(this,typeof Ce=="undefined"?typeof self=="undefined"?typeof window=="undefined"?{}:window:self:Ce)},{}],14:[function(l,d){(function(f,u){(function(){var g=l("safe-buffer").Buffer,v=u.crypto||u.msCrypto;d.exports=v&&v.getRandomValues?function(r,o){if(r>4294967295)throw new RangeError("requested too many random bytes");var c=g.allocUnsafe(r);if(0<r)if(65536<r)for(var h=0;h<r;h+=65536)v.getRandomValues(c.slice(h,h+65536));else v.getRandomValues(c);return typeof o=="function"?f.nextTick(function(){o(null,c)}):c}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,l("_process"),typeof Ce=="undefined"?typeof self=="undefined"?typeof window=="undefined"?{}:window:self:Ce)},{_process:12,"safe-buffer":30}],15:[function(l,d){function f(h,m){h.prototype=Object.create(m.prototype),h.prototype.constructor=h,h.__proto__=m}function u(h,m,E){function S(y,C,b){return typeof m=="string"?m:m(y,C,b)}E||(E=Error);var O=function(y){function C(b,x,T){return y.call(this,S(b,x,T))||this}return f(C,y),C}(E);O.prototype.name=E.name,O.prototype.code=h,c[h]=O}function g(h,m){if(Array.isArray(h)){var E=h.length;return h=h.map(function(S){return S+""}),2<E?"one of ".concat(m," ").concat(h.slice(0,E-1).join(", "),", or ")+h[E-1]:E===2?"one of ".concat(m," ").concat(h[0]," or ").concat(h[1]):"of ".concat(m," ").concat(h[0])}return"of ".concat(m," ").concat(h+"")}function v(h,m,E){return h.substr(!E||0>E?0:+E,m.length)===m}function r(h,m,E){return(E===void 0||E>h.length)&&(E=h.length),h.substring(E-m.length,E)===m}function o(h,m,E){return typeof E!="number"&&(E=0),!(E+m.length>h.length)&&h.indexOf(m,E)!==-1}var c={};u("ERR_INVALID_OPT_VALUE",function(h,m){return'The value "'+m+'" is invalid for option "'+h+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function(h,m,E){var S;typeof m=="string"&&v(m,"not ")?(S="must not be",m=m.replace(/^not /,"")):S="must be";var O;if(r(h," argument"))O="The ".concat(h," ").concat(S," ").concat(g(m,"type"));else{var y=o(h,".")?"property":"argument";O='The "'.concat(h,'" ').concat(y," ").concat(S," ").concat(g(m,"type"))}return O+=". Received type ".concat(typeof E),O},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),d.exports.codes=c},{}],16:[function(l,d){(function(f){(function(){function u(S){return this instanceof u?(o.call(this,S),c.call(this,S),this.allowHalfOpen=!0,void(S&&(S.readable===!1&&(this.readable=!1),S.writable===!1&&(this.writable=!1),S.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g))))):new u(S)}function g(){this._writableState.ended||f.nextTick(v,this)}function v(S){S.end()}var r=Object.keys||function(S){var O=[];for(var y in S)O.push(y);return O};d.exports=u;var o=l("./_stream_readable"),c=l("./_stream_writable");l("inherits")(u,o);for(var h,m=r(c.prototype),E=0;E<m.length;E++)h=m[E],u.prototype[h]||(u.prototype[h]=c.prototype[h]);Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})}).call(this)}).call(this,l("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(l,d){function f(g){return this instanceof f?void u.call(this,g):new f(g)}d.exports=f;var u=l("./_stream_transform");l("inherits")(f,u),f.prototype._transform=function(g,v,r){r(null,g)}},{"./_stream_transform":19,inherits:10}],18:[function(l,d){(function(f,u){(function(){function g(k){return Ge.from(k)}function v(k){return Ge.isBuffer(k)||k instanceof ye}function r(k,s,p){return typeof k.prependListener=="function"?k.prependListener(s,p):void(k._events&&k._events[s]?Array.isArray(k._events[s])?k._events[s].unshift(p):k._events[s]=[p,k._events[s]]:k.on(s,p))}function o(k,s,p){Ie=Ie||l("./_stream_duplex"),k=k||{},typeof p!="boolean"&&(p=s instanceof Ie),this.objectMode=!!k.objectMode,p&&(this.objectMode=this.objectMode||!!k.readableObjectMode),this.highWaterMark=xt(this,k,"readableHighWaterMark",p),this.buffer=new Tt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=k.emitClose!==!1,this.autoDestroy=!!k.autoDestroy,this.destroyed=!1,this.defaultEncoding=k.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,k.encoding&&(!Fe&&(Fe=l("string_decoder/").StringDecoder),this.decoder=new Fe(k.encoding),this.encoding=k.encoding)}function c(k){if(Ie=Ie||l("./_stream_duplex"),!(this instanceof c))return new c(k);var s=this instanceof Ie;this._readableState=new o(k,this,s),this.readable=!0,k&&(typeof k.read=="function"&&(this._read=k.read),typeof k.destroy=="function"&&(this._destroy=k.destroy)),ve.call(this)}function h(k,s,p,_,I){ne("readableAddChunk",s);var U=k._readableState;if(s===null)U.reading=!1,y(k,U);else{var V;if(I||(V=E(U,s)),V)G(k,V);else if(!(U.objectMode||s&&0<s.length))_||(U.reading=!1,x(k,U));else if(typeof s=="string"||U.objectMode||Object.getPrototypeOf(s)===Ge.prototype||(s=g(s)),_)U.endEmitted?G(k,new H):m(k,U,s,!0);else if(U.ended)G(k,new Pe);else{if(U.destroyed)return!1;U.reading=!1,U.decoder&&!p?(s=U.decoder.write(s),U.objectMode||s.length!==0?m(k,U,s,!1):x(k,U)):m(k,U,s,!1)}}return!U.ended&&(U.length<U.highWaterMark||U.length===0)}function m(k,s,p,_){s.flowing&&s.length===0&&!s.sync?(s.awaitDrain=0,k.emit("data",p)):(s.length+=s.objectMode?1:p.length,_?s.buffer.unshift(p):s.buffer.push(p),s.needReadable&&C(k)),x(k,s)}function E(k,s){var p;return v(s)||typeof s=="string"||s===void 0||k.objectMode||(p=new Ue("chunk",["string","Buffer","Uint8Array"],s)),p}function S(k){return 1073741824<=k?k=1073741824:(k--,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,k|=k>>>16,k++),k}function O(k,s){return 0>=k||s.length===0&&s.ended?0:s.objectMode?1:k===k?(k>s.highWaterMark&&(s.highWaterMark=S(k)),k<=s.length?k:s.ended?s.length:(s.needReadable=!0,0)):s.flowing&&s.length?s.buffer.head.data.length:s.length}function y(k,s){if(ne("onEofChunk"),!s.ended){if(s.decoder){var p=s.decoder.end();p&&p.length&&(s.buffer.push(p),s.length+=s.objectMode?1:p.length)}s.ended=!0,s.sync?C(k):(s.needReadable=!1,!s.emittedReadable&&(s.emittedReadable=!0,b(k)))}}function C(k){var s=k._readableState;ne("emitReadable",s.needReadable,s.emittedReadable),s.needReadable=!1,s.emittedReadable||(ne("emitReadable",s.flowing),s.emittedReadable=!0,f.nextTick(b,k))}function b(k){var s=k._readableState;ne("emitReadable_",s.destroyed,s.length,s.ended),!s.destroyed&&(s.length||s.ended)&&(k.emit("readable"),s.emittedReadable=!1),s.needReadable=!s.flowing&&!s.ended&&s.length<=s.highWaterMark,X(k)}function x(k,s){s.readingMore||(s.readingMore=!0,f.nextTick(T,k,s))}function T(k,s){for(;!s.reading&&!s.ended&&(s.length<s.highWaterMark||s.flowing&&s.length===0);){var p=s.length;if(ne("maybeReadMore read 0"),k.read(0),p===s.length)break}s.readingMore=!1}function L(k){return function(){var s=k._readableState;ne("pipeOnDrain",s.awaitDrain),s.awaitDrain&&s.awaitDrain--,s.awaitDrain===0&&_t(k,"data")&&(s.flowing=!0,X(k))}}function j(k){var s=k._readableState;s.readableListening=0<k.listenerCount("readable"),s.resumeScheduled&&!s.paused?s.flowing=!0:0<k.listenerCount("data")&&k.resume()}function D(k){ne("readable nexttick read 0"),k.read(0)}function B(k,s){s.resumeScheduled||(s.resumeScheduled=!0,f.nextTick(W,k,s))}function W(k,s){ne("resume",s.reading),s.reading||k.read(0),s.resumeScheduled=!1,k.emit("resume"),X(k),s.flowing&&!s.reading&&k.read(0)}function X(k){var s=k._readableState;for(ne("flow",s.flowing);s.flowing&&k.read()!==null;);}function ee(k,s){if(s.length===0)return null;var p;return s.objectMode?p=s.buffer.shift():!k||k>=s.length?(p=s.decoder?s.buffer.join(""):s.buffer.length===1?s.buffer.first():s.buffer.concat(s.length),s.buffer.clear()):p=s.buffer.consume(k,s.decoder),p}function re(k){var s=k._readableState;ne("endReadable",s.endEmitted),s.endEmitted||(s.ended=!0,f.nextTick(ce,s,k))}function ce(k,s){if(ne("endReadableNT",k.endEmitted,k.length),!k.endEmitted&&k.length===0&&(k.endEmitted=!0,s.readable=!1,s.emit("end"),k.autoDestroy)){var p=s._writableState;(!p||p.autoDestroy&&p.finished)&&s.destroy()}}function _e(k,s){for(var p=0,_=k.length;p<_;p++)if(k[p]===s)return p;return-1}d.exports=c;var Ie;c.ReadableState=o;var ne;l("events").EventEmitter;var _t=function(k,s){return k.listeners(s).length},ve=l("./internal/streams/stream"),Ge=l("buffer").Buffer,ye=u.Uint8Array||function(){},de=l("util");ne=de&&de.debuglog?de.debuglog("stream"):function(){};var Fe,Je,Xe,Tt=l("./internal/streams/buffer_list"),ot=l("./internal/streams/destroy"),at=l("./internal/streams/state"),xt=at.getHighWaterMark,Ke=l("../errors").codes,Ue=Ke.ERR_INVALID_ARG_TYPE,Pe=Ke.ERR_STREAM_PUSH_AFTER_EOF,P=Ke.ERR_METHOD_NOT_IMPLEMENTED,H=Ke.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;l("inherits")(c,ve);var G=ot.errorOrDestroy,z=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(k){this._readableState&&(this._readableState.destroyed=k)}}),c.prototype.destroy=ot.destroy,c.prototype._undestroy=ot.undestroy,c.prototype._destroy=function(k,s){s(k)},c.prototype.push=function(k,s){var p,_=this._readableState;return _.objectMode?p=!0:typeof k=="string"&&(s=s||_.defaultEncoding,s!==_.encoding&&(k=Ge.from(k,s),s=""),p=!0),h(this,k,s,!1,p)},c.prototype.unshift=function(k){return h(this,k,null,!0,!1)},c.prototype.isPaused=function(){return this._readableState.flowing===!1},c.prototype.setEncoding=function(k){Fe||(Fe=l("string_decoder/").StringDecoder);var s=new Fe(k);this._readableState.decoder=s,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,_="";p!==null;)_+=s.write(p.data),p=p.next;return this._readableState.buffer.clear(),_!==""&&this._readableState.buffer.push(_),this._readableState.length=_.length,this},c.prototype.read=function(k){ne("read",k),k=parseInt(k,10);var s=this._readableState,p=k;if(k!==0&&(s.emittedReadable=!1),k===0&&s.needReadable&&((s.highWaterMark===0?0<s.length:s.length>=s.highWaterMark)||s.ended))return ne("read: emitReadable",s.length,s.ended),s.length===0&&s.ended?re(this):C(this),null;if(k=O(k,s),k===0&&s.ended)return s.length===0&&re(this),null;var _=s.needReadable;ne("need readable",_),(s.length===0||s.length-k<s.highWaterMark)&&(_=!0,ne("length less than watermark",_)),s.ended||s.reading?(_=!1,ne("reading or ended",_)):_&&(ne("do read"),s.reading=!0,s.sync=!0,s.length===0&&(s.needReadable=!0),this._read(s.highWaterMark),s.sync=!1,!s.reading&&(k=O(p,s)));var I;return I=0<k?ee(k,s):null,I===null?(s.needReadable=s.length<=s.highWaterMark,k=0):(s.length-=k,s.awaitDrain=0),s.length===0&&(!s.ended&&(s.needReadable=!0),p!==k&&s.ended&&re(this)),I!==null&&this.emit("data",I),I},c.prototype._read=function(){G(this,new P("_read()"))},c.prototype.pipe=function(k,s){function p(mt,yt){ne("onunpipe"),mt===ae&&yt&&yt.hasUnpiped===!1&&(yt.hasUnpiped=!0,I())}function _(){ne("onend"),k.end()}function I(){ne("cleanup"),k.removeListener("close",Q),k.removeListener("finish",oe),k.removeListener("drain",lt),k.removeListener("error",V),k.removeListener("unpipe",p),ae.removeListener("end",_),ae.removeListener("end",ge),ae.removeListener("data",U),ct=!0,se.awaitDrain&&(!k._writableState||k._writableState.needDrain)&&lt()}function U(mt){ne("ondata");var yt=k.write(mt);ne("dest.write",yt),yt===!1&&((se.pipesCount===1&&se.pipes===k||1<se.pipesCount&&_e(se.pipes,k)!==-1)&&!ct&&(ne("false write response, pause",se.awaitDrain),se.awaitDrain++),ae.pause())}function V(mt){ne("onerror",mt),ge(),k.removeListener("error",V),_t(k,"error")===0&&G(k,mt)}function Q(){k.removeListener("finish",oe),ge()}function oe(){ne("onfinish"),k.removeListener("close",Q),ge()}function ge(){ne("unpipe"),ae.unpipe(k)}var ae=this,se=this._readableState;switch(se.pipesCount){case 0:se.pipes=k;break;case 1:se.pipes=[se.pipes,k];break;default:se.pipes.push(k)}se.pipesCount+=1,ne("pipe count=%d opts=%j",se.pipesCount,s);var Ee=(!s||s.end!==!1)&&k!==f.stdout&&k!==f.stderr,ze=Ee?_:ge;se.endEmitted?f.nextTick(ze):ae.once("end",ze),k.on("unpipe",p);var lt=L(ae);k.on("drain",lt);var ct=!1;return ae.on("data",U),r(k,"error",V),k.once("close",Q),k.once("finish",oe),k.emit("pipe",ae),se.flowing||(ne("pipe resume"),ae.resume()),k},c.prototype.unpipe=function(k){var s=this._readableState,p={hasUnpiped:!1};if(s.pipesCount===0)return this;if(s.pipesCount===1)return k&&k!==s.pipes?this:(k||(k=s.pipes),s.pipes=null,s.pipesCount=0,s.flowing=!1,k&&k.emit("unpipe",this,p),this);if(!k){var _=s.pipes,I=s.pipesCount;s.pipes=null,s.pipesCount=0,s.flowing=!1;for(var U=0;U<I;U++)_[U].emit("unpipe",this,{hasUnpiped:!1});return this}var V=_e(s.pipes,k);return V===-1?this:(s.pipes.splice(V,1),s.pipesCount-=1,s.pipesCount===1&&(s.pipes=s.pipes[0]),k.emit("unpipe",this,p),this)},c.prototype.on=function(k,s){var p=ve.prototype.on.call(this,k,s),_=this._readableState;return k==="data"?(_.readableListening=0<this.listenerCount("readable"),_.flowing!==!1&&this.resume()):k=="readable"&&!_.endEmitted&&!_.readableListening&&(_.readableListening=_.needReadable=!0,_.flowing=!1,_.emittedReadable=!1,ne("on readable",_.length,_.reading),_.length?C(this):!_.reading&&f.nextTick(D,this)),p},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(k,s){var p=ve.prototype.removeListener.call(this,k,s);return k==="readable"&&f.nextTick(j,this),p},c.prototype.removeAllListeners=function(k){var s=ve.prototype.removeAllListeners.apply(this,arguments);return(k==="readable"||k===void 0)&&f.nextTick(j,this),s},c.prototype.resume=function(){var k=this._readableState;return k.flowing||(ne("resume"),k.flowing=!k.readableListening,B(this,k)),k.paused=!1,this},c.prototype.pause=function(){return ne("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ne("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(k){var s=this,p=this._readableState,_=!1;for(var I in k.on("end",function(){if(ne("wrapped end"),p.decoder&&!p.ended){var V=p.decoder.end();V&&V.length&&s.push(V)}s.push(null)}),k.on("data",function(V){if(ne("wrapped data"),p.decoder&&(V=p.decoder.write(V)),!(p.objectMode&&V==null)&&(p.objectMode||V&&V.length)){var Q=s.push(V);Q||(_=!0,k.pause())}}),k)this[I]===void 0&&typeof k[I]=="function"&&(this[I]=function(V){return function(){return k[V].apply(k,arguments)}}(I));for(var U=0;U<z.length;U++)k.on(z[U],this.emit.bind(this,z[U]));return this._read=function(V){ne("wrapped _read",V),_&&(_=!1,k.resume())},this},typeof Symbol=="function"&&(c.prototype[Symbol.asyncIterator]=function(){return Je===void 0&&(Je=l("./internal/streams/async_iterator")),Je(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}}),c._fromList=ee,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(c.from=function(k,s){return Xe===void 0&&(Xe=l("./internal/streams/from")),Xe(c,k,s)})}).call(this)}).call(this,l("_process"),typeof Ce=="undefined"?typeof self=="undefined"?typeof window=="undefined"?{}:window:self:Ce)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(l,d){function f(S,O){var y=this._transformState;y.transforming=!1;var C=y.writecb;if(C===null)return this.emit("error",new c);y.writechunk=null,y.writecb=null,O!=null&&this.push(O),C(S);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function u(S){return this instanceof u?(E.call(this,S),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,S&&(typeof S.transform=="function"&&(this._transform=S.transform),typeof S.flush=="function"&&(this._flush=S.flush)),void this.on("prefinish",g)):new u(S)}function g(){var S=this;typeof this._flush!="function"||this._readableState.destroyed?v(this,null,null):this._flush(function(O,y){v(S,O,y)})}function v(S,O,y){if(O)return S.emit("error",O);if(y!=null&&S.push(y),S._writableState.length)throw new m;if(S._transformState.transforming)throw new h;return S.push(null)}d.exports=u;var r=l("../errors").codes,o=r.ERR_METHOD_NOT_IMPLEMENTED,c=r.ERR_MULTIPLE_CALLBACK,h=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=r.ERR_TRANSFORM_WITH_LENGTH_0,E=l("./_stream_duplex");l("inherits")(u,E),u.prototype.push=function(S,O){return this._transformState.needTransform=!1,E.prototype.push.call(this,S,O)},u.prototype._transform=function(S,O,y){y(new o("_transform()"))},u.prototype._write=function(S,O,y){var C=this._transformState;if(C.writecb=y,C.writechunk=S,C.writeencoding=O,!C.transforming){var b=this._readableState;(C.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},u.prototype._read=function(){var S=this._transformState;S.writechunk===null||S.transforming?S.needTransform=!0:(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform))},u.prototype._destroy=function(S,O){E.prototype._destroy.call(this,S,function(y){O(y)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(l,d){(function(f,u){(function(){function g(P){var H=this;this.next=null,this.entry=null,this.finish=function(){re(H,P)}}function v(P){return ne.from(P)}function r(P){return ne.isBuffer(P)||P instanceof _t}function o(){}function c(P,H,G){ce=ce||l("./_stream_duplex"),P=P||{},typeof G!="boolean"&&(G=H instanceof ce),this.objectMode=!!P.objectMode,G&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=ye(this,P,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=P.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(k){x(H,k)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new g(this)}function h(P){ce=ce||l("./_stream_duplex");var H=this instanceof ce;return H||Pe.call(h,this)?(this._writableState=new c(P,this,H),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),void Ie.call(this)):new h(P)}function m(P,H){var G=new xt;Ue(P,G),f.nextTick(H,G)}function E(P,H,G,z){var k;return G===null?k=new at:typeof G!="string"&&!H.objectMode&&(k=new Fe("chunk",["string","Buffer"],G)),!k||(Ue(P,k),f.nextTick(z,k),!1)}function S(P,H,G){return P.objectMode||P.decodeStrings===!1||typeof H!="string"||(H=ne.from(H,G)),H}function O(P,H,G,z,k,s){if(!G){var p=S(H,z,k);z!==p&&(G=!0,k="buffer",z=p)}var _=H.objectMode?1:z.length;H.length+=_;var I=H.length<H.highWaterMark;if(I||(H.needDrain=!0),H.writing||H.corked){var U=H.lastBufferedRequest;H.lastBufferedRequest={chunk:z,encoding:k,isBuf:G,callback:s,next:null},U?U.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else y(P,H,!1,_,z,k,s);return I}function y(P,H,G,z,k,s,p){H.writelen=z,H.writecb=p,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new ot("write")):G?P._writev(k,H.onwrite):P._write(k,s,H.onwrite),H.sync=!1}function C(P,H,G,z,k){--H.pendingcb,G?(f.nextTick(k,z),f.nextTick(X,P,H),P._writableState.errorEmitted=!0,Ue(P,z)):(k(z),P._writableState.errorEmitted=!0,Ue(P,z),X(P,H))}function b(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function x(P,H){var G=P._writableState,z=G.sync,k=G.writecb;if(typeof k!="function")throw new Xe;if(b(G),H)C(P,G,z,H,k);else{var s=D(G)||P.destroyed;s||G.corked||G.bufferProcessing||!G.bufferedRequest||j(P,G),z?f.nextTick(T,P,G,s,k):T(P,G,s,k)}}function T(P,H,G,z){G||L(P,H),H.pendingcb--,z(),X(P,H)}function L(P,H){H.length===0&&H.needDrain&&(H.needDrain=!1,P.emit("drain"))}function j(P,H){H.bufferProcessing=!0;var G=H.bufferedRequest;if(P._writev&&G&&G.next){var z=H.bufferedRequestCount,k=Array(z),s=H.corkedRequestsFree;s.entry=G;for(var p=0,_=!0;G;)k[p]=G,G.isBuf||(_=!1),G=G.next,p+=1;k.allBuffers=_,y(P,H,!0,H.length,k,"",s.finish),H.pendingcb++,H.lastBufferedRequest=null,s.next?(H.corkedRequestsFree=s.next,s.next=null):H.corkedRequestsFree=new g(H),H.bufferedRequestCount=0}else{for(;G;){var I=G.chunk,U=G.encoding,V=G.callback,Q=H.objectMode?1:I.length;if(y(P,H,!1,Q,I,U,V),G=G.next,H.bufferedRequestCount--,H.writing)break}G===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=G,H.bufferProcessing=!1}function D(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function B(P,H){P._final(function(G){H.pendingcb--,G&&Ue(P,G),H.prefinished=!0,P.emit("prefinish"),X(P,H)})}function W(P,H){H.prefinished||H.finalCalled||(typeof P._final!="function"||H.destroyed?(H.prefinished=!0,P.emit("prefinish")):(H.pendingcb++,H.finalCalled=!0,f.nextTick(B,P,H)))}function X(P,H){var G=D(H);if(G&&(W(P,H),H.pendingcb===0&&(H.finished=!0,P.emit("finish"),H.autoDestroy))){var z=P._readableState;(!z||z.autoDestroy&&z.endEmitted)&&P.destroy()}return G}function ee(P,H,G){H.ending=!0,X(P,H),G&&(H.finished?f.nextTick(G):P.once("finish",G)),H.ended=!0,P.writable=!1}function re(P,H,G){var z=P.entry;for(P.entry=null;z;){var k=z.callback;H.pendingcb--,k(G),z=z.next}H.corkedRequestsFree.next=P}d.exports=h;var ce;h.WritableState=c;var _e={deprecate:l("util-deprecate")},Ie=l("./internal/streams/stream"),ne=l("buffer").Buffer,_t=u.Uint8Array||function(){},ve=l("./internal/streams/destroy"),Ge=l("./internal/streams/state"),ye=Ge.getHighWaterMark,de=l("../errors").codes,Fe=de.ERR_INVALID_ARG_TYPE,Je=de.ERR_METHOD_NOT_IMPLEMENTED,Xe=de.ERR_MULTIPLE_CALLBACK,Tt=de.ERR_STREAM_CANNOT_PIPE,ot=de.ERR_STREAM_DESTROYED,at=de.ERR_STREAM_NULL_VALUES,xt=de.ERR_STREAM_WRITE_AFTER_END,Ke=de.ERR_UNKNOWN_ENCODING,Ue=ve.errorOrDestroy;l("inherits")(h,Ie),c.prototype.getBuffer=function(){for(var P=this.bufferedRequest,H=[];P;)H.push(P),P=P.next;return H},function(){try{Object.defineProperty(c.prototype,"buffer",{get:_e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Pe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Pe=Function.prototype[Symbol.hasInstance],Object.defineProperty(h,Symbol.hasInstance,{value:function(P){return!!Pe.call(this,P)||this===h&&P&&P._writableState instanceof c}})):Pe=function(P){return P instanceof this},h.prototype.pipe=function(){Ue(this,new Tt)},h.prototype.write=function(P,H,G){var z=this._writableState,k=!1,s=!z.objectMode&&r(P);return s&&!ne.isBuffer(P)&&(P=v(P)),typeof H=="function"&&(G=H,H=null),s?H="buffer":!H&&(H=z.defaultEncoding),typeof G!="function"&&(G=o),z.ending?m(this,G):(s||E(this,z,P,G))&&(z.pendingcb++,k=O(this,z,s,P,H,G)),k},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&j(this,P))},h.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())))throw new Ke(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),h.prototype._write=function(P,H,G){G(new Je("_write()"))},h.prototype._writev=null,h.prototype.end=function(P,H,G){var z=this._writableState;return typeof P=="function"?(G=P,P=null,H=null):typeof H=="function"&&(G=H,H=null),P!=null&&this.write(P,H),z.corked&&(z.corked=1,this.uncork()),z.ending||ee(this,z,G),this},Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),h.prototype.destroy=ve.destroy,h.prototype._undestroy=ve.undestroy,h.prototype._destroy=function(P,H){H(P)}}).call(this)}).call(this,l("_process"),typeof Ce=="undefined"?typeof self=="undefined"?typeof window=="undefined"?{}:window:self:Ce)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(l,d){(function(f){(function(){function u(L,j,D){return j in L?Object.defineProperty(L,j,{value:D,enumerable:!0,configurable:!0,writable:!0}):L[j]=D,L}function g(L,j){return{value:L,done:j}}function v(L){var j=L[m];if(j!==null){var D=L[b].read();D!==null&&(L[y]=null,L[m]=null,L[E]=null,j(g(D,!1)))}}function r(L){f.nextTick(v,L)}function o(L,j){return function(D,B){L.then(function(){return j[O]?void D(g(void 0,!0)):void j[C](D,B)},B)}}var c,h=l("./end-of-stream"),m=Symbol("lastResolve"),E=Symbol("lastReject"),S=Symbol("error"),O=Symbol("ended"),y=Symbol("lastPromise"),C=Symbol("handlePromise"),b=Symbol("stream"),x=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((c={get stream(){return this[b]},next:function(){var L=this,j=this[S];if(j!==null)return Promise.reject(j);if(this[O])return Promise.resolve(g(void 0,!0));if(this[b].destroyed)return new Promise(function(X,ee){f.nextTick(function(){L[S]?ee(L[S]):X(g(void 0,!0))})});var D,B=this[y];if(B)D=new Promise(o(B,this));else{var W=this[b].read();if(W!==null)return Promise.resolve(g(W,!1));D=new Promise(this[C])}return this[y]=D,D}},u(c,Symbol.asyncIterator,function(){return this}),u(c,"return",function(){var L=this;return new Promise(function(j,D){L[b].destroy(null,function(B){return B?void D(B):void j(g(void 0,!0))})})}),c),x);d.exports=function(L){var j,D=Object.create(T,(j={},u(j,b,{value:L,writable:!0}),u(j,m,{value:null,writable:!0}),u(j,E,{value:null,writable:!0}),u(j,S,{value:null,writable:!0}),u(j,O,{value:L._readableState.endEmitted,writable:!0}),u(j,C,{value:function(B,W){var X=D[b].read();X?(D[y]=null,D[m]=null,D[E]=null,B(g(X,!1))):(D[m]=B,D[E]=W)},writable:!0}),j));return D[y]=null,h(L,function(B){if(B&&B.code!=="ERR_STREAM_PREMATURE_CLOSE"){var W=D[E];return W!==null&&(D[y]=null,D[m]=null,D[E]=null,W(B)),void(D[S]=B)}var X=D[m];X!==null&&(D[y]=null,D[m]=null,D[E]=null,X(g(void 0,!0))),D[O]=!0}),L.on("readable",r.bind(null,D)),D}}).call(this)}).call(this,l("_process"))},{"./end-of-stream":24,_process:12}],22:[function(l,d){function f(y,C){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(y);C&&(x=x.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),b.push.apply(b,x)}return b}function u(y){for(var C,b=1;b<arguments.length;b++)C=arguments[b]==null?{}:arguments[b],b%2?f(Object(C),!0).forEach(function(x){g(y,x,C[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(C)):f(Object(C)).forEach(function(x){Object.defineProperty(y,x,Object.getOwnPropertyDescriptor(C,x))});return y}function g(y,C,b){return C in y?Object.defineProperty(y,C,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[C]=b,y}function v(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}function r(y,C){for(var b,x=0;x<C.length;x++)b=C[x],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}function o(y,C,b){return C&&r(y.prototype,C),b&&r(y,b),y}function c(y,C,b){m.prototype.copy.call(y,C,b)}var h=l("buffer"),m=h.Buffer,E=l("util"),S=E.inspect,O=S&&S.custom||"inspect";d.exports=function(){function y(){v(this,y),this.head=null,this.tail=null,this.length=0}return o(y,[{key:"push",value:function(C){var b={data:C,next:null};0<this.length?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(C){var b={data:C,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var C=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,C}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(C){if(this.length===0)return"";for(var b=this.head,x=""+b.data;b=b.next;)x+=C+b.data;return x}},{key:"concat",value:function(C){if(this.length===0)return m.alloc(0);for(var b=m.allocUnsafe(C>>>0),x=this.head,T=0;x;)c(x.data,b,T),T+=x.data.length,x=x.next;return b}},{key:"consume",value:function(C,b){var x;return C<this.head.data.length?(x=this.head.data.slice(0,C),this.head.data=this.head.data.slice(C)):C===this.head.data.length?x=this.shift():x=b?this._getString(C):this._getBuffer(C),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(C){var b=this.head,x=1,T=b.data;for(C-=T.length;b=b.next;){var L=b.data,j=C>L.length?L.length:C;if(T+=j===L.length?L:L.slice(0,C),C-=j,C===0){j===L.length?(++x,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=L.slice(j));break}++x}return this.length-=x,T}},{key:"_getBuffer",value:function(C){var b=m.allocUnsafe(C),x=this.head,T=1;for(x.data.copy(b),C-=x.data.length;x=x.next;){var L=x.data,j=C>L.length?L.length:C;if(L.copy(b,b.length-C,0,j),C-=j,C===0){j===L.length?(++T,this.head=x.next?x.next:this.tail=null):(this.head=x,x.data=L.slice(j));break}++T}return this.length-=T,b}},{key:O,value:function(C,b){return S(this,u({},b,{depth:0,customInspect:!1}))}}]),y}()},{buffer:3,util:2}],23:[function(l,d){(function(f){(function(){function u(r,o){v(r,o),g(r)}function g(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function v(r,o){r.emit("error",o)}d.exports={destroy:function(r,o){var c=this,h=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return h||m?(o?o(r):r&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,f.nextTick(v,this,r)):f.nextTick(v,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(E){!o&&E?c._writableState?c._writableState.errorEmitted?f.nextTick(g,c):(c._writableState.errorEmitted=!0,f.nextTick(u,c,E)):f.nextTick(u,c,E):o?(f.nextTick(g,c),o(E)):f.nextTick(g,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,o){var c=r._readableState,h=r._writableState;c&&c.autoDestroy||h&&h.autoDestroy?r.destroy(o):r.emit("error",o)}}}).call(this)}).call(this,l("_process"))},{_process:12}],24:[function(l,d){function f(o){var c=!1;return function(){if(!c){c=!0;for(var h=arguments.length,m=Array(h),E=0;E<h;E++)m[E]=arguments[E];o.apply(this,m)}}}function u(){}function g(o){return o.setHeader&&typeof o.abort=="function"}function v(o,c,h){if(typeof c=="function")return v(o,null,c);c||(c={}),h=f(h||u);var m=c.readable||c.readable!==!1&&o.readable,E=c.writable||c.writable!==!1&&o.writable,S=function(){o.writable||y()},O=o._writableState&&o._writableState.finished,y=function(){E=!1,O=!0,m||h.call(o)},C=o._readableState&&o._readableState.endEmitted,b=function(){m=!1,C=!0,E||h.call(o)},x=function(j){h.call(o,j)},T=function(){var j;return m&&!C?(o._readableState&&o._readableState.ended||(j=new r),h.call(o,j)):E&&!O?(o._writableState&&o._writableState.ended||(j=new r),h.call(o,j)):void 0},L=function(){o.req.on("finish",y)};return g(o)?(o.on("complete",y),o.on("abort",T),o.req?L():o.on("request",L)):E&&!o._writableState&&(o.on("end",S),o.on("close",S)),o.on("end",b),o.on("finish",y),c.error!==!1&&o.on("error",x),o.on("close",T),function(){o.removeListener("complete",y),o.removeListener("abort",T),o.removeListener("request",L),o.req&&o.req.removeListener("finish",y),o.removeListener("end",S),o.removeListener("close",S),o.removeListener("finish",y),o.removeListener("end",b),o.removeListener("error",x),o.removeListener("close",T)}}var r=l("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;d.exports=v},{"../../../errors":15}],25:[function(l,d){d.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(l,d){function f(O){var y=!1;return function(){y||(y=!0,O.apply(void 0,arguments))}}function u(O){if(O)throw O}function g(O){return O.setHeader&&typeof O.abort=="function"}function v(O,y,C,b){b=f(b);var x=!1;O.on("close",function(){x=!0}),h===void 0&&(h=l("./end-of-stream")),h(O,{readable:y,writable:C},function(L){return L?b(L):(x=!0,void b())});var T=!1;return function(L){if(!x)return T?void 0:(T=!0,g(O)?O.abort():typeof O.destroy=="function"?O.destroy():void b(L||new S("pipe")))}}function r(O){O()}function o(O,y){return O.pipe(y)}function c(O){return O.length&&typeof O[O.length-1]=="function"?O.pop():u}var h,m=l("../../../errors").codes,E=m.ERR_MISSING_ARGS,S=m.ERR_STREAM_DESTROYED;d.exports=function(){for(var O=arguments.length,y=Array(O),C=0;C<O;C++)y[C]=arguments[C];var b=c(y);if(Array.isArray(y[0])&&(y=y[0]),2>y.length)throw new E("streams");var x,T=y.map(function(L,j){var D=j<y.length-1;return v(L,D,0<j,function(B){x||(x=B),B&&T.forEach(r),D||(T.forEach(r),b(x))})});return y.reduce(o)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(l,d){function f(g,v,r){return g.highWaterMark==null?v?g[r]:null:g.highWaterMark}var u=l("../../../errors").codes.ERR_INVALID_OPT_VALUE;d.exports={getHighWaterMark:function(g,v,r,o){var c=f(v,o,r);if(c!=null){if(!(isFinite(c)&&t(c)===c)||0>c){var h=o?r:"highWaterMark";throw new u(h,c)}return t(c)}return g.objectMode?16:16384}}},{"../../../errors":15}],28:[function(l,d){d.exports=l("events").EventEmitter},{events:7}],29:[function(l,d,f){f=d.exports=l("./lib/_stream_readable.js"),f.Stream=f,f.Readable=f,f.Writable=l("./lib/_stream_writable.js"),f.Duplex=l("./lib/_stream_duplex.js"),f.Transform=l("./lib/_stream_transform.js"),f.PassThrough=l("./lib/_stream_passthrough.js"),f.finished=l("./lib/internal/streams/end-of-stream.js"),f.pipeline=l("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(l,d,f){function u(o,c){for(var h in o)c[h]=o[h]}function g(o,c,h){return r(o,c,h)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var v=l("buffer"),r=v.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?d.exports=v:(u(v,f),f.Buffer=g),g.prototype=Object.create(r.prototype),u(r,g),g.from=function(o,c,h){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,h)},g.alloc=function(o,c,h){if(typeof o!="number")throw new TypeError("Argument must be a number");var m=r(o);return c===void 0?m.fill(0):typeof h=="string"?m.fill(c,h):m.fill(c),m},g.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},g.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return v.SlowBuffer(o)}},{buffer:3}],31:[function(l,d,f){function u(T){if(!T)return"utf8";for(var L;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(L)return;T=(""+T).toLowerCase(),L=!0}}function g(T){var L=u(T);if(typeof L!="string"&&(b.isEncoding===x||!x(T)))throw new Error("Unknown encoding: "+T);return L||T}function v(T){this.encoding=g(T);var L;switch(this.encoding){case"utf16le":this.text=m,this.end=E,L=4;break;case"utf8":this.fillLast=h,L=4;break;case"base64":this.text=S,this.end=O,L=3;break;default:return this.write=y,void(this.end=C)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(L)}function r(T){return 127>=T?0:T>>5==6?2:T>>4==14?3:T>>3==30?4:T>>6==2?-1:-2}function o(T,L,j){var D=L.length-1;if(D<j)return 0;var B=r(L[D]);return 0<=B?(0<B&&(T.lastNeed=B-1),B):--D<j||B===-2?0:(B=r(L[D]),0<=B?(0<B&&(T.lastNeed=B-2),B):--D<j||B===-2?0:(B=r(L[D]),0<=B?(0<B&&(B===2?B=0:T.lastNeed=B-3),B):0))}function c(T,L){if((192&L[0])!=128)return T.lastNeed=0,"\uFFFD";if(1<T.lastNeed&&1<L.length){if((192&L[1])!=128)return T.lastNeed=1,"\uFFFD";if(2<T.lastNeed&&2<L.length&&(192&L[2])!=128)return T.lastNeed=2,"\uFFFD"}}function h(T){var L=this.lastTotal-this.lastNeed,j=c(this,T);return j===void 0?this.lastNeed<=T.length?(T.copy(this.lastChar,L,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,L,0,T.length),void(this.lastNeed-=T.length)):j}function m(T,L){if((T.length-L)%2==0){var j=T.toString("utf16le",L);if(j){var D=j.charCodeAt(j.length-1);if(55296<=D&&56319>=D)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",L,T.length-1)}function E(T){var L=T&&T.length?this.write(T):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return L+this.lastChar.toString("utf16le",0,j)}return L}function S(T,L){var j=(T.length-L)%3;return j==0?T.toString("base64",L):(this.lastNeed=3-j,this.lastTotal=3,j==1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",L,T.length-j))}function O(T){var L=T&&T.length?this.write(T):"";return this.lastNeed?L+this.lastChar.toString("base64",0,3-this.lastNeed):L}function y(T){return T.toString(this.encoding)}function C(T){return T&&T.length?this.write(T):""}var b=l("safe-buffer").Buffer,x=b.isEncoding||function(T){switch(T=""+T,T&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};f.StringDecoder=v,v.prototype.write=function(T){if(T.length===0)return"";var L,j;if(this.lastNeed){if(L=this.fillLast(T),L===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<T.length?L?L+this.text(T,j):this.text(T,j):L||""},v.prototype.end=function(T){var L=T&&T.length?this.write(T):"";return this.lastNeed?L+"\uFFFD":L},v.prototype.text=function(T,L){var j=o(this,T,L);if(!this.lastNeed)return T.toString("utf8",L);this.lastTotal=j;var D=T.length-(j-this.lastNeed);return T.copy(this.lastChar,0,D),T.toString("utf8",L,D)},v.prototype.fillLast=function(T){return this.lastNeed<=T.length?(T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),void(this.lastNeed-=T.length))}},{"safe-buffer":30}],32:[function(l,d){(function(f){(function(){function u(g){try{if(!f.localStorage)return!1}catch{return!1}var v=f.localStorage[g];return v!=null&&(v+"").toLowerCase()==="true"}d.exports=function(g,v){function r(){if(!o){if(u("throwDeprecation"))throw new Error(v);u("traceDeprecation")?console.trace(v):console.warn(v),o=!0}return g.apply(this,arguments)}if(u("noDeprecation"))return g;var o=!1;return r}}).call(this)}).call(this,typeof Ce=="undefined"?typeof self=="undefined"?typeof window=="undefined"?{}:window:self:Ce)},{}],"/":[function(l,d){function f(O){return O.replace(/a=ice-options:trickle\s\n/g,"")}function u(O){console.warn(O)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const g=l("debug")("simple-peer"),v=l("get-browser-rtc"),r=l("randombytes"),o=l("readable-stream"),c=l("queue-microtask"),h=l("err-code"),{Buffer:m}=l("buffer"),E=65536;class S extends o.Duplex{constructor(y){if(y=Object.assign({allowHalfOpen:!1},y),super(y),this._id=r(4).toString("hex").slice(0,7),this._debug("new peer %o",y),this.channelName=y.initiator?y.channelName||r(20).toString("hex"):null,this.initiator=y.initiator||!1,this.channelConfig=y.channelConfig||S.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},S.config,y.config),this.offerOptions=y.offerOptions||{},this.answerOptions=y.answerOptions||{},this.sdpTransform=y.sdpTransform||(C=>C),this.streams=y.streams||(y.stream?[y.stream]:[]),this.trickle=y.trickle===void 0||y.trickle,this.allowHalfTrickle=y.allowHalfTrickle!==void 0&&y.allowHalfTrickle,this.iceCompleteTimeout=y.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=y.wrtc&&typeof y.wrtc=="object"?y.wrtc:v(),!this._wrtc)throw h(typeof window=="undefined"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(C){return void this.destroy(h(C,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=C=>{this._onIceCandidate(C)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(C=>{this.destroy(h(C,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=C=>{this._setupData(C)},this.streams&&this.streams.forEach(C=>{this.addStream(C)}),this._pc.ontrack=C=>{this._onTrack(C)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(y){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof y=="string")try{y=JSON.parse(y)}catch{y={}}this._debug("signal()"),y.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),y.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(y.transceiverRequest.kind,y.transceiverRequest.init)),y.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(y.candidate):this._pendingCandidates.push(y.candidate)),y.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(y)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(C=>{this._addIceCandidate(C)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(C=>{this.destroy(h(C,"ERR_SET_REMOTE_DESCRIPTION"))}),y.sdp||y.candidate||y.renegotiate||y.transceiverRequest||this.destroy(h(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(y){const C=new this._wrtc.RTCIceCandidate(y);this._pc.addIceCandidate(C).catch(b=>{!C.address||C.address.endsWith(".local")?u("Ignoring unsupported ICE candidate."):this.destroy(h(b,"ERR_ADD_ICE_CANDIDATE"))})}send(y){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(y)}}addTransceiver(y,C){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(y,C),this._needsNegotiation()}catch(b){this.destroy(h(b,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:y,init:C}})}}addStream(y){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),y.getTracks().forEach(C=>{this.addTrack(C,y)})}}addTrack(y,C){if(this.destroying)return;if(this.destroyed)throw h(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const b=this._senderMap.get(y)||new Map;let x=b.get(C);if(!x)x=this._pc.addTrack(y,C),b.set(C,x),this._senderMap.set(y,b),this._needsNegotiation();else throw x.removed?h(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):h(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(y,C,b){if(this.destroying)return;if(this.destroyed)throw h(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const x=this._senderMap.get(y),T=x?x.get(b):null;if(!T)throw h(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");C&&this._senderMap.set(C,x),T.replaceTrack==null?this.destroy(h(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):T.replaceTrack(C)}removeTrack(y,C){if(this.destroying)return;if(this.destroyed)throw h(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const b=this._senderMap.get(y),x=b?b.get(C):null;if(!x)throw h(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{x.removed=!0,this._pc.removeTrack(x)}catch(T){T.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(x):this.destroy(h(T,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(y){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),y.getTracks().forEach(C=>{this.removeTrack(C,y)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,c(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw h(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(y){this._destroy(y,()=>{})}_destroy(y,C){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",y&&(y.message||y)),c(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",y&&(y.message||y)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,y&&this.emit("error",y),this.emit("close"),C()}))}_setupData(y){if(!y.channel)return this.destroy(h(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=y.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=E),this.channelName=this._channel.label,this._channel.onmessage=b=>{this._onChannelMessage(b)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=b=>{const x=b.error instanceof Error?b.error:new Error(`Datachannel error: ${b.message} ${b.filename}:${b.lineno}:${b.colno}`);this.destroy(h(x,"ERR_DATA_CHANNEL"))};let C=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(C&&this._onChannelClose(),C=!0):C=!1},5e3)}_read(){}_write(y,C,b){if(this.destroyed)return b(h(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(y)}catch(x){return this.destroy(h(x,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>E?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=b):b(null)}else this._debug("write before connect"),this._chunk=y,this._cb=b}_onFinish(){if(!this.destroyed){const y=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?y():this.once("connect",y)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=f(y.sdp)),y.sdp=this.sdpTransform(y.sdp);const C=()=>{if(!this.destroyed){const b=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})}};this._pc.setLocalDescription(y).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))}).catch(b=>{this.destroy(h(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(h(y,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(y=>{y.mid||!y.sender.track||y.requested||(y.requested=!0,this.addTransceiver(y.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(y=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(y.sdp=f(y.sdp)),y.sdp=this.sdpTransform(y.sdp);const C=()=>{if(!this.destroyed){const b=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(y).then(()=>{this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))}).catch(b=>{this.destroy(h(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(y=>{this.destroy(h(y,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(h(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const y=this._pc.iceConnectionState,C=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",y,C),this.emit("iceStateChange",y,C),(y==="connected"||y==="completed")&&(this._pcReady=!0,this._maybeReady()),y==="failed"&&this.destroy(h(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),y==="closed"&&this.destroy(h(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(y){const C=b=>(Object.prototype.toString.call(b.values)==="[object Array]"&&b.values.forEach(x=>{Object.assign(b,x)}),b);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(b=>{const x=[];b.forEach(T=>{x.push(C(T))}),y(null,x)},b=>y(b)):0<this._pc.getStats.length?this._pc.getStats(b=>{if(this.destroyed)return;const x=[];b.result().forEach(T=>{const L={};T.names().forEach(j=>{L[j]=T.stat(j)}),L.id=T.id,L.type=T.type,L.timestamp=T.timestamp,x.push(C(L))}),y(null,x)},b=>y(b)):y(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const y=()=>{this.destroyed||this.getStats((C,b)=>{if(this.destroyed)return;C&&(b=[]);const x={},T={},L={};let j=!1;b.forEach(B=>{(B.type==="remotecandidate"||B.type==="remote-candidate")&&(x[B.id]=B),(B.type==="localcandidate"||B.type==="local-candidate")&&(T[B.id]=B),(B.type==="candidatepair"||B.type==="candidate-pair")&&(L[B.id]=B)});const D=B=>{j=!0;let W=T[B.localCandidateId];W&&(W.ip||W.address)?(this.localAddress=W.ip||W.address,this.localPort=+W.port):W&&W.ipAddress?(this.localAddress=W.ipAddress,this.localPort=+W.portNumber):typeof B.googLocalAddress=="string"&&(W=B.googLocalAddress.split(":"),this.localAddress=W[0],this.localPort=+W[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let X=x[B.remoteCandidateId];X&&(X.ip||X.address)?(this.remoteAddress=X.ip||X.address,this.remotePort=+X.port):X&&X.ipAddress?(this.remoteAddress=X.ipAddress,this.remotePort=+X.portNumber):typeof B.googRemoteAddress=="string"&&(X=B.googRemoteAddress.split(":"),this.remoteAddress=X[0],this.remotePort=+X[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(b.forEach(B=>{B.type==="transport"&&B.selectedCandidatePairId&&D(L[B.selectedCandidatePairId]),(B.type==="googCandidatePair"&&B.googActiveConnection==="true"||(B.type==="candidatepair"||B.type==="candidate-pair")&&B.selected)&&D(B)}),!j&&(!Object.keys(L).length||Object.keys(T).length))return void setTimeout(y,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(W){return this.destroy(h(W,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const B=this._cb;this._cb=null,B(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};y()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>E)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(y=>{this._pc.removeTrack(y),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(y){this.destroyed||(y.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:y.candidate.candidate,sdpMLineIndex:y.candidate.sdpMLineIndex,sdpMid:y.candidate.sdpMid}}):!y.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),y.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(y){if(this.destroyed)return;let C=y.data;C instanceof ArrayBuffer&&(C=m.from(C)),this.push(C)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const y=this._cb;this._cb=null,y(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(y){this.destroyed||y.streams.forEach(C=>{this._debug("on track"),this.emit("track",y.track,C),this._remoteTracks.push({track:y.track,stream:C}),this._remoteStreams.some(b=>b.id===C.id)||(this._remoteStreams.push(C),c(()=>{this._debug("on stream"),this.emit("stream",C)}))})}_debug(){const y=[].slice.call(arguments);y[0]="["+this._id+"] "+y[0],g.apply(null,y)}}S.WEBRTC_SUPPORT=!!v(),S.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},S.channelConfig={},d.exports=S},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(lo);var Lu=lo.exports;const gi=0,_i=1,co=2,uo=(n,e)=>{te(n,gi);const t=Lc(e);Se(n,t)},fo=(n,e,t)=>{te(n,_i),Se(n,Rc(e,t))},Nu=(n,e,t)=>fo(e,t,Le(n)),ho=(n,e,t)=>{try{Cc(e,Le(n),t)}catch(i){console.error("Caught error while handling a Yjs update",i)}},Mu=(n,e)=>{te(n,co),Se(n,e)},Bu=ho,Fu=(n,e,t,i)=>{const a=ie(n);switch(a){case gi:Nu(n,e,t);break;case _i:ho(n,t,i);break;case co:Bu(n,t,i);break;default:throw new Error("Unknown message type")}return a},mi=3e4;class Uu extends Ln{constructor(e){super();this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const t=ut();this.getLocalState()!==null&&mi/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const i=[];this.meta.forEach((a,l)=>{l!==this.clientID&&mi<=t-a.lastUpdated&&this.states.has(l)&&i.push(l)}),i.length>0&&yi(this,i,"timeout")},$t(mi/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,i=this.meta.get(t),a=i===void 0?0:i.clock+1,l=this.states.get(t);e===null?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:a,lastUpdated:ut()});const d=[],f=[],u=[],g=[];e===null?g.push(t):l==null?e!=null&&d.push(t):(f.push(t),fn(l,e)||u.push(t)),(d.length>0||u.length>0||g.length>0)&&this.emit("change",[{added:d,updated:u,removed:g},"local"]),this.emit("update",[{added:d,updated:f,removed:g},"local"])}setLocalStateField(e,t){const i=this.getLocalState();i!==null&&this.setLocalState(Oi(sn({},i),{[e]:t}))}getStates(){return this.states}}const yi=(n,e,t)=>{const i=[];for(let a=0;a<e.length;a++){const l=e[a];if(n.states.has(l)){if(n.states.delete(l),l===n.clientID){const d=n.meta.get(l);n.meta.set(l,{clock:d.clock+1,lastUpdated:ut()})}i.push(l)}}i.length>0&&(n.emit("change",[{added:[],updated:[],removed:i},t]),n.emit("update",[{added:[],updated:[],removed:i},t]))},ar=(n,e,t=n.states)=>{const i=e.length,a=Te();te(a,i);for(let l=0;l<i;l++){const d=e[l],f=t.get(d)||null,u=n.meta.get(d).clock;te(a,d),te(a,u),rt(a,JSON.stringify(f))}return we(a)},Pu=(n,e,t)=>{const i=nt(e),a=ut(),l=[],d=[],f=[],u=[],g=ie(i);for(let v=0;v<g;v++){const r=ie(i);let o=ie(i);const c=JSON.parse(ht(i)),h=n.meta.get(r),m=n.states.get(r),E=h===void 0?0:h.clock;(E<o||E===o&&c===null&&n.states.has(r))&&(c===null?r===n.clientID&&n.getLocalState()!=null?o++:n.states.delete(r):n.states.set(r,c),n.meta.set(r,{clock:o,lastUpdated:a}),h===void 0&&c!==null?l.push(r):h!==void 0&&c===null?u.push(r):c!==null&&(fn(c,m)||f.push(r),d.push(r)))}(l.length>0||f.length>0||u.length>0)&&n.emit("change",[{added:l,updated:f,removed:u},t]),(l.length>0||d.length>0||u.length>0)&&n.emit("update",[{added:l,updated:d,removed:u},t])},ju=(n,e)=>{const t=Ki(n).buffer,i=Ki(e).buffer;return crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveKey"]).then(a=>crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},po=(n,e)=>{if(!e)return Jr(n);const t=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,n).then(i=>{const a=Te();return rt(a,"AES-GCM"),Se(a,t),Se(a,new Uint8Array(i)),we(a)})},Vu=(n,e)=>{const t=Te();return Yt(t,n),po(we(t),e)},go=(n,e)=>{if(!e)return Jr(n);const t=nt(n);ht(t)!=="AES-GCM"&&lc(qt("Unknown encryption algorithm"));const a=Le(t),l=Le(t);return crypto.subtle.decrypt({name:"AES-GCM",iv:a},e,l).then(d=>new Uint8Array(d))},Hu=(n,e)=>go(n,e).then(t=>Gt(nt(new Uint8Array(t)))),Ye=ac("y-webrtc"),tn=0,_o=3,Sn=1,wi=4,lr=new Map,Pt=new Map,mo=n=>{let e=!0;n.webrtcConns.forEach(t=>{t.synced||(e=!1)}),(!e&&n.synced||e&&!n.synced)&&(n.synced=e,n.provider.emit("synced",[{synced:e}]),Ye("synced ",Ve,n.name,bt," with all peers"))},yo=(n,e,t)=>{const i=nt(e),a=Te(),l=ie(i);if(n===void 0)return null;const d=n.awareness,f=n.doc;let u=!1;switch(l){case tn:{te(a,tn);const g=Fu(i,a,f,n);g===_i&&!n.synced&&t(),g===gi&&(u=!0);break}case _o:te(a,Sn),Se(a,ar(d,Array.from(d.getStates().keys()))),u=!0;break;case Sn:Pu(d,Le(i),n);break;case wi:{const g=Lt(i)===1,v=ht(i);if(v!==n.peerId&&(n.bcConns.has(v)&&!g||!n.bcConns.has(v)&&g)){const r=[],o=[];g?(n.bcConns.add(v),o.push(v)):(n.bcConns.delete(v),r.push(v)),n.provider.emit("peers",[{added:o,removed:r,webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]),bo(n)}break}default:return console.error("Unable to compute message"),a}return u?a:null},Wu=(n,e)=>{const t=n.room;return Ye("received message from ",Ve,n.remotePeerId,Hn," (",t.name,")",bt,hn),yo(t,e,()=>{n.synced=!0,Ye("synced ",Ve,t.name,bt," with ",Ve,n.remotePeerId),mo(t)})},vi=(n,e)=>{Ye("send message to ",Ve,n.remotePeerId,bt,Hn," (",n.room.name,")",hn);try{n.peer.send(we(e))}catch{}},$u=(n,e)=>{Ye("broadcast message in ",Ve,n.name,bt),n.webrtcConns.forEach(t=>{try{t.peer.send(e)}catch{}})};class wo{constructor(e,t,i,a){Ye("establishing connection to ",Ve,i),this.room=a,this.remotePeerId=i,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Lu(sn({initiator:t},a.provider.peerOpts)),this.peer.on("signal",l=>{Si(e,a,{to:i,from:a.peerId,type:"signal",signal:l})}),this.peer.on("connect",()=>{Ye("connected to ",Ve,i),this.connected=!0;const d=a.provider.doc,f=a.awareness,u=Te();te(u,tn),uo(u,d),vi(this,u);const g=f.getStates();if(g.size>0){const v=Te();te(v,Sn),Se(v,ar(f,Array.from(g.keys()))),vi(this,v)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,a.webrtcConns.has(this.remotePeerId)&&(a.webrtcConns.delete(this.remotePeerId),a.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(a.webrtcConns.keys()),bcPeers:Array.from(a.bcConns)}])),mo(a),this.peer.destroy(),Ye("closed connection to ",Ve,i),bi(a)}),this.peer.on("error",l=>{Ye("Error in connection to ",Ve,i,": ",l),bi(a)}),this.peer.on("data",l=>{const d=Wu(this,l);d!==null&&vi(this,d)})}destroy(){this.peer.destroy()}}const Ct=(n,e)=>po(e,n.key).then(t=>n.mux(()=>pc(n.name,t))),vo=(n,e)=>{n.bcconnected&&Ct(n,e),$u(n,e)},bi=n=>{lr.forEach(e=>{e.connected&&(e.send({type:"subscribe",topics:[n.name]}),n.webrtcConns.size<n.provider.maxConns&&Si(e,n,{type:"announce",from:n.peerId}))})},bo=n=>{if(n.provider.filterBcConns){const e=Te();te(e,wi),un(e,1),rt(e,n.peerId),Ct(n,we(e))}};class qu{constructor(e,t,i,a){this.peerId=Yi(),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=i,this.key=a,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=gc(),this.bcconnected=!1,this._bcSubscriber=l=>go(new Uint8Array(l),a).then(d=>this.mux(()=>{const f=yo(this,d,()=>{});f&&Ct(this,we(f))})),this._docUpdateHandler=(l,d)=>{const f=Te();te(f,tn),Mu(f,l),vo(this,we(f))},this._awarenessUpdateHandler=({added:l,updated:d,removed:f},u)=>{const g=l.concat(d).concat(f),v=Te();te(v,Sn),Se(v,ar(this.awareness,g)),vo(this,we(v))},this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),window.addEventListener("beforeunload",()=>{yi(this.awareness,[e.clientID],"window unload"),Pt.forEach(l=>{l.disconnect()})})}connect(){bi(this);const e=this.name;hc(e,this._bcSubscriber),this.bcconnected=!0,bo(this);const t=Te();te(t,tn),uo(t,this.doc),Ct(this,we(t));const i=Te();te(i,tn),fo(i,this.doc),Ct(this,we(i));const a=Te();te(a,_o),Ct(this,we(a));const l=Te();te(l,Sn),Se(l,ar(this.awareness,[this.doc.clientID])),Ct(this,we(l))}disconnect(){lr.forEach(t=>{t.connected&&t.send({type:"unsubscribe",topics:[this.name]})}),yi(this.awareness,[this.doc.clientID],"disconnect");const e=Te();te(e,wi),un(e,0),rt(e,this.peerId),Ct(this,we(e)),dc(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(t=>t.destroy())}destroy(){this.disconnect()}}const Gu=(n,e,t,i)=>{if(Pt.has(t))throw qt(`A Yjs Doc connected to room "${t}" already exists!`);const a=new qu(n,e,t,i);return Pt.set(t,a),a},Si=(n,e,t)=>{e.key?Vu(t,e.key).then(i=>{n.send({type:"publish",topic:e.name,data:as(i)})}):n.send({type:"publish",topic:e.name,data:t})};class Yu extends ul{constructor(e){super(e);this.providers=new Set,this.on("connect",()=>{Ye(`connected (${e})`);const t=Array.from(Pt.keys());this.send({type:"subscribe",topics:t}),Pt.forEach(i=>Si(this,i,{type:"announce",from:i.peerId}))}),this.on("message",t=>{switch(t.type){case"publish":{const i=t.topic,a=Pt.get(i);if(a==null||typeof i!="string")return;const l=d=>{const f=a.webrtcConns,u=a.peerId;if(d==null||d.from===u||d.to!==void 0&&d.to!==u||a.bcConns.has(d.from))return;const g=f.has(d.from)?()=>{}:()=>a.provider.emit("peers",[{removed:[],added:[d.from],webrtcPeers:Array.from(a.webrtcConns.keys()),bcPeers:Array.from(a.bcConns)}]);switch(d.type){case"announce":f.size<a.provider.maxConns&&(We(f,d.from,()=>new wo(this,!0,d.from,a)),g());break;case"signal":d.to===u&&(We(f,d.from,()=>new wo(this,!1,d.from,a)).peer.signal(d.signal),g());break}};a.key?typeof t.data=="string"&&Hu(ls(t.data),a.key).then(l):l(t.data)}}}),this.on("disconnect",()=>Ye(`disconnect (${e})`))}}class qf extends Ln{constructor(e,t,{signaling:i=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:a=null,awareness:l=new Uu(t),maxConns:d=20+$t(hl()*15),filterBcConns:f=!0,peerOpts:u={}}={}){super();this.roomName=e,this.doc=t,this.filterBcConns=f,this.awareness=l,this.shouldConnect=!1,this.signalingUrls=i,this.signalingConns=[],this.maxConns=d,this.peerOpts=u,this.key=a?ju(a,e):Jr(null),this.room=null,this.key.then(g=>{this.room=Gu(t,this,e,g),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{const t=We(lr,e,()=>new Yu(e));this.signalingConns.push(t),t.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),e.providers.size===0&&(e.destroy(),lr.delete(e.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),Pt.delete(this.roomName)}),super.destroy()}}var So={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,a,l){function d(g,v){if(!a[g]){if(!i[g]){var r=typeof kt=="function"&&kt;if(!v&&r)return r(g,!0);if(f)return f(g,!0);var o=new Error("Cannot find module '"+g+"'");throw o.code="MODULE_NOT_FOUND",o}var c=a[g]={exports:{}};i[g][0].call(c.exports,function(h){var m=i[g][1][h];return d(m||h)},c,c.exports,t,i,a,l)}return a[g].exports}for(var f=typeof kt=="function"&&kt,u=0;u<l.length;u++)d(l[u]);return d}({1:[function(t,i,a){(function(l){var d=l.MutationObserver||l.WebKitMutationObserver,f;if(d){var u=0,g=new d(h),v=l.document.createTextNode("");g.observe(v,{characterData:!0}),f=function(){v.data=u=++u%2}}else if(!l.setImmediate&&typeof l.MessageChannel!="undefined"){var r=new l.MessageChannel;r.port1.onmessage=h,f=function(){r.port2.postMessage(0)}}else"document"in l&&"onreadystatechange"in l.document.createElement("script")?f=function(){var E=l.document.createElement("script");E.onreadystatechange=function(){h(),E.onreadystatechange=null,E.parentNode.removeChild(E),E=null},l.document.documentElement.appendChild(E)}:f=function(){setTimeout(h,0)};var o,c=[];function h(){o=!0;for(var E,S,O=c.length;O;){for(S=c,c=[],E=-1;++E<O;)S[E]();O=c.length}o=!1}i.exports=m;function m(E){c.push(E)===1&&!o&&f()}}).call(this,typeof Ce!="undefined"?Ce:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(t,i,a){var l=t(1);function d(){}var f={},u=["REJECTED"],g=["FULFILLED"],v=["PENDING"];i.exports=r;function r(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,b!==d&&m(this,b)}r.prototype.catch=function(b){return this.then(null,b)},r.prototype.then=function(b,x){if(typeof b!="function"&&this.state===g||typeof x!="function"&&this.state===u)return this;var T=new this.constructor(d);if(this.state!==v){var L=this.state===g?b:x;c(T,L,this.outcome)}else this.queue.push(new o(T,b,x));return T};function o(b,x,T){this.promise=b,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}o.prototype.callFulfilled=function(b){f.resolve(this.promise,b)},o.prototype.otherCallFulfilled=function(b){c(this.promise,this.onFulfilled,b)},o.prototype.callRejected=function(b){f.reject(this.promise,b)},o.prototype.otherCallRejected=function(b){c(this.promise,this.onRejected,b)};function c(b,x,T){l(function(){var L;try{L=x(T)}catch(j){return f.reject(b,j)}L===b?f.reject(b,new TypeError("Cannot resolve promise with itself")):f.resolve(b,L)})}f.resolve=function(b,x){var T=E(h,x);if(T.status==="error")return f.reject(b,T.value);var L=T.value;if(L)m(b,L);else{b.state=g,b.outcome=x;for(var j=-1,D=b.queue.length;++j<D;)b.queue[j].callFulfilled(x)}return b},f.reject=function(b,x){b.state=u,b.outcome=x;for(var T=-1,L=b.queue.length;++T<L;)b.queue[T].callRejected(x);return b};function h(b){var x=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof x=="function")return function(){x.apply(b,arguments)}}function m(b,x){var T=!1;function L(W){T||(T=!0,f.reject(b,W))}function j(W){T||(T=!0,f.resolve(b,W))}function D(){x(j,L)}var B=E(D);B.status==="error"&&L(B.value)}function E(b,x){var T={};try{T.value=b(x),T.status="success"}catch(L){T.status="error",T.value=L}return T}r.resolve=S;function S(b){return b instanceof this?b:f.resolve(new this(d),b)}r.reject=O;function O(b){var x=new this(d);return f.reject(x,b)}r.all=y;function y(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,L=!1;if(!T)return this.resolve([]);for(var j=new Array(T),D=0,B=-1,W=new this(d);++B<T;)X(b[B],B);return W;function X(ee,re){x.resolve(ee).then(ce,function(_e){L||(L=!0,f.reject(W,_e))});function ce(_e){j[re]=_e,++D===T&&!L&&(L=!0,f.resolve(W,j))}}}r.race=C;function C(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,L=!1;if(!T)return this.resolve([]);for(var j=-1,D=new this(d);++j<T;)B(b[j]);return D;function B(W){x.resolve(W).then(function(X){L||(L=!0,f.resolve(D,X))},function(X){L||(L=!0,f.reject(D,X))})}}},{"1":1}],3:[function(t,i,a){(function(l){typeof l.Promise!="function"&&(l.Promise=t(2))}).call(this,typeof Ce!="undefined"?Ce:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(t,i,a){var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function d(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var u=f();function g(){try{if(!u||!u.open)return!1;var w=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!w||R)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function v(w,R){w=w||[],R=R||{};try{return new Blob(w,R)}catch(N){if(N.name!=="TypeError")throw N;for(var A=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,M=new A,F=0;F<w.length;F+=1)M.append(w[F]);return M.getBlob(R.type)}}typeof Promise=="undefined"&&t(3);var r=Promise;function o(w,R){R&&w.then(function(A){R(null,A)},function(A){R(A)})}function c(w,R,A){typeof R=="function"&&w.then(R),typeof A=="function"&&w.catch(A)}function h(w){return typeof w!="string"&&(console.warn(w+" used as a key, but it is not a string."),w=String(w)),w}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var E="local-forage-detect-blob-support",S=void 0,O={},y=Object.prototype.toString,C="readonly",b="readwrite";function x(w){for(var R=w.length,A=new ArrayBuffer(R),M=new Uint8Array(A),F=0;F<R;F++)M[F]=w.charCodeAt(F);return A}function T(w){return new r(function(R){var A=w.transaction(E,b),M=v([""]);A.objectStore(E).put(M,"key"),A.onabort=function(F){F.preventDefault(),F.stopPropagation(),R(!1)},A.oncomplete=function(){var F=navigator.userAgent.match(/Chrome\/(\d+)/),N=navigator.userAgent.match(/Edge\//);R(N||!F||parseInt(F[1],10)>=43)}}).catch(function(){return!1})}function L(w){return typeof S=="boolean"?r.resolve(S):T(w).then(function(R){return S=R,S})}function j(w){var R=O[w.name],A={};A.promise=new r(function(M,F){A.resolve=M,A.reject=F}),R.deferredOperations.push(A),R.dbReady?R.dbReady=R.dbReady.then(function(){return A.promise}):R.dbReady=A.promise}function D(w){var R=O[w.name],A=R.deferredOperations.pop();if(A)return A.resolve(),A.promise}function B(w,R){var A=O[w.name],M=A.deferredOperations.pop();if(M)return M.reject(R),M.promise}function W(w,R){return new r(function(A,M){if(O[w.name]=O[w.name]||Ge(),w.db)if(R)j(w),w.db.close();else return A(w.db);var F=[w.name];R&&F.push(w.version);var N=u.open.apply(u,F);R&&(N.onupgradeneeded=function($){var q=N.result;try{q.createObjectStore(w.storeName),$.oldVersion<=1&&q.createObjectStore(E)}catch(Y){if(Y.name==="ConstraintError")console.warn('The database "'+w.name+'" has been upgraded from version '+$.oldVersion+" to version "+$.newVersion+', but the storage "'+w.storeName+'" already exists.');else throw Y}}),N.onerror=function($){$.preventDefault(),M(N.error)},N.onsuccess=function(){var $=N.result;$.onversionchange=function(q){q.target.close()},A($),D(w)}})}function X(w){return W(w,!1)}function ee(w){return W(w,!0)}function re(w,R){if(!w.db)return!0;var A=!w.db.objectStoreNames.contains(w.storeName),M=w.version<w.db.version,F=w.version>w.db.version;if(M&&(w.version!==R&&console.warn('The database "'+w.name+`" can't be downgraded from version `+w.db.version+" to version "+w.version+"."),w.version=w.db.version),F||A){if(A){var N=w.db.version+1;N>w.version&&(w.version=N)}return!0}return!1}function ce(w){return new r(function(R,A){var M=new FileReader;M.onerror=A,M.onloadend=function(F){var N=btoa(F.target.result||"");R({__local_forage_encoded_blob:!0,data:N,type:w.type})},M.readAsBinaryString(w)})}function _e(w){var R=x(atob(w.data));return v([R],{type:w.type})}function Ie(w){return w&&w.__local_forage_encoded_blob}function ne(w){var R=this,A=R._initReady().then(function(){var M=O[R._dbInfo.name];if(M&&M.dbReady)return M.dbReady});return c(A,w,w),A}function _t(w){j(w);for(var R=O[w.name],A=R.forages,M=0;M<A.length;M++){var F=A[M];F._dbInfo.db&&(F._dbInfo.db.close(),F._dbInfo.db=null)}return w.db=null,X(w).then(function(N){return w.db=N,re(w)?ee(w):N}).then(function(N){w.db=R.db=N;for(var $=0;$<A.length;$++)A[$]._dbInfo.db=N}).catch(function(N){throw B(w,N),N})}function ve(w,R,A,M){M===void 0&&(M=1);try{var F=w.db.transaction(w.storeName,R);A(null,F)}catch(N){if(M>0&&(!w.db||N.name==="InvalidStateError"||N.name==="NotFoundError"))return r.resolve().then(function(){if(!w.db||N.name==="NotFoundError"&&!w.db.objectStoreNames.contains(w.storeName)&&w.version<=w.db.version)return w.db&&(w.version=w.db.version+1),ee(w)}).then(function(){return _t(w).then(function(){ve(w,R,A,M-1)})}).catch(A);A(N)}}function Ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ye(w){var R=this,A={db:null};if(w)for(var M in w)A[M]=w[M];var F=O[A.name];F||(F=Ge(),O[A.name]=F),F.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=ne);var N=[];function $(){return r.resolve()}for(var q=0;q<F.forages.length;q++){var Y=F.forages[q];Y!==R&&N.push(Y._initReady().catch($))}var J=F.forages.slice(0);return r.all(N).then(function(){return A.db=F.db,X(A)}).then(function(K){return A.db=K,re(A,R._defaultConfig.version)?ee(A):K}).then(function(K){A.db=F.db=K,R._dbInfo=A;for(var Z=0;Z<J.length;Z++){var le=J[Z];le!==R&&(le._dbInfo.db=A.db,le._dbInfo.version=A.version)}})}function de(w,R){var A=this;w=h(w);var M=new r(function(F,N){A.ready().then(function(){ve(A._dbInfo,C,function($,q){if($)return N($);try{var Y=q.objectStore(A._dbInfo.storeName),J=Y.get(w);J.onsuccess=function(){var K=J.result;K===void 0&&(K=null),Ie(K)&&(K=_e(K)),F(K)},J.onerror=function(){N(J.error)}}catch(K){N(K)}})}).catch(N)});return o(M,R),M}function Fe(w,R){var A=this,M=new r(function(F,N){A.ready().then(function(){ve(A._dbInfo,C,function($,q){if($)return N($);try{var Y=q.objectStore(A._dbInfo.storeName),J=Y.openCursor(),K=1;J.onsuccess=function(){var Z=J.result;if(Z){var le=Z.value;Ie(le)&&(le=_e(le));var he=w(le,Z.key,K++);he!==void 0?F(he):Z.continue()}else F()},J.onerror=function(){N(J.error)}}catch(Z){N(Z)}})}).catch(N)});return o(M,R),M}function Je(w,R,A){var M=this;w=h(w);var F=new r(function(N,$){var q;M.ready().then(function(){return q=M._dbInfo,y.call(R)==="[object Blob]"?L(q.db).then(function(Y){return Y?R:ce(R)}):R}).then(function(Y){ve(M._dbInfo,b,function(J,K){if(J)return $(J);try{var Z=K.objectStore(M._dbInfo.storeName);Y===null&&(Y=void 0);var le=Z.put(Y,w);K.oncomplete=function(){Y===void 0&&(Y=null),N(Y)},K.onabort=K.onerror=function(){var he=le.error?le.error:le.transaction.error;$(he)}}catch(he){$(he)}})}).catch($)});return o(F,A),F}function Xe(w,R){var A=this;w=h(w);var M=new r(function(F,N){A.ready().then(function(){ve(A._dbInfo,b,function($,q){if($)return N($);try{var Y=q.objectStore(A._dbInfo.storeName),J=Y.delete(w);q.oncomplete=function(){F()},q.onerror=function(){N(J.error)},q.onabort=function(){var K=J.error?J.error:J.transaction.error;N(K)}}catch(K){N(K)}})}).catch(N)});return o(M,R),M}function Tt(w){var R=this,A=new r(function(M,F){R.ready().then(function(){ve(R._dbInfo,b,function(N,$){if(N)return F(N);try{var q=$.objectStore(R._dbInfo.storeName),Y=q.clear();$.oncomplete=function(){M()},$.onabort=$.onerror=function(){var J=Y.error?Y.error:Y.transaction.error;F(J)}}catch(J){F(J)}})}).catch(F)});return o(A,w),A}function ot(w){var R=this,A=new r(function(M,F){R.ready().then(function(){ve(R._dbInfo,C,function(N,$){if(N)return F(N);try{var q=$.objectStore(R._dbInfo.storeName),Y=q.count();Y.onsuccess=function(){M(Y.result)},Y.onerror=function(){F(Y.error)}}catch(J){F(J)}})}).catch(F)});return o(A,w),A}function at(w,R){var A=this,M=new r(function(F,N){if(w<0){F(null);return}A.ready().then(function(){ve(A._dbInfo,C,function($,q){if($)return N($);try{var Y=q.objectStore(A._dbInfo.storeName),J=!1,K=Y.openKeyCursor();K.onsuccess=function(){var Z=K.result;if(!Z){F(null);return}w===0||J?F(Z.key):(J=!0,Z.advance(w))},K.onerror=function(){N(K.error)}}catch(Z){N(Z)}})}).catch(N)});return o(M,R),M}function xt(w){var R=this,A=new r(function(M,F){R.ready().then(function(){ve(R._dbInfo,C,function(N,$){if(N)return F(N);try{var q=$.objectStore(R._dbInfo.storeName),Y=q.openKeyCursor(),J=[];Y.onsuccess=function(){var K=Y.result;if(!K){M(J);return}J.push(K.key),K.continue()},Y.onerror=function(){F(Y.error)}}catch(K){F(K)}})}).catch(F)});return o(A,w),A}function Ke(w,R){R=m.apply(this,arguments);var A=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||A.name,w.storeName=w.storeName||A.storeName);var M=this,F;if(!w.name)F=r.reject("Invalid arguments");else{var N=w.name===A.name&&M._dbInfo.db,$=N?r.resolve(M._dbInfo.db):X(w).then(function(q){var Y=O[w.name],J=Y.forages;Y.db=q;for(var K=0;K<J.length;K++)J[K]._dbInfo.db=q;return q});w.storeName?F=$.then(function(q){if(!!q.objectStoreNames.contains(w.storeName)){var Y=q.version+1;j(w);var J=O[w.name],K=J.forages;q.close();for(var Z=0;Z<K.length;Z++){var le=K[Z];le._dbInfo.db=null,le._dbInfo.version=Y}var he=new r(function(pe,Ae){var be=u.open(w.name,Y);be.onerror=function(He){var rn=be.result;rn.close(),Ae(He)},be.onupgradeneeded=function(){var He=be.result;He.deleteObjectStore(w.storeName)},be.onsuccess=function(){var He=be.result;He.close(),pe(He)}});return he.then(function(pe){J.db=pe;for(var Ae=0;Ae<K.length;Ae++){var be=K[Ae];be._dbInfo.db=pe,D(be._dbInfo)}}).catch(function(pe){throw(B(w,pe)||r.resolve()).catch(function(){}),pe})}}):F=$.then(function(q){j(w);var Y=O[w.name],J=Y.forages;q.close();for(var K=0;K<J.length;K++){var Z=J[K];Z._dbInfo.db=null}var le=new r(function(he,pe){var Ae=u.deleteDatabase(w.name);Ae.onerror=function(){var be=Ae.result;be&&be.close(),pe(Ae.error)},Ae.onblocked=function(){console.warn('dropInstance blocked for database "'+w.name+'" until all open connections are closed')},Ae.onsuccess=function(){var be=Ae.result;be&&be.close(),he(be)}});return le.then(function(he){Y.db=he;for(var pe=0;pe<J.length;pe++){var Ae=J[pe];D(Ae._dbInfo)}}).catch(function(he){throw(B(w,he)||r.resolve()).catch(function(){}),he})})}return o(F,R),F}var Ue={_driver:"asyncStorage",_initStorage:ye,_support:g(),iterate:Fe,getItem:de,setItem:Je,removeItem:Xe,clear:Tt,length:ot,key:at,keys:xt,dropInstance:Ke};function Pe(){return typeof openDatabase=="function"}var P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H="~~local_forage_type~",G=/^~~local_forage_type~([^~]+)~/,z="__lfsc__:",k=z.length,s="arbf",p="blob",_="si08",I="ui08",U="uic8",V="si16",Q="si32",oe="ur16",ge="ui32",ae="fl32",se="fl64",Ee=k+s.length,ze=Object.prototype.toString;function lt(w){var R=w.length*.75,A=w.length,M,F=0,N,$,q,Y;w[w.length-1]==="="&&(R--,w[w.length-2]==="="&&R--);var J=new ArrayBuffer(R),K=new Uint8Array(J);for(M=0;M<A;M+=4)N=P.indexOf(w[M]),$=P.indexOf(w[M+1]),q=P.indexOf(w[M+2]),Y=P.indexOf(w[M+3]),K[F++]=N<<2|$>>4,K[F++]=($&15)<<4|q>>2,K[F++]=(q&3)<<6|Y&63;return J}function ct(w){var R=new Uint8Array(w),A="",M;for(M=0;M<R.length;M+=3)A+=P[R[M]>>2],A+=P[(R[M]&3)<<4|R[M+1]>>4],A+=P[(R[M+1]&15)<<2|R[M+2]>>6],A+=P[R[M+2]&63];return R.length%3==2?A=A.substring(0,A.length-1)+"=":R.length%3==1&&(A=A.substring(0,A.length-2)+"=="),A}function mt(w,R){var A="";if(w&&(A=ze.call(w)),w&&(A==="[object ArrayBuffer]"||w.buffer&&ze.call(w.buffer)==="[object ArrayBuffer]")){var M,F=z;w instanceof ArrayBuffer?(M=w,F+=s):(M=w.buffer,A==="[object Int8Array]"?F+=_:A==="[object Uint8Array]"?F+=I:A==="[object Uint8ClampedArray]"?F+=U:A==="[object Int16Array]"?F+=V:A==="[object Uint16Array]"?F+=oe:A==="[object Int32Array]"?F+=Q:A==="[object Uint32Array]"?F+=ge:A==="[object Float32Array]"?F+=ae:A==="[object Float64Array]"?F+=se:R(new Error("Failed to get type for BinaryArray"))),R(F+ct(M))}else if(A==="[object Blob]"){var N=new FileReader;N.onload=function(){var $=H+w.type+"~"+ct(this.result);R(z+p+$)},N.readAsArrayBuffer(w)}else try{R(JSON.stringify(w))}catch($){console.error("Couldn't convert value into a JSON string: ",w),R(null,$)}}function yt(w){if(w.substring(0,k)!==z)return JSON.parse(w);var R=w.substring(Ee),A=w.substring(k,Ee),M;if(A===p&&G.test(R)){var F=R.match(G);M=F[1],R=R.substring(F[0].length)}var N=lt(R);switch(A){case s:return N;case p:return v([N],{type:M});case _:return new Int8Array(N);case I:return new Uint8Array(N);case U:return new Uint8ClampedArray(N);case V:return new Int16Array(N);case oe:return new Uint16Array(N);case Q:return new Int32Array(N);case ge:return new Uint32Array(N);case ae:return new Float32Array(N);case se:return new Float64Array(N);default:throw new Error("Unkown type: "+A)}}var ur={serialize:mt,deserialize:yt,stringToBuffer:lt,bufferToString:ct};function Ai(w,R,A,M){w.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,M)}function Ao(w){var R=this,A={db:null};if(w)for(var M in w)A[M]=typeof w[M]!="string"?w[M].toString():w[M];var F=new r(function(N,$){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(q){return $(q)}A.db.transaction(function(q){Ai(q,A,function(){R._dbInfo=A,N()},function(Y,J){$(J)})},$)});return A.serializer=ur,F}function wt(w,R,A,M,F,N){w.executeSql(A,M,F,function($,q){q.code===q.SYNTAX_ERR?$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(Y,J){J.rows.length?N(Y,q):Ai(Y,R,function(){Y.executeSql(A,M,F,N)},N)},N):N($,q)},N)}function ko(w,R){var A=this;w=h(w);var M=new r(function(F,N){A.ready().then(function(){var $=A._dbInfo;$.db.transaction(function(q){wt(q,$,"SELECT * FROM "+$.storeName+" WHERE key = ? LIMIT 1",[w],function(Y,J){var K=J.rows.length?J.rows.item(0).value:null;K&&(K=$.serializer.deserialize(K)),F(K)},function(Y,J){N(J)})})}).catch(N)});return o(M,R),M}function Co(w,R){var A=this,M=new r(function(F,N){A.ready().then(function(){var $=A._dbInfo;$.db.transaction(function(q){wt(q,$,"SELECT * FROM "+$.storeName,[],function(Y,J){for(var K=J.rows,Z=K.length,le=0;le<Z;le++){var he=K.item(le),pe=he.value;if(pe&&(pe=$.serializer.deserialize(pe)),pe=w(pe,he.key,le+1),pe!==void 0){F(pe);return}}F()},function(Y,J){N(J)})})}).catch(N)});return o(M,R),M}function ki(w,R,A,M){var F=this;w=h(w);var N=new r(function($,q){F.ready().then(function(){R===void 0&&(R=null);var Y=R,J=F._dbInfo;J.serializer.serialize(R,function(K,Z){Z?q(Z):J.db.transaction(function(le){wt(le,J,"INSERT OR REPLACE INTO "+J.storeName+" (key, value) VALUES (?, ?)",[w,K],function(){$(Y)},function(he,pe){q(pe)})},function(le){if(le.code===le.QUOTA_ERR){if(M>0){$(ki.apply(F,[w,Y,A,M-1]));return}q(le)}})})}).catch(q)});return o(N,A),N}function To(w,R,A){return ki.apply(this,[w,R,A,1])}function xo(w,R){var A=this;w=h(w);var M=new r(function(F,N){A.ready().then(function(){var $=A._dbInfo;$.db.transaction(function(q){wt(q,$,"DELETE FROM "+$.storeName+" WHERE key = ?",[w],function(){F()},function(Y,J){N(J)})})}).catch(N)});return o(M,R),M}function Ro(w){var R=this,A=new r(function(M,F){R.ready().then(function(){var N=R._dbInfo;N.db.transaction(function($){wt($,N,"DELETE FROM "+N.storeName,[],function(){M()},function(q,Y){F(Y)})})}).catch(F)});return o(A,w),A}function Io(w){var R=this,A=new r(function(M,F){R.ready().then(function(){var N=R._dbInfo;N.db.transaction(function($){wt($,N,"SELECT COUNT(key) as c FROM "+N.storeName,[],function(q,Y){var J=Y.rows.item(0).c;M(J)},function(q,Y){F(Y)})})}).catch(F)});return o(A,w),A}function Do(w,R){var A=this,M=new r(function(F,N){A.ready().then(function(){var $=A._dbInfo;$.db.transaction(function(q){wt(q,$,"SELECT key FROM "+$.storeName+" WHERE id = ? LIMIT 1",[w+1],function(Y,J){var K=J.rows.length?J.rows.item(0).key:null;F(K)},function(Y,J){N(J)})})}).catch(N)});return o(M,R),M}function Oo(w){var R=this,A=new r(function(M,F){R.ready().then(function(){var N=R._dbInfo;N.db.transaction(function($){wt($,N,"SELECT key FROM "+N.storeName,[],function(q,Y){for(var J=[],K=0;K<Y.rows.length;K++)J.push(Y.rows.item(K).key);M(J)},function(q,Y){F(Y)})})}).catch(F)});return o(A,w),A}function Lo(w){return new r(function(R,A){w.transaction(function(M){M.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(F,N){for(var $=[],q=0;q<N.rows.length;q++)$.push(N.rows.item(q).name);R({db:w,storeNames:$})},function(F,N){A(N)})},function(M){A(M)})})}function No(w,R){R=m.apply(this,arguments);var A=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||A.name,w.storeName=w.storeName||A.storeName);var M=this,F;return w.name?F=new r(function(N){var $;w.name===A.name?$=M._dbInfo.db:$=openDatabase(w.name,"","",0),w.storeName?N({db:$,storeNames:[w.storeName]}):N(Lo($))}).then(function(N){return new r(function($,q){N.db.transaction(function(Y){function J(he){return new r(function(pe,Ae){Y.executeSql("DROP TABLE IF EXISTS "+he,[],function(){pe()},function(be,He){Ae(He)})})}for(var K=[],Z=0,le=N.storeNames.length;Z<le;Z++)K.push(J(N.storeNames[Z]));r.all(K).then(function(){$()}).catch(function(he){q(he)})},function(Y){q(Y)})})}):F=r.reject("Invalid arguments"),o(F,R),F}var Mo={_driver:"webSQLStorage",_initStorage:Ao,_support:Pe(),iterate:Co,getItem:ko,setItem:To,removeItem:xo,clear:Ro,length:Io,key:Do,keys:Oo,dropInstance:No};function Bo(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ci(w,R){var A=w.name+"/";return w.storeName!==R.storeName&&(A+=w.storeName+"/"),A}function Fo(){var w="_localforage_support_test";try{return localStorage.setItem(w,!0),localStorage.removeItem(w),!1}catch{return!0}}function Uo(){return!Fo()||localStorage.length>0}function Po(w){var R=this,A={};if(w)for(var M in w)A[M]=w[M];return A.keyPrefix=Ci(w,R._defaultConfig),Uo()?(R._dbInfo=A,A.serializer=ur,r.resolve()):r.reject()}function jo(w){var R=this,A=R.ready().then(function(){for(var M=R._dbInfo.keyPrefix,F=localStorage.length-1;F>=0;F--){var N=localStorage.key(F);N.indexOf(M)===0&&localStorage.removeItem(N)}});return o(A,w),A}function Vo(w,R){var A=this;w=h(w);var M=A.ready().then(function(){var F=A._dbInfo,N=localStorage.getItem(F.keyPrefix+w);return N&&(N=F.serializer.deserialize(N)),N});return o(M,R),M}function Ho(w,R){var A=this,M=A.ready().then(function(){for(var F=A._dbInfo,N=F.keyPrefix,$=N.length,q=localStorage.length,Y=1,J=0;J<q;J++){var K=localStorage.key(J);if(K.indexOf(N)===0){var Z=localStorage.getItem(K);if(Z&&(Z=F.serializer.deserialize(Z)),Z=w(Z,K.substring($),Y++),Z!==void 0)return Z}}});return o(M,R),M}function Wo(w,R){var A=this,M=A.ready().then(function(){var F=A._dbInfo,N;try{N=localStorage.key(w)}catch{N=null}return N&&(N=N.substring(F.keyPrefix.length)),N});return o(M,R),M}function $o(w){var R=this,A=R.ready().then(function(){for(var M=R._dbInfo,F=localStorage.length,N=[],$=0;$<F;$++){var q=localStorage.key($);q.indexOf(M.keyPrefix)===0&&N.push(q.substring(M.keyPrefix.length))}return N});return o(A,w),A}function qo(w){var R=this,A=R.keys().then(function(M){return M.length});return o(A,w),A}function Go(w,R){var A=this;w=h(w);var M=A.ready().then(function(){var F=A._dbInfo;localStorage.removeItem(F.keyPrefix+w)});return o(M,R),M}function Yo(w,R,A){var M=this;w=h(w);var F=M.ready().then(function(){R===void 0&&(R=null);var N=R;return new r(function($,q){var Y=M._dbInfo;Y.serializer.serialize(R,function(J,K){if(K)q(K);else try{localStorage.setItem(Y.keyPrefix+w,J),$(N)}catch(Z){(Z.name==="QuotaExceededError"||Z.name==="NS_ERROR_DOM_QUOTA_REACHED")&&q(Z),q(Z)}})})});return o(F,A),F}function Jo(w,R){if(R=m.apply(this,arguments),w=typeof w!="function"&&w||{},!w.name){var A=this.config();w.name=w.name||A.name,w.storeName=w.storeName||A.storeName}var M=this,F;return w.name?F=new r(function(N){w.storeName?N(Ci(w,M._defaultConfig)):N(w.name+"/")}).then(function(N){for(var $=localStorage.length-1;$>=0;$--){var q=localStorage.key($);q.indexOf(N)===0&&localStorage.removeItem(q)}}):F=r.reject("Invalid arguments"),o(F,R),F}var Xo={_driver:"localStorageWrapper",_initStorage:Po,_support:Bo(),iterate:Ho,getItem:Vo,setItem:Yo,removeItem:Go,clear:jo,length:qo,key:Wo,keys:$o,dropInstance:Jo},Ko=function(R,A){return R===A||typeof R=="number"&&typeof A=="number"&&isNaN(R)&&isNaN(A)},zo=function(R,A){for(var M=R.length,F=0;F<M;){if(Ko(R[F],A))return!0;F++}return!1},Ti=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},nn={},xi={},jt={INDEXEDDB:Ue,WEBSQL:Mo,LOCALSTORAGE:Xo},Qo=[jt.INDEXEDDB._driver,jt.WEBSQL._driver,jt.LOCALSTORAGE._driver],En=["dropInstance"],fr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(En),Zo={description:"",driver:Qo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ea(w,R){w[R]=function(){var A=arguments;return w.ready().then(function(){return w[R].apply(w,A)})}}function hr(){for(var w=1;w<arguments.length;w++){var R=arguments[w];if(R)for(var A in R)R.hasOwnProperty(A)&&(Ti(R[A])?arguments[0][A]=R[A].slice():arguments[0][A]=R[A])}return arguments[0]}var ta=function(){function w(R){d(this,w);for(var A in jt)if(jt.hasOwnProperty(A)){var M=jt[A],F=M._driver;this[A]=F,nn[F]||this.defineDriver(M)}this._defaultConfig=hr({},Zo),this._config=hr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return w.prototype.config=function(A){if((typeof A=="undefined"?"undefined":l(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var M in A){if(M==="storeName"&&(A[M]=A[M].replace(/\W/g,"_")),M==="version"&&typeof A[M]!="number")return new Error("Database version must be a number.");this._config[M]=A[M]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},w.prototype.defineDriver=function(A,M,F){var N=new r(function($,q){try{var Y=A._driver,J=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){q(J);return}for(var K=fr.concat("_initStorage"),Z=0,le=K.length;Z<le;Z++){var he=K[Z],pe=!zo(En,he);if((pe||A[he])&&typeof A[he]!="function"){q(J);return}}var Ae=function(){for(var rn=function(ia){return function(){var sa=new Error("Method "+ia+" is not implemented by the current driver"),Ri=r.reject(sa);return o(Ri,arguments[arguments.length-1]),Ri}},dr=0,ra=En.length;dr<ra;dr++){var pr=En[dr];A[pr]||(A[pr]=rn(pr))}};Ae();var be=function(rn){nn[Y]&&console.info("Redefining LocalForage driver: "+Y),nn[Y]=A,xi[Y]=rn,$()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(be,q):be(!!A._support):be(!0)}catch(He){q(He)}});return c(N,M,F),N},w.prototype.driver=function(){return this._driver||null},w.prototype.getDriver=function(A,M,F){var N=nn[A]?r.resolve(nn[A]):r.reject(new Error("Driver not found."));return c(N,M,F),N},w.prototype.getSerializer=function(A){var M=r.resolve(ur);return c(M,A),M},w.prototype.ready=function(A){var M=this,F=M._driverSet.then(function(){return M._ready===null&&(M._ready=M._initDriver()),M._ready});return c(F,A,A),F},w.prototype.setDriver=function(A,M,F){var N=this;Ti(A)||(A=[A]);var $=this._getSupportedDrivers(A);function q(){N._config.driver=N.driver()}function Y(Z){return N._extend(Z),q(),N._ready=N._initStorage(N._config),N._ready}function J(Z){return function(){var le=0;function he(){for(;le<Z.length;){var pe=Z[le];return le++,N._dbInfo=null,N._ready=null,N.getDriver(pe).then(Y).catch(he)}q();var Ae=new Error("No available storage method found.");return N._driverSet=r.reject(Ae),N._driverSet}return he()}}var K=this._driverSet!==null?this._driverSet.catch(function(){return r.resolve()}):r.resolve();return this._driverSet=K.then(function(){var Z=$[0];return N._dbInfo=null,N._ready=null,N.getDriver(Z).then(function(le){N._driver=le._driver,q(),N._wrapLibraryMethodsWithReady(),N._initDriver=J($)})}).catch(function(){q();var Z=new Error("No available storage method found.");return N._driverSet=r.reject(Z),N._driverSet}),c(this._driverSet,M,F),this._driverSet},w.prototype.supports=function(A){return!!xi[A]},w.prototype._extend=function(A){hr(this,A)},w.prototype._getSupportedDrivers=function(A){for(var M=[],F=0,N=A.length;F<N;F++){var $=A[F];this.supports($)&&M.push($)}return M},w.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,M=fr.length;A<M;A++)ea(this,fr[A])},w.prototype.createInstance=function(A){return new w(A)},w}(),na=new ta;i.exports=na},{"3":3}]},{},[4])(4)})})(So);var Gf=So.exports,cr,Ju=new Uint8Array(16);function Xu(){if(!cr&&(cr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cr(Ju)}var Ku=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zu(n){return typeof n=="string"&&Ku.test(n)}var Be=[];for(var Ei=0;Ei<256;++Ei)Be.push((Ei+256).toString(16).substr(1));function Qu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Be[n[e+0]]+Be[n[e+1]]+Be[n[e+2]]+Be[n[e+3]]+"-"+Be[n[e+4]]+Be[n[e+5]]+"-"+Be[n[e+6]]+Be[n[e+7]]+"-"+Be[n[e+8]]+Be[n[e+9]]+"-"+Be[n[e+10]]+Be[n[e+11]]+Be[n[e+12]]+Be[n[e+13]]+Be[n[e+14]]+Be[n[e+15]]).toLowerCase();if(!zu(t))throw TypeError("Stringified UUID is invalid");return t}function Yf(n,e,t){n=n||{};var i=n.random||(n.rng||Xu)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(var a=0;a<16;++a)e[t+a]=i[a];return e}return Qu(i)}var Eo={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function a(u,g,v){this.fn=u,this.context=g,this.once=v||!1}function l(u,g,v,r,o){if(typeof v!="function")throw new TypeError("The listener must be a function");var c=new a(v,r||u,o),h=t?t+g:g;return u._events[h]?u._events[h].fn?u._events[h]=[u._events[h],c]:u._events[h].push(c):(u._events[h]=c,u._eventsCount++),u}function d(u,g){--u._eventsCount==0?u._events=new i:delete u._events[g]}function f(){this._events=new i,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],v,r;if(this._eventsCount===0)return g;for(r in v=this._events)e.call(v,r)&&g.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(v)):g},f.prototype.listeners=function(g){var v=t?t+g:g,r=this._events[v];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,c=r.length,h=new Array(c);o<c;o++)h[o]=r[o].fn;return h},f.prototype.listenerCount=function(g){var v=t?t+g:g,r=this._events[v];return r?r.fn?1:r.length:0},f.prototype.emit=function(g,v,r,o,c,h){var m=t?t+g:g;if(!this._events[m])return!1;var E=this._events[m],S=arguments.length,O,y;if(E.fn){switch(E.once&&this.removeListener(g,E.fn,void 0,!0),S){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,r),!0;case 4:return E.fn.call(E.context,v,r,o),!0;case 5:return E.fn.call(E.context,v,r,o,c),!0;case 6:return E.fn.call(E.context,v,r,o,c,h),!0}for(y=1,O=new Array(S-1);y<S;y++)O[y-1]=arguments[y];E.fn.apply(E.context,O)}else{var C=E.length,b;for(y=0;y<C;y++)switch(E[y].once&&this.removeListener(g,E[y].fn,void 0,!0),S){case 1:E[y].fn.call(E[y].context);break;case 2:E[y].fn.call(E[y].context,v);break;case 3:E[y].fn.call(E[y].context,v,r);break;case 4:E[y].fn.call(E[y].context,v,r,o);break;default:if(!O)for(b=1,O=new Array(S-1);b<S;b++)O[b-1]=arguments[b];E[y].fn.apply(E[y].context,O)}}return!0},f.prototype.on=function(g,v,r){return l(this,g,v,r,!1)},f.prototype.once=function(g,v,r){return l(this,g,v,r,!0)},f.prototype.removeListener=function(g,v,r,o){var c=t?t+g:g;if(!this._events[c])return this;if(!v)return d(this,c),this;var h=this._events[c];if(h.fn)h.fn===v&&(!o||h.once)&&(!r||h.context===r)&&d(this,c);else{for(var m=0,E=[],S=h.length;m<S;m++)(h[m].fn!==v||o&&!h[m].once||r&&h[m].context!==r)&&E.push(h[m]);E.length?this._events[c]=E.length===1?E[0]:E:d(this,c)}return this},f.prototype.removeAllListeners=function(g){var v;return g?(v=t?t+g:g,this._events[v]&&d(this,v)):(this._events=new i,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=t,f.EventEmitter=f,n.exports=f})(Eo);var Jf=Eo.exports,Zu={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var o=this||t;if(r=parseFloat(r),o.ctx||v(),typeof r!="undefined"&&r>=0&&r<=1){if(o._volume=r,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var c=0;c<o._howls.length;c++)if(!o._howls[c]._webAudio)for(var h=o._howls[c]._getSoundIds(),m=0;m<h.length;m++){var E=o._howls[c]._soundById(h[m]);E&&E._node&&(E._node.volume=E._volume*r)}return o}return o._volume},mute:function(r){var o=this||t;o.ctx||v(),o._muted=r,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(r?0:o._volume,t.ctx.currentTime);for(var c=0;c<o._howls.length;c++)if(!o._howls[c]._webAudio)for(var h=o._howls[c]._getSoundIds(),m=0;m<h.length;m++){var E=o._howls[c]._soundById(h[m]);E&&E._node&&(E._node.muted=r?!0:E._muted)}return o},stop:function(){for(var r=this||t,o=0;o<r._howls.length;o++)r._howls[o].stop();return r},unload:function(){for(var r=this||t,o=r._howls.length-1;o>=0;o--)r._howls[o].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close!="undefined"&&(r.ctx.close(),r.ctx=null,v()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio!="undefined")try{var o=new Audio;typeof o.oncanplaythrough=="undefined"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var o=new Audio;o.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,o=null;try{o=typeof Audio!="undefined"?new Audio:null}catch{return r}if(!o||typeof o.canPlayType!="function")return r;var c=o.canPlayType("audio/mpeg;").replace(/^no$/,""),h=r._navigator?r._navigator.userAgent:"",m=h.match(/OPR\/([0-6].)/g),E=m&&parseInt(m[0].split("/")[1],10)<33,S=h.indexOf("Safari")!==-1&&h.indexOf("Chrome")===-1,O=h.match(/Version\/(.*?) /),y=S&&O&&parseInt(O[1],10)<15;return r._codecs={mp3:!!(!E&&(c||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!c,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var o=function(c){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var h=new Audio;h._unlocked=!0,r._releaseHtml5Audio(h)}catch{r.noAudio=!0;break}for(var m=0;m<r._howls.length;m++)if(!r._howls[m]._webAudio)for(var E=r._howls[m]._getSoundIds(),S=0;S<E.length;S++){var O=r._howls[m]._soundById(E[S]);O&&O._node&&!O._node._unlocked&&(O._node._unlocked=!0,O._node.load())}r._autoResume();var y=r.ctx.createBufferSource();y.buffer=r._scratchBuffer,y.connect(r.ctx.destination),typeof y.start=="undefined"?y.noteOn(0):y.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),y.onended=function(){y.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var C=0;C<r._howls.length;C++)r._howls[C]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise!="undefined"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var o=this||t;return r._unlocked&&o._html5AudioPool.push(r),o},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend=="undefined"||!t.usingWebAudio)){for(var o=0;o<r._howls.length;o++)if(r._howls[o]._webAudio){for(var c=0;c<r._howls[o]._sounds.length;c++)if(!r._howls[o]._sounds[c]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(!!r.autoSuspend){r._suspendTimer=null,r.state="suspending";var h=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(h,h)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume=="undefined"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var o=0;o<r._howls.length;o++)r._howls[o]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,i=function(r){var o=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(r)};i.prototype={init:function(r){var o=this;return t.ctx||v(),o._autoplay=r.autoplay||!1,o._format=typeof r.format!="string"?r.format:[r.format],o._html5=r.html5||!1,o._muted=r.mute||!1,o._loop=r.loop||!1,o._pool=r.pool||5,o._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,o._rate=r.rate||1,o._sprite=r.sprite||{},o._src=typeof r.src!="string"?r.src:[r.src],o._volume=r.volume!==void 0?r.volume:1,o._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=r.onend?[{fn:r.onend}]:[],o._onfade=r.onfade?[{fn:r.onfade}]:[],o._onload=r.onload?[{fn:r.onload}]:[],o._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],o._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],o._onpause=r.onpause?[{fn:r.onpause}]:[],o._onplay=r.onplay?[{fn:r.onplay}]:[],o._onstop=r.onstop?[{fn:r.onstop}]:[],o._onmute=r.onmute?[{fn:r.onmute}]:[],o._onvolume=r.onvolume?[{fn:r.onvolume}]:[],o._onrate=r.onrate?[{fn:r.onrate}]:[],o._onseek=r.onseek?[{fn:r.onseek}]:[],o._onunlock=r.onunlock?[{fn:r.onunlock}]:[],o._onresume=[],o._webAudio=t.usingWebAudio&&!o._html5,typeof t.ctx!="undefined"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var r=this,o=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var c=0;c<r._src.length;c++){var h,m;if(r._format&&r._format[c])h=r._format[c];else{if(m=r._src[c],typeof m!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}h=/^data:audio\/([^;,]+);/i.exec(m),h||(h=/\.([^.]+)$/.exec(m.split("?",1)[0])),h&&(h=h[1].toLowerCase())}if(h||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),h&&t.codecs(h)){o=r._src[c];break}}if(!o){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=o,r._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new a(r),r._webAudio&&d(r),r},play:function(r,o){var c=this,h=null;if(typeof r=="number")h=r,r=null;else{if(typeof r=="string"&&c._state==="loaded"&&!c._sprite[r])return null;if(typeof r=="undefined"&&(r="__default",!c._playLock)){for(var m=0,E=0;E<c._sounds.length;E++)c._sounds[E]._paused&&!c._sounds[E]._ended&&(m++,h=c._sounds[E]._id);m===1?r=null:h=null}}var S=h?c._soundById(h):c._inactiveSound();if(!S)return null;if(h&&!r&&(r=S._sprite||"__default"),c._state!=="loaded"){S._sprite=r,S._ended=!1;var O=S._id;return c._queue.push({event:"play",action:function(){c.play(O)}}),O}if(h&&!S._paused)return o||c._loadQueue("play"),S._id;c._webAudio&&t._autoResume();var y=Math.max(0,S._seek>0?S._seek:c._sprite[r][0]/1e3),C=Math.max(0,(c._sprite[r][0]+c._sprite[r][1])/1e3-y),b=C*1e3/Math.abs(S._rate),x=c._sprite[r][0]/1e3,T=(c._sprite[r][0]+c._sprite[r][1])/1e3;S._sprite=r,S._ended=!1;var L=function(){S._paused=!1,S._seek=y,S._start=x,S._stop=T,S._loop=!!(S._loop||c._sprite[r][2])};if(y>=T){c._ended(S);return}var j=S._node;if(c._webAudio){var D=function(){c._playLock=!1,L(),c._refreshBuffer(S);var ee=S._muted||c._muted?0:S._volume;j.gain.setValueAtTime(ee,t.ctx.currentTime),S._playStart=t.ctx.currentTime,typeof j.bufferSource.start=="undefined"?S._loop?j.bufferSource.noteGrainOn(0,y,86400):j.bufferSource.noteGrainOn(0,y,C):S._loop?j.bufferSource.start(0,y,86400):j.bufferSource.start(0,y,C),b!==1/0&&(c._endTimers[S._id]=setTimeout(c._ended.bind(c,S),b)),o||setTimeout(function(){c._emit("play",S._id),c._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?D():(c._playLock=!0,c.once("resume",D),c._clearTimer(S._id))}else{var B=function(){j.currentTime=y,j.muted=S._muted||c._muted||t._muted||j.muted,j.volume=S._volume*t.volume(),j.playbackRate=S._rate;try{var ee=j.play();if(ee&&typeof Promise!="undefined"&&(ee instanceof Promise||typeof ee.then=="function")?(c._playLock=!0,L(),ee.then(function(){c._playLock=!1,j._unlocked=!0,o?c._loadQueue():c._emit("play",S._id)}).catch(function(){c._playLock=!1,c._emit("playerror",S._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),S._ended=!0,S._paused=!0})):o||(c._playLock=!1,L(),c._emit("play",S._id)),j.playbackRate=S._rate,j.paused){c._emit("playerror",S._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||S._loop?c._endTimers[S._id]=setTimeout(c._ended.bind(c,S),b):(c._endTimers[S._id]=function(){c._ended(S),j.removeEventListener("ended",c._endTimers[S._id],!1)},j.addEventListener("ended",c._endTimers[S._id],!1))}catch(re){c._emit("playerror",S._id,re)}};j.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(j.src=c._src,j.load());var W=window&&window.ejecta||!j.readyState&&t._navigator.isCocoonJS;if(j.readyState>=3||W)B();else{c._playLock=!0,c._state="loading";var X=function(){c._state="loaded",B(),j.removeEventListener(t._canPlayEvent,X,!1)};j.addEventListener(t._canPlayEvent,X,!1),c._clearTimer(S._id)}}return S._id},pause:function(r){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(r)}}),o;for(var c=o._getSoundIds(r),h=0;h<c.length;h++){o._clearTimer(c[h]);var m=o._soundById(c[h]);if(m&&!m._paused&&(m._seek=o.seek(c[h]),m._rateSeek=0,m._paused=!0,o._stopFade(c[h]),m._node))if(o._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop=="undefined"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),o._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||o._emit("pause",m?m._id:null)}return o},stop:function(r,o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"stop",action:function(){c.stop(r)}}),c;for(var h=c._getSoundIds(r),m=0;m<h.length;m++){c._clearTimer(h[m]);var E=c._soundById(h[m]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,c._stopFade(h[m]),E._node&&(c._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop=="undefined"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),c._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&c._clearSound(E._node))),o||c._emit("stop",E._id))}return c},mute:function(r,o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"mute",action:function(){c.mute(r,o)}}),c;if(typeof o=="undefined")if(typeof r=="boolean")c._muted=r;else return c._muted;for(var h=c._getSoundIds(o),m=0;m<h.length;m++){var E=c._soundById(h[m]);E&&(E._muted=r,E._interval&&c._stopFade(E._id),c._webAudio&&E._node?E._node.gain.setValueAtTime(r?0:E._volume,t.ctx.currentTime):E._node&&(E._node.muted=t._muted?!0:r),c._emit("mute",E._id))}return c},volume:function(){var r=this,o=arguments,c,h;if(o.length===0)return r._volume;if(o.length===1||o.length===2&&typeof o[1]=="undefined"){var m=r._getSoundIds(),E=m.indexOf(o[0]);E>=0?h=parseInt(o[0],10):c=parseFloat(o[0])}else o.length>=2&&(c=parseFloat(o[0]),h=parseInt(o[1],10));var S;if(typeof c!="undefined"&&c>=0&&c<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;typeof h=="undefined"&&(r._volume=c),h=r._getSoundIds(h);for(var O=0;O<h.length;O++)S=r._soundById(h[O]),S&&(S._volume=c,o[2]||r._stopFade(h[O]),r._webAudio&&S._node&&!S._muted?S._node.gain.setValueAtTime(c,t.ctx.currentTime):S._node&&!S._muted&&(S._node.volume=c*t.volume()),r._emit("volume",S._id))}else return S=h?r._soundById(h):r._sounds[0],S?S._volume:0;return r},fade:function(r,o,c,h){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(r,o,c,h)}}),m;r=Math.min(Math.max(0,parseFloat(r)),1),o=Math.min(Math.max(0,parseFloat(o)),1),c=parseFloat(c),m.volume(r,h);for(var E=m._getSoundIds(h),S=0;S<E.length;S++){var O=m._soundById(E[S]);if(O){if(h||m._stopFade(E[S]),m._webAudio&&!O._muted){var y=t.ctx.currentTime,C=y+c/1e3;O._volume=r,O._node.gain.setValueAtTime(r,y),O._node.gain.linearRampToValueAtTime(o,C)}m._startFadeInterval(O,r,o,c,E[S],typeof h=="undefined")}}return m},_startFadeInterval:function(r,o,c,h,m,E){var S=this,O=o,y=c-o,C=Math.abs(y/.01),b=Math.max(4,C>0?h/C:h),x=Date.now();r._fadeTo=c,r._interval=setInterval(function(){var T=(Date.now()-x)/h;x=Date.now(),O+=y*T,O=Math.round(O*100)/100,y<0?O=Math.max(c,O):O=Math.min(c,O),S._webAudio?r._volume=O:S.volume(O,r._id,!0),E&&(S._volume=O),(c<o&&O<=c||c>o&&O>=c)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,S.volume(c,r._id),S._emit("fade",r._id))},b)},_stopFade:function(r){var o=this,c=o._soundById(r);return c&&c._interval&&(o._webAudio&&c._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(c._interval),c._interval=null,o.volume(c._fadeTo,r),c._fadeTo=null,o._emit("fade",r)),o},loop:function(){var r=this,o=arguments,c,h,m;if(o.length===0)return r._loop;if(o.length===1)if(typeof o[0]=="boolean")c=o[0],r._loop=c;else return m=r._soundById(parseInt(o[0],10)),m?m._loop:!1;else o.length===2&&(c=o[0],h=parseInt(o[1],10));for(var E=r._getSoundIds(h),S=0;S<E.length;S++)m=r._soundById(E[S]),m&&(m._loop=c,r._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=c,c&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,r.playing(E[S])&&(r.pause(E[S],!0),r.play(E[S],!0)))));return r},rate:function(){var r=this,o=arguments,c,h;if(o.length===0)h=r._sounds[0]._id;else if(o.length===1){var m=r._getSoundIds(),E=m.indexOf(o[0]);E>=0?h=parseInt(o[0],10):c=parseFloat(o[0])}else o.length===2&&(c=parseFloat(o[0]),h=parseInt(o[1],10));var S;if(typeof c=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;typeof h=="undefined"&&(r._rate=c),h=r._getSoundIds(h);for(var O=0;O<h.length;O++)if(S=r._soundById(h[O]),S){r.playing(h[O])&&(S._rateSeek=r.seek(h[O]),S._playStart=r._webAudio?t.ctx.currentTime:S._playStart),S._rate=c,r._webAudio&&S._node&&S._node.bufferSource?S._node.bufferSource.playbackRate.setValueAtTime(c,t.ctx.currentTime):S._node&&(S._node.playbackRate=c);var y=r.seek(h[O]),C=(r._sprite[S._sprite][0]+r._sprite[S._sprite][1])/1e3-y,b=C*1e3/Math.abs(S._rate);(r._endTimers[h[O]]||!S._paused)&&(r._clearTimer(h[O]),r._endTimers[h[O]]=setTimeout(r._ended.bind(r,S),b)),r._emit("rate",S._id)}}else return S=r._soundById(h),S?S._rate:r._rate;return r},seek:function(){var r=this,o=arguments,c,h;if(o.length===0)r._sounds.length&&(h=r._sounds[0]._id);else if(o.length===1){var m=r._getSoundIds(),E=m.indexOf(o[0]);E>=0?h=parseInt(o[0],10):r._sounds.length&&(h=r._sounds[0]._id,c=parseFloat(o[0]))}else o.length===2&&(c=parseFloat(o[0]),h=parseInt(o[1],10));if(typeof h=="undefined")return 0;if(typeof c=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,o)}}),r;var S=r._soundById(h);if(S)if(typeof c=="number"&&c>=0){var O=r.playing(h);O&&r.pause(h,!0),S._seek=c,S._ended=!1,r._clearTimer(h),!r._webAudio&&S._node&&!isNaN(S._node.duration)&&(S._node.currentTime=c);var y=function(){O&&r.play(h,!0),r._emit("seek",h)};if(O&&!r._webAudio){var C=function(){r._playLock?setTimeout(C,0):y()};setTimeout(C,0)}else y()}else if(r._webAudio){var b=r.playing(h)?t.ctx.currentTime-S._playStart:0,x=S._rateSeek?S._rateSeek-S._seek:0;return S._seek+(x+b*Math.abs(S._rate))}else return S._node.currentTime;return r},playing:function(r){var o=this;if(typeof r=="number"){var c=o._soundById(r);return c?!c._paused:!1}for(var h=0;h<o._sounds.length;h++)if(!o._sounds[h]._paused)return!0;return!1},duration:function(r){var o=this,c=o._duration,h=o._soundById(r);return h&&(c=o._sprite[h._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var r=this,o=r._sounds,c=0;c<o.length;c++)o[c]._paused||r.stop(o[c]._id),r._webAudio||(r._clearSound(o[c]._node),o[c]._node.removeEventListener("error",o[c]._errorFn,!1),o[c]._node.removeEventListener(t._canPlayEvent,o[c]._loadFn,!1),o[c]._node.removeEventListener("ended",o[c]._endFn,!1),t._releaseHtml5Audio(o[c]._node)),delete o[c]._node,r._clearTimer(o[c]._id);var h=t._howls.indexOf(r);h>=0&&t._howls.splice(h,1);var m=!0;for(c=0;c<t._howls.length;c++)if(t._howls[c]._src===r._src||r._src.indexOf(t._howls[c]._src)>=0){m=!1;break}return l&&m&&delete l[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,o,c,h){var m=this,E=m["_on"+r];return typeof o=="function"&&E.push(h?{id:c,fn:o,once:h}:{id:c,fn:o}),m},off:function(r,o,c){var h=this,m=h["_on"+r],E=0;if(typeof o=="number"&&(c=o,o=null),o||c)for(E=0;E<m.length;E++){var S=c===m[E].id;if(o===m[E].fn&&S||!o&&S){m.splice(E,1);break}}else if(r)h["_on"+r]=[];else{var O=Object.keys(h);for(E=0;E<O.length;E++)O[E].indexOf("_on")===0&&Array.isArray(h[O[E]])&&(h[O[E]]=[])}return h},once:function(r,o,c){var h=this;return h.on(r,o,c,1),h},_emit:function(r,o,c){for(var h=this,m=h["_on"+r],E=m.length-1;E>=0;E--)(!m[E].id||m[E].id===o||r==="load")&&(setTimeout(function(S){S.call(this,o,c)}.bind(h,m[E].fn),0),m[E].once&&h.off(r,m[E].fn,m[E].id));return h._loadQueue(r),h},_loadQueue:function(r){var o=this;if(o._queue.length>0){var c=o._queue[0];c.event===r&&(o._queue.shift(),o._loadQueue()),r||c.action()}return o},_ended:function(r){var o=this,c=r._sprite;if(!o._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(o._ended.bind(o,r),100),o;var h=!!(r._loop||o._sprite[c][2]);if(o._emit("end",r._id),!o._webAudio&&h&&o.stop(r._id,!0).play(r._id),o._webAudio&&h){o._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var m=(r._stop-r._start)*1e3/Math.abs(r._rate);o._endTimers[r._id]=setTimeout(o._ended.bind(o,r),m)}return o._webAudio&&!h&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,o._clearTimer(r._id),o._cleanBuffer(r._node),t._autoSuspend()),!o._webAudio&&!h&&o.stop(r._id,!0),o},_clearTimer:function(r){var o=this;if(o._endTimers[r]){if(typeof o._endTimers[r]!="function")clearTimeout(o._endTimers[r]);else{var c=o._soundById(r);c&&c._node&&c._node.removeEventListener("ended",o._endTimers[r],!1)}delete o._endTimers[r]}return o},_soundById:function(r){for(var o=this,c=0;c<o._sounds.length;c++)if(r===o._sounds[c]._id)return o._sounds[c];return null},_inactiveSound:function(){var r=this;r._drain();for(var o=0;o<r._sounds.length;o++)if(r._sounds[o]._ended)return r._sounds[o].reset();return new a(r)},_drain:function(){var r=this,o=r._pool,c=0,h=0;if(!(r._sounds.length<o)){for(h=0;h<r._sounds.length;h++)r._sounds[h]._ended&&c++;for(h=r._sounds.length-1;h>=0;h--){if(c<=o)return;r._sounds[h]._ended&&(r._webAudio&&r._sounds[h]._node&&r._sounds[h]._node.disconnect(0),r._sounds.splice(h,1),c--)}}},_getSoundIds:function(r){var o=this;if(typeof r=="undefined"){for(var c=[],h=0;h<o._sounds.length;h++)c.push(o._sounds[h]._id);return c}else return[r]},_refreshBuffer:function(r){var o=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=l[o._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),o},_cleanBuffer:function(r){var o=this,c=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),c))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,o},_clearSound:function(r){var o=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);o||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(r){this._parent=r,this.init()};a.prototype={init:function(){var r=this,o=r._parent;return r._muted=o._muted,r._loop=o._loop,r._volume=o._volume,r._rate=o._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,o._sounds.push(r),r.create(),r},create:function(){var r=this,o=r._parent,c=t._muted||r._muted||r._parent._muted?0:r._volume;return o._webAudio?(r._node=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(c,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=o._src,r._node.preload=o._preload===!0?"auto":o._preload,r._node.volume=c*t.volume(),r._node.load()),r},reset:function(){var r=this,o=r._parent;return r._muted=o._muted,r._loop=o._loop,r._volume=o._volume,r._rate=o._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,o=r._parent;o._duration=Math.ceil(r._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,o=r._parent;o._duration===1/0&&(o._duration=Math.ceil(r._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var l={},d=function(r){var o=r._src;if(l[o]){r._duration=l[o].duration,g(r);return}if(/^data:[^;]+;base64,/.test(o)){for(var c=atob(o.split(",")[1]),h=new Uint8Array(c.length),m=0;m<c.length;++m)h[m]=c.charCodeAt(m);u(h.buffer,r)}else{var E=new XMLHttpRequest;E.open(r._xhr.method,o,!0),E.withCredentials=r._xhr.withCredentials,E.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(S){E.setRequestHeader(S,r._xhr.headers[S])}),E.onload=function(){var S=(E.status+"")[0];if(S!=="0"&&S!=="2"&&S!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}u(E.response,r)},E.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete l[o],r.load())},f(E)}},f=function(r){try{r.send()}catch{r.onerror()}},u=function(r,o){var c=function(){o._emit("loaderror",null,"Decoding audio data failed.")},h=function(m){m&&o._sounds.length>0?(l[o._src]=m,g(o,m)):c()};typeof Promise!="undefined"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(h).catch(c):t.ctx.decodeAudioData(r,h,c)},g=function(r,o){o&&!r._duration&&(r._duration=o.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},v=function(){if(!!t.usingWebAudio){try{typeof AudioContext!="undefined"?t.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),o=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=o?parseInt(o[1],10):null;if(r&&c&&c<9){var h=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!h&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=i,typeof Ce!="undefined"?(Ce.HowlerGlobal=e,Ce.Howler=t,Ce.Howl=i,Ce.Sound=a):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var a=i._howls.length-1;a>=0;a--)i._howls[a].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(i=typeof i!="number"?l._pos[1]:i,a=typeof a!="number"?l._pos[2]:a,typeof t=="number")l._pos=[t,i,a],typeof l.ctx.listener.positionX!="undefined"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(t,i,a,l,d,f){var u=this;if(!u.ctx||!u.ctx.listener)return u;var g=u._orientation;if(i=typeof i!="number"?g[1]:i,a=typeof a!="number"?g[2]:a,l=typeof l!="number"?g[3]:l,d=typeof d!="number"?g[4]:d,f=typeof f!="number"?g[5]:f,typeof t=="number")u._orientation=[t,i,a,l,d,f],typeof u.ctx.listener.forwardX!="undefined"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(d,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,i,a,l,d,f);else return g;return u},Howl.prototype.init=function(t){return function(i){var a=this;return a._orientation=i.orientation||[1,0,0],a._stereo=i.stereo||null,a._pos=i.pos||null,a._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle!="undefined"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle!="undefined"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain!="undefined"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel!="undefined"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance!="undefined"?i.maxDistance:1e4,panningModel:typeof i.panningModel!="undefined"?i.panningModel:"HRTF",refDistance:typeof i.refDistance!="undefined"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor!="undefined"?i.rolloffFactor:1},a._onstereo=i.onstereo?[{fn:i.onstereo}]:[],a._onpos=i.onpos?[{fn:i.onpos}]:[],a._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(t,i)}}),a;var l=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof i=="undefined")if(typeof t=="number")a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var d=a._getSoundIds(i),f=0;f<d.length;f++){var u=a._soundById(d[f]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,l),l==="spatial"?typeof u._panner.positionX!="undefined"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",u._id);else return u._stereo}return a},Howl.prototype.pos=function(t,i,a,l){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"pos",action:function(){d.pos(t,i,a,l)}}),d;if(i=typeof i!="number"?0:i,a=typeof a!="number"?-.5:a,typeof l=="undefined")if(typeof t=="number")d._pos=[t,i,a];else return d._pos;for(var f=d._getSoundIds(l),u=0;u<f.length;u++){var g=d._soundById(f[u]);if(g)if(typeof t=="number")g._pos=[t,i,a],g._node&&((!g._panner||g._panner.pan)&&e(g,"spatial"),typeof g._panner.positionX!="undefined"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):g._panner.setPosition(t,i,a)),d._emit("pos",g._id);else return g._pos}return d},Howl.prototype.orientation=function(t,i,a,l){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"orientation",action:function(){d.orientation(t,i,a,l)}}),d;if(i=typeof i!="number"?d._orientation[1]:i,a=typeof a!="number"?d._orientation[2]:a,typeof l=="undefined")if(typeof t=="number")d._orientation=[t,i,a];else return d._orientation;for(var f=d._getSoundIds(l),u=0;u<f.length;u++){var g=d._soundById(f[u]);if(g)if(typeof t=="number")g._orientation=[t,i,a],g._node&&(g._panner||(g._pos||(g._pos=d._pos||[0,0,-.5]),e(g,"spatial")),typeof g._panner.orientationX!="undefined"?(g._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):g._panner.setOrientation(t,i,a)),d._emit("orientation",g._id);else return g._orientation}return d},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,a,l,d;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")a=i[0],typeof l=="undefined"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle!="undefined"?a.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle!="undefined"?a.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain!="undefined"?a.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel!="undefined"?a.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance!="undefined"?a.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof a.pannerAttr.refDistance!="undefined"?a.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor!="undefined"?a.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel!="undefined"?a.pannerAttr.panningModel:t._panningModel});else return d=t._soundById(parseInt(i[0],10)),d?d._pannerAttr:t._pannerAttr;else i.length===2&&(a=i[0],l=parseInt(i[1],10));for(var f=t._getSoundIds(l),u=0;u<f.length;u++)if(d=t._soundById(f[u]),d){var g=d._pannerAttr;g={coneInnerAngle:typeof a.coneInnerAngle!="undefined"?a.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle!="undefined"?a.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain!="undefined"?a.coneOuterGain:g.coneOuterGain,distanceModel:typeof a.distanceModel!="undefined"?a.distanceModel:g.distanceModel,maxDistance:typeof a.maxDistance!="undefined"?a.maxDistance:g.maxDistance,refDistance:typeof a.refDistance!="undefined"?a.refDistance:g.refDistance,rolloffFactor:typeof a.rolloffFactor!="undefined"?a.rolloffFactor:g.rolloffFactor,panningModel:typeof a.panningModel!="undefined"?a.panningModel:g.panningModel};var v=d._panner;v?(v.coneInnerAngle=g.coneInnerAngle,v.coneOuterAngle=g.coneOuterAngle,v.coneOuterGain=g.coneOuterGain,v.distanceModel=g.distanceModel,v.maxDistance=g.maxDistance,v.refDistance=g.refDistance,v.rolloffFactor=g.rolloffFactor,v.panningModel=g.panningModel):(d._pos||(d._pos=t._pos||[0,0,-.5]),e(d,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var i=this,a=i._parent;i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,t.call(this),i._stereo?a.stereo(i._stereo):i._pos&&a.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,a=i._parent;return i._orientation=a._orientation,i._stereo=a._stereo,i._pos=a._pos,i._pannerAttr=a._pannerAttr,i._stereo?a.stereo(i._stereo):i._pos?a.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,a._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX!="undefined"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX!="undefined"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(Zu);export{Of as $,Af as A,fa as B,Oa as C,sf as D,Ef as E,ya as F,af as G,lf as H,of as I,vt as J,vf as K,df as L,Vt as M,Sf as N,ba as O,mf as P,Nf as Q,Lf as R,Vf as S,rf as T,Wf as U,$f as V,Pi as W,Ff as X,xf as Y,Qt as Z,Cr as _,Sa as a,pf as a0,Mi as a1,bf as a2,uf as a3,Tf as a4,qf as a5,pn as a6,Hf as a7,Jf as a8,Gf as a9,Yf as aa,nf as ab,Zu as ac,gf as b,_f as c,wa as d,va as e,cf as f,Aa as g,wf as h,jf as i,Uf as j,ff as k,hf as l,Pf as m,yf as n,xa as o,Mf as p,Bf as q,Rf as r,ha as s,_r as t,Df as u,Ra as v,If as w,Vi as x,Cf as y,kf as z};
