import{L as F,a3 as M,a4 as N,C as W,O as B,a5 as k,S as K,i as X,s as Y,D as ue,e as _,t as ce,k as J,c as h,a as b,g as de,d as w,n as Z,b as g,Y as z,f as D,H as y,K as fe,E as me,F as we,G as ge,x as _e,u as he,I as $,U as ve}from"./vendor-7858be98.js";import{p as ee,a as te}from"./p2p-130d0134.js";import{_ as U,r as be}from"./singletons-e82519e2.js";const O=W(null);function se(){return{byId:{}}}function ye(e){return{id:e,name:"Unknown",team:1}}const ne=new F.EventEmitter,pe=M(O,e=>e?e.get():se()),Ae=M(pe,e=>e==null?void 0:e.byId[te()]);function G(){const e=B(O);return e?Promise.resolve(e):new Promise(t=>ne.once("state",t))}ee.on("room",e=>{const t=new N("users",e,se());t.on("update",()=>O.set(t)),ne.emit("state",t),O.set(t);const s=e.getPeer().getId();t.change(n=>{n.byId[s]||(n.byId[s]=ye(s))})});const ae=U(()=>import("./easy-d1c5d374.js"),[]),re=U(()=>import("./medium-73eb433f.js"),[]),oe=U(()=>import("./hard-ac810e77.js"),[]);async function Ie(e){switch(e){case I.Easy:return ae.then(({default:t})=>t);case I.Medium:return re.then(({default:t})=>t);case I.Hard:return oe.then(({default:t})=>t);default:return Promise.all([ae,re,oe]).then(([{default:t},{default:s},{default:n}])=>t.concat(s,n))}}async function j(e,t){return e.fromArray(await Ie(t)).unwrapOr("unknown")}const V=W(null),Ee=60;var I;(function(e){e.Easy="easy",e.Medium="medium",e.Hard="hard",e.All="all"})(I||(I={}));function ie(){return{seed:Date.now(),started:!1,words:I.Medium,turn:"",word:"",timer:0,team1:0,team2:0}}const le=new F.EventEmitter,Me=M(V,e=>(e==null?void 0:e.get())||ie());function E(){const e=B(V);return e?Promise.resolve(e):new Promise(t=>le.once("state",t))}async function Ue(){const[e,t]=await Promise.all([E(),G()]),s=e.get(),n=t.get(),a=new k(s.seed),r=await j(a,s.words);e.change(o=>{o.started=!0,o.turn=a.fromArray(Object.keys((n==null?void 0:n.byId)||{})).unwrapOr(te()),o.word=r,o.seed=a.nextInt()})}async function Ge(){const[e,t]=await Promise.all([E(),G()]),s=e.get(),n=t.get(),a=new k(s.seed),r=await j(a,s.words),o=Object.keys(n.byId).sort(),u=o.indexOf(s.turn),l=u===o.length-1?o[0]:o[u+1];e.change(d=>{d.word=r,d.seed=a.nextInt(),d.turn=l})}async function Re(){const e=await E(),t=e.get(),s=new k(t.seed),n=await j(s,t.words);e.change(a=>{a.word=n,a.seed=s.nextInt()}),xe()}async function Le(){const e=await E(),t=e.get(),s=new k(t.seed),n=await j(s,t.words);e.change(a=>{a.word=n,a.seed=s.nextInt()})}let x;async function xe(){if(x!=null)return;const e=await E();e.change(t=>{t.timer=Ee}),x=setInterval(()=>{e.change(t=>{t.timer>0?t.timer--:Se()})},1e3)}async function Se(){if(x==null)return;const[e,t]=await Promise.all([E(),G()]),s=e.get(),n=t.get(),a=n.byId[s.turn];e.change(r=>{a.team===1?r.team2++:r.team1++,r.timer=0}),clearInterval(x),x=null}ee.on("room",e=>{const t=new N("game",e,ie());t.on("update",()=>V.set(t)),le.emit("state",t),V.set(t)});const Ce=Pe;async function Pe(e,t){return be.goto(e,t,[])}function ke(e){let t,s,n,a,r,o,u,l,d,f,S,v,p,T,R;const A=e[4].default,c=ue(A,e,e[3],null);return{c(){t=_("div"),s=_("div"),n=_("div"),a=_("div"),r=_("button"),o=_("span"),u=ce("\xD7"),l=J(),d=_("div"),c&&c.c(),S=J(),v=_("div"),this.h()},l(i){t=h(i,"DIV",{class:!0});var m=b(t);s=h(m,"DIV",{class:!0});var L=b(s);n=h(L,"DIV",{class:!0});var P=b(n);a=h(P,"DIV",{class:!0});var C=b(a);r=h(C,"BUTTON",{class:!0});var H=b(r);o=h(H,"SPAN",{class:!0});var Q=b(o);u=de(Q,"\xD7"),Q.forEach(w),H.forEach(w),C.forEach(w),l=Z(P),d=h(P,"DIV",{class:!0});var q=b(d);c&&c.l(q),q.forEach(w),P.forEach(w),L.forEach(w),m.forEach(w),S=Z(i),v=h(i,"DIV",{class:!0}),b(v).forEach(w),this.h()},h(){g(o,"class","bg-transparent text-black h-6 w-6 text-2xl block outline-none focus:outline-none"),g(r,"class","p-1 ml-auto bg-transparent border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none"),g(a,"class","flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t"),g(d,"class","relative p-6 flex-auto"),g(n,"class","border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none"),g(s,"class",f="relative w-auto my-6 mx-auto max-w-"+e[1]),g(t,"class","overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"),z(t,"hidden",!e[0]),g(v,"class","opacity-25 fixed inset-0 z-40 bg-black"),z(v,"hidden",!e[0])},m(i,m){D(i,t,m),y(t,s),y(s,n),y(n,a),y(a,r),y(r,o),y(o,u),y(n,l),y(n,d),c&&c.m(d,null),D(i,S,m),D(i,v,m),p=!0,T||(R=fe(r,"click",e[2]),T=!0)},p(i,[m]){c&&c.p&&(!p||m&8)&&me(c,A,i,i[3],p?ge(A,i[3],m,null):we(i[3]),null),(!p||m&2&&f!==(f="relative w-auto my-6 mx-auto max-w-"+i[1]))&&g(s,"class",f),m&1&&z(t,"hidden",!i[0]),m&1&&z(v,"hidden",!i[0])},i(i){p||(_e(c,i),p=!0)},o(i){he(c,i),p=!1},d(i){i&&w(t),c&&c.d(i),i&&w(S),i&&w(v),T=!1,R()}}}function ze(e,t,s){let{$$slots:n={},$$scope:a}=t,{size:r="md"}=t,{show:o=!1}=t;function u(){s(0,o=!o)}return e.$$set=l=>{"size"in l&&s(1,r=l.size),"show"in l&&s(0,o=l.show),"$$scope"in l&&s(3,a=l.$$scope)},[o,r,u,a,n]}class He extends K{constructor(t){super();X(this,t,ze,ke,Y,{size:1,show:0})}}function De(e){let t;return{c(){t=_("img"),this.h()},l(s){t=h(s,"IMG",{class:!0,alt:!0}),this.h()},h(){g(t,"class","inline-block w-100"),g(t,"alt",e[0])},m(s,n){D(s,t,n),e[6](t)},p(s,[n]){n&1&&g(t,"alt",s[0])},i:$,o:$,d(s){s&&w(t),e[6](null)}}}function Oe(e,t,s){let{value:n}=t,{size:a=512}=t,r,o,u,l;function d(f){ve[f?"unshift":"push"](()=>{o=f,s(1,o)})}return e.$$set=f=>{"value"in f&&s(0,n=f.value),"size"in f&&s(2,a=f.size)},e.$$.update=()=>{e.$$.dirty&15&&o&&!r&&(s(4,u=n),s(5,l=a),s(3,r=new window.QRious({element:o,size:a,value:n}))),e.$$.dirty&25&&r&&u!==n&&(s(4,u=n),s(3,r.value=n,r)),e.$$.dirty&44&&r&&l!==a&&(s(5,l=a),s(3,r.size=a,r))},[n,o,a,r,u,l,d]}class Qe extends K{constructor(t){super();X(this,t,Oe,De,Y,{value:0,size:2})}}export{He as M,Qe as Q,I as W,Me as a,Ae as b,G as c,Ce as d,ye as e,xe as f,E as g,Le as h,Re as i,Ge as n,Ue as s,pe as u};
