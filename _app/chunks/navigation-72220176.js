import{L as t,_ as e,$ as s,C as n,O as o}from"./vendor-55b6b459.js";import{p as a,c as r,a as c}from"./p2p-2879b36c.js";import{r as m}from"./singletons-12a22614.js";const i=n(null);function u(t){return{id:t,name:r(t),team:1}}const d=new t.EventEmitter,b=e(i,(t=>t?t.get():{byId:{}})),g=e(b,(t=>t.byId[c()]));function l(){const t=o(i);return t?Promise.resolve(t):new Promise((t=>d.once("state",t)))}a.on("room",(t=>{const e=new s("users",t,{byId:{}});e.on("update",(()=>i.set(e))),d.emit("state",e),i.set(e);const n=t.getPeer().getId();e.change((t=>{t.byId[n]||(t.byId[n]=u(n))}))}));const p=n(null),f=new t.EventEmitter,v=e(p,(t=>(null==t?void 0:t.get())||{started:!1}));function w(){const t=o(p);return t?Promise.resolve(t):new Promise((t=>f.once("state",t)))}a.on("room",(t=>{const e=new s("game",t,{started:!1});e.on("update",(()=>p.set(e))),f.emit("state",e),p.set(e)}));const y=async function(t,e){return m.goto(t,e,[])};export{g as a,l as b,w as c,y as d,u as e,v as g,b as u};
