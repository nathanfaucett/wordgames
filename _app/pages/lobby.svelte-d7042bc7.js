import{S as ot,i as rt,s as nt,W as Qe,X as Ye,k as V,j as ge,E as it,d as r,n as C,m as ve,f as j,o as be,Y as Fe,x as ke,u as Ee,v as we,T as ut,A as ft,Z as mt,_ as ct,e as _,t as L,c as p,a as g,g as O,F as n,J as Le,b as c,N as ie,L as K,$ as Oe,a0 as ue,h as te,M as Je,K as Xe,a1 as Ke,Q as dt,a2 as ht,a3 as _t,a4 as Ze,R as pt}from"../chunks/vendor-cae1f2dc.js";import{L as gt,a as vt,s as bt,c as Re,g as kt}from"../chunks/util-76fa6028.js";import{b as ze}from"../chunks/paths-28a87002.js";import{M as xe,W as Ie,g as Et,a as et,Q as wt,u as It}from"../chunks/userId-656a8df8.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";const{document:Ve}=ct;function tt(t,e,l){const s=t.slice();return s[28]=e[l][0],s[6]=e[l][1],s[30]=l,s}function st(t,e,l){const s=t.slice();return s[31]=e[l],s}function lt(t){let e,l=t[31]+"",s,f;return{c(){e=_("option"),s=L(l),this.h()},l(i){e=p(i,"OPTION",{});var v=g(e);s=O(v,l),v.forEach(r),this.h()},h(){e.__value=f=Ie[t[31]],e.value=e.__value},m(i,v){j(i,e,v),n(e,s)},p:Le,d(i){i&&r(e)}}}function at(t,e){let l,s,f,i=e[30]+1+"",v,A,I=e[6].name+"",S,N,y,b,k,U,o,d,T,h,B,Y,W,E,q,x;return{key:t,first:null,c(){l=_("div"),s=_("div"),f=_("p"),v=L(i),A=L(" - "),S=L(I),N=V(),y=_("form"),b=_("div"),k=_("input"),d=V(),T=_("div"),h=_("input"),W=V(),E=_("hr"),this.h()},l($){l=p($,"DIV",{class:!0});var w=g(l);s=p(w,"DIV",{class:!0});var ee=g(s);f=p(ee,"P",{class:!0});var Z=g(f);v=O(Z,i),A=O(Z," - "),S=O(Z,I),Z.forEach(r),ee.forEach(r),N=C(w),y=p(w,"FORM",{class:!0});var G=g(y);b=p(G,"DIV",{class:!0});var F=g(b);k=p(F,"INPUT",{id:!0,name:!0,type:!0,class:!0}),F.forEach(r),d=C(G),T=p(G,"DIV",{class:!0});var u=g(T);h=p(u,"INPUT",{id:!0,name:!0,type:!0,class:!0}),u.forEach(r),G.forEach(r),w.forEach(r),W=C($),E=p($,"HR",{}),this.h()},h(){c(f,"class","text-2xl p-1 font-bold"),c(s,"class","flex-grow"),c(k,"id",U=`${e[28]}-team-1`),c(k,"name","team"),k.value="1",c(k,"type","radio"),c(k,"class","align-bottom"),k.checked=o=!e[6].team||e[6].team==="team1",c(b,"class","btn sm primary flex-1"),c(h,"id",B=`${e[28]}-team-2`),c(h,"name","team"),h.value="2",c(h,"type","radio"),c(h,"class","align-bottom"),h.checked=Y=e[6].team==="team2",c(T,"class","btn sm danger flex-1"),c(y,"class","flex-grow-0 flex flex-row"),c(l,"class","flex justify-between"),ie(l,"bg-gray-200",e[28]===e[5]),this.first=l},m($,w){j($,l,w),n(l,s),n(s,f),n(f,v),n(f,A),n(f,S),n(l,N),n(l,y),n(y,b),n(b,k),n(y,d),n(y,T),n(T,h),j($,W,w),j($,E,w),q||(x=[K(k,"click",Oe(e[22])),K(b,"click",function(){ue(e[12](e[28],e[6].team,"team1"))&&e[12](e[28],e[6].team,"team1").apply(this,arguments)}),K(h,"click",Oe(e[21])),K(T,"click",function(){ue(e[12](e[28],e[6].team,"team2"))&&e[12](e[28],e[6].team,"team2").apply(this,arguments)})],q=!0)},p($,w){e=$,w[0]&16&&i!==(i=e[30]+1+"")&&te(v,i),w[0]&16&&I!==(I=e[6].name+"")&&te(S,I),w[0]&16&&U!==(U=`${e[28]}-team-1`)&&c(k,"id",U),w[0]&16&&o!==(o=!e[6].team||e[6].team==="team1")&&(k.checked=o),w[0]&16&&B!==(B=`${e[28]}-team-2`)&&c(h,"id",B),w[0]&16&&Y!==(Y=e[6].team==="team2")&&(h.checked=Y),w[0]&48&&ie(l,"bg-gray-200",e[28]===e[5])},d($){$&&r(l),$&&r(W),$&&r(E),q=!1,Je(x)}}}function yt(t){var Ue;let e,l,s,f,i,v,A,I,S,N,y,b,k,U,o,d,T,h,B,Y,W,E,q,x,$=(((Ue=t[1][t[5]])==null?void 0:Ue.team)==="team1"?"Blue":"Red")+"",w,ee,Z,G,F,u,D,H,J,ye,X=[],Ce=new Map,fe,oe,me,z,Q,Te,ce,je,se,Se,$e,Ne,re=Object.keys(Ie),M=[];for(let a=0;a<re.length;a+=1)M[a]=lt(st(t,re,a));let de=t[4];const Be=a=>a[28]+a[6].team;for(let a=0;a<de.length;a+=1){let m=tt(t,de,a),R=Be(m);Ce.set(R,X[a]=at(R,m))}return{c(){e=_("h1"),l=L("Room Id "),s=L(t[0]),f=V(),i=_("div"),v=_("label"),A=L("Name"),I=V(),S=_("input"),N=V(),y=_("div"),b=_("label"),k=L("Words"),U=V(),o=_("select");for(let a=0;a<M.length;a+=1)M[a].c();d=V(),T=_("div"),h=_("button"),B=L("Share Game "),Y=L(t[0]),W=V(),E=_("div"),q=_("h2"),x=L("Teams (You are on "),w=L($),ee=L(")"),Z=V(),G=_("div"),F=_("div"),u=L(t[3]),D=V(),H=_("div"),J=L(t[15]),ye=V();for(let a=0;a<X.length;a+=1)X[a].c();fe=V(),oe=_("div"),me=V(),z=_("div"),Q=_("button"),Te=L("Start"),je=V(),se=_("button"),Se=L("Leave"),this.h()},l(a){e=p(a,"H1",{class:!0});var m=g(e);l=O(m,"Room Id "),s=O(m,t[0]),m.forEach(r),f=C(a),i=p(a,"DIV",{class:!0});var R=g(i);v=p(R,"LABEL",{for:!0});var P=g(v);A=O(P,"Name"),P.forEach(r),I=C(R),S=p(R,"INPUT",{class:!0}),R.forEach(r),N=C(a),y=p(a,"DIV",{});var le=g(y);b=p(le,"LABEL",{for:!0});var We=g(b);k=O(We,"Words"),We.forEach(r),U=C(le),o=p(le,"SELECT",{id:!0,class:!0});var Me=g(o);for(let ae=0;ae<M.length;ae+=1)M[ae].l(Me);Me.forEach(r),le.forEach(r),d=C(a),T=p(a,"DIV",{class:!0});var Ae=g(T);h=p(Ae,"BUTTON",{class:!0});var De=g(h);B=O(De,"Share Game "),Y=O(De,t[0]),De.forEach(r),Ae.forEach(r),W=C(a),E=p(a,"DIV",{class:!0});var ne=g(E);q=p(ne,"H2",{class:!0});var he=g(q);x=O(he,"Teams (You are on "),w=O(he,$),ee=O(he,")"),he.forEach(r),Z=C(ne),G=p(ne,"DIV",{class:!0});var _e=g(G);F=p(_e,"DIV",{class:!0});var Ge=g(F);u=O(Ge,t[3]),Ge.forEach(r),D=C(_e),H=p(_e,"DIV",{class:!0});var Pe=g(H);J=O(Pe,t[15]),Pe.forEach(r),_e.forEach(r),ye=C(ne);for(let ae=0;ae<X.length;ae+=1)X[ae].l(ne);ne.forEach(r),fe=C(a),oe=p(a,"DIV",{class:!0}),g(oe).forEach(r),me=C(a),z=p(a,"DIV",{class:!0});var pe=g(z);Q=p(pe,"BUTTON",{class:!0});var qe=g(Q);Te=O(qe,"Start"),qe.forEach(r),je=C(pe),se=p(pe,"BUTTON",{class:!0});var He=g(se);Se=O(He,"Leave"),He.forEach(r),pe.forEach(r),this.h()},h(){c(e,"class","text-center cursor-pointer"),c(v,"for","name"),c(S,"class","input"),c(i,"class","mt-2"),c(b,"for","words"),c(o,"id","words"),c(o,"class","input"),c(h,"class","btn md primary w-full mb-2"),c(T,"class","flex"),c(q,"class","text-center"),c(F,"class","btn md primary flex-1 text-center"),c(H,"class","btn md danger flex-1 text-center"),c(G,"class","mt-2 mb-2 flex justify-center"),c(E,"class","mt-2 mb-2"),c(oe,"class","flex-grow"),c(Q,"class","btn lg primary flex-1"),Q.disabled=ce=t[4].length<2||t[10],ie(Q,"bg-blue-100",t[4].length<2),ie(Q,"hover:bg-blue-500",t[4].length>1),c(se,"class","btn lg danger flex-1"),c(z,"class","flex justify-center")},m(a,m){j(a,e,m),n(e,l),n(e,s),j(a,f,m),j(a,i,m),n(i,v),n(v,A),n(i,I),n(i,S),Xe(S,t[2]),j(a,N,m),j(a,y,m),n(y,b),n(b,k),n(y,U),n(y,o);for(let R=0;R<M.length;R+=1)M[R].m(o,null);Ke(o,t[7]),j(a,d,m),j(a,T,m),n(T,h),n(h,B),n(h,Y),j(a,W,m),j(a,E,m),n(E,q),n(q,x),n(q,w),n(q,ee),n(E,Z),n(E,G),n(G,F),n(F,u),n(G,D),n(G,H),n(H,J),n(E,ye);for(let R=0;R<X.length;R+=1)X[R].m(E,null);j(a,fe,m),j(a,oe,m),j(a,me,m),j(a,z,m),n(z,Q),n(Q,Te),n(z,je),n(z,se),n(se,Se),$e||(Ne=[K(e,"click",t[23]),K(S,"input",t[24]),K(S,"input",function(){ue(t[14])&&t[14].apply(this,arguments)}),K(o,"change",Oe(function(){ue(t[13])&&t[13].apply(this,arguments)})),K(h,"click",t[16]),K(Q,"click",function(){ue(t[11])&&t[11].apply(this,arguments)}),K(se,"click",t[25])],$e=!0)},p(a,m){var R;if(t=a,m[0]&1&&te(s,t[0]),m[0]&4&&S.value!==t[2]&&Xe(S,t[2]),m&0){re=Object.keys(Ie);let P;for(P=0;P<re.length;P+=1){const le=st(t,re,P);M[P]?M[P].p(le,m):(M[P]=lt(le),M[P].c(),M[P].m(o,null))}for(;P<M.length;P+=1)M[P].d(1);M.length=re.length}m[0]&128&&Ke(o,t[7]),m[0]&1&&te(Y,t[0]),m[0]&34&&$!==($=(((R=t[1][t[5]])==null?void 0:R.team)==="team1"?"Blue":"Red")+"")&&te(w,$),m[0]&8&&te(u,t[3]),m[0]&32768&&te(J,t[15]),m[0]&4144&&(de=t[4],X=dt(X,m,Be,1,t,de,Ce,E,pt,at,null,tt)),m[0]&1040&&ce!==(ce=t[4].length<2||t[10])&&(Q.disabled=ce),m[0]&16&&ie(Q,"bg-blue-100",t[4].length<2),m[0]&16&&ie(Q,"hover:bg-blue-500",t[4].length>1)},d(a){a&&r(e),a&&r(f),a&&r(i),a&&r(N),a&&r(y),ht(M,a),a&&r(d),a&&r(T),a&&r(W),a&&r(E);for(let m=0;m<X.length;m+=1)X[m].d();a&&r(fe),a&&r(oe),a&&r(me),a&&r(z),$e=!1,Je(Ne)}}}function Tt(t){let e,l;return e=new wt({props:{value:location.href}}),{c(){ge(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,f){be(e,s,f),l=!0},p:Le,i(s){l||(ke(e.$$.fragment,s),l=!0)},o(s){Ee(e.$$.fragment,s),l=!1},d(s){we(e,s)}}}function jt(t){let e,l,s;return{c(){e=_("h2"),l=L("Room Id "),s=L(t[0]),this.h()},l(f){e=p(f,"H2",{slot:!0});var i=g(e);l=O(i,"Room Id "),s=O(i,t[0]),i.forEach(r),this.h()},h(){c(e,"slot","title")},m(f,i){j(f,e,i),n(e,l),n(e,s)},p(f,i){i[0]&1&&te(s,f[0])},d(f){f&&r(e)}}}function St(t){let e,l;return{c(){e=_("a"),l=L("Exit"),this.h()},l(s){e=p(s,"A",{href:!0,class:!0});var f=g(e);l=O(f,"Exit"),f.forEach(r),this.h()},h(){c(e,"href",`${ze}/`),c(e,"class","btn lg danger")},m(s,f){j(s,e,f),n(e,l)},p:Le,d(s){s&&r(e)}}}function $t(t){let e,l,s,f,i,v,A,I,S,N;Ve.title=e="Word Games!: Lobby "+t[0],s=new gt({props:{$$slots:{default:[yt]},$$scope:{ctx:t}}});function y(o){t[26](o)}let b={$$slots:{title:[jt],default:[Tt]},$$scope:{ctx:t}};t[8]!==void 0&&(b.show=t[8]),i=new xe({props:b}),Qe.push(()=>Ye(i,"show",y));function k(o){t[27](o)}let U={$$slots:{default:[St]},$$scope:{ctx:t}};return t[9]!==void 0&&(U.show=t[9]),I=new xe({props:U}),Qe.push(()=>Ye(I,"show",k)),{c(){l=V(),ge(s.$$.fragment),f=V(),ge(i.$$.fragment),A=V(),ge(I.$$.fragment)},l(o){it('[data-svelte="svelte-5lsgla"]',Ve.head).forEach(r),l=C(o),ve(s.$$.fragment,o),f=C(o),ve(i.$$.fragment,o),A=C(o),ve(I.$$.fragment,o)},m(o,d){j(o,l,d),be(s,o,d),j(o,f,d),be(i,o,d),j(o,A,d),be(I,o,d),N=!0},p(o,d){(!N||d[0]&1)&&e!==(e="Word Games!: Lobby "+o[0])&&(Ve.title=e);const T={};d[0]&65471|d[1]&8&&(T.$$scope={dirty:d,ctx:o}),s.$set(T);const h={};d[0]&1|d[1]&8&&(h.$$scope={dirty:d,ctx:o}),!v&&d[0]&256&&(v=!0,h.show=o[8],Fe(()=>v=!1)),i.$set(h);const B={};d[1]&8&&(B.$$scope={dirty:d,ctx:o}),!S&&d[0]&512&&(S=!0,B.show=o[9],Fe(()=>S=!1)),I.$set(B)},i(o){N||(ke(s.$$.fragment,o),ke(i.$$.fragment,o),ke(I.$$.fragment,o),N=!0)},o(o){Ee(s.$$.fragment,o),Ee(i.$$.fragment,o),Ee(I.$$.fragment,o),N=!1},d(o){o&&r(l),we(s,o),o&&r(f),we(i,o),o&&r(A),we(I,o)}}}const Bt=!1;function Ut(t){return{props:{roomId:t.page.query.get("room")}}}function Dt(t,e,l){let s,f,i,v,A,I,S,N,y,b;ut(t,It,u=>l(5,b=u));let{roomId:k}=e,U={},o=!1,d=Ie.Medium,T=Date.now(),h=!1,B=!1,Y=!1,W=`guest-${vt()}`,E;function q(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Re("Successful shared!","success")).catch(u=>Re(u.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Re("Successful Copied!","success"));else{const u=document.createElement("input");u.style.display="none",u.textContent=location.href,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u)}}ft(()=>{const u=[s.get("seed").on(D=>{l(18,T=D)}),s.get("started").on(D=>{l(17,o=D)}),s.get("words").on(D=>{l(7,d=D)}),s.get("users").on(async D=>{l(1,U=(await Promise.all(Object.entries(D).map(([H,J])=>J instanceof _t?J.then():J))).reduce((H,J)=>(H[J.id]=J,H),{}))})];return et().then(D=>{s.get("users").get(D).set({id:D,name:W,team:"team1"})}),()=>{u.forEach(D=>D())}});function x(u){Ze.call(this,t,u)}function $(u){Ze.call(this,t,u)}const w=()=>l(8,h=!0);function ee(){W=this.value,l(2,W)}const Z=()=>l(9,B=!0);function G(u){h=u,l(8,h)}function F(u){B=u,l(9,B)}return t.$$set=u=>{"roomId"in u&&l(0,k=u.roomId)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&l(20,s=Et.get("rooms").get(k)),t.$$.dirty[0]&1048608&&l(6,f=s.get("users").get(b)),t.$$.dirty[0]&131073&&o&&kt(`${ze}/game?room=${k}`),t.$$.dirty[0]&2&&l(4,i=Array.from(Object.entries(U)).sort(bt)),t.$$.dirty[0]&16&&l(3,v=i.filter(([u,D])=>!D.team||D.team==="team1").length),t.$$.dirty[0]&24&&l(15,A=i.length-v),t.$$.dirty[0]&68&&l(14,I=()=>{f.get("name").set(W)}),t.$$.dirty[0]&1048576&&l(13,S=u=>{s.get("words").set(u.currentTarget.value)}),t.$$.dirty[0]&1048576&&l(12,N=(u,D,H)=>()=>{D!==H&&s.get("users").get(u).get("team").set(H)}),t.$$.dirty[0]&1310722&&l(11,y=async()=>{const u=mt.fromSeed(T);s.get("turn").set(u.fromArray(Object.keys(U)).unwrapOr(await et())),s.get("started").set(!0),l(10,Y=!0)}),t.$$.dirty[0]&1572900&&b&&E!==b){const u=b;E&&s.get("users").get(E).set(null),s.get("users").get(u).set({id:u,name:W,team:"team1"}),l(19,E=u)}},[k,U,W,v,i,b,f,d,h,B,Y,y,N,S,I,A,q,o,T,E,s,x,$,w,ee,Z,G,F]}class Wt extends ot{constructor(e){super();rt(this,e,Dt,$t,nt,{roomId:0},null,[-1,-1])}}export{Wt as default,Ut as load,Bt as ssr};
