import{S as me,i as ce,s as de,t as T,g as j,f as h,h as q,J,d as i,ac as _e,W as pe,X as he,k as H,j as Z,E as Ie,n as P,m as z,o as K,Y as be,x,u as ee,v as te,T as Ee,A as Te,Z as je,l as ge,e as w,c as k,a as I,b as v,N as re,F as b,L as se,M as ve,a3 as De,a0 as ne}from"../chunks/vendor-b67a5828.js";import{b as F}from"../chunks/paths-28a87002.js";import{L as Se,s as Ve,g as Ne}from"../chunks/util-4018c1b0.js";import{M as ye,W as Me,g as $e,b as Le,Q as Re,u as We}from"../chunks/userId-de2be39f.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";function Oe(r){let t=le(r[0])+"",e,o,l=le(r[1])+"",s;return{c(){e=T(t),o=T(":"),s=T(l)},l(f){e=j(f,t),o=j(f,":"),s=j(f,l)},m(f,u){h(f,e,u),h(f,o,u),h(f,s,u)},p(f,[u]){u&1&&t!==(t=le(f[0])+"")&&q(e,t),u&2&&l!==(l=le(f[1])+"")&&q(s,l)},i:J,o:J,d(f){f&&i(e),f&&i(o),f&&i(s)}}}function le(r){return(r<10?"0":"")+r}function Ue(r,t,e){let o,l,{seconds:s=60}=t;return r.$$set=f=>{"seconds"in f&&e(2,s=f.seconds)},r.$$.update=()=>{r.$$.dirty&4&&e(0,o=Math.floor(s/60)),r.$$.dirty&5&&e(1,l=Math.floor(s-o*60))},[o,l,s]}class Be extends me{constructor(t){super();ce(this,t,Ue,Oe,de,{seconds:2})}}function Ge(r){var l;let t=((l=r[1][r[5]])==null?void 0:l.name)+"",e,o;return{c(){e=T(t),o=T("'s turn")},l(s){e=j(s,t),o=j(s,"'s turn")},m(s,f){h(s,e,f),h(s,o,f)},p(s,f){var u;f&34&&t!==(t=((u=s[1][s[5]])==null?void 0:u.name)+"")&&q(e,t)},d(s){s&&i(e),s&&i(o)}}}function He(r){var l;let t=((l=r[1][r[5]])==null?void 0:l.name)+"",e,o;return{c(){e=T(t),o=T(" and your Team's turn")},l(s){e=j(s,t),o=j(s," and your Team's turn")},m(s,f){h(s,e,f),h(s,o,f)},p(s,f){var u;f&34&&t!==(t=((u=s[1][s[5]])==null?void 0:u.name)+"")&&q(e,t)},d(s){s&&i(e),s&&i(o)}}}function Pe(r){let t;return{c(){t=T("Your Turn")},l(e){t=j(e,"Your Turn")},m(e,o){h(e,t,o)},p:J,d(e){e&&i(t)}}}function we(r){let t;function e(s,f){return s[4]?qe:Ae}let o=e(r),l=o(r);return{c(){l.c(),t=ge()},l(s){l.l(s),t=ge()},m(s,f){l.m(s,f),h(s,t,f)},p(s,f){o===(o=e(s))&&l?l.p(s,f):(l.d(1),l=o(s),l&&(l.c(),l.m(t.parentNode,t)))},d(s){l.d(s),s&&i(t)}}}function qe(r){let t,e,o,l,s,f,u,d,E,y,S,g,R,V;return{c(){t=w("div"),e=w("div"),o=w("p"),l=T(r[7]),s=H(),f=w("div"),u=w("div"),d=w("button"),E=T("Skip"),y=H(),S=w("button"),g=T("Next"),this.h()},l(n){t=k(n,"DIV",{class:!0});var c=I(t);e=k(c,"DIV",{class:!0});var N=I(e);o=k(N,"P",{class:!0});var W=I(o);l=j(W,r[7]),W.forEach(i),N.forEach(i),c.forEach(i),s=P(n),f=k(n,"DIV",{class:!0});var D=I(f);u=k(D,"DIV",{class:!0});var $=I(u);d=k($,"BUTTON",{class:!0});var G=I(d);E=j(G,"Skip"),G.forEach(i),y=P($),S=k($,"BUTTON",{class:!0});var L=I(S);g=j(L,"Next"),L.forEach(i),$.forEach(i),D.forEach(i),this.h()},h(){v(o,"class","text-6xl"),v(e,"class","text-center"),v(t,"class","flex-1 flex h-full justify-center items-center"),v(d,"class","btn lg danger flex-1"),v(S,"class","btn lg primary flex-1"),v(u,"class","flex flex-1 justify-center"),v(f,"class","flex-1")},m(n,c){h(n,t,c),b(t,e),b(e,o),b(o,l),h(n,s,c),h(n,f,c),b(f,u),b(u,d),b(d,E),b(u,y),b(u,S),b(S,g),R||(V=[se(d,"click",function(){ne(r[8])&&r[8].apply(this,arguments)}),se(S,"click",function(){ne(r[13])&&r[13].apply(this,arguments)})],R=!0)},p(n,c){r=n,c&128&&q(l,r[7])},d(n){n&&i(t),n&&i(s),n&&i(f),R=!1,ve(V)}}}function Ae(r){let t,e,o,l,s,f;return{c(){t=w("div"),e=w("div"),o=w("button"),l=T("Start"),this.h()},l(u){t=k(u,"DIV",{class:!0});var d=I(t);e=k(d,"DIV",{class:!0});var E=I(e);o=k(E,"BUTTON",{class:!0});var y=I(o);l=j(y,"Start"),y.forEach(i),E.forEach(i),d.forEach(i),this.h()},h(){v(o,"class","btn lg primary flex-1"),v(e,"class","flex justify-center"),v(t,"class","flex-1")},m(u,d){h(u,t,d),b(t,e),b(e,o),b(o,l),s||(f=se(o,"click",function(){ne(r[14])&&r[14].apply(this,arguments)}),s=!0)},p(u,d){r=u},d(u){u&&i(t),s=!1,f()}}}function Ce(r){let t,e,o,l,s,f,u,d,E,y,S,g,R,V,n,c,N,W,D,$,G,L,Q,A;function C(a,_){var p,m;return a[9]?Pe:((p=a[1][a[10]])==null?void 0:p.team)===((m=a[1][a[5]])==null?void 0:m.team)?He:Ge}let U=C(r),B=U(r);n=new Be({props:{seconds:r[6]}});let M=r[9]&&we(r);return{c(){t=w("h1"),e=T("Room Id "),o=T(r[0]),l=H(),s=w("div"),f=w("div"),u=T(r[2]),d=H(),E=w("div"),y=T(r[3]),S=H(),g=w("h1"),B.c(),R=H(),V=w("p"),Z(n.$$.fragment),c=H(),N=w("div"),M&&M.c(),W=H(),D=w("div"),$=w("button"),G=T("Leave"),this.h()},l(a){t=k(a,"H1",{class:!0});var _=I(t);e=j(_,"Room Id "),o=j(_,r[0]),_.forEach(i),l=P(a),s=k(a,"DIV",{class:!0});var p=I(s);f=k(p,"DIV",{class:!0});var m=I(f);u=j(m,r[2]),m.forEach(i),d=P(p),E=k(p,"DIV",{class:!0});var O=I(E);y=j(O,r[3]),O.forEach(i),p.forEach(i),S=P(a),g=k(a,"H1",{class:!0});var X=I(g);B.l(X),X.forEach(i),R=P(a),V=k(a,"P",{class:!0});var ae=I(V);z(n.$$.fragment,ae),ae.forEach(i),c=P(a),N=k(a,"DIV",{class:!0});var fe=I(N);M&&M.l(fe),fe.forEach(i),W=P(a),D=k(a,"DIV",{class:!0});var ie=I(D);$=k(ie,"BUTTON",{class:!0});var ue=I($);G=j(ue,"Leave"),ue.forEach(i),ie.forEach(i),this.h()},h(){var a,_;v(t,"class","text-center cursor-pointer"),v(f,"class","btn md primary flex-1 text-center"),v(E,"class","btn md danger flex-1 text-center"),v(s,"class","flex justify-center mt-2"),v(g,"class","text-center text-white rounded py-4 my-4"),re(g,"bg-blue-500",((a=r[1][r[10]])==null?void 0:a.team)==="team1"),re(g,"bg-red-500",((_=r[1][r[10]])==null?void 0:_.team)==="team2"),v(V,"class","text-2xl text-center"),v(N,"class","flex-grow flex flex-col justify-center"),v($,"class","btn lg danger flex-1"),v(D,"class","flex justify-center")},m(a,_){h(a,t,_),b(t,e),b(t,o),h(a,l,_),h(a,s,_),b(s,f),b(f,u),b(s,d),b(s,E),b(E,y),h(a,S,_),h(a,g,_),B.m(g,null),h(a,R,_),h(a,V,_),K(n,V,null),h(a,c,_),h(a,N,_),M&&M.m(N,null),h(a,W,_),h(a,D,_),b(D,$),b($,G),L=!0,Q||(A=[se(t,"click",r[24]),se($,"click",r[25])],Q=!0)},p(a,_){var m,O;(!L||_&1)&&q(o,a[0]),(!L||_&4)&&q(u,a[2]),(!L||_&8)&&q(y,a[3]),U===(U=C(a))&&B?B.p(a,_):(B.d(1),B=U(a),B&&(B.c(),B.m(g,null))),_&1026&&re(g,"bg-blue-500",((m=a[1][a[10]])==null?void 0:m.team)==="team1"),_&1026&&re(g,"bg-red-500",((O=a[1][a[10]])==null?void 0:O.team)==="team2");const p={};_&64&&(p.seconds=a[6]),n.$set(p),a[9]?M?M.p(a,_):(M=we(a),M.c(),M.m(N,null)):M&&(M.d(1),M=null)},i(a){L||(x(n.$$.fragment,a),L=!0)},o(a){ee(n.$$.fragment,a),L=!1},d(a){a&&i(t),a&&i(l),a&&i(s),a&&i(S),a&&i(g),B.d(),a&&i(R),a&&i(V),te(n),a&&i(c),a&&i(N),M&&M.d(),a&&i(W),a&&i(D),Q=!1,ve(A)}}}function Ye(r){let t,e;return t=new Re({props:{value:location.href}}),{c(){Z(t.$$.fragment)},l(o){z(t.$$.fragment,o)},m(o,l){K(t,o,l),e=!0},p:J,i(o){e||(x(t.$$.fragment,o),e=!0)},o(o){ee(t.$$.fragment,o),e=!1},d(o){te(t,o)}}}function Qe(r){let t,e,o;return{c(){t=w("h2"),e=T("Room Id "),o=T(r[0]),this.h()},l(l){t=k(l,"H2",{slot:!0});var s=I(t);e=j(s,"Room Id "),o=j(s,r[0]),s.forEach(i),this.h()},h(){v(t,"slot","title")},m(l,s){h(l,t,s),b(t,e),b(t,o)},p(l,s){s&1&&q(o,l[0])},d(l){l&&i(t)}}}function Fe(r){let t,e;return{c(){t=w("a"),e=T("Exit"),this.h()},l(o){t=k(o,"A",{href:!0,class:!0});var l=I(t);e=j(l,"Exit"),l.forEach(i),this.h()},h(){v(t,"href",`${F}/`),v(t,"class","btn lg danger")},m(o,l){h(o,t,l),b(t,e)},p:J,d(o){o&&i(t)}}}function Xe(r){let t,e,o,l,s,f,u,d,E,y;document.title=t="Word Games!: Playing Game in "+r[0],o=new Se({props:{$$slots:{default:[Ce]},$$scope:{ctx:r}}});function S(n){r[26](n)}let g={$$slots:{title:[Qe],default:[Ye]},$$scope:{ctx:r}};r[11]!==void 0&&(g.show=r[11]),s=new ye({props:g}),pe.push(()=>he(s,"show",S));function R(n){r[27](n)}let V={$$slots:{default:[Fe]},$$scope:{ctx:r}};return r[12]!==void 0&&(V.show=r[12]),d=new ye({props:V}),pe.push(()=>he(d,"show",R)),{c(){e=H(),Z(o.$$.fragment),l=H(),Z(s.$$.fragment),u=H(),Z(d.$$.fragment)},l(n){Ie('[data-svelte="svelte-3p3nw5"]',document.head).forEach(i),e=P(n),z(o.$$.fragment,n),l=P(n),z(s.$$.fragment,n),u=P(n),z(d.$$.fragment,n)},m(n,c){h(n,e,c),K(o,n,c),h(n,l,c),K(s,n,c),h(n,u,c),K(d,n,c),y=!0},p(n,[c]){(!y||c&1)&&t!==(t="Word Games!: Playing Game in "+n[0])&&(document.title=t);const N={};c&268468223&&(N.$$scope={dirty:c,ctx:n}),o.$set(N);const W={};c&268435457&&(W.$$scope={dirty:c,ctx:n}),!f&&c&2048&&(f=!0,W.show=n[11],be(()=>f=!1)),s.$set(W);const D={};c&268435456&&(D.$$scope={dirty:c,ctx:n}),!E&&c&4096&&(E=!0,D.show=n[12],be(()=>E=!1)),d.$set(D)},i(n){y||(x(o.$$.fragment,n),x(s.$$.fragment,n),x(d.$$.fragment,n),y=!0)},o(n){ee(o.$$.fragment,n),ee(s.$$.fragment,n),ee(d.$$.fragment,n),y=!1},d(n){n&&i(e),te(o,n),n&&i(l),te(s,n),n&&i(u),te(d,n)}}}const st=!1;function rt(r){return{props:{roomId:r.page.query.get("room")}}}const oe=30,ke=new _e.Howl({src:[`${F}/sounds/alarm-clock.mp3`,`${F}/sounds/alarm-clock.wav`]}),Y=new _e.Howl({src:[`${F}/sounds/ticking.mp3`,`${F}/sounds/ticking.wav`],loop:!0});function Je(r,t,e){let o,l,s,f,u,d,E,y,S,g;Ee(r,We,p=>e(23,g=p));let{roomId:R}=t,V={},n=Me.Medium,c=Date.now(),N=0,W=0,D=!0,$=!1,G="",L=0,Q="",A=!1,C=!1,U;Te(()=>{const p=[l.get("seed").on(m=>{e(16,c=m)}),l.get("started").on(m=>{e(17,D=m)}),l.get("playing").on(m=>{e(4,$=m)}),l.get("team1").on(m=>{e(2,N=m)}),l.get("team2").on(m=>{e(3,W=m)}),l.get("words").on(m=>{e(15,n=m)}),l.get("word").on(m=>{e(7,Q=m)}),l.get("turn").on(m=>{e(5,G=m)}),l.get("timer").on(m=>{e(6,L=m)}),l.get("users").on(async m=>{e(1,V=(await Promise.all(Object.values(m).map(O=>O instanceof De?O.then():O))).reduce((O,X)=>(O[X.id]=X,O),{}))})];return setTimeout(()=>{s.length<2&&e(17,D=!1)},3e3),()=>{Y.stop(),ke.stop(),p.forEach(m=>m())}});const B=()=>e(11,A=!0),M=()=>e(12,C=!0);function a(p){A=p,e(11,A)}function _(p){C=p,e(12,C)}return r.$$set=p=>{"roomId"in p&&e(0,R=p.roomId)},r.$$.update=()=>{r.$$.dirty&131073&&(D||Ne(`${F}/lobby?room=${R}`)),r.$$.dirty&8388608&&e(10,o=g),r.$$.dirty&1&&e(20,l=$e.get("rooms").get(R)),r.$$.dirty&2&&e(19,s=Array.from(Object.entries(V)).sort(Ve)),r.$$.dirty&1056&&e(9,f=G===o),r.$$.dirty&1310766&&e(21,S=()=>{if(U==null)return;V[G].team==="team1"?l.get("team2").set(W+1):l.get("team1").set(N+1),l.get("timer").set(0),l.get("playing").set(!1),clearInterval(U),e(18,U=void 0),e(4,$=!1),Y.stop(),ke.play()}),r.$$.dirty&3407936&&e(22,y=(p=oe)=>{U==null&&(e(18,U=setInterval(()=>{const m=L;if(m===0)S();else{const O=m-1;Y.rate(1+(1-O/oe)),l.get("timer").set(O)}},1e3)),Y.rate(1+(1-p/oe)),Y.playing()||Y.play(),l.get("timer").set(p))}),r.$$.dirty&4457040&&(f&&$?y(L===0?oe:L):U!=null&&(clearInterval(U),e(18,U=void 0))),r.$$.dirty&1146880&&e(8,d=async()=>{const p=je.fromSeed(c),m=await Le(p,n);l.get("word").set(m),l.get("seed").set(p.nextInt())}),r.$$.dirty&1048832&&e(14,u=async()=>{await d(),l.get("playing").set(!0)}),r.$$.dirty&1573152&&e(13,E=async()=>{const[p]=s[(s.findIndex(([m])=>G===m)+1)%s.length];l.get("turn").set(p),Y.stop(),await d()})},[R,V,N,W,$,G,L,Q,d,f,o,A,C,E,u,n,c,D,U,s,l,S,y,g,B,M,a,_]}class lt extends me{constructor(t){super();ce(this,t,Je,Xe,de,{roomId:0})}}export{lt as default,rt as load,st as ssr};
