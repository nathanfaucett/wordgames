var ct=Object.defineProperty,mt=Object.defineProperties;var dt=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Ye=(s,e,l)=>e in s?ct(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l,Fe=(s,e)=>{for(var l in e||(e={}))_t.call(e,l)&&Ye(s,l,e[l]);if(Qe)for(var l of Qe(e))ht.call(e,l)&&Ye(s,l,e[l]);return s},Je=(s,e)=>mt(s,dt(e));import{S as pt,i as gt,s as vt,W as Xe,X as Ke,k as O,j as ge,E as bt,d as n,n as U,m as ve,f as T,o as be,Y as Ze,x as ke,u as we,v as Ee,T as kt,A as wt,Z as Et,e as h,t as j,c as p,a as v,g as V,F as u,J as Re,b as m,N as ie,L as Z,_ as je,$ as ze,h as te,M as xe,K as et,a0 as tt,Q as It,a1 as $t,a2 as yt,a3 as st,R as Tt}from"../chunks/vendor-16accce5.js";import{L as St,a as Dt,k as lt,c as Ve,g as Lt}from"../chunks/util-575667b4.js";import{b as at}from"../chunks/paths-28a87002.js";import{M as ot,W as Ie,g as rt,d as oe,Q as Rt,u as jt}from"../chunks/userId-df730cc0.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";const{document:Ce}=Et;function nt(s,e,l){const a=s.slice();return a[24]=e[l][0],a[25]=e[l][1],a[27]=l,a}function ut(s,e,l){const a=s.slice();return a[28]=e[l],a}function it(s){let e,l=s[28]+"",a,f;return{c(){e=h("option"),a=j(l),this.h()},l(i){e=p(i,"OPTION",{});var g=v(e);a=V(g,l),g.forEach(n),this.h()},h(){e.__value=f=Ie[s[28]],e.value=e.__value},m(i,g){T(i,e,g),u(e,a)},p:Re,d(i){i&&n(e)}}}function ft(s,e){let l,a,f,i=e[27]+1+"",g,w,E=e[25].name+"",$,W,b,y,k,G,o,_,L,d,A,J,X,C,q,x;return{key:s,first:null,c(){l=h("div"),a=h("div"),f=h("p"),g=j(i),w=j(" - "),$=j(E),W=O(),b=h("form"),y=h("div"),k=h("input"),_=O(),L=h("div"),d=h("input"),X=O(),C=h("hr"),this.h()},l(S){l=p(S,"DIV",{class:!0});var I=v(l);a=p(I,"DIV",{class:!0});var r=v(a);f=p(r,"P",{class:!0});var B=v(f);g=V(B,i),w=V(B," - "),$=V(B,E),B.forEach(n),r.forEach(n),W=U(I),b=p(I,"FORM",{class:!0});var R=v(b);y=p(R,"DIV",{class:!0});var H=v(y);k=p(H,"INPUT",{id:!0,name:!0,type:!0,class:!0}),H.forEach(n),_=U(R),L=p(R,"DIV",{class:!0});var D=v(L);d=p(D,"INPUT",{id:!0,name:!0,type:!0,class:!0}),D.forEach(n),R.forEach(n),I.forEach(n),X=U(S),C=p(S,"HR",{}),this.h()},h(){m(f,"class","text-2xl p-1 font-bold"),m(a,"class","flex-grow"),m(k,"id",G=`${e[24]}-team-1`),m(k,"name","team"),k.value="1",m(k,"type","radio"),m(k,"class","align-bottom"),k.checked=o=e[25].team==="team1",m(y,"class","btn sm primary flex-1"),m(d,"id",A=`${e[24]}-team-2`),m(d,"name","team"),d.value="2",m(d,"type","radio"),m(d,"class","align-bottom"),d.checked=J=e[25].team==="team2",m(L,"class","btn sm danger flex-1"),m(b,"class","flex-grow-0 flex flex-row"),m(l,"class","flex justify-between"),ie(l,"bg-gray-200",e[24]===e[4]),this.first=l},m(S,I){T(S,l,I),u(l,a),u(a,f),u(f,g),u(f,w),u(f,$),u(l,W),u(l,b),u(b,y),u(y,k),u(b,_),u(b,L),u(L,d),T(S,X,I),T(S,C,I),q||(x=[Z(k,"click",je(e[18])),Z(y,"click",function(){ze(e[12](e[24],e[25].team,"team1"))&&e[12](e[24],e[25].team,"team1").apply(this,arguments)}),Z(d,"click",je(e[17])),Z(L,"click",function(){ze(e[12](e[24],e[25].team,"team2"))&&e[12](e[24],e[25].team,"team2").apply(this,arguments)})],q=!0)},p(S,I){e=S,I[0]&8&&i!==(i=e[27]+1+"")&&te(g,i),I[0]&8&&E!==(E=e[25].name+"")&&te($,E),I[0]&8&&G!==(G=`${e[24]}-team-1`)&&m(k,"id",G),I[0]&8&&o!==(o=e[25].team==="team1")&&(k.checked=o),I[0]&8&&A!==(A=`${e[24]}-team-2`)&&m(d,"id",A),I[0]&8&&J!==(J=e[25].team==="team2")&&(d.checked=J),I[0]&24&&ie(l,"bg-gray-200",e[24]===e[4])},d(S){S&&n(l),S&&n(X),S&&n(C),q=!1,xe(x)}}}function Vt(s){var We;let e,l,a,f,i,g,w,E,$,W,b,y,k,G,o,_,L,d,A,J,X,C,q,x,S=(((We=s[1][s[4]])==null?void 0:We.team)==="team1"?"Blue":"Red")+"",I,r,B,R,H,D,F,Q,ee,$e,K=[],Ne=new Map,fe,re,ce,z,Y,ye,me,Te,se,Se,De,Oe,ne=Object.keys(Ie),M=[];for(let t=0;t<ne.length;t+=1)M[t]=it(ut(s,ne,t));let de=s[3];const Ue=t=>t[24];for(let t=0;t<de.length;t+=1){let c=nt(s,de,t),N=Ue(c);Ne.set(N,K[t]=ft(N,c))}return{c(){e=h("h1"),l=j("Room Id "),a=j(s[0]),f=O(),i=h("div"),g=h("label"),w=j("Name"),E=O(),$=h("input"),W=O(),b=h("div"),y=h("label"),k=j("Words"),G=O(),o=h("select");for(let t=0;t<M.length;t+=1)M[t].c();_=O(),L=h("div"),d=h("button"),A=j("Share Game "),J=j(s[0]),X=O(),C=h("div"),q=h("h2"),x=j("Teams (You are on "),I=j(S),r=j(")"),B=O(),R=h("div"),H=h("div"),D=j(s[2]),F=O(),Q=h("div"),ee=j(s[9]),$e=O();for(let t=0;t<K.length;t+=1)K[t].c();fe=O(),re=h("div"),ce=O(),z=h("div"),Y=h("button"),ye=j("Start"),Te=O(),se=h("button"),Se=j("Leave"),this.h()},l(t){e=p(t,"H1",{class:!0});var c=v(e);l=V(c,"Room Id "),a=V(c,s[0]),c.forEach(n),f=U(t),i=p(t,"DIV",{class:!0});var N=v(i);g=p(N,"LABEL",{for:!0});var P=v(g);w=V(P,"Name"),P.forEach(n),E=U(N),$=p(N,"INPUT",{class:!0}),N.forEach(n),W=U(t),b=p(t,"DIV",{});var le=v(b);y=p(le,"LABEL",{for:!0});var Be=v(y);k=V(Be,"Words"),Be.forEach(n),G=U(le),o=p(le,"SELECT",{id:!0,class:!0});var Me=v(o);for(let ae=0;ae<M.length;ae+=1)M[ae].l(Me);Me.forEach(n),le.forEach(n),_=U(t),L=p(t,"DIV",{class:!0});var Pe=v(L);d=p(Pe,"BUTTON",{class:!0});var Le=v(d);A=V(Le,"Share Game "),J=V(Le,s[0]),Le.forEach(n),Pe.forEach(n),X=U(t),C=p(t,"DIV",{class:!0});var ue=v(C);q=p(ue,"H2",{class:!0});var _e=v(q);x=V(_e,"Teams (You are on "),I=V(_e,S),r=V(_e,")"),_e.forEach(n),B=U(ue),R=p(ue,"DIV",{class:!0});var he=v(R);H=p(he,"DIV",{class:!0});var Ge=v(H);D=V(Ge,s[2]),Ge.forEach(n),F=U(he),Q=p(he,"DIV",{class:!0});var Ae=v(Q);ee=V(Ae,s[9]),Ae.forEach(n),he.forEach(n),$e=U(ue);for(let ae=0;ae<K.length;ae+=1)K[ae].l(ue);ue.forEach(n),fe=U(t),re=p(t,"DIV",{class:!0}),v(re).forEach(n),ce=U(t),z=p(t,"DIV",{class:!0});var pe=v(z);Y=p(pe,"BUTTON",{class:!0});var qe=v(Y);ye=V(qe,"Start"),qe.forEach(n),Te=U(pe),se=p(pe,"BUTTON",{class:!0});var He=v(se);Se=V(He,"Leave"),He.forEach(n),pe.forEach(n),this.h()},h(){m(e,"class","text-center cursor-pointer"),m(g,"for","name"),m($,"class","input"),m(i,"class","mt-2"),m(y,"for","words"),m(o,"id","words"),m(o,"class","input"),m(d,"class","btn md primary w-full mb-2"),m(L,"class","flex"),m(q,"class","text-center"),m(H,"class","btn md primary flex-1 text-center"),m(Q,"class","btn md danger flex-1 text-center"),m(R,"class","mt-2 mb-2 flex justify-center"),m(C,"class","mt-2 mb-2"),m(re,"class","flex-grow"),m(Y,"class","btn lg primary flex-1"),Y.disabled=me=s[3].length<2,ie(Y,"bg-blue-100",s[3].length<2),ie(Y,"hover:bg-blue-500",s[3].length>1),m(se,"class","btn lg danger flex-1"),m(z,"class","flex justify-center")},m(t,c){T(t,e,c),u(e,l),u(e,a),T(t,f,c),T(t,i,c),u(i,g),u(g,w),u(i,E),u(i,$),et($,s[8]),T(t,W,c),T(t,b,c),u(b,y),u(y,k),u(b,G),u(b,o);for(let N=0;N<M.length;N+=1)M[N].m(o,null);tt(o,s[5]),T(t,_,c),T(t,L,c),u(L,d),u(d,A),u(d,J),T(t,X,c),T(t,C,c),u(C,q),u(q,x),u(q,I),u(q,r),u(C,B),u(C,R),u(R,H),u(H,D),u(R,F),u(R,Q),u(Q,ee),u(C,$e);for(let N=0;N<K.length;N+=1)K[N].m(C,null);T(t,fe,c),T(t,re,c),T(t,ce,c),T(t,z,c),u(z,Y),u(Y,ye),u(z,Te),u(z,se),u(se,Se),De||(Oe=[Z(e,"click",s[19]),Z($,"input",s[20]),Z($,"input",s[10]),Z(o,"change",je(s[11])),Z(d,"click",s[14]),Z(Y,"click",s[13]),Z(se,"click",s[21])],De=!0)},p(t,c){var N;if(c[0]&1&&te(a,t[0]),c[0]&256&&$.value!==t[8]&&et($,t[8]),c&0){ne=Object.keys(Ie);let P;for(P=0;P<ne.length;P+=1){const le=ut(t,ne,P);M[P]?M[P].p(le,c):(M[P]=it(le),M[P].c(),M[P].m(o,null))}for(;P<M.length;P+=1)M[P].d(1);M.length=ne.length}c[0]&32&&tt(o,t[5]),c[0]&1&&te(J,t[0]),c[0]&18&&S!==(S=(((N=t[1][t[4]])==null?void 0:N.team)==="team1"?"Blue":"Red")+"")&&te(I,S),c[0]&4&&te(D,t[2]),c[0]&512&&te(ee,t[9]),c[0]&4120&&(de=t[3],K=It(K,c,Ue,1,t,de,Ne,C,Tt,ft,null,nt)),c[0]&8&&me!==(me=t[3].length<2)&&(Y.disabled=me),c[0]&8&&ie(Y,"bg-blue-100",t[3].length<2),c[0]&8&&ie(Y,"hover:bg-blue-500",t[3].length>1)},d(t){t&&n(e),t&&n(f),t&&n(i),t&&n(W),t&&n(b),$t(M,t),t&&n(_),t&&n(L),t&&n(X),t&&n(C);for(let c=0;c<K.length;c+=1)K[c].d();t&&n(fe),t&&n(re),t&&n(ce),t&&n(z),De=!1,xe(Oe)}}}function Ct(s){let e,l;return e=new Rt({props:{value:location.href}}),{c(){ge(e.$$.fragment)},l(a){ve(e.$$.fragment,a)},m(a,f){be(e,a,f),l=!0},p:Re,i(a){l||(ke(e.$$.fragment,a),l=!0)},o(a){we(e.$$.fragment,a),l=!1},d(a){Ee(e,a)}}}function Nt(s){let e,l,a;return{c(){e=h("h2"),l=j("Room Id "),a=j(s[0]),this.h()},l(f){e=p(f,"H2",{slot:!0});var i=v(e);l=V(i,"Room Id "),a=V(i,s[0]),i.forEach(n),this.h()},h(){m(e,"slot","title")},m(f,i){T(f,e,i),u(e,l),u(e,a)},p(f,i){i[0]&1&&te(a,f[0])},d(f){f&&n(e)}}}function Ot(s){let e,l;return{c(){e=h("a"),l=j("Exit"),this.h()},l(a){e=p(a,"A",{href:!0,class:!0});var f=v(e);l=V(f,"Exit"),f.forEach(n),this.h()},h(){m(e,"href",`${at}/`),m(e,"class","btn lg danger")},m(a,f){T(a,e,f),u(e,l)},p:Re,d(a){a&&n(e)}}}function Ut(s){let e,l,a,f,i,g,w,E,$,W;Ce.title=e="Word Games!: Lobby "+s[0],a=new St({props:{$$slots:{default:[Vt]},$$scope:{ctx:s}}});function b(o){s[22](o)}let y={$$slots:{title:[Nt],default:[Ct]},$$scope:{ctx:s}};s[6]!==void 0&&(y.show=s[6]),i=new ot({props:y}),Xe.push(()=>Ke(i,"show",b));function k(o){s[23](o)}let G={$$slots:{default:[Ot]},$$scope:{ctx:s}};return s[7]!==void 0&&(G.show=s[7]),E=new ot({props:G}),Xe.push(()=>Ke(E,"show",k)),{c(){l=O(),ge(a.$$.fragment),f=O(),ge(i.$$.fragment),w=O(),ge(E.$$.fragment)},l(o){bt('[data-svelte="svelte-5lsgla"]',Ce.head).forEach(n),l=U(o),ve(a.$$.fragment,o),f=U(o),ve(i.$$.fragment,o),w=U(o),ve(E.$$.fragment,o)},m(o,_){T(o,l,_),be(a,o,_),T(o,f,_),be(i,o,_),T(o,w,_),be(E,o,_),W=!0},p(o,_){(!W||_[0]&1)&&e!==(e="Word Games!: Lobby "+o[0])&&(Ce.title=e);const L={};_[0]&1023|_[1]&1&&(L.$$scope={dirty:_,ctx:o}),a.$set(L);const d={};_[0]&1|_[1]&1&&(d.$$scope={dirty:_,ctx:o}),!g&&_[0]&64&&(g=!0,d.show=o[6],Ze(()=>g=!1)),i.$set(d);const A={};_[1]&1&&(A.$$scope={dirty:_,ctx:o}),!$&&_[0]&128&&($=!0,A.show=o[7],Ze(()=>$=!1)),E.$set(A)},i(o){W||(ke(a.$$.fragment,o),ke(i.$$.fragment,o),ke(E.$$.fragment,o),W=!0)},o(o){we(a.$$.fragment,o),we(i.$$.fragment,o),we(E.$$.fragment,o),W=!1},d(o){o&&n(l),Ee(a,o),o&&n(f),Ee(i,o),o&&n(w),Ee(E,o)}}}const Yt=!1;function Ft(s){return{props:{roomId:s.page.query.get("room")}}}function Wt([s],[e]){return s.localeCompare(e)}function Bt(s,e,l){let a,f,i,g;kt(s,jt,r=>l(4,g=r));let{roomId:w}=e,E={},$=!1,W,b=!1,y=!1,k=`guest-${Dt()}`;async function G(){const r=await rt();oe.get("rooms").get(w).get("users").get(r).get("name").put(k)}function o(r){oe.get("rooms").get(w).get("words").put(r.currentTarget.value)}function _(r,B,R){return function(){B!==R&&oe.get("rooms").get(w).get("users").get(r).get("team").put(R)}}async function L(){const r=oe.get("rooms").get(w),B=r.get("users"),R=await B,H=await r,D=yt.fromSeed(H.seed);r.get("turn").put(D.fromArray(lt(R)).unwrap()),r.get("started").put(!0)}let d;function A(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Ve("Successful shared!","success")).catch(r=>Ve(r.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Ve("Successful Copied!","success"));else{const r=document.createElement("input");r.style.display="none",r.textContent=location.href,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}}wt(()=>{const r=oe.get("rooms").get(w),B=r.get("users").on(async D=>{l(1,E=(await Promise.all(lt(D).map(F=>new Promise(Q=>r.get("users").get(F).once(ee=>Q([F,ee])))))).reduce((F,[Q,ee])=>Je(Fe({},F),{[Q]:ee}),{}))}),R=r.get("words").on(D=>{l(5,W=D)}),H=r.get("started").on(D=>{l(15,$=D)});return rt().then(D=>r.get("users").get(D).get("name").once(F=>{const Q=F;Q&&l(8,k=Q)})),r.once(D=>{if(!(D==null?void 0:D.seed)){const F=Date.now();r.put({seed:F,team1:0,team2:0,started:!1,words:Ie.Medium})}}),G(),()=>{B.off(),R.off(),H.off()}});function J(r){st.call(this,s,r)}function X(r){st.call(this,s,r)}const C=()=>l(6,b=!0);function q(){k=this.value,l(8,k)}const x=()=>l(7,y=!0);function S(r){b=r,l(6,b)}function I(r){y=r,l(7,y)}return s.$$set=r=>{"roomId"in r&&l(0,w=r.roomId)},s.$$.update=()=>{if(s.$$.dirty[0]&32769&&$&&Lt(`${at}/game?room=${w}`),s.$$.dirty[0]&2&&l(3,a=Object.entries(E).sort(Wt)),s.$$.dirty[0]&8&&l(2,f=a.filter(([r,B])=>B.team==="team1").length),s.$$.dirty[0]&12&&l(9,i=a.length-f),s.$$.dirty[0]&65553&&g&&d!==g){const r=g;oe.get("rooms").get(w).get("users").get(r).get("team").put("team1"),d&&oe.get("rooms").get(w).get("users").get(d).put(null),l(16,d=r)}},[w,E,f,a,g,W,b,y,k,i,G,o,_,L,A,$,d,J,X,C,q,x,S,I]}class Jt extends pt{constructor(e){super();gt(this,e,Bt,Ut,vt,{roomId:0},null,[-1,-1])}}export{Jt as default,Ft as load,Yt as ssr};
