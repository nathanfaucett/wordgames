import{S as ue,i as ce,s as me,t as $,g as E,f as p,h as q,J as Y,d as f,ac as de,W as _e,X as pe,k as H,j as F,E as ye,n as P,m as X,o as J,Y as he,x as Z,u as z,v as K,T as Ie,A as $e,l as be,e as g,c as w,a as k,b as v,N as se,F as h,L as x,M as ve,Z as Ee,a3 as Te}from"../chunks/vendor-cae1f2dc.js";import{b as Q}from"../chunks/paths-28a87002.js";import{L as je,s as De,g as Se}from"../chunks/util-76fa6028.js";import{M as ge,W as Ve,g as Ne,b as Me,Q as Le,u as Re}from"../chunks/userId-656a8df8.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";function We(r){let t=le(r[0])+"",l,e,n=le(r[1])+"",s;return{c(){l=$(t),e=$(":"),s=$(n)},l(i){l=E(i,t),e=E(i,":"),s=E(i,n)},m(i,c){p(i,l,c),p(i,e,c),p(i,s,c)},p(i,[c]){c&1&&t!==(t=le(i[0])+"")&&q(l,t),c&2&&n!==(n=le(i[1])+"")&&q(s,n)},i:Y,o:Y,d(i){i&&f(l),i&&f(e),i&&f(s)}}}function le(r){return(r<10?"0":"")+r}function Oe(r,t,l){let e,n,{seconds:s=60}=t;return r.$$set=i=>{"seconds"in i&&l(2,s=i.seconds)},r.$$.update=()=>{r.$$.dirty&4&&l(0,e=Math.floor(s/60)),r.$$.dirty&5&&l(1,n=Math.floor(s-e*60))},[e,n,s]}class Be extends ue{constructor(t){super();ce(this,t,Oe,We,me,{seconds:2})}}function Ge(r){var n;let t=((n=r[1][r[3]])==null?void 0:n.name)+"",l,e;return{c(){l=$(t),e=$("'s turn")},l(s){l=E(s,t),e=E(s,"'s turn")},m(s,i){p(s,l,i),p(s,e,i)},p(s,i){var c;i&10&&t!==(t=((c=s[1][s[3]])==null?void 0:c.name)+"")&&q(l,t)},d(s){s&&f(l),s&&f(e)}}}function He(r){var n;let t=((n=r[1][r[3]])==null?void 0:n.name)+"",l,e;return{c(){l=$(t),e=$(" and your Team's turn")},l(s){l=E(s,t),e=E(s," and your Team's turn")},m(s,i){p(s,l,i),p(s,e,i)},p(s,i){var c;i&10&&t!==(t=((c=s[1][s[3]])==null?void 0:c.name)+"")&&q(l,t)},d(s){s&&f(l),s&&f(e)}}}function Pe(r){let t;return{c(){t=$("Your Turn")},l(l){t=E(l,"Your Turn")},m(l,e){p(l,t,e)},p:Y,d(l){l&&f(t)}}}function we(r){let t;function l(s,i){return s[2]?Ue:qe}let e=l(r),n=e(r);return{c(){n.c(),t=be()},l(s){n.l(s),t=be()},m(s,i){n.m(s,i),p(s,t,i)},p(s,i){e===(e=l(s))&&n?n.p(s,i):(n.d(1),n=e(s),n&&(n.c(),n.m(t.parentNode,t)))},d(s){n.d(s),s&&f(t)}}}function Ue(r){let t,l,e,n,s,i,c,_,y,I,j,b,L,D;return{c(){t=g("div"),l=g("div"),e=g("p"),n=$(r[9]),s=H(),i=g("div"),c=g("div"),_=g("button"),y=$("Skip"),I=H(),j=g("button"),b=$("Next"),this.h()},l(o){t=w(o,"DIV",{class:!0});var d=k(t);l=w(d,"DIV",{class:!0});var V=k(l);e=w(V,"P",{class:!0});var N=k(e);n=E(N,r[9]),N.forEach(f),V.forEach(f),d.forEach(f),s=P(o),i=w(o,"DIV",{class:!0});var T=k(i);c=w(T,"DIV",{class:!0});var R=k(c);_=w(R,"BUTTON",{class:!0});var U=k(_);y=E(U,"Skip"),U.forEach(f),I=P(R),j=w(R,"BUTTON",{class:!0});var B=k(j);b=E(B,"Next"),B.forEach(f),R.forEach(f),T.forEach(f),this.h()},h(){v(e,"class","text-6xl"),v(l,"class","text-center"),v(t,"class","flex-1 flex h-full justify-center items-center"),v(_,"class","btn lg danger flex-1"),v(j,"class","btn lg primary flex-1"),v(c,"class","flex flex-1 justify-center"),v(i,"class","flex-1")},m(o,d){p(o,t,d),h(t,l),h(l,e),h(e,n),p(o,s,d),p(o,i,d),h(i,c),h(c,_),h(_,y),h(c,I),h(c,j),h(j,b),L||(D=[x(_,"click",r[13]),x(j,"click",r[14])],L=!0)},p(o,d){d&512&&q(n,o[9])},d(o){o&&f(t),o&&f(s),o&&f(i),L=!1,ve(D)}}}function qe(r){let t,l,e,n,s,i;return{c(){t=g("div"),l=g("div"),e=g("button"),n=$("Start"),this.h()},l(c){t=w(c,"DIV",{class:!0});var _=k(t);l=w(_,"DIV",{class:!0});var y=k(l);e=w(y,"BUTTON",{class:!0});var I=k(e);n=E(I,"Start"),I.forEach(f),y.forEach(f),_.forEach(f),this.h()},h(){v(e,"class","btn lg primary flex-1"),v(l,"class","flex justify-center"),v(t,"class","flex-1")},m(c,_){p(c,t,_),h(t,l),h(l,e),h(e,n),s||(i=x(e,"click",r[12]),s=!0)},p:Y,d(c){c&&f(t),s=!1,i()}}}function Ae(r){let t,l,e,n,s,i,c,_,y,I,j,b,L,D,o,d,V,N,T,R,U,B,W,ee;function te(a,u){var m,M;return a[5]?Pe:((m=a[1][a[6]])==null?void 0:m.team)===((M=a[1][a[3]])==null?void 0:M.team)?He:Ge}let C=te(r),O=C(r);o=new Be({props:{seconds:r[4]}});let S=r[5]&&we(r);return{c(){t=g("h1"),l=$("Room Id "),e=$(r[0]),n=H(),s=g("div"),i=g("div"),c=$(r[7]),_=H(),y=g("div"),I=$(r[8]),j=H(),b=g("h1"),O.c(),L=H(),D=g("p"),F(o.$$.fragment),d=H(),V=g("div"),S&&S.c(),N=H(),T=g("div"),R=g("button"),U=$("Leave"),this.h()},l(a){t=w(a,"H1",{class:!0});var u=k(t);l=E(u,"Room Id "),e=E(u,r[0]),u.forEach(f),n=P(a),s=w(a,"DIV",{class:!0});var m=k(s);i=w(m,"DIV",{class:!0});var M=k(i);c=E(M,r[7]),M.forEach(f),_=P(m),y=w(m,"DIV",{class:!0});var G=k(y);I=E(G,r[8]),G.forEach(f),m.forEach(f),j=P(a),b=w(a,"H1",{class:!0});var oe=k(b);O.l(oe),oe.forEach(f),L=P(a),D=w(a,"P",{class:!0});var ne=k(D);X(o.$$.fragment,ne),ne.forEach(f),d=P(a),V=w(a,"DIV",{class:!0});var ae=k(V);S&&S.l(ae),ae.forEach(f),N=P(a),T=w(a,"DIV",{class:!0});var ie=k(T);R=w(ie,"BUTTON",{class:!0});var fe=k(R);U=E(fe,"Leave"),fe.forEach(f),ie.forEach(f),this.h()},h(){var a,u;v(t,"class","text-center cursor-pointer"),v(i,"class","btn md primary flex-1 text-center"),v(y,"class","btn md danger flex-1 text-center"),v(s,"class","flex justify-center mt-2"),v(b,"class","text-center text-white rounded py-4 my-4"),se(b,"bg-blue-500",((a=r[1][r[6]])==null?void 0:a.team)==="team1"),se(b,"bg-red-500",((u=r[1][r[6]])==null?void 0:u.team)==="team2"),v(D,"class","text-2xl text-center"),v(V,"class","flex-grow flex flex-col justify-center"),v(R,"class","btn lg danger flex-1"),v(T,"class","flex justify-center")},m(a,u){p(a,t,u),h(t,l),h(t,e),p(a,n,u),p(a,s,u),h(s,i),h(i,c),h(s,_),h(s,y),h(y,I),p(a,j,u),p(a,b,u),O.m(b,null),p(a,L,u),p(a,D,u),J(o,D,null),p(a,d,u),p(a,V,u),S&&S.m(V,null),p(a,N,u),p(a,T,u),h(T,R),h(R,U),B=!0,W||(ee=[x(t,"click",r[17]),x(R,"click",r[18])],W=!0)},p(a,u){var M,G;(!B||u&1)&&q(e,a[0]),(!B||u&128)&&q(c,a[7]),(!B||u&256)&&q(I,a[8]),C===(C=te(a))&&O?O.p(a,u):(O.d(1),O=C(a),O&&(O.c(),O.m(b,null))),u&66&&se(b,"bg-blue-500",((M=a[1][a[6]])==null?void 0:M.team)==="team1"),u&66&&se(b,"bg-red-500",((G=a[1][a[6]])==null?void 0:G.team)==="team2");const m={};u&16&&(m.seconds=a[4]),o.$set(m),a[5]?S?S.p(a,u):(S=we(a),S.c(),S.m(V,null)):S&&(S.d(1),S=null)},i(a){B||(Z(o.$$.fragment,a),B=!0)},o(a){z(o.$$.fragment,a),B=!1},d(a){a&&f(t),a&&f(n),a&&f(s),a&&f(j),a&&f(b),O.d(),a&&f(L),a&&f(D),K(o),a&&f(d),a&&f(V),S&&S.d(),a&&f(N),a&&f(T),W=!1,ve(ee)}}}function Ce(r){let t,l;return t=new Le({props:{value:location.href}}),{c(){F(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,n){J(t,e,n),l=!0},p:Y,i(e){l||(Z(t.$$.fragment,e),l=!0)},o(e){z(t.$$.fragment,e),l=!1},d(e){K(t,e)}}}function Ye(r){let t,l,e;return{c(){t=g("h2"),l=$("Room Id "),e=$(r[0]),this.h()},l(n){t=w(n,"H2",{slot:!0});var s=k(t);l=E(s,"Room Id "),e=E(s,r[0]),s.forEach(f),this.h()},h(){v(t,"slot","title")},m(n,s){p(n,t,s),h(t,l),h(t,e)},p(n,s){s&1&&q(e,n[0])},d(n){n&&f(t)}}}function Qe(r){let t,l;return{c(){t=g("a"),l=$("Exit"),this.h()},l(e){t=w(e,"A",{href:!0,class:!0});var n=k(t);l=E(n,"Exit"),n.forEach(f),this.h()},h(){v(t,"href",`${Q}/`),v(t,"class","btn lg danger")},m(e,n){p(e,t,n),h(t,l)},p:Y,d(e){e&&f(t)}}}function Fe(r){let t,l,e,n,s,i,c,_,y,I;document.title=t="Word Games!: Playing Game in "+r[0],e=new je({props:{$$slots:{default:[Ae]},$$scope:{ctx:r}}});function j(o){r[19](o)}let b={$$slots:{title:[Ye],default:[Ce]},$$scope:{ctx:r}};r[10]!==void 0&&(b.show=r[10]),s=new ge({props:b}),_e.push(()=>pe(s,"show",j));function L(o){r[20](o)}let D={$$slots:{default:[Qe]},$$scope:{ctx:r}};return r[11]!==void 0&&(D.show=r[11]),_=new ge({props:D}),_e.push(()=>pe(_,"show",L)),{c(){l=H(),F(e.$$.fragment),n=H(),F(s.$$.fragment),c=H(),F(_.$$.fragment)},l(o){ye('[data-svelte="svelte-3p3nw5"]',document.head).forEach(f),l=P(o),X(e.$$.fragment,o),n=P(o),X(s.$$.fragment,o),c=P(o),X(_.$$.fragment,o)},m(o,d){p(o,l,d),J(e,o,d),p(o,n,d),J(s,o,d),p(o,c,d),J(_,o,d),I=!0},p(o,[d]){(!I||d&1)&&t!==(t="Word Games!: Playing Game in "+o[0])&&(document.title=t);const V={};d&134221823&&(V.$$scope={dirty:d,ctx:o}),e.$set(V);const N={};d&134217729&&(N.$$scope={dirty:d,ctx:o}),!i&&d&1024&&(i=!0,N.show=o[10],he(()=>i=!1)),s.$set(N);const T={};d&134217728&&(T.$$scope={dirty:d,ctx:o}),!y&&d&2048&&(y=!0,T.show=o[11],he(()=>y=!1)),_.$set(T)},i(o){I||(Z(e.$$.fragment,o),Z(s.$$.fragment,o),Z(_.$$.fragment,o),I=!0)},o(o){z(e.$$.fragment,o),z(s.$$.fragment,o),z(_.$$.fragment,o),I=!1},d(o){o&&f(l),K(e,o),o&&f(n),K(s,o),o&&f(c),K(_,o)}}}const tt=!1;function st(r){return{props:{roomId:r.page.query.get("room")}}}const re=30,ke=new de.Howl({src:[`${Q}/sounds/alarm-clock.mp3`,`${Q}/sounds/alarm-clock.wav`]}),A=new de.Howl({src:[`${Q}/sounds/ticking.mp3`,`${Q}/sounds/ticking.wav`],loop:!0});function Xe(r,t,l){let e,n,s,i;Ie(r,Re,u=>l(6,i=u));let{roomId:c}=t,_={},y=Ve.Medium,I=Date.now(),j=0,b=0,L=!0,D=!1,o="",d=0,V="",N=!1,T=!1;async function R(){await U(),e.get("playing").set(!0)}async function U(){const u=Ee.fromSeed(I),m=await Me(u,y);e.get("word").set(m),e.get("seed").set(u.nextInt())}async function B(){const[u]=n[(n.findIndex(([m])=>o===m)+1)%n.length];e.get("turn").set(u),A.stop(),await U()}let W;function ee(u=re){W==null&&(l(16,W=setInterval(()=>{const m=d;if(m===0)te();else{const M=m-1;A.rate(1+(1-M/re)),e.get("timer").set(M)}},1e3)),A.rate(1+(1-u/re)),A.playing()||A.play(),e.get("timer").set(u))}function te(){if(W==null)return;_[o].team==="team1"?e.get("team2").set(b+1):e.get("team1").set(j+1),e.get("timer").set(0),e.get("playing").set(!1),clearInterval(W),l(16,W=void 0),l(2,D=!1),A.stop(),ke.play()}$e(()=>{const u=[e.get("seed").on(m=>{I=m}),e.get("started").on(m=>{l(15,L=m)}),e.get("playing").on(m=>{l(2,D=m)}),e.get("team1").on(m=>{l(7,j=m)}),e.get("team2").on(m=>{l(8,b=m)}),e.get("words").on(m=>{y=m}),e.get("word").on(m=>{l(9,V=m)}),e.get("turn").on(m=>{l(3,o=m)}),e.get("timer").on(m=>{l(4,d=m)}),e.get("users").on(async m=>{l(1,_=(await Promise.all(Object.entries(m).map(([M,G])=>G instanceof Te?G.then():G))).reduce((M,G)=>(M[G.id]=G,M),{}))})];return()=>{A.stop(),ke.stop(),u.forEach(m=>m())}});const C=()=>l(10,N=!0),O=()=>l(11,T=!0);function S(u){N=u,l(10,N)}function a(u){T=u,l(11,T)}return r.$$set=u=>{"roomId"in u&&l(0,c=u.roomId)},r.$$.update=()=>{r.$$.dirty&32769&&(L||Se(`${Q}/lobby?room=${c}`)),r.$$.dirty&1&&(e=Ne.get("rooms").get(c)),r.$$.dirty&2&&(n=Array.from(Object.entries(_)).sort(De)),r.$$.dirty&72&&l(5,s=o===i),r.$$.dirty&65588&&(s&&D?ee(d===0?re:d):W!=null&&(clearInterval(W),l(16,W=void 0)))},[c,_,D,o,d,s,i,j,b,V,N,T,R,U,B,L,W,C,O,S,a]}class lt extends ue{constructor(t){super();ce(this,t,Xe,Fe,me,{roomId:0})}}export{lt as default,st as load,tt as ssr};
