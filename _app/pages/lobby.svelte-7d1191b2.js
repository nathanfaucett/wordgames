import{S as ot,i as rt,s as nt,W as Qe,X as Ye,k as C,j as ve,E as it,d as n,n as R,m as ge,f as T,o as be,Y as Fe,x as ke,u as Ee,v as Ie,T as ut,A as ft,Z as mt,_ as ct,e as h,t as L,c as _,a as v,g as O,F as i,J as Le,b as m,N as ne,L as F,$ as Oe,a0 as ie,h as ee,M as Je,K as Xe,a1 as Ke,Q as dt,a2 as ht,a3 as Ze,R as _t}from"../chunks/vendor-2d4221cb.js";import{L as pt,a as vt,s as gt,c as Ve,g as bt}from"../chunks/util-f1ec02fc.js";import{b as ze}from"../chunks/paths-28a87002.js";import{M as xe,W as we,g as kt,a as Et,Q as It,u as wt}from"../chunks/userId-a5a0ac90.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";const{document:Ce}=ct;function et(e,t,s){const a=e.slice();return a[27]=t[s][0],a[6]=t[s][1],a[29]=s,a}function tt(e,t,s){const a=e.slice();return a[30]=t[s],a}function st(e){let t,s=e[30]+"",a,r;return{c(){t=h("option"),a=L(s),this.h()},l(u){t=_(u,"OPTION",{});var g=v(t);a=O(g,s),g.forEach(n),this.h()},h(){t.__value=r=we[e[30]],t.value=t.__value},m(u,g){T(u,t,g),i(t,a)},p:Le,d(u){u&&n(t)}}}function lt(e,t){let s,a,r,u=t[29]+1+"",g,B,I=t[6].name+"",j,N,w,D,y,W,o,d,S,p,U,q,M,k,H,z;return{key:e,first:null,c(){s=h("div"),a=h("div"),r=h("p"),g=L(u),B=L(" - "),j=L(I),N=C(),w=h("form"),D=h("div"),y=h("input"),d=C(),S=h("div"),p=h("input"),M=C(),k=h("hr"),this.h()},l($){s=_($,"DIV",{class:!0});var E=v(s);a=_(E,"DIV",{class:!0});var x=v(a);r=_(x,"P",{class:!0});var J=v(r);g=O(J,u),B=O(J," - "),j=O(J,I),J.forEach(n),x.forEach(n),N=R(E),w=_(E,"FORM",{class:!0});var G=v(w);D=_(G,"DIV",{class:!0});var c=v(D);y=_(c,"INPUT",{id:!0,name:!0,type:!0,class:!0}),c.forEach(n),d=R(G),S=_(G,"DIV",{class:!0});var b=v(S);p=_(b,"INPUT",{id:!0,name:!0,type:!0,class:!0}),b.forEach(n),G.forEach(n),E.forEach(n),M=R($),k=_($,"HR",{}),this.h()},h(){m(r,"class","text-2xl p-1 font-bold"),m(a,"class","flex-grow"),m(y,"id",W=`${t[27]}-team-1`),m(y,"name","team"),y.value="1",m(y,"type","radio"),m(y,"class","align-bottom"),y.checked=o=!t[6].team||t[6].team==="team1",m(D,"class","btn sm primary flex-1"),m(p,"id",U=`${t[27]}-team-2`),m(p,"name","team"),p.value="2",m(p,"type","radio"),m(p,"class","align-bottom"),p.checked=q=t[6].team==="team2",m(S,"class","btn sm danger flex-1"),m(w,"class","flex-grow-0 flex flex-row"),m(s,"class","flex justify-between"),ne(s,"bg-gray-200",t[27]===t[3]),this.first=s},m($,E){T($,s,E),i(s,a),i(a,r),i(r,g),i(r,B),i(r,j),i(s,N),i(s,w),i(w,D),i(D,y),i(w,d),i(w,S),i(S,p),T($,M,E),T($,k,E),H||(z=[F(y,"click",Oe(t[21])),F(D,"click",function(){ie(t[11](t[27],t[6].team,"team1"))&&t[11](t[27],t[6].team,"team1").apply(this,arguments)}),F(p,"click",Oe(t[20])),F(S,"click",function(){ie(t[11](t[27],t[6].team,"team2"))&&t[11](t[27],t[6].team,"team2").apply(this,arguments)})],H=!0)},p($,E){t=$,E[0]&32&&u!==(u=t[29]+1+"")&&ee(g,u),E[0]&32&&I!==(I=t[6].name+"")&&ee(j,I),E[0]&32&&W!==(W=`${t[27]}-team-1`)&&m(y,"id",W),E[0]&32&&o!==(o=!t[6].team||t[6].team==="team1")&&(y.checked=o),E[0]&32&&U!==(U=`${t[27]}-team-2`)&&m(p,"id",U),E[0]&32&&q!==(q=t[6].team==="team2")&&(p.checked=q),E[0]&40&&ne(s,"bg-gray-200",t[27]===t[3])},d($){$&&n(s),$&&n(M),$&&n(k),H=!1,Je(z)}}}function yt(e){var Be;let t,s,a,r,u,g,B,I,j,N,w,D,y,W,o,d,S,p,U,q,M,k,H,z,$=(((Be=e[1][e[3]])==null?void 0:Be.team)==="team1"?"Blue":"Red")+"",E,x,J,G,c,b,X,K,ue,ye,Y=[],Re=new Map,fe,ae,me,Z,Q,Te,ce,je,te,Se,$e,Ne,oe=Object.keys(we),A=[];for(let l=0;l<oe.length;l+=1)A[l]=st(tt(e,oe,l));let de=e[5];const Ue=l=>l[27]+l[6].team;for(let l=0;l<de.length;l+=1){let f=et(e,de,l),V=Ue(f);Re.set(V,Y[l]=lt(V,f))}return{c(){t=h("h1"),s=L("Room Id "),a=L(e[0]),r=C(),u=h("div"),g=h("label"),B=L("Name"),I=C(),j=h("input"),N=C(),w=h("div"),D=h("label"),y=L("Words"),W=C(),o=h("select");for(let l=0;l<A.length;l+=1)A[l].c();d=C(),S=h("div"),p=h("button"),U=L("Share Game "),q=L(e[0]),M=C(),k=h("div"),H=h("h2"),z=L("Teams (You are on "),E=L($),x=L(")"),J=C(),G=h("div"),c=h("div"),b=L(e[4]),X=C(),K=h("div"),ue=L(e[14]),ye=C();for(let l=0;l<Y.length;l+=1)Y[l].c();fe=C(),ae=h("div"),me=C(),Z=h("div"),Q=h("button"),Te=L("Start"),je=C(),te=h("button"),Se=L("Leave"),this.h()},l(l){t=_(l,"H1",{class:!0});var f=v(t);s=O(f,"Room Id "),a=O(f,e[0]),f.forEach(n),r=R(l),u=_(l,"DIV",{class:!0});var V=v(u);g=_(V,"LABEL",{for:!0});var P=v(g);B=O(P,"Name"),P.forEach(n),I=R(V),j=_(V,"INPUT",{class:!0}),V.forEach(n),N=R(l),w=_(l,"DIV",{});var se=v(w);D=_(se,"LABEL",{for:!0});var We=v(D);y=O(We,"Words"),We.forEach(n),W=R(se),o=_(se,"SELECT",{id:!0,class:!0});var Me=v(o);for(let le=0;le<A.length;le+=1)A[le].l(Me);Me.forEach(n),se.forEach(n),d=R(l),S=_(l,"DIV",{class:!0});var Ae=v(S);p=_(Ae,"BUTTON",{class:!0});var De=v(p);U=O(De,"Share Game "),q=O(De,e[0]),De.forEach(n),Ae.forEach(n),M=R(l),k=_(l,"DIV",{class:!0});var re=v(k);H=_(re,"H2",{class:!0});var he=v(H);z=O(he,"Teams (You are on "),E=O(he,$),x=O(he,")"),he.forEach(n),J=R(re),G=_(re,"DIV",{class:!0});var _e=v(G);c=_(_e,"DIV",{class:!0});var Ge=v(c);b=O(Ge,e[4]),Ge.forEach(n),X=R(_e),K=_(_e,"DIV",{class:!0});var Pe=v(K);ue=O(Pe,e[14]),Pe.forEach(n),_e.forEach(n),ye=R(re);for(let le=0;le<Y.length;le+=1)Y[le].l(re);re.forEach(n),fe=R(l),ae=_(l,"DIV",{class:!0}),v(ae).forEach(n),me=R(l),Z=_(l,"DIV",{class:!0});var pe=v(Z);Q=_(pe,"BUTTON",{class:!0});var qe=v(Q);Te=O(qe,"Start"),qe.forEach(n),je=R(pe),te=_(pe,"BUTTON",{class:!0});var He=v(te);Se=O(He,"Leave"),He.forEach(n),pe.forEach(n),this.h()},h(){m(t,"class","text-center cursor-pointer"),m(g,"for","name"),m(j,"class","input"),m(u,"class","mt-2"),m(D,"for","words"),m(o,"id","words"),m(o,"class","input"),m(p,"class","btn md primary w-full mb-2"),m(S,"class","flex"),m(H,"class","text-center"),m(c,"class","btn md primary flex-1 text-center"),m(K,"class","btn md danger flex-1 text-center"),m(G,"class","mt-2 mb-2 flex justify-center"),m(k,"class","mt-2 mb-2"),m(ae,"class","flex-grow"),m(Q,"class","btn lg primary flex-1"),Q.disabled=ce=e[5].length<2||at,ne(Q,"bg-blue-100",e[5].length<2),ne(Q,"hover:bg-blue-500",e[5].length>1),m(te,"class","btn lg danger flex-1"),m(Z,"class","flex justify-center")},m(l,f){T(l,t,f),i(t,s),i(t,a),T(l,r,f),T(l,u,f),i(u,g),i(g,B),i(u,I),i(u,j),Xe(j,e[2]),T(l,N,f),T(l,w,f),i(w,D),i(D,y),i(w,W),i(w,o);for(let V=0;V<A.length;V+=1)A[V].m(o,null);Ke(o,e[7]),T(l,d,f),T(l,S,f),i(S,p),i(p,U),i(p,q),T(l,M,f),T(l,k,f),i(k,H),i(H,z),i(H,E),i(H,x),i(k,J),i(k,G),i(G,c),i(c,b),i(G,X),i(G,K),i(K,ue),i(k,ye);for(let V=0;V<Y.length;V+=1)Y[V].m(k,null);T(l,fe,f),T(l,ae,f),T(l,me,f),T(l,Z,f),i(Z,Q),i(Q,Te),i(Z,je),i(Z,te),i(te,Se),$e||(Ne=[F(t,"click",e[22]),F(j,"input",e[23]),F(j,"input",function(){ie(e[13])&&e[13].apply(this,arguments)}),F(o,"change",Oe(function(){ie(e[12])&&e[12].apply(this,arguments)})),F(p,"click",Dt),F(Q,"click",function(){ie(e[10])&&e[10].apply(this,arguments)}),F(te,"click",e[24])],$e=!0)},p(l,f){var V;if(e=l,f[0]&1&&ee(a,e[0]),f[0]&4&&j.value!==e[2]&&Xe(j,e[2]),f&0){oe=Object.keys(we);let P;for(P=0;P<oe.length;P+=1){const se=tt(e,oe,P);A[P]?A[P].p(se,f):(A[P]=st(se),A[P].c(),A[P].m(o,null))}for(;P<A.length;P+=1)A[P].d(1);A.length=oe.length}f[0]&128&&Ke(o,e[7]),f[0]&1&&ee(q,e[0]),f[0]&10&&$!==($=(((V=e[1][e[3]])==null?void 0:V.team)==="team1"?"Blue":"Red")+"")&&ee(E,$),f[0]&16&&ee(b,e[4]),f[0]&16384&&ee(ue,e[14]),f[0]&2088&&(de=e[5],Y=dt(Y,f,Ue,1,e,de,Re,k,_t,lt,null,et)),f[0]&32&&ce!==(ce=e[5].length<2||at)&&(Q.disabled=ce),f[0]&32&&ne(Q,"bg-blue-100",e[5].length<2),f[0]&32&&ne(Q,"hover:bg-blue-500",e[5].length>1)},d(l){l&&n(t),l&&n(r),l&&n(u),l&&n(N),l&&n(w),ht(A,l),l&&n(d),l&&n(S),l&&n(M),l&&n(k);for(let f=0;f<Y.length;f+=1)Y[f].d();l&&n(fe),l&&n(ae),l&&n(me),l&&n(Z),$e=!1,Je(Ne)}}}function Tt(e){let t,s;return t=new It({props:{value:location.href}}),{c(){ve(t.$$.fragment)},l(a){ge(t.$$.fragment,a)},m(a,r){be(t,a,r),s=!0},p:Le,i(a){s||(ke(t.$$.fragment,a),s=!0)},o(a){Ee(t.$$.fragment,a),s=!1},d(a){Ie(t,a)}}}function jt(e){let t,s,a;return{c(){t=h("h2"),s=L("Room Id "),a=L(e[0]),this.h()},l(r){t=_(r,"H2",{slot:!0});var u=v(t);s=O(u,"Room Id "),a=O(u,e[0]),u.forEach(n),this.h()},h(){m(t,"slot","title")},m(r,u){T(r,t,u),i(t,s),i(t,a)},p(r,u){u[0]&1&&ee(a,r[0])},d(r){r&&n(t)}}}function St(e){let t,s;return{c(){t=h("a"),s=L("Exit"),this.h()},l(a){t=_(a,"A",{href:!0,class:!0});var r=v(t);s=O(r,"Exit"),r.forEach(n),this.h()},h(){m(t,"href",`${ze}/`),m(t,"class","btn lg danger")},m(a,r){T(a,t,r),i(t,s)},p:Le,d(a){a&&n(t)}}}function $t(e){let t,s,a,r,u,g,B,I,j,N;Ce.title=t="Word Games!: Lobby "+e[0],a=new pt({props:{$$slots:{default:[yt]},$$scope:{ctx:e}}});function w(o){e[25](o)}let D={$$slots:{title:[jt],default:[Tt]},$$scope:{ctx:e}};e[8]!==void 0&&(D.show=e[8]),u=new xe({props:D}),Qe.push(()=>Ye(u,"show",w));function y(o){e[26](o)}let W={$$slots:{default:[St]},$$scope:{ctx:e}};return e[9]!==void 0&&(W.show=e[9]),I=new xe({props:W}),Qe.push(()=>Ye(I,"show",y)),{c(){s=C(),ve(a.$$.fragment),r=C(),ve(u.$$.fragment),B=C(),ve(I.$$.fragment)},l(o){it('[data-svelte="svelte-5lsgla"]',Ce.head).forEach(n),s=R(o),ge(a.$$.fragment,o),r=R(o),ge(u.$$.fragment,o),B=R(o),ge(I.$$.fragment,o)},m(o,d){T(o,s,d),be(a,o,d),T(o,r,d),be(u,o,d),T(o,B,d),be(I,o,d),N=!0},p(o,d){(!N||d[0]&1)&&t!==(t="Word Games!: Lobby "+o[0])&&(Ce.title=t);const S={};d[0]&32703|d[1]&4&&(S.$$scope={dirty:d,ctx:o}),a.$set(S);const p={};d[0]&1|d[1]&4&&(p.$$scope={dirty:d,ctx:o}),!g&&d[0]&256&&(g=!0,p.show=o[8],Fe(()=>g=!1)),u.$set(p);const U={};d[1]&4&&(U.$$scope={dirty:d,ctx:o}),!j&&d[0]&512&&(j=!0,U.show=o[9],Fe(()=>j=!1)),I.$set(U)},i(o){N||(ke(a.$$.fragment,o),ke(u.$$.fragment,o),ke(I.$$.fragment,o),N=!0)},o(o){Ee(a.$$.fragment,o),Ee(u.$$.fragment,o),Ee(I.$$.fragment,o),N=!1},d(o){o&&n(s),Ie(a,o),o&&n(r),Ie(u,o),o&&n(B),Ie(I,o)}}}const Bt=!1;function Wt(e){return{props:{roomId:e.page.query.get("room")}}}function Dt(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Ve("Successful shared!","success")).catch(e=>Ve(e.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Ve("Successful Copied!","success"));else if("execCommand"in document){const e=document.createElement("input");e.style.display="none",e.textContent=location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}let at=!1;function Lt(e,t,s){let a,r,u,g,B,I,j,N,w,D,y;ut(e,wt,c=>s(19,y=c));let{roomId:W}=t,o={},d=!1,S=we.Medium,p=Date.now(),U=!1,q=!1,M=`guest-${vt()}`,k;ft(()=>{const c=[r.get("seed").on(b=>{s(16,p=b)}),r.get("started").on(b=>{s(15,d=b)}),r.get("words").on(b=>{s(7,S=b)}),r.get("users").on(async b=>{s(1,o=(await Promise.all(Object.values(b))).reduce((X,K)=>(X[K.id]=K,X),{}))})];return Et().then(b=>{r.get("users").get(b).set({id:b,name:M,team:"team1"})}),()=>{c.forEach(b=>b())}});function H(c){Ze.call(this,e,c)}function z(c){Ze.call(this,e,c)}const $=()=>s(8,U=!0);function E(){M=this.value,s(2,M)}const x=()=>s(9,q=!0);function J(c){U=c,s(8,U)}function G(c){q=c,s(9,q)}return e.$$set=c=>{"roomId"in c&&s(0,W=c.roomId)},e.$$.update=()=>{if(e.$$.dirty[0]&524288&&s(3,a=y),e.$$.dirty[0]&1&&s(18,r=kt.get("rooms").get(W)),e.$$.dirty[0]&262152&&s(6,u=r.get("users").get(a)),e.$$.dirty[0]&32769&&d&&bt(`${ze}/game?room=${W}`),e.$$.dirty[0]&2&&s(5,g=Array.from(Object.entries(o)).sort(gt)),e.$$.dirty[0]&32&&s(4,B=g.filter(([c,b])=>!b.team||b.team==="team1").length),e.$$.dirty[0]&48&&s(14,I=g.length-B),e.$$.dirty[0]&68&&s(13,j=()=>{u.get("name").set(M)}),e.$$.dirty[0]&262144&&s(12,N=c=>{r.get("words").set(c.currentTarget.value)}),e.$$.dirty[0]&262144&&s(11,w=(c,b,X)=>()=>{b!==X&&r.get("users").get(c).get("team").set(X)}),e.$$.dirty[0]&327690&&s(10,D=async()=>{const c=mt.fromSeed(p);r.get("turn").set(c.fromArray(Object.keys(o)).unwrapOr(a)),r.get("started").set(!0)}),e.$$.dirty[0]&393228&&a&&k!==a){const c=a;k&&r.get("users").get(k).set(null),r.get("users").get(c).set({id:c,name:M,team:"team1"}),s(17,k=c)}},[W,o,M,a,B,g,u,S,U,q,D,w,N,j,I,d,p,k,r,y,H,z,$,E,x,J,G]}class Mt extends ot{constructor(t){super();rt(this,t,Lt,$t,nt,{roomId:0},null,[-1,-1])}}export{Mt as default,Wt as load,Bt as ssr};
