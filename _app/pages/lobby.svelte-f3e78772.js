import{S as nt,i as it,s as ut,W as Ye,X as Fe,k as C,j as ve,E as ft,d as n,n as N,m as ge,f as T,o as be,Y as Je,x as ke,u as we,v as Ee,T as Xe,A as mt,Z as Le,_ as ct,$ as dt,e as h,t as D,c as p,a as g,g as O,F as u,J as De,b as c,N as re,L as Y,a0 as Oe,a1 as ne,h as z,M as Ke,K as Ze,a2 as ze,Q as _t,a3 as ht,a4 as xe,R as pt}from"../chunks/vendor-07c54133.js";import{L as vt,a as gt,g as bt,s as kt,c as Re}from"../chunks/util-ab93b6bb.js";import{b as et}from"../chunks/paths-28a87002.js";import{M as tt,g as wt,a as st,W as Ve,u as Et,r as yt,Q as It}from"../chunks/userId-f73212ed.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";const{Map:Tt,document:Ce}=dt;function lt(e,t,s){const a=e.slice();return a[26]=t[s][0],a[27]=t[s][1],a[29]=s,a}function at(e,t,s){const a=e.slice();return a[30]=t[s],a}function ot(e){let t,s=e[30]+"",a,i;return{c(){t=h("option"),a=D(s),this.h()},l(f){t=p(f,"OPTION",{});var b=g(t);a=O(b,s),b.forEach(n),this.h()},h(){t.__value=i=Ve[e[30]],t.value=t.__value},m(f,b){T(f,t,b),u(t,a)},p:De,d(f){f&&n(t)}}}function rt(e,t){let s,a,i,f=t[29]+1+"",b,A,k=t[27].get("name")+"",$,U,y,L,j,B,o,d,w,_,I,M,H,R,P,K;return{key:e,first:null,c(){s=h("div"),a=h("div"),i=h("p"),b=D(f),A=D(" - "),$=D(k),U=C(),y=h("form"),L=h("div"),j=h("input"),d=C(),w=h("div"),_=h("input"),H=C(),R=h("hr"),this.h()},l(S){s=p(S,"DIV",{class:!0});var E=g(s);a=p(E,"DIV",{class:!0});var Z=g(a);i=p(Z,"P",{class:!0});var F=g(i);b=O(F,f),A=O(F," - "),$=O(F,k),F.forEach(n),Z.forEach(n),U=N(E),y=p(E,"FORM",{class:!0});var r=g(y);L=p(r,"DIV",{class:!0});var v=g(L);j=p(v,"INPUT",{id:!0,name:!0,type:!0,class:!0}),v.forEach(n),d=N(r),w=p(r,"DIV",{class:!0});var J=g(w);_=p(J,"INPUT",{id:!0,name:!0,type:!0,class:!0}),J.forEach(n),r.forEach(n),E.forEach(n),H=N(S),R=p(S,"HR",{}),this.h()},h(){c(i,"class","text-2xl p-1 font-bold"),c(a,"class","flex-grow"),c(j,"id",B=`${t[26]}-team-1`),c(j,"name","team"),j.value="1",c(j,"type","radio"),c(j,"class","align-bottom"),j.checked=o=t[27].get("team")==="team1",c(L,"class","btn sm primary flex-1"),c(_,"id",I=`${t[26]}-team-2`),c(_,"name","team"),_.value="2",c(_,"type","radio"),c(_,"class","align-bottom"),_.checked=M=t[27].get("team")==="team2",c(w,"class","btn sm danger flex-1"),c(y,"class","flex-grow-0 flex flex-row"),c(s,"class","flex justify-between"),re(s,"bg-gray-200",t[26]===t[5]),this.first=s},m(S,E){T(S,s,E),u(s,a),u(a,i),u(i,b),u(i,A),u(i,$),u(s,U),u(s,y),u(y,L),u(L,j),u(y,d),u(y,w),u(w,_),T(S,H,E),T(S,R,E),P||(K=[Y(j,"click",Oe(t[20])),Y(L,"click",function(){ne(t[9](t[26],t[27].get("team"),"team1"))&&t[9](t[26],t[27].get("team"),"team1").apply(this,arguments)}),Y(_,"click",Oe(t[19])),Y(w,"click",function(){ne(t[9](t[26],t[27].get("team"),"team2"))&&t[9](t[26],t[27].get("team"),"team2").apply(this,arguments)})],P=!0)},p(S,E){t=S,E[0]&16&&f!==(f=t[29]+1+"")&&z(b,f),E[0]&16&&k!==(k=t[27].get("name")+"")&&z($,k),E[0]&16&&B!==(B=`${t[26]}-team-1`)&&c(j,"id",B),E[0]&16&&o!==(o=t[27].get("team")==="team1")&&(j.checked=o),E[0]&16&&I!==(I=`${t[26]}-team-2`)&&c(_,"id",I),E[0]&16&&M!==(M=t[27].get("team")==="team2")&&(_.checked=M),E[0]&48&&re(s,"bg-gray-200",t[26]===t[5])},d(S){S&&n(s),S&&n(H),S&&n(R),P=!1,Ke(K)}}}function $t(e){var Me;let t,s,a,i,f,b,A,k,$,U,y,L,j,B,o,d,w,_,I,M,H,R,P,K,S=(((Me=e[2][e[5]])==null?void 0:Me.team)==="team1"?"Blue":"Red")+"",E,Z,F,r,v,J,ie,se,ue,ye,Q=[],Ne=new Tt,fe,le,me,X,q,Ie,ce,Te,x,$e,je,Ue,ae=Object.keys(Ve),W=[];for(let l=0;l<ae.length;l+=1)W[l]=ot(at(e,ae,l));let de=e[4];const Be=l=>l[26]+l[27].get("team");for(let l=0;l<de.length;l+=1){let m=lt(e,de,l),V=Be(m);Ne.set(V,Q[l]=rt(V,m))}return{c(){t=h("h1"),s=D("Room Id "),a=D(e[0]),i=C(),f=h("div"),b=h("label"),A=D("Name"),k=C(),$=h("input"),U=C(),y=h("div"),L=h("label"),j=D("Words"),B=C(),o=h("select");for(let l=0;l<W.length;l+=1)W[l].c();d=C(),w=h("div"),_=h("button"),I=D("Share Game "),M=D(e[0]),H=C(),R=h("div"),P=h("h2"),K=D("Teams (You are on "),E=D(S),Z=D(")"),F=C(),r=h("div"),v=h("div"),J=D(e[3]),ie=C(),se=h("div"),ue=D(e[13]),ye=C();for(let l=0;l<Q.length;l+=1)Q[l].c();fe=C(),le=h("div"),me=C(),X=h("div"),q=h("button"),Ie=D("Start"),Te=C(),x=h("button"),$e=D("Leave"),this.h()},l(l){t=p(l,"H1",{class:!0});var m=g(t);s=O(m,"Room Id "),a=O(m,e[0]),m.forEach(n),i=N(l),f=p(l,"DIV",{class:!0});var V=g(f);b=p(V,"LABEL",{for:!0});var G=g(b);A=O(G,"Name"),G.forEach(n),k=N(V),$=p(V,"INPUT",{class:!0}),V.forEach(n),U=N(l),y=p(l,"DIV",{});var ee=g(y);L=p(ee,"LABEL",{for:!0});var We=g(L);j=O(We,"Words"),We.forEach(n),B=N(ee),o=p(ee,"SELECT",{id:!0,class:!0});var Ae=g(o);for(let te=0;te<W.length;te+=1)W[te].l(Ae);Ae.forEach(n),ee.forEach(n),d=N(l),w=p(l,"DIV",{class:!0});var Ge=g(w);_=p(Ge,"BUTTON",{class:!0});var Se=g(_);I=O(Se,"Share Game "),M=O(Se,e[0]),Se.forEach(n),Ge.forEach(n),H=N(l),R=p(l,"DIV",{class:!0});var oe=g(R);P=p(oe,"H2",{class:!0});var _e=g(P);K=O(_e,"Teams (You are on "),E=O(_e,S),Z=O(_e,")"),_e.forEach(n),F=N(oe),r=p(oe,"DIV",{class:!0});var he=g(r);v=p(he,"DIV",{class:!0});var Pe=g(v);J=O(Pe,e[3]),Pe.forEach(n),ie=N(he),se=p(he,"DIV",{class:!0});var qe=g(se);ue=O(qe,e[13]),qe.forEach(n),he.forEach(n),ye=N(oe);for(let te=0;te<Q.length;te+=1)Q[te].l(oe);oe.forEach(n),fe=N(l),le=p(l,"DIV",{class:!0}),g(le).forEach(n),me=N(l),X=p(l,"DIV",{class:!0});var pe=g(X);q=p(pe,"BUTTON",{class:!0});var He=g(q);Ie=O(He,"Start"),He.forEach(n),Te=N(pe),x=p(pe,"BUTTON",{class:!0});var Qe=g(x);$e=O(Qe,"Leave"),Qe.forEach(n),pe.forEach(n),this.h()},h(){c(t,"class","text-center cursor-pointer"),c(b,"for","name"),c($,"class","input"),c(f,"class","mt-2"),c(L,"for","words"),c(o,"id","words"),c(o,"class","input"),c(_,"class","btn md primary w-full mb-2"),c(w,"class","flex"),c(P,"class","text-center"),c(v,"class","btn md primary flex-1 text-center"),c(se,"class","btn md danger flex-1 text-center"),c(r,"class","mt-2 mb-2 flex justify-center"),c(R,"class","mt-2 mb-2"),c(le,"class","flex-grow"),c(q,"class","btn lg primary flex-1"),q.disabled=ce=e[4].length<2,re(q,"bg-blue-100",e[4].length<2),re(q,"hover:bg-blue-500",e[4].length>1),c(x,"class","btn lg danger flex-1"),c(X,"class","flex justify-center")},m(l,m){T(l,t,m),u(t,s),u(t,a),T(l,i,m),T(l,f,m),u(f,b),u(b,A),u(f,k),u(f,$),Ze($,e[1]),T(l,U,m),T(l,y,m),u(y,L),u(L,j),u(y,B),u(y,o);for(let V=0;V<W.length;V+=1)W[V].m(o,null);ze(o,e[12]),T(l,d,m),T(l,w,m),u(w,_),u(_,I),u(_,M),T(l,H,m),T(l,R,m),u(R,P),u(P,K),u(P,E),u(P,Z),u(R,F),u(R,r),u(r,v),u(v,J),u(r,ie),u(r,se),u(se,ue),u(R,ye);for(let V=0;V<Q.length;V+=1)Q[V].m(R,null);T(l,fe,m),T(l,le,m),T(l,me,m),T(l,X,m),u(X,q),u(q,Ie),u(X,Te),u(X,x),u(x,$e),je||(Ue=[Y(t,"click",e[21]),Y($,"input",e[22]),Y($,"input",function(){ne(e[11])&&e[11].apply(this,arguments)}),Y(o,"change",Oe(function(){ne(e[10])&&e[10].apply(this,arguments)})),Y(_,"click",e[14]),Y(q,"click",function(){ne(e[8])&&e[8].apply(this,arguments)}),Y(x,"click",e[23])],je=!0)},p(l,m){var V;if(e=l,m[0]&1&&z(a,e[0]),m[0]&2&&$.value!==e[1]&&Ze($,e[1]),m&0){ae=Object.keys(Ve);let G;for(G=0;G<ae.length;G+=1){const ee=at(e,ae,G);W[G]?W[G].p(ee,m):(W[G]=ot(ee),W[G].c(),W[G].m(o,null))}for(;G<W.length;G+=1)W[G].d(1);W.length=ae.length}m[0]&4096&&ze(o,e[12]),m[0]&1&&z(M,e[0]),m[0]&36&&S!==(S=(((V=e[2][e[5]])==null?void 0:V.team)==="team1"?"Blue":"Red")+"")&&z(E,S),m[0]&8&&z(J,e[3]),m[0]&8192&&z(ue,e[13]),m[0]&560&&(de=e[4],Q=_t(Q,m,Be,1,e,de,Ne,R,pt,rt,null,lt)),m[0]&16&&ce!==(ce=e[4].length<2)&&(q.disabled=ce),m[0]&16&&re(q,"bg-blue-100",e[4].length<2),m[0]&16&&re(q,"hover:bg-blue-500",e[4].length>1)},d(l){l&&n(t),l&&n(i),l&&n(f),l&&n(U),l&&n(y),ht(W,l),l&&n(d),l&&n(w),l&&n(H),l&&n(R);for(let m=0;m<Q.length;m+=1)Q[m].d();l&&n(fe),l&&n(le),l&&n(me),l&&n(X),je=!1,Ke(Ue)}}}function jt(e){let t,s;return t=new It({props:{value:location.href}}),{c(){ve(t.$$.fragment)},l(a){ge(t.$$.fragment,a)},m(a,i){be(t,a,i),s=!0},p:De,i(a){s||(ke(t.$$.fragment,a),s=!0)},o(a){we(t.$$.fragment,a),s=!1},d(a){Ee(t,a)}}}function St(e){let t,s,a;return{c(){t=h("h2"),s=D("Room Id "),a=D(e[0]),this.h()},l(i){t=p(i,"H2",{slot:!0});var f=g(t);s=O(f,"Room Id "),a=O(f,e[0]),f.forEach(n),this.h()},h(){c(t,"slot","title")},m(i,f){T(i,t,f),u(t,s),u(t,a)},p(i,f){f[0]&1&&z(a,i[0])},d(i){i&&n(t)}}}function Lt(e){let t,s;return{c(){t=h("a"),s=D("Exit"),this.h()},l(a){t=p(a,"A",{href:!0,class:!0});var i=g(t);s=O(i,"Exit"),i.forEach(n),this.h()},h(){c(t,"href",`${et}/`),c(t,"class","btn lg danger")},m(a,i){T(a,t,i),u(t,s)},p:De,d(a){a&&n(t)}}}function Dt(e){let t,s,a,i,f,b,A,k,$,U;Ce.title=t="Word Games!: Lobby "+e[0],a=new vt({props:{$$slots:{default:[$t]},$$scope:{ctx:e}}});function y(o){e[24](o)}let L={$$slots:{title:[St],default:[jt]},$$scope:{ctx:e}};e[6]!==void 0&&(L.show=e[6]),f=new tt({props:L}),Ye.push(()=>Fe(f,"show",y));function j(o){e[25](o)}let B={$$slots:{default:[Lt]},$$scope:{ctx:e}};return e[7]!==void 0&&(B.show=e[7]),k=new tt({props:B}),Ye.push(()=>Fe(k,"show",j)),{c(){s=C(),ve(a.$$.fragment),i=C(),ve(f.$$.fragment),A=C(),ve(k.$$.fragment)},l(o){ft('[data-svelte="svelte-5lsgla"]',Ce.head).forEach(n),s=N(o),ge(a.$$.fragment,o),i=N(o),ge(f.$$.fragment,o),A=N(o),ge(k.$$.fragment,o)},m(o,d){T(o,s,d),be(a,o,d),T(o,i,d),be(f,o,d),T(o,A,d),be(k,o,d),U=!0},p(o,d){(!U||d[0]&1)&&t!==(t="Word Games!: Lobby "+o[0])&&(Ce.title=t);const w={};d[0]&16383|d[1]&4&&(w.$$scope={dirty:d,ctx:o}),a.$set(w);const _={};d[0]&1|d[1]&4&&(_.$$scope={dirty:d,ctx:o}),!b&&d[0]&64&&(b=!0,_.show=o[6],Je(()=>b=!1)),f.$set(_);const I={};d[1]&4&&(I.$$scope={dirty:d,ctx:o}),!$&&d[0]&128&&($=!0,I.show=o[7],Je(()=>$=!1)),k.$set(I)},i(o){U||(ke(a.$$.fragment,o),ke(f.$$.fragment,o),ke(k.$$.fragment,o),U=!0)},o(o){we(a.$$.fragment,o),we(f.$$.fragment,o),we(k.$$.fragment,o),U=!1},d(o){o&&n(s),Ee(a,o),o&&n(i),Ee(f,o),o&&n(A),Ee(k,o)}}}const Mt=!1;function Wt(e){return{props:{roomId:e.page.query.get("room")}}}function Ot(e,t,s){let a,i,f,b,A,k,$,U,y,L,j,B,o;Xe(e,Et,r=>s(5,B=r)),Xe(e,yt,r=>s(18,o=r));let{roomId:d}=t,w=!1,_=!1,I=`guest-${gt()}`,M;function H(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Re("Successful shared!","success")).catch(r=>Re(r.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Re("Successful Copied!","success"));else{const r=document.createElement("input");r.style.display="none",r.textContent=location.href,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}}mt(async()=>{const r=await st(),v=i.get(r);v&&v.get("name")&&(s(1,I=v.get("name")),v.set("name",I))});function R(r){xe.call(this,e,r)}function P(r){xe.call(this,e,r)}const K=()=>s(6,w=!0);function S(){I=this.value,s(1,I)}const E=()=>s(7,_=!0);function Z(r){w=r,s(6,w)}function F(r){_=r,s(7,_)}return e.$$set=r=>{"roomId"in r&&s(0,d=r.roomId)},e.$$.update=()=>{if(e.$$.dirty[0]&262145&&s(16,a=wt(o,d)),e.$$.dirty[0]&65536&&s(17,k=a.get("started")),e.$$.dirty[0]&131073&&k&&bt(`${et}/game?room=${d}`),e.$$.dirty[0]&65536&&s(2,i=a.get("users")),e.$$.dirty[0]&4&&s(4,f=Array.from(i.entries()).sort(kt)),e.$$.dirty[0]&16&&s(3,b=f.filter(([r,v])=>v.get("team")==="team1").length),e.$$.dirty[0]&24&&s(13,A=f.length-b),e.$$.dirty[0]&65536&&s(12,$=a.get("words")),e.$$.dirty[0]&6&&s(11,U=async()=>{const r=await st();(i.get(r)||i.set(r,new Le(Object.entries({userId:r,name:I,team:"team1"})))).set("name",I)}),e.$$.dirty[0]&65536&&s(10,y=r=>{a.set("words",r.currentTarget.value)}),e.$$.dirty[0]&6&&s(9,L=(r,v,J)=>()=>{v!==J&&(i.get(r)||i.set(r,new Le(Object.entries({userId:r,name:I,team:"team1"})))).set("team",J)}),e.$$.dirty[0]&65540&&s(8,j=async()=>{const r=ct.fromSeed(a.get("seed"));a.set("turn",r.fromArray(Array.from(i.keys())).unwrap()),a.set("started",!0)}),e.$$.dirty[0]&32806&&B&&M!==B){const r=B;let v;M&&(v=i.get(M),i.delete(M)),i.set(r,new Le(Object.entries({id:r,name:(v==null?void 0:v.get("name"))||I,team:(v==null?void 0:v.get("team"))||"team1"}))),s(15,M=r)}},[d,I,i,b,f,B,w,_,j,L,y,U,$,A,H,M,a,k,o,R,P,K,S,E,Z,F]}class At extends nt{constructor(t){super();it(this,t,Ot,Dt,ut,{roomId:0},null,[-1,-1])}}export{At as default,Wt as load,Mt as ssr};
