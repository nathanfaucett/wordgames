import{S as t,i as e,s as a,j as s,m as l,o as c,x as r,u as o,v as n,U as i,A as u,e as h,t as d,c as f,a as m,g,d as p,f as v,H as b,I as x,k as $,n as y,b as E,V as w,K as I,W as k,X as T,h as V,Y as j,J as D,Z as L,_ as O,$ as _,a0 as N}from"../chunks/vendor-30d0dc21.js";import{L as P,a as A,b as R}from"../chunks/p2p-ac9564ed.js";import{g as U,W as B,s as S,a as W,u as H,b as C,c as M,e as Q,d as q}from"../chunks/navigation-f7ae4a34.js";import{b as z}from"../chunks/paths-45dac81d.js";import"../chunks/singletons-e82519e2.js";function F(t,e,a){const s=t.slice();return s[18]=e[a],s}function G(t,e,a){const s=t.slice();return s[21]=e[a],s}function J(t){let e,a,s,l=t[21]+"";return{c(){e=h("option"),a=d(l),this.h()},l(t){e=f(t,"OPTION",{});var s=m(e);a=g(s,l),s.forEach(p),this.h()},h(){e.__value=s=B[t[21]],e.value=e.__value},m(t,s){v(t,e,s),b(e,a)},p:x,d(t){t&&p(e)}}}function K(t){let e,a,s,l,c,r,o,n,i,u,x,D,L,O,_,N,P,A,R,U,B,S,W,H,C,M,Q=t[18].name+"";return{c(){e=h("div"),a=h("div"),s=h("p"),l=d(Q),c=$(),r=h("form"),o=h("div"),n=h("label"),i=d("Team 1"),x=$(),D=h("input"),_=$(),N=h("div"),P=h("label"),A=d("Team 2"),U=$(),B=h("input"),H=$(),this.h()},l(t){e=f(t,"DIV",{class:!0});var u=m(e);a=f(u,"DIV",{class:!0});var h=m(a);s=f(h,"P",{class:!0});var d=m(s);l=g(d,Q),d.forEach(p),h.forEach(p),c=y(u),r=f(u,"FORM",{class:!0});var v=m(r);o=f(v,"DIV",{class:!0});var b=m(o);n=f(b,"LABEL",{for:!0,class:!0});var $=m(n);i=g($,"Team 1"),$.forEach(p),x=y(b),D=f(b,"INPUT",{id:!0,name:!0,type:!0,class:!0}),b.forEach(p),_=y(v),N=f(v,"DIV",{class:!0});var E=m(N);P=f(E,"LABEL",{for:!0,class:!0});var w=m(P);A=g(w,"Team 2"),w.forEach(p),U=y(E),B=f(E,"INPUT",{id:!0,name:!0,type:!0,class:!0}),E.forEach(p),v.forEach(p),H=y(u),u.forEach(p),this.h()},h(){E(s,"class","text-2xl mb-2 font-bold"),E(a,"class","text-left"),E(n,"for",u=`${t[18].id}-1`),E(n,"class","cursor-pointer"),E(D,"id",L=`${t[18].id}-1`),E(D,"name","team"),D.value="1",E(D,"type","radio"),E(D,"class","ml-2 cursor-pointer"),D.checked=O=1===t[18].team,E(o,"class","bg-blue-600 hover:bg-blue-500 text-white inline-block cursor-pointer py-2 px-4"),w(o,"bg-blue-300",2===t[18].team),E(P,"for",R=`${t[18].id}-2`),E(P,"class","cursor-pointer"),E(B,"id",S=`${t[18].id}-2`),E(B,"name","team"),B.value="2",E(B,"type","radio"),E(B,"class","ml-2 cursor-pointer"),B.checked=W=2===t[18].team,E(N,"class","bg-blue-600 hover:bg-blue-500 text-white inline-block cursor-pointer py-2 px-4"),w(N,"bg-blue-300",1===t[18].team),E(r,"class","text-right"),E(e,"class","grid grid-cols-2")},m(u,h){v(u,e,h),b(e,a),b(a,s),b(s,l),b(e,c),b(e,r),b(r,o),b(o,n),b(n,i),b(o,x),b(o,D),b(r,_),b(r,N),b(N,P),b(P,A),b(N,U),b(N,B),b(e,H),C||(M=[I(D,"click",k(t[13])),I(o,"click",(function(){T(t[8](t[18],1))&&t[8](t[18],1).apply(this,arguments)})),I(B,"click",k(t[12])),I(N,"click",(function(){T(t[8](t[18],2))&&t[8](t[18],2).apply(this,arguments)}))],C=!0)},p(e,a){t=e,64&a&&Q!==(Q=t[18].name+"")&&V(l,Q),64&a&&u!==(u=`${t[18].id}-1`)&&E(n,"for",u),64&a&&L!==(L=`${t[18].id}-1`)&&E(D,"id",L),64&a&&O!==(O=1===t[18].team)&&(D.checked=O),64&a&&w(o,"bg-blue-300",2===t[18].team),64&a&&R!==(R=`${t[18].id}-2`)&&E(P,"for",R),64&a&&S!==(S=`${t[18].id}-2`)&&E(B,"id",S),64&a&&W!==(W=2===t[18].team)&&(B.checked=W),64&a&&w(N,"bg-blue-300",1===t[18].team)},d(t){t&&p(e),C=!1,j(M)}}}function X(t){let e,a,s,l,c,r,o,n,i,u,x,_,N,P,A,R,U,W,H,C,M,Q,q,X,Y,Z,et,at,st,lt,ct,rt,ot,nt,it,ut=tt(t[6],1)+"",ht=tt(t[6],2)+"",dt=Object.keys(B),ft=[];for(let h=0;h<dt.length;h+=1)ft[h]=J(G(t,dt,h));let mt=t[6],gt=[];for(let h=0;h<mt.length;h+=1)gt[h]=K(F(t,mt,h));return{c(){e=h("h1"),a=d("Room "),s=d(t[0]),l=$(),c=h("div"),r=h("input"),o=$(),n=h("div"),i=h("label"),u=d("Words"),x=$(),_=h("select");for(let t=0;t<ft.length;t+=1)ft[t].c();P=$(),A=h("div"),R=h("h1"),U=d("Team 1: "),W=d(ut),H=d(" - Team 2: "),C=d(ht),M=$();for(let t=0;t<gt.length;t+=1)gt[t].c();Q=$(),q=h("div"),X=h("button"),Y=d("Start"),et=$(),at=h("div"),st=h("img"),lt=$(),ct=h("div"),rt=h("a"),ot=d("Exit"),this.h()},l(h){e=f(h,"H1",{class:!0});var d=m(e);a=g(d,"Room "),s=g(d,t[0]),d.forEach(p),l=y(h),c=f(h,"DIV",{class:!0});var v=m(c);r=f(v,"INPUT",{class:!0,type:!0,placeholder:!0}),v.forEach(p),o=y(h),n=f(h,"DIV",{class:!0});var b=m(n);i=f(b,"LABEL",{for:!0});var $=m(i);u=g($,"Words"),$.forEach(p),x=y(b),_=f(b,"SELECT",{id:!0,class:!0});var E=m(_);for(let t=0;t<ft.length;t+=1)ft[t].l(E);E.forEach(p),b.forEach(p),P=y(h),A=f(h,"DIV",{class:!0});var w=m(A);R=f(w,"H1",{class:!0});var I=m(R);U=g(I,"Team 1: "),W=g(I,ut),H=g(I," - Team 2: "),C=g(I,ht),I.forEach(p),M=y(w);for(let t=0;t<gt.length;t+=1)gt[t].l(w);w.forEach(p),Q=y(h),q=f(h,"DIV",{class:!0});var k=m(q);X=f(k,"BUTTON",{class:!0});var T=m(X);Y=g(T,"Start"),T.forEach(p),k.forEach(p),et=y(h),at=f(h,"DIV",{class:!0});var V=m(at);st=f(V,"IMG",{class:!0,alt:!0}),V.forEach(p),lt=y(h),ct=f(h,"DIV",{class:!0});var j=m(ct);rt=f(j,"A",{href:!0,class:!0});var D=m(rt);ot=g(D,"Exit"),D.forEach(p),j.forEach(p),this.h()},h(){E(e,"class","text-5xl text-center mb-4"),E(r,"class","bg-gray-200 focus:bg-white w-full py-2 px-4"),E(r,"type","text"),E(r,"placeholder","Enter Name"),E(c,"class","max-w-sm mx-auto"),E(i,"for","words"),E(_,"id","words"),E(_,"class","bg-gray-200 focus:bg-white w-full py-2 px-4"),E(n,"class","max-w-sm mx-auto mt-2"),E(R,"class","text-3xl text-center mb-2"),E(A,"class","mt-2 mb-4 max-w-md mx-auto"),E(X,"class","bg-blue-600 text-white text-lg py-2 px-4"),X.disabled=Z=t[6].length<2,w(X,"bg-blue-100",t[6].length<2),w(X,"hover:bg-blue-500",t[6].length>1),E(q,"class","text-center"),E(st,"class","inline-block"),E(st,"alt","QRCode"),E(at,"class","text-center"),E(rt,"href",`${z}/`),E(rt,"class","bg-blue-600 hover:bg-blue-500 text-white text-lg mt-4 py-2 px-8"),E(ct,"class","flex mt-4 justify-center")},m(h,d){v(h,e,d),b(e,a),b(e,s),v(h,l,d),v(h,c,d),b(c,r),t[14](r),D(r,t[2]),v(h,o,d),v(h,n,d),b(n,i),b(i,u),b(n,x),b(n,_);for(let t=0;t<ft.length;t+=1)ft[t].m(_,null);L(_,t[1].words),v(h,P,d),v(h,A,d),b(A,R),b(R,U),b(R,W),b(R,H),b(R,C),b(A,M);for(let t=0;t<gt.length;t+=1)gt[t].m(A,null);v(h,Q,d),v(h,q,d),b(q,X),b(X,Y),v(h,et,d),v(h,at,d),b(at,st),t[16](st),v(h,lt,d),v(h,ct,d),b(ct,rt),b(rt,ot),nt||(it=[I(r,"input",t[15]),I(r,"change",t[7]),I(_,"change",k((function(){T(t[5])&&t[5].apply(this,arguments)}))),I(X,"click",S)],nt=!0)},p(e,a){if(t=e,1&a&&V(s,t[0]),4&a&&r.value!==t[2]&&D(r,t[2]),0&a){let e;for(dt=Object.keys(B),e=0;e<dt.length;e+=1){const s=G(t,dt,e);ft[e]?ft[e].p(s,a):(ft[e]=J(s),ft[e].c(),ft[e].m(_,null))}for(;e<ft.length;e+=1)ft[e].d(1);ft.length=dt.length}if(2&a&&N!==(N=t[1].words)&&L(_,t[1].words),64&a&&ut!==(ut=tt(t[6],1)+"")&&V(W,ut),64&a&&ht!==(ht=tt(t[6],2)+"")&&V(C,ht),320&a){let e;for(mt=t[6],e=0;e<mt.length;e+=1){const s=F(t,mt,e);gt[e]?gt[e].p(s,a):(gt[e]=K(s),gt[e].c(),gt[e].m(A,null))}for(;e<gt.length;e+=1)gt[e].d(1);gt.length=mt.length}64&a&&Z!==(Z=t[6].length<2)&&(X.disabled=Z),64&a&&w(X,"bg-blue-100",t[6].length<2),64&a&&w(X,"hover:bg-blue-500",t[6].length>1)},d(a){a&&p(e),a&&p(l),a&&p(c),t[14](null),a&&p(o),a&&p(n),O(ft,a),a&&p(P),a&&p(A),O(gt,a),a&&p(Q),a&&p(q),a&&p(et),a&&p(at),t[16](null),a&&p(lt),a&&p(ct),nt=!1,j(it)}}}function Y(t){let e,a;return e=new P({props:{$$slots:{default:[X]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){l(e.$$.fragment,t)},m(t,s){c(e,t,s),a=!0},p(t,[a]){const s={};16777343&a&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){a||(r(e.$$.fragment,t),a=!0)},o(t){o(e.$$.fragment,t),a=!1},d(t){n(e,t)}}}function Z(t){return{props:{roomId:t.page.query.get("room")}}}function tt(t,e){return t.filter((t=>t.team===e)).length}function et(t,e,a){let s,l,c,r,o,n;i(t,W,(t=>a(1,r=t))),i(t,H,(t=>a(10,o=t))),i(t,C,(t=>a(11,n=t)));var h=this&&this.__awaiter||function(t,e,a,s){return new(a||(a=Promise))((function(l,c){function r(t){try{n(s.next(t))}catch(e){c(e)}}function o(t){try{n(s.throw(t))}catch(e){c(e)}}function n(t){var e;t.done?l(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(r,o)}n((s=s.apply(t,e||[])).next())}))};let d,f,m,{roomId:g}=e;return u((()=>{R(g);const t=new window.QRious({element:m,size:500,value:location.href});console.log(t)})),t.$$set=t=>{"roomId"in t&&a(0,g=t.roomId)},t.$$.update=()=>{2048&t.$$.dirty&&a(9,s=(t,e)=>t.id===(null==n?void 0:n.id)?-1:e.id===(null==n?void 0:n.id)?1:0),1536&t.$$.dirty&&a(6,l=Object.values(o.byId).sort(s)),3&t.$$.dirty&&r.started&&q(`${z}/game?room=${g}`),2&t.$$.dirty&&a(5,c=t=>h(void 0,void 0,void 0,(function*(){const e=t.currentTarget.value;if(e!==r.words){(yield U()).change((t=>{t.words=e}))}})))},[g,r,d,f,m,c,l,function(){return h(this,void 0,void 0,(function*(){const t=yield M(),e=A();e&&t.change((t=>{(t.byId[e]||(t.byId[e]=Q(e))).name=d}))}))},function(t,e){return function(a){return h(this,void 0,void 0,(function*(){if(t.team!==e){(yield M()).change((a=>{a.byId[t.id].team=e}))}}))}},s,o,n,function(e){_.call(this,t,e)},function(e){_.call(this,t,e)},function(t){N[t?"unshift":"push"]((()=>{f=t,a(3,f)}))},function(){d=this.value,a(2,d)},function(t){N[t?"unshift":"push"]((()=>{m=t,a(4,m)}))}]}class at extends t{constructor(t){super(),e(this,t,et,Y,a,{roomId:0})}}export{at as default,Z as load};
