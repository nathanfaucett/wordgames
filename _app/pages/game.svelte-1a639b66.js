import{S as ce,i as de,s as _e,t as E,g as T,f as p,h as q,J as F,d as f,ac as pe,W as he,X as ge,k as O,j as X,E as Te,n as U,m as z,o as J,Y as be,x as K,u as Z,v as x,T as ye,A as $e,_ as je,l as ve,e as k,c as w,a as I,b as y,N as re,F as g,L as ee,M as ke,a1 as ne}from"../chunks/vendor-07c54133.js";import{b as Y}from"../chunks/paths-28a87002.js";import{L as De,s as Se,g as Ve}from"../chunks/util-ab93b6bb.js";import{M as we,g as Ne,b as Le,u as Me,r as Re,Q as Be}from"../chunks/userId-f73212ed.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";function Ge(s){let t=le(s[0])+"",r,e,n=le(s[1])+"",l;return{c(){r=E(t),e=E(":"),l=E(n)},l(a){r=T(a,t),e=T(a,":"),l=T(a,n)},m(a,u){p(a,r,u),p(a,e,u),p(a,l,u)},p(a,[u]){u&1&&t!==(t=le(a[0])+"")&&q(r,t),u&2&&n!==(n=le(a[1])+"")&&q(l,n)},i:F,o:F,d(a){a&&f(r),a&&f(e),a&&f(l)}}}function le(s){return(s<10?"0":"")+s}function He(s,t,r){let e,n,{seconds:l=60}=t;return s.$$set=a=>{"seconds"in a&&r(2,l=a.seconds)},s.$$.update=()=>{s.$$.dirty&4&&r(0,e=Math.floor(l/60)),s.$$.dirty&5&&r(1,n=Math.floor(l-e*60))},[e,n,l]}class Oe extends ce{constructor(t){super();de(this,t,He,Ge,_e,{seconds:2})}}function Ue(s){var n;let t=((n=s[2].get(s[1]))==null?void 0:n.get("name"))+"",r,e;return{c(){r=E(t),e=E("'s turn")},l(l){r=T(l,t),e=T(l,"'s turn")},m(l,a){p(l,r,a),p(l,e,a)},p(l,a){var u;a&6&&t!==(t=((u=l[2].get(l[1]))==null?void 0:u.get("name"))+"")&&q(r,t)},d(l){l&&f(r),l&&f(e)}}}function We(s){var n;let t=((n=s[2].get(s[1]))==null?void 0:n.get("name"))+"",r,e;return{c(){r=E(t),e=E(" and your Team's turn")},l(l){r=T(l,t),e=T(l," and your Team's turn")},m(l,a){p(l,r,a),p(l,e,a)},p(l,a){var u;a&6&&t!==(t=((u=l[2].get(l[1]))==null?void 0:u.get("name"))+"")&&q(r,t)},d(l){l&&f(r),l&&f(e)}}}function qe(s){let t;return{c(){t=E("Your Turn")},l(r){t=T(r,"Your Turn")},m(r,e){p(r,t,e)},p:F,d(r){r&&f(t)}}}function Ie(s){let t;function r(l,a){return l[5]?Ae:Ce}let e=r(s),n=e(s);return{c(){n.c(),t=ve()},l(l){n.l(l),t=ve()},m(l,a){n.m(l,a),p(l,t,a)},p(l,a){e===(e=r(l))&&n?n.p(l,a):(n.d(1),n=e(l),n&&(n.c(),n.m(t.parentNode,t)))},d(l){n.d(l),l&&f(t)}}}function Ae(s){let t,r,e,n,l,a,u,_,v,b,j,h,B,L;return{c(){t=k("div"),r=k("div"),e=k("p"),n=E(s[7]),l=O(),a=k("div"),u=k("div"),_=k("button"),v=E("Skip"),b=O(),j=k("button"),h=E("Next"),this.h()},l(i){t=w(i,"DIV",{class:!0});var m=I(t);r=w(m,"DIV",{class:!0});var N=I(r);e=w(N,"P",{class:!0});var $=I(e);n=T($,s[7]),$.forEach(f),N.forEach(f),m.forEach(f),l=U(i),a=w(i,"DIV",{class:!0});var S=I(a);u=w(S,"DIV",{class:!0});var D=I(u);_=w(D,"BUTTON",{class:!0});var V=I(_);v=T(V,"Skip"),V.forEach(f),b=U(D),j=w(D,"BUTTON",{class:!0});var H=I(j);h=T(H,"Next"),H.forEach(f),D.forEach(f),S.forEach(f),this.h()},h(){y(e,"class","text-6xl"),y(r,"class","text-center"),y(t,"class","flex-1 flex h-full justify-center items-center"),y(_,"class","btn lg danger flex-1"),y(j,"class","btn lg primary flex-1"),y(u,"class","flex flex-1 justify-center"),y(a,"class","flex-1")},m(i,m){p(i,t,m),g(t,r),g(r,e),g(e,n),p(i,l,m),p(i,a,m),g(a,u),g(u,_),g(_,v),g(u,b),g(u,j),g(j,h),B||(L=[ee(_,"click",function(){ne(s[3])&&s[3].apply(this,arguments)}),ee(j,"click",function(){ne(s[11])&&s[11].apply(this,arguments)})],B=!0)},p(i,m){s=i,m&128&&q(n,s[7])},d(i){i&&f(t),i&&f(l),i&&f(a),B=!1,ke(L)}}}function Ce(s){let t,r,e,n,l,a;return{c(){t=k("div"),r=k("div"),e=k("button"),n=E("Start"),this.h()},l(u){t=w(u,"DIV",{class:!0});var _=I(t);r=w(_,"DIV",{class:!0});var v=I(r);e=w(v,"BUTTON",{class:!0});var b=I(e);n=T(b,"Start"),b.forEach(f),v.forEach(f),_.forEach(f),this.h()},h(){y(e,"class","btn lg primary flex-1"),y(r,"class","flex justify-center"),y(t,"class","flex-1")},m(u,_){p(u,t,_),g(t,r),g(r,e),g(e,n),l||(a=ee(e,"click",function(){ne(s[12])&&s[12].apply(this,arguments)}),l=!0)},p(u,_){s=u},d(u){u&&f(t),l=!1,a()}}}function Pe(s){let t,r,e,n,l,a,u,_,v,b,j,h,B,L,i,m,N,$,S,D,V,H,G,M,te;function se(o,d){var W,A;return o[6]?qe:((B==null||d&262)&&(B=((W=o[2].get(o[8]))==null?void 0:W.get("team"))===((A=o[2].get(o[1]))==null?void 0:A.get("team"))),B?We:Ue)}let P=se(s,-1),R=P(s);m=new Oe({props:{seconds:s[4]}});let c=s[6]&&Ie(s);return{c(){t=k("h1"),r=E("Room Id "),e=E(s[0]),n=O(),l=k("div"),a=k("div"),u=E(s[14]),_=O(),v=k("div"),b=E(s[13]),j=O(),h=k("h1"),R.c(),L=O(),i=k("p"),X(m.$$.fragment),N=O(),$=k("div"),c&&c.c(),S=O(),D=k("div"),V=k("button"),H=E("Leave"),this.h()},l(o){t=w(o,"H1",{class:!0});var d=I(t);r=T(d,"Room Id "),e=T(d,s[0]),d.forEach(f),n=U(o),l=w(o,"DIV",{class:!0});var W=I(l);a=w(W,"DIV",{class:!0});var A=I(a);u=T(A,s[14]),A.forEach(f),_=U(W),v=w(W,"DIV",{class:!0});var Q=I(v);b=T(Q,s[13]),Q.forEach(f),W.forEach(f),j=U(o),h=w(o,"H1",{class:!0});var ie=I(h);R.l(ie),ie.forEach(f),L=U(o),i=w(o,"P",{class:!0});var ae=I(i);z(m.$$.fragment,ae),ae.forEach(f),N=U(o),$=w(o,"DIV",{class:!0});var fe=I($);c&&c.l(fe),fe.forEach(f),S=U(o),D=w(o,"DIV",{class:!0});var ue=I(D);V=w(ue,"BUTTON",{class:!0});var me=I(V);H=T(me,"Leave"),me.forEach(f),ue.forEach(f),this.h()},h(){var o,d;y(t,"class","text-center cursor-pointer"),y(a,"class","btn md primary flex-1 text-center"),y(v,"class","btn md danger flex-1 text-center"),y(l,"class","flex justify-center mt-2"),y(h,"class","text-center text-white rounded py-4 my-4"),re(h,"bg-blue-500",((o=s[2].get(s[8]))==null?void 0:o.get("team"))==="team1"),re(h,"bg-red-500",((d=s[2].get(s[8]))==null?void 0:d.get("team"))==="team2"),y(i,"class","text-2xl text-center"),y($,"class","flex-grow flex flex-col justify-center"),y(V,"class","btn lg danger flex-1"),y(D,"class","flex justify-center")},m(o,d){p(o,t,d),g(t,r),g(t,e),p(o,n,d),p(o,l,d),g(l,a),g(a,u),g(l,_),g(l,v),g(v,b),p(o,j,d),p(o,h,d),R.m(h,null),p(o,L,d),p(o,i,d),J(m,i,null),p(o,N,d),p(o,$,d),c&&c.m($,null),p(o,S,d),p(o,D,d),g(D,V),g(V,H),G=!0,M||(te=[ee(t,"click",s[22]),ee(V,"click",s[23])],M=!0)},p(o,d){var A,Q;(!G||d&1)&&q(e,o[0]),(!G||d&16384)&&q(u,o[14]),(!G||d&8192)&&q(b,o[13]),P===(P=se(o,d))&&R?R.p(o,d):(R.d(1),R=P(o),R&&(R.c(),R.m(h,null))),d&260&&re(h,"bg-blue-500",((A=o[2].get(o[8]))==null?void 0:A.get("team"))==="team1"),d&260&&re(h,"bg-red-500",((Q=o[2].get(o[8]))==null?void 0:Q.get("team"))==="team2");const W={};d&16&&(W.seconds=o[4]),m.$set(W),o[6]?c?c.p(o,d):(c=Ie(o),c.c(),c.m($,null)):c&&(c.d(1),c=null)},i(o){G||(K(m.$$.fragment,o),G=!0)},o(o){Z(m.$$.fragment,o),G=!1},d(o){o&&f(t),o&&f(n),o&&f(l),o&&f(j),o&&f(h),R.d(),o&&f(L),o&&f(i),x(m),o&&f(N),o&&f($),c&&c.d(),o&&f(S),o&&f(D),M=!1,ke(te)}}}function Ye(s){let t,r;return t=new Be({props:{value:location.href}}),{c(){X(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){J(t,e,n),r=!0},p:F,i(e){r||(K(t.$$.fragment,e),r=!0)},o(e){Z(t.$$.fragment,e),r=!1},d(e){x(t,e)}}}function Qe(s){let t,r,e;return{c(){t=k("h2"),r=E("Room Id "),e=E(s[0]),this.h()},l(n){t=w(n,"H2",{slot:!0});var l=I(t);r=T(l,"Room Id "),e=T(l,s[0]),l.forEach(f),this.h()},h(){y(t,"slot","title")},m(n,l){p(n,t,l),g(t,r),g(t,e)},p(n,l){l&1&&q(e,n[0])},d(n){n&&f(t)}}}function Fe(s){let t,r;return{c(){t=k("a"),r=E("Exit"),this.h()},l(e){t=w(e,"A",{href:!0,class:!0});var n=I(t);r=T(n,"Exit"),n.forEach(f),this.h()},h(){y(t,"href",`${Y}/`),y(t,"class","btn lg danger")},m(e,n){p(e,t,n),g(t,r)},p:F,d(e){e&&f(t)}}}function Xe(s){let t,r,e,n,l,a,u,_,v,b;document.title=t="Word Games!: Playing Game in "+s[0],e=new De({props:{$$slots:{default:[Pe]},$$scope:{ctx:s}}});function j(i){s[24](i)}let h={$$slots:{title:[Qe],default:[Ye]},$$scope:{ctx:s}};s[9]!==void 0&&(h.show=s[9]),l=new we({props:h}),he.push(()=>ge(l,"show",j));function B(i){s[25](i)}let L={$$slots:{default:[Fe]},$$scope:{ctx:s}};return s[10]!==void 0&&(L.show=s[10]),_=new we({props:L}),he.push(()=>ge(_,"show",B)),{c(){r=O(),X(e.$$.fragment),n=O(),X(l.$$.fragment),u=O(),X(_.$$.fragment)},l(i){Te('[data-svelte="svelte-3p3nw5"]',document.head).forEach(f),r=U(i),z(e.$$.fragment,i),n=U(i),z(l.$$.fragment,i),u=U(i),z(_.$$.fragment,i)},m(i,m){p(i,r,m),J(e,i,m),p(i,n,m),J(l,i,m),p(i,u,m),J(_,i,m),b=!0},p(i,[m]){(!b||m&1)&&t!==(t="Word Games!: Playing Game in "+i[0])&&(document.title=t);const N={};m&67141631&&(N.$$scope={dirty:m,ctx:i}),e.$set(N);const $={};m&67108865&&($.$$scope={dirty:m,ctx:i}),!a&&m&512&&(a=!0,$.show=i[9],be(()=>a=!1)),l.$set($);const S={};m&67108864&&(S.$$scope={dirty:m,ctx:i}),!v&&m&1024&&(v=!0,S.show=i[10],be(()=>v=!1)),_.$set(S)},i(i){b||(K(e.$$.fragment,i),K(l.$$.fragment,i),K(_.$$.fragment,i),b=!0)},o(i){Z(e.$$.fragment,i),Z(l.$$.fragment,i),Z(_.$$.fragment,i),b=!1},d(i){i&&f(r),x(e,i),i&&f(n),x(l,i),i&&f(u),x(_,i)}}}const st=!1;function rt(s){return{props:{roomId:s.page.query.get("room")}}}const oe=60,Ee=new pe.Howl({src:[`${Y}/sounds/alarm-clock.mp3`,`${Y}/sounds/alarm-clock.wav`]}),C=new pe.Howl({src:[`${Y}/sounds/ticking.mp3`,`${Y}/sounds/ticking.wav`],loop:!0});function ze(s,t,r){let e,n,l,a,u,_,v,b,j,h,B,L,i,m,N,$,S,D;ye(s,Me,c=>r(8,S=c)),ye(s,Re,c=>r(21,D=c));let{roomId:V}=t,H=!1,G=!1,M;$e(()=>()=>{C.stop(),Ee.stop()});const te=()=>r(9,H=!0),se=()=>r(10,G=!0);function P(c){H=c,r(9,H)}function R(c){G=c,r(10,G)}return s.$$set=c=>{"roomId"in c&&r(0,V=c.roomId)},s.$$.update=()=>{s.$$.dirty&2097153&&r(16,e=Ne(D,V)),s.$$.dirty&65536&&r(2,n=e.get("users")),s.$$.dirty&4&&r(19,l=Array.from(n.entries()).sort(Se)),s.$$.dirty&65536&&r(14,a=e.get("team1")||0),s.$$.dirty&65536&&r(13,u=e.get("team2")||0),s.$$.dirty&65536&&r(20,_=e.get("started")||!0),s.$$.dirty&65536&&r(5,v=e.get("playing")||!1),s.$$.dirty&65536&&r(1,b=e.get("turn")),s.$$.dirty&258&&r(6,j=b===S),s.$$.dirty&65536&&r(4,h=e.get("timer")),s.$$.dirty&65536&&r(7,B=e.get("word")),s.$$.dirty&1048577&&(_||Ve(`${Y}/lobby?room=${V}`)),s.$$.dirty&98310&&r(17,$=()=>{if(M==null)return;n.get(b).get("team")==="team1"?e.set("team2",(e.get("team2")||0)+1):e.set("team1",(e.get("team1")||0)+1),e.set("timer",0),e.set("playing",!1),clearInterval(M),r(15,M=void 0),C.stop(),Ee.play()}),s.$$.dirty&229376&&r(18,N=(c=oe)=>{M==null&&(r(15,M=setInterval(async()=>{const o=e.get("timer");if(o===0)$();else{const d=o-1;C.rate(1+(1-d/oe)),e.set("timer",d)}},1e3)),C.rate(1+(1-c/oe)),C.playing()||C.play(),e.set("timer",c))}),s.$$.dirty&295024&&(j&&v?N(h===0?oe:h):M!=null&&(clearInterval(M),r(15,M=void 0))),s.$$.dirty&65536&&r(3,i=async()=>{const c=je.fromSeed(e.get("seed")),o=await Le(c,e.get("words"));e.set("word",o),e.set("seed",c.nextInt())}),s.$$.dirty&65544&&r(12,L=async()=>{await i(),e.set("playing",!0)}),s.$$.dirty&589838&&r(11,m=async()=>{const[c]=l[(l.findIndex(([o])=>b===o)+1)%n.size];e.set("turn",c),C.stop(),await i()})},[V,b,n,i,h,v,j,B,S,H,G,m,L,u,a,M,e,$,N,l,_,D,te,se,P,R]}class lt extends ce{constructor(t){super();de(this,t,ze,Xe,_e,{roomId:0})}}export{lt as default,rt as load,st as ssr};
