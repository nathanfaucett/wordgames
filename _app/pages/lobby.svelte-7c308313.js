import{S as Ge,i as Fe,s as Je,U as be,V as Le,j as ne,k as C,m as re,n as U,o as ie,f as V,W as Oe,x as ue,u as fe,v as ce,d as r,X as ge,A as Ke,e as v,t as Q,c as b,a as k,g as q,H as f,I as we,b as u,Y as ee,K as F,Z as ke,_ as Ee,h as de,$ as Ne,J as Ce,a0 as Ue,a1 as Pe,a2 as We}from"../chunks/vendor-7858be98.js";import{L as Xe,a as Ye,b as Ze}from"../chunks/p2p-130d0134.js";import{M as Re,g as ze,W as Ie,s as xe,a as et,u as tt,b as lt,c as Ae,e as st,d as at,Q as ot}from"../chunks/QRCode-27392073.js";import{b as Be}from"../chunks/paths-45dac81d.js";import"../chunks/singletons-e82519e2.js";function Me(e,t,a){const s=e.slice();return s[22]=t[a],s[24]=a,s}function Qe(e,t,a){const s=e.slice();return s[25]=t[a],s}function qe(e){let t,a=e[25]+"",s,d;return{c(){t=v("option"),s=Q(a),this.h()},l(w){t=b(w,"OPTION",{});var g=k(t);s=q(g,a),g.forEach(r),this.h()},h(){t.__value=d=Ie[e[25]],t.value=t.__value},m(w,g){V(w,t,g),f(t,s)},p:we,d(w){w&&r(t)}}}function He(e){let t,a,s,d=e[24]+1+"",w,g,T=e[22].name+"",m,j,p,E,I,n,c,P,$,_,N,A,M,H,J,G;return{c(){t=v("div"),a=v("div"),s=v("p"),w=Q(d),g=Q(" - "),m=Q(T),j=C(),p=v("form"),E=v("div"),I=v("input"),P=C(),$=v("div"),_=v("input"),M=C(),H=v("hr"),this.h()},l(y){t=b(y,"DIV",{class:!0});var o=k(t);a=b(o,"DIV",{class:!0});var S=k(a);s=b(S,"P",{class:!0});var W=k(s);w=q(W,d),g=q(W," - "),m=q(W,T),W.forEach(r),S.forEach(r),j=U(o),p=b(o,"FORM",{class:!0});var D=k(p);E=b(D,"DIV",{class:!0});var K=k(E);I=b(K,"INPUT",{id:!0,name:!0,type:!0,class:!0}),K.forEach(r),P=U(D),$=b(D,"DIV",{class:!0});var R=k($);_=b(R,"INPUT",{id:!0,name:!0,type:!0,class:!0}),R.forEach(r),D.forEach(r),o.forEach(r),M=U(y),H=b(y,"HR",{}),this.h()},h(){u(s,"class","text-2xl p-1 font-bold"),u(a,"class","flex-grow"),u(I,"id",n=`${e[22].id}-1`),u(I,"name","team"),I.value="1",u(I,"type","radio"),u(I,"class","align-bottom"),I.checked=c=e[22].team===1,u(E,"class","btn sm primary flex-1"),u(_,"id",N=`${e[22].id}-2`),u(_,"name","team"),_.value="2",u(_,"type","radio"),u(_,"class","align-bottom"),_.checked=A=e[22].team===2,u($,"class","btn sm danger flex-1"),u(p,"class","flex-grow-0 flex flex-row"),u(t,"class","flex justify-between"),ee(t,"bg-gray-200",e[8]===e[22].id)},m(y,o){V(y,t,o),f(t,a),f(a,s),f(s,w),f(s,g),f(s,m),f(t,j),f(t,p),f(p,E),f(E,I),f(p,P),f(p,$),f($,_),V(y,M,o),V(y,H,o),J||(G=[F(I,"click",ke(e[15])),F(E,"click",function(){Ee(e[10](e[22],1))&&e[10](e[22],1).apply(this,arguments)}),F(_,"click",ke(e[14])),F($,"click",function(){Ee(e[10](e[22],2))&&e[10](e[22],2).apply(this,arguments)})],J=!0)},p(y,o){e=y,o&128&&T!==(T=e[22].name+"")&&de(m,T),o&128&&n!==(n=`${e[22].id}-1`)&&u(I,"id",n),o&128&&c!==(c=e[22].team===1)&&(I.checked=c),o&128&&N!==(N=`${e[22].id}-2`)&&u(_,"id",N),o&128&&A!==(A=e[22].team===2)&&(_.checked=A),o&384&&ee(t,"bg-gray-200",e[8]===e[22].id)},d(y){y&&r(t),y&&r(M),y&&r(H),J=!1,Ne(G)}}}function nt(e){let t,a,s,d,w,g,T,m,j,p,E,I,n,c,P,$,_,N,A,M=me(e[7],1)+"",H,J,G,y=me(e[7],2)+"",o,S,W,D,K,R,B,_e,te,he,Y,pe,ve,$e,z=Object.keys(Ie),L=[];for(let l=0;l<z.length;l+=1)L[l]=qe(Qe(e,z,l));let x=e[7],O=[];for(let l=0;l<x.length;l+=1)O[l]=He(Me(e,x,l));return{c(){t=v("h1"),a=Q(e[0]),s=C(),d=v("div"),w=v("label"),g=Q("Name"),T=C(),m=v("input"),j=C(),p=v("div"),E=v("label"),I=Q("Words"),n=C(),c=v("select");for(let l=0;l<L.length;l+=1)L[l].c();$=C(),_=v("div"),N=v("div"),A=v("div"),H=Q(M),J=C(),G=v("div"),o=Q(y),S=C();for(let l=0;l<O.length;l+=1)O[l].c();W=C(),D=v("div"),K=C(),R=v("div"),B=v("button"),_e=Q("Start"),he=C(),Y=v("button"),pe=Q("Leave"),this.h()},l(l){t=b(l,"H1",{class:!0});var h=k(t);a=q(h,e[0]),h.forEach(r),s=U(l),d=b(l,"DIV",{class:!0});var i=k(d);w=b(i,"LABEL",{for:!0});var X=k(w);g=q(X,"Name"),X.forEach(r),T=U(i),m=b(i,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0}),i.forEach(r),j=U(l),p=b(l,"DIV",{class:!0});var le=k(p);E=b(le,"LABEL",{for:!0});var ye=k(E);I=q(ye,"Words"),ye.forEach(r),n=U(le),c=b(le,"SELECT",{id:!0,class:!0});var Se=k(c);for(let Z=0;Z<L.length;Z+=1)L[Z].l(Se);Se.forEach(r),le.forEach(r),$=U(l),_=b(l,"DIV",{class:!0});var se=k(_);N=b(se,"DIV",{class:!0});var ae=k(N);A=b(ae,"DIV",{class:!0});var Te=k(A);H=q(Te,M),Te.forEach(r),J=U(ae),G=b(ae,"DIV",{class:!0});var Ve=k(G);o=q(Ve,y),Ve.forEach(r),ae.forEach(r),S=U(se);for(let Z=0;Z<O.length;Z+=1)O[Z].l(se);se.forEach(r),W=U(l),D=b(l,"DIV",{class:!0}),k(D).forEach(r),K=U(l),R=b(l,"DIV",{class:!0});var oe=k(R);B=b(oe,"BUTTON",{class:!0});var je=k(B);_e=q(je,"Start"),je.forEach(r),he=U(oe),Y=b(oe,"BUTTON",{class:!0});var De=k(Y);pe=q(De,"Leave"),De.forEach(r),oe.forEach(r),this.h()},h(){u(t,"class","text-6xl text-center cursor-pointer"),u(w,"for","name"),u(m,"id","name"),u(m,"class","input"),u(m,"type","text"),u(m,"placeholder","Enter Name"),u(d,"class","mt-2"),u(E,"for","words"),u(c,"id","words"),u(c,"class","input"),u(p,"class","mt-2"),u(A,"class","btn md primary flex-1 text-center"),u(G,"class","btn md danger flex-1 text-center"),u(N,"class","mt-2 mb-2 flex justify-center"),u(_,"class","mt-2 mb-2"),u(D,"class","flex-grow"),u(B,"class","btn lg primary flex-1"),B.disabled=te=e[7].length<2,ee(B,"bg-blue-100",e[7].length<2),ee(B,"hover:bg-blue-500",e[7].length>1),u(Y,"class","btn lg danger flex-1"),u(R,"class","flex justify-center")},m(l,h){V(l,t,h),f(t,a),V(l,s,h),V(l,d,h),f(d,w),f(w,g),f(d,T),f(d,m),e[17](m),Ce(m,e[2]),V(l,j,h),V(l,p,h),f(p,E),f(E,I),f(p,n),f(p,c);for(let i=0;i<L.length;i+=1)L[i].m(c,null);Ue(c,e[1].words),V(l,$,h),V(l,_,h),f(_,N),f(N,A),f(A,H),f(N,J),f(N,G),f(G,o),f(_,S);for(let i=0;i<O.length;i+=1)O[i].m(_,null);V(l,W,h),V(l,D,h),V(l,K,h),V(l,R,h),f(R,B),f(B,_e),f(R,he),f(R,Y),f(Y,pe),ve||($e=[F(t,"click",e[16]),F(m,"input",e[18]),F(m,"change",e[9]),F(c,"change",ke(function(){Ee(e[6])&&e[6].apply(this,arguments)})),F(B,"click",xe),F(Y,"click",e[19])],ve=!0)},p(l,h){if(e=l,h&1&&de(a,e[0]),h&4&&m.value!==e[2]&&Ce(m,e[2]),h&0){z=Object.keys(Ie);let i;for(i=0;i<z.length;i+=1){const X=Qe(e,z,i);L[i]?L[i].p(X,h):(L[i]=qe(X),L[i].c(),L[i].m(c,null))}for(;i<L.length;i+=1)L[i].d(1);L.length=z.length}if(h&2&&P!==(P=e[1].words)&&Ue(c,e[1].words),h&128&&M!==(M=me(e[7],1)+"")&&de(H,M),h&128&&y!==(y=me(e[7],2)+"")&&de(o,y),h&1408){x=e[7];let i;for(i=0;i<x.length;i+=1){const X=Me(e,x,i);O[i]?O[i].p(X,h):(O[i]=He(X),O[i].c(),O[i].m(_,null))}for(;i<O.length;i+=1)O[i].d(1);O.length=x.length}h&128&&te!==(te=e[7].length<2)&&(B.disabled=te),h&128&&ee(B,"bg-blue-100",e[7].length<2),h&128&&ee(B,"hover:bg-blue-500",e[7].length>1)},d(l){l&&r(t),l&&r(s),l&&r(d),e[17](null),l&&r(j),l&&r(p),Pe(L,l),l&&r($),l&&r(_),Pe(O,l),l&&r(W),l&&r(D),l&&r(K),l&&r(R),ve=!1,Ne($e)}}}function rt(e){let t,a;return t=new ot({props:{value:location.href}}),{c(){ne(t.$$.fragment)},l(s){re(t.$$.fragment,s)},m(s,d){ie(t,s,d),a=!0},p:we,i(s){a||(ue(t.$$.fragment,s),a=!0)},o(s){fe(t.$$.fragment,s),a=!1},d(s){ce(t,s)}}}function it(e){let t,a;return{c(){t=v("a"),a=Q("Exit"),this.h()},l(s){t=b(s,"A",{href:!0,class:!0});var d=k(t);a=q(d,"Exit"),d.forEach(r),this.h()},h(){u(t,"href",`${Be}/`),u(t,"class","btn lg danger")},m(s,d){V(s,t,d),f(t,a)},p:we,d(s){s&&r(t)}}}function ut(e){let t,a,s,d,w,g,T,m;t=new Xe({props:{$$slots:{default:[nt]},$$scope:{ctx:e}}});function j(n){e[20](n)}let p={$$slots:{default:[rt]},$$scope:{ctx:e}};e[4]!==void 0&&(p.show=e[4]),s=new Re({props:p}),be.push(()=>Le(s,"show",j));function E(n){e[21](n)}let I={$$slots:{default:[it]},$$scope:{ctx:e}};return e[5]!==void 0&&(I.show=e[5]),g=new Re({props:I}),be.push(()=>Le(g,"show",E)),{c(){ne(t.$$.fragment),a=C(),ne(s.$$.fragment),w=C(),ne(g.$$.fragment)},l(n){re(t.$$.fragment,n),a=U(n),re(s.$$.fragment,n),w=U(n),re(g.$$.fragment,n)},m(n,c){ie(t,n,c),V(n,a,c),ie(s,n,c),V(n,w,c),ie(g,n,c),m=!0},p(n,[c]){const P={};c&268435967&&(P.$$scope={dirty:c,ctx:n}),t.$set(P);const $={};c&268435456&&($.$$scope={dirty:c,ctx:n}),!d&&c&16&&(d=!0,$.show=n[4],Oe(()=>d=!1)),s.$set($);const _={};c&268435456&&(_.$$scope={dirty:c,ctx:n}),!T&&c&32&&(T=!0,_.show=n[5],Oe(()=>T=!1)),g.$set(_)},i(n){m||(ue(t.$$.fragment,n),ue(s.$$.fragment,n),ue(g.$$.fragment,n),m=!0)},o(n){fe(t.$$.fragment,n),fe(s.$$.fragment,n),fe(g.$$.fragment,n),m=!1},d(n){ce(t,n),n&&r(a),ce(s,n),n&&r(w),ce(g,n)}}}function pt(e){return{props:{roomId:e.page.query.get("room")}}}function me(e,t){return e.filter(a=>a.team===t).length}function ft(e,t,a){let s,d,w,g,T,m,j;ge(e,et,o=>a(1,T=o)),ge(e,tt,o=>a(12,m=o)),ge(e,lt,o=>a(13,j=o));let{roomId:p}=t,E;async function I(){const o=await Ae(),S=Ye();S&&o.change(W=>{const D=W.byId[S]||(W.byId[S]=st(S));D.name=E})}let n;function c(o,S){return async function(D){o.team!==S&&(await Ae()).change(R=>{R.byId[o.id].team=S})}}let P=!1,$=!1;Ke(()=>{Ze(p)});function _(o){We.call(this,e,o)}function N(o){We.call(this,e,o)}const A=()=>a(4,P=!0);function M(o){be[o?"unshift":"push"](()=>{n=o,a(3,n)})}function H(){E=this.value,a(2,E)}const J=()=>a(5,$=!0);function G(o){P=o,a(4,P)}function y(o){$=o,a(5,$)}return e.$$set=o=>{"roomId"in o&&a(0,p=o.roomId)},e.$$.update=()=>{e.$$.dirty&8192&&a(8,s=j==null?void 0:j.id),e.$$.dirty&6144&&a(7,w=Object.values((m==null?void 0:m.byId)||{}).sort(d)),e.$$.dirty&3&&T.started&&at(`${Be}/game?room=${p}`),e.$$.dirty&2&&a(6,g=async o=>{const S=o.currentTarget.value;S!==T.words&&(await ze()).change(D=>{D.words=S})})},a(11,d=(o,S)=>o.id.localeCompare(S.id)),[p,T,E,n,P,$,g,w,s,I,c,d,m,j,_,N,A,M,H,J,G,y]}class vt extends Ge{constructor(t){super();Fe(this,t,ft,ut,Je,{roomId:0})}}export{vt as default,pt as load};
