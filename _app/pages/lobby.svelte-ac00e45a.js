import{S as Ae,i as Be,s as Me,U as de,V as ye,e as b,t as q,k as R,j as le,c as g,a as y,g as H,d as r,n as A,m as se,b as f,f as P,H as u,o as ae,K as F,h as ne,W as Se,x as oe,u as re,v as ie,X as me,A as Qe,I as _e,Y as z,Z as he,_ as pe,$ as Te,J as je,a0 as Ve,a1 as De,a2 as Le}from"../chunks/vendor-02a83c89.js";import{L as qe,a as He,b as Ge}from"../chunks/p2p-6c983371.js";import{M as Oe,g as Fe,W as ve,s as Je,a as Ke,u as Xe,b as Ye,c as Ne,e as Ze,d as ze,Q as xe}from"../chunks/QRCode-f1becedb.js";import{b as Ce}from"../chunks/paths-45dac81d.js";import"../chunks/singletons-e82519e2.js";function Ue(e,t,a){const n=e.slice();return n[22]=t[a],n[24]=a,n}function Pe(e,t,a){const n=e.slice();return n[25]=t[a],n}function et(e){let t,a;return t=new xe({props:{value:location.href}}),{c(){le(t.$$.fragment)},l(n){se(t.$$.fragment,n)},m(n,h){ae(t,n,h),a=!0},p:_e,i(n){a||(oe(t.$$.fragment,n),a=!0)},o(n){re(t.$$.fragment,n),a=!1},d(n){ie(t,n)}}}function tt(e){let t,a;return{c(){t=b("a"),a=q("Exit"),this.h()},l(n){t=g(n,"A",{href:!0,class:!0});var h=y(t);a=H(h,"Exit"),h.forEach(r),this.h()},h(){f(t,"href",`${Ce}/`),f(t,"class","btn lg danger")},m(n,h){P(n,t,h),u(t,a)},p:_e,d(n){n&&r(t)}}}function We(e){let t,a=e[25]+"",n,h;return{c(){t=b("option"),n=q(a),this.h()},l(d){t=g(d,"OPTION",{});var E=y(t);n=H(E,a),E.forEach(r),this.h()},h(){t.__value=h=ve[e[25]],t.value=t.__value},m(d,E){P(d,t,E),u(t,n)},p:_e,d(d){d&&r(t)}}}function Re(e){let t,a,n,h=e[24]+1+"",d,E,m=e[22].name+"",I,D,v,_,S,O,V,T,$,w,l,c,L,N,B,J;return{c(){t=b("div"),a=b("div"),n=b("p"),d=q(h),E=q(" - "),I=q(m),D=R(),v=b("form"),_=b("div"),S=b("input"),T=R(),$=b("div"),w=b("input"),L=R(),N=b("hr"),this.h()},l(j){t=g(j,"DIV",{class:!0});var s=y(t);a=g(s,"DIV",{class:!0});var p=y(a);n=g(p,"P",{class:!0});var M=y(n);d=H(M,h),E=H(M," - "),I=H(M,m),M.forEach(r),p.forEach(r),D=A(s),v=g(s,"FORM",{class:!0});var W=y(v);_=g(W,"DIV",{class:!0});var K=y(_);S=g(K,"INPUT",{id:!0,name:!0,type:!0}),K.forEach(r),T=A(W),$=g(W,"DIV",{class:!0});var Q=y($);w=g(Q,"INPUT",{id:!0,name:!0,type:!0}),Q.forEach(r),W.forEach(r),s.forEach(r),L=A(j),N=g(j,"HR",{}),this.h()},h(){f(n,"class","text-2xl p-1 font-bold"),f(a,"class","flex-grow"),f(S,"id",O=`${e[22].id}-1`),f(S,"name","team"),S.value="1",f(S,"type","radio"),S.checked=V=e[22].team===1,f(_,"class","btn sm primary inline-block"),f(w,"id",l=`${e[22].id}-2`),f(w,"name","team"),w.value="2",f(w,"type","radio"),w.checked=c=e[22].team===2,f($,"class","btn sm danger inline-block"),f(v,"class","flex-grow-0"),f(t,"class","flex justify-between"),z(t,"bg-gray-200",e[8]===e[22].id)},m(j,s){P(j,t,s),u(t,a),u(a,n),u(n,d),u(n,E),u(n,I),u(t,D),u(t,v),u(v,_),u(_,S),u(v,T),u(v,$),u($,w),P(j,L,s),P(j,N,s),B||(J=[F(S,"click",he(e[15])),F(_,"click",function(){pe(e[10](e[22],1))&&e[10](e[22],1).apply(this,arguments)}),F(w,"click",he(e[14])),F($,"click",function(){pe(e[10](e[22],2))&&e[10](e[22],2).apply(this,arguments)})],B=!0)},p(j,s){e=j,s&128&&m!==(m=e[22].name+"")&&ne(I,m),s&128&&O!==(O=`${e[22].id}-1`)&&f(S,"id",O),s&128&&V!==(V=e[22].team===1)&&(S.checked=V),s&128&&l!==(l=`${e[22].id}-2`)&&f(w,"id",l),s&128&&c!==(c=e[22].team===2)&&(w.checked=c),s&384&&z(t,"bg-gray-200",e[8]===e[22].id)},d(j){j&&r(t),j&&r(L),j&&r(N),B=!1,Te(J)}}}function lt(e){let t,a,n,h,d,E,m,I,D,v,_,S,O,V,T,$,w=ue(e[7],1)+"",l,c,L,N=ue(e[7],2)+"",B,J,j,s,p,M,W,K,Q,fe,ce,be,Y=Object.keys(ve),C=[];for(let o=0;o<Y.length;o+=1)C[o]=We(Pe(e,Y,o));let Z=e[7],U=[];for(let o=0;o<Z.length;o+=1)U[o]=Re(Ue(e,Z,o));return{c(){t=b("div"),a=b("label"),n=q("Name"),h=R(),d=b("input"),E=R(),m=b("div"),I=b("label"),D=q("Words"),v=R(),_=b("select");for(let o=0;o<C.length;o+=1)C[o].c();O=R(),V=b("div"),T=b("div"),$=b("div"),l=q(w),c=R(),L=b("div"),B=q(N),J=R();for(let o=0;o<U.length;o+=1)U[o].c();j=R(),s=b("div"),p=b("button"),M=q("Start"),K=R(),Q=b("button"),fe=q("Leave"),this.h()},l(o){t=g(o,"DIV",{class:!0});var k=y(t);a=g(k,"LABEL",{for:!0});var i=y(a);n=H(i,"Name"),i.forEach(r),h=A(k),d=g(k,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0}),k.forEach(r),E=A(o),m=g(o,"DIV",{class:!0});var G=y(m);I=g(G,"LABEL",{for:!0});var ge=y(I);D=H(ge,"Words"),ge.forEach(r),v=A(G),_=g(G,"SELECT",{id:!0,class:!0});var ke=y(_);for(let X=0;X<C.length;X+=1)C[X].l(ke);ke.forEach(r),G.forEach(r),O=A(o),V=g(o,"DIV",{class:!0});var x=y(V);T=g(x,"DIV",{class:!0});var ee=y(T);$=g(ee,"DIV",{class:!0});var we=y($);l=H(we,w),we.forEach(r),c=A(ee),L=g(ee,"DIV",{class:!0});var Ee=y(L);B=H(Ee,N),Ee.forEach(r),ee.forEach(r),J=A(x);for(let X=0;X<U.length;X+=1)U[X].l(x);x.forEach(r),j=A(o),s=g(o,"DIV",{class:!0});var te=y(s);p=g(te,"BUTTON",{class:!0});var Ie=y(p);M=H(Ie,"Start"),Ie.forEach(r),K=A(te),Q=g(te,"BUTTON",{class:!0});var $e=y(Q);fe=H($e,"Leave"),$e.forEach(r),te.forEach(r),this.h()},h(){f(a,"for","name"),f(d,"id","name"),f(d,"class","input"),f(d,"type","text"),f(d,"placeholder","Enter Name"),f(t,"class","mt-2"),f(I,"for","words"),f(_,"id","words"),f(_,"class","input"),f(m,"class","mt-2"),f($,"class","btn md primary flex-1 text-center"),f(L,"class","btn md danger flex-1 text-center"),f(T,"class","mt-2 mb-2 flex justify-center"),f(V,"class","mt-2 mb-2"),f(p,"class","btn lg primary flex-1"),p.disabled=W=e[7].length<2,z(p,"bg-blue-100",e[7].length<2),z(p,"hover:bg-blue-500",e[7].length>1),f(Q,"class","btn lg danger flex-1"),f(s,"class","mt-2 flex justify-center")},m(o,k){P(o,t,k),u(t,a),u(a,n),u(t,h),u(t,d),e[19](d),je(d,e[2]),P(o,E,k),P(o,m,k),u(m,I),u(I,D),u(m,v),u(m,_);for(let i=0;i<C.length;i+=1)C[i].m(_,null);Ve(_,e[1].words),P(o,O,k),P(o,V,k),u(V,T),u(T,$),u($,l),u(T,c),u(T,L),u(L,B),u(V,J);for(let i=0;i<U.length;i+=1)U[i].m(V,null);P(o,j,k),P(o,s,k),u(s,p),u(p,M),u(s,K),u(s,Q),u(Q,fe),ce||(be=[F(d,"input",e[20]),F(d,"change",e[9]),F(_,"change",he(function(){pe(e[6])&&e[6].apply(this,arguments)})),F(p,"click",Je),F(Q,"click",e[21])],ce=!0)},p(o,k){if(e=o,k&4&&d.value!==e[2]&&je(d,e[2]),k&0){Y=Object.keys(ve);let i;for(i=0;i<Y.length;i+=1){const G=Pe(e,Y,i);C[i]?C[i].p(G,k):(C[i]=We(G),C[i].c(),C[i].m(_,null))}for(;i<C.length;i+=1)C[i].d(1);C.length=Y.length}if(k&2&&S!==(S=e[1].words)&&Ve(_,e[1].words),k&128&&w!==(w=ue(e[7],1)+"")&&ne(l,w),k&128&&N!==(N=ue(e[7],2)+"")&&ne(B,N),k&1408){Z=e[7];let i;for(i=0;i<Z.length;i+=1){const G=Ue(e,Z,i);U[i]?U[i].p(G,k):(U[i]=Re(G),U[i].c(),U[i].m(V,null))}for(;i<U.length;i+=1)U[i].d(1);U.length=Z.length}k&128&&W!==(W=e[7].length<2)&&(p.disabled=W),k&128&&z(p,"bg-blue-100",e[7].length<2),k&128&&z(p,"hover:bg-blue-500",e[7].length>1)},d(o){o&&r(t),e[19](null),o&&r(E),o&&r(m),De(C,o),o&&r(O),o&&r(V),De(U,o),o&&r(j),o&&r(s),ce=!1,Te(be)}}}function st(e){let t,a,n,h,d,E,m,I,D,v,_,S,O;function V(l){e[17](l)}let T={$$slots:{default:[et]},$$scope:{ctx:e}};e[4]!==void 0&&(T.show=e[4]),h=new Oe({props:T}),de.push(()=>ye(h,"show",V));function $(l){e[18](l)}let w={$$slots:{default:[tt]},$$scope:{ctx:e}};return e[5]!==void 0&&(w.show=e[5]),m=new Oe({props:w}),de.push(()=>ye(m,"show",$)),v=new qe({props:{$$slots:{default:[lt]},$$scope:{ctx:e}}}),{c(){t=b("h1"),a=q(e[0]),n=R(),le(h.$$.fragment),E=R(),le(m.$$.fragment),D=R(),le(v.$$.fragment),this.h()},l(l){t=g(l,"H1",{class:!0});var c=y(t);a=H(c,e[0]),c.forEach(r),n=A(l),se(h.$$.fragment,l),E=A(l),se(m.$$.fragment,l),D=A(l),se(v.$$.fragment,l),this.h()},h(){f(t,"class","text-6xl text-center cursor-pointer")},m(l,c){P(l,t,c),u(t,a),P(l,n,c),ae(h,l,c),P(l,E,c),ae(m,l,c),P(l,D,c),ae(v,l,c),_=!0,S||(O=F(t,"click",e[16]),S=!0)},p(l,[c]){(!_||c&1)&&ne(a,l[0]);const L={};c&268435456&&(L.$$scope={dirty:c,ctx:l}),!d&&c&16&&(d=!0,L.show=l[4],Se(()=>d=!1)),h.$set(L);const N={};c&268435456&&(N.$$scope={dirty:c,ctx:l}),!I&&c&32&&(I=!0,N.show=l[5],Se(()=>I=!1)),m.$set(N);const B={};c&268435950&&(B.$$scope={dirty:c,ctx:l}),v.$set(B)},i(l){_||(oe(h.$$.fragment,l),oe(m.$$.fragment,l),oe(v.$$.fragment,l),_=!0)},o(l){re(h.$$.fragment,l),re(m.$$.fragment,l),re(v.$$.fragment,l),_=!1},d(l){l&&r(t),l&&r(n),ie(h,l),l&&r(E),ie(m,l),l&&r(D),ie(v,l),S=!1,O()}}}function ft(e){return{props:{roomId:e.page.query.get("room")}}}function ue(e,t){return e.filter(a=>a.team===t).length}function at(e,t,a){let n,h,d,E,m,I,D;me(e,Ke,s=>a(1,m=s)),me(e,Xe,s=>a(12,I=s)),me(e,Ye,s=>a(13,D=s));let{roomId:v}=t,_;async function S(){const s=await Ne(),p=He();p&&s.change(M=>{const W=M.byId[p]||(M.byId[p]=Ze(p));W.name=_})}let O;function V(s,p){return async function(W){s.team!==p&&(await Ne()).change(Q=>{Q.byId[s.id].team=p})}}let T=!1,$=!1;Qe(()=>{Ge(v)});function w(s){Le.call(this,e,s)}function l(s){Le.call(this,e,s)}const c=()=>a(4,T=!0);function L(s){T=s,a(4,T)}function N(s){$=s,a(5,$)}function B(s){de[s?"unshift":"push"](()=>{O=s,a(3,O)})}function J(){_=this.value,a(2,_)}const j=()=>a(5,$=!0);return e.$$set=s=>{"roomId"in s&&a(0,v=s.roomId)},e.$$.update=()=>{e.$$.dirty&8192&&a(8,n=D==null?void 0:D.id),e.$$.dirty&6144&&a(7,d=Object.values((I==null?void 0:I.byId)||{}).sort(h)),e.$$.dirty&3&&m.started&&ze(`${Ce}/game?room=${v}`),e.$$.dirty&2&&a(6,E=async s=>{const p=s.currentTarget.value;p!==m.words&&(await Fe()).change(W=>{W.words=p})})},a(11,h=(s,p)=>s.id.localeCompare(p.id)),[v,m,_,O,T,$,E,d,n,S,V,h,I,D,w,l,c,L,N,B,J,j]}class ct extends Ae{constructor(t){super();Be(this,t,at,st,Me,{roomId:0})}}export{ct as default,ft as load};
