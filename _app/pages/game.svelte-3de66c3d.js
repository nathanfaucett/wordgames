import{S as ce,i as me,s as de,t as T,g as j,f as h,h as q,J,d as i,ab as _e,W as pe,X as he,k as H,j as Z,E as Ie,n as P,m as z,o as K,Y as be,x,u as ee,v as te,T as Ee,A as Te,Z as je,l as ge,e as w,c as k,a as I,b as v,N as le,F as b,L as se,M as ve,a0 as ne}from"../chunks/vendor-2d4221cb.js";import{b as F}from"../chunks/paths-28a87002.js";import{L as De,s as Se,g as Ve}from"../chunks/util-f1ec02fc.js";import{M as ye,W as Ne,g as Me,b as $e,Q as Le,u as We}from"../chunks/userId-a5a0ac90.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";function Oe(l){let t=re(l[0])+"",e,o,r=re(l[1])+"",s;return{c(){e=T(t),o=T(":"),s=T(r)},l(f){e=j(f,t),o=j(f,":"),s=j(f,r)},m(f,u){h(f,e,u),h(f,o,u),h(f,s,u)},p(f,[u]){u&1&&t!==(t=re(f[0])+"")&&q(e,t),u&2&&r!==(r=re(f[1])+"")&&q(s,r)},i:J,o:J,d(f){f&&i(e),f&&i(o),f&&i(s)}}}function re(l){return(l<10?"0":"")+l}function Re(l,t,e){let o,r,{seconds:s=60}=t;return l.$$set=f=>{"seconds"in f&&e(2,s=f.seconds)},l.$$.update=()=>{l.$$.dirty&4&&e(0,o=Math.floor(s/60)),l.$$.dirty&5&&e(1,r=Math.floor(s-o*60))},[o,r,s]}class Ue extends ce{constructor(t){super();me(this,t,Re,Oe,de,{seconds:2})}}function Be(l){var r;let t=((r=l[1][l[5]])==null?void 0:r.name)+"",e,o;return{c(){e=T(t),o=T("'s turn")},l(s){e=j(s,t),o=j(s,"'s turn")},m(s,f){h(s,e,f),h(s,o,f)},p(s,f){var u;f&34&&t!==(t=((u=s[1][s[5]])==null?void 0:u.name)+"")&&q(e,t)},d(s){s&&i(e),s&&i(o)}}}function Ge(l){var r;let t=((r=l[1][l[5]])==null?void 0:r.name)+"",e,o;return{c(){e=T(t),o=T(" and your Team's turn")},l(s){e=j(s,t),o=j(s," and your Team's turn")},m(s,f){h(s,e,f),h(s,o,f)},p(s,f){var u;f&34&&t!==(t=((u=s[1][s[5]])==null?void 0:u.name)+"")&&q(e,t)},d(s){s&&i(e),s&&i(o)}}}function He(l){let t;return{c(){t=T("Your Turn")},l(e){t=j(e,"Your Turn")},m(e,o){h(e,t,o)},p:J,d(e){e&&i(t)}}}function we(l){let t;function e(s,f){return s[4]?Pe:qe}let o=e(l),r=o(l);return{c(){r.c(),t=ge()},l(s){r.l(s),t=ge()},m(s,f){r.m(s,f),h(s,t,f)},p(s,f){o===(o=e(s))&&r?r.p(s,f):(r.d(1),r=o(s),r&&(r.c(),r.m(t.parentNode,t)))},d(s){r.d(s),s&&i(t)}}}function Pe(l){let t,e,o,r,s,f,u,d,E,y,S,g,W,V;return{c(){t=w("div"),e=w("div"),o=w("p"),r=T(l[7]),s=H(),f=w("div"),u=w("div"),d=w("button"),E=T("Skip"),y=H(),S=w("button"),g=T("Next"),this.h()},l(n){t=k(n,"DIV",{class:!0});var m=I(t);e=k(m,"DIV",{class:!0});var N=I(e);o=k(N,"P",{class:!0});var O=I(o);r=j(O,l[7]),O.forEach(i),N.forEach(i),m.forEach(i),s=P(n),f=k(n,"DIV",{class:!0});var D=I(f);u=k(D,"DIV",{class:!0});var $=I(u);d=k($,"BUTTON",{class:!0});var B=I(d);E=j(B,"Skip"),B.forEach(i),y=P($),S=k($,"BUTTON",{class:!0});var L=I(S);g=j(L,"Next"),L.forEach(i),$.forEach(i),D.forEach(i),this.h()},h(){v(o,"class","text-6xl"),v(e,"class","text-center"),v(t,"class","flex-1 flex h-full justify-center items-center"),v(d,"class","btn lg danger flex-1"),v(S,"class","btn lg primary flex-1"),v(u,"class","flex flex-1 justify-center"),v(f,"class","flex-1")},m(n,m){h(n,t,m),b(t,e),b(e,o),b(o,r),h(n,s,m),h(n,f,m),b(f,u),b(u,d),b(d,E),b(u,y),b(u,S),b(S,g),W||(V=[se(d,"click",function(){ne(l[8])&&l[8].apply(this,arguments)}),se(S,"click",function(){ne(l[13])&&l[13].apply(this,arguments)})],W=!0)},p(n,m){l=n,m&128&&q(r,l[7])},d(n){n&&i(t),n&&i(s),n&&i(f),W=!1,ve(V)}}}function qe(l){let t,e,o,r,s,f;return{c(){t=w("div"),e=w("div"),o=w("button"),r=T("Start"),this.h()},l(u){t=k(u,"DIV",{class:!0});var d=I(t);e=k(d,"DIV",{class:!0});var E=I(e);o=k(E,"BUTTON",{class:!0});var y=I(o);r=j(y,"Start"),y.forEach(i),E.forEach(i),d.forEach(i),this.h()},h(){v(o,"class","btn lg primary flex-1"),v(e,"class","flex justify-center"),v(t,"class","flex-1")},m(u,d){h(u,t,d),b(t,e),b(e,o),b(o,r),s||(f=se(o,"click",function(){ne(l[14])&&l[14].apply(this,arguments)}),s=!0)},p(u,d){l=u},d(u){u&&i(t),s=!1,f()}}}function Ae(l){let t,e,o,r,s,f,u,d,E,y,S,g,W,V,n,m,N,O,D,$,B,L,Q,A;function C(a,_){var p,c;return a[9]?He:((p=a[1][a[10]])==null?void 0:p.team)===((c=a[1][a[5]])==null?void 0:c.team)?Ge:Be}let R=C(l),U=R(l);n=new Ue({props:{seconds:l[6]}});let M=l[9]&&we(l);return{c(){t=w("h1"),e=T("Room Id "),o=T(l[0]),r=H(),s=w("div"),f=w("div"),u=T(l[2]),d=H(),E=w("div"),y=T(l[3]),S=H(),g=w("h1"),U.c(),W=H(),V=w("p"),Z(n.$$.fragment),m=H(),N=w("div"),M&&M.c(),O=H(),D=w("div"),$=w("button"),B=T("Leave"),this.h()},l(a){t=k(a,"H1",{class:!0});var _=I(t);e=j(_,"Room Id "),o=j(_,l[0]),_.forEach(i),r=P(a),s=k(a,"DIV",{class:!0});var p=I(s);f=k(p,"DIV",{class:!0});var c=I(f);u=j(c,l[2]),c.forEach(i),d=P(p),E=k(p,"DIV",{class:!0});var G=I(E);y=j(G,l[3]),G.forEach(i),p.forEach(i),S=P(a),g=k(a,"H1",{class:!0});var X=I(g);U.l(X),X.forEach(i),W=P(a),V=k(a,"P",{class:!0});var ae=I(V);z(n.$$.fragment,ae),ae.forEach(i),m=P(a),N=k(a,"DIV",{class:!0});var fe=I(N);M&&M.l(fe),fe.forEach(i),O=P(a),D=k(a,"DIV",{class:!0});var ie=I(D);$=k(ie,"BUTTON",{class:!0});var ue=I($);B=j(ue,"Leave"),ue.forEach(i),ie.forEach(i),this.h()},h(){var a,_;v(t,"class","text-center cursor-pointer"),v(f,"class","btn md primary flex-1 text-center"),v(E,"class","btn md danger flex-1 text-center"),v(s,"class","flex justify-center mt-2"),v(g,"class","text-center text-white rounded py-4 my-4"),le(g,"bg-blue-500",((a=l[1][l[10]])==null?void 0:a.team)==="team1"),le(g,"bg-red-500",((_=l[1][l[10]])==null?void 0:_.team)==="team2"),v(V,"class","text-2xl text-center"),v(N,"class","flex-grow flex flex-col justify-center"),v($,"class","btn lg danger flex-1"),v(D,"class","flex justify-center")},m(a,_){h(a,t,_),b(t,e),b(t,o),h(a,r,_),h(a,s,_),b(s,f),b(f,u),b(s,d),b(s,E),b(E,y),h(a,S,_),h(a,g,_),U.m(g,null),h(a,W,_),h(a,V,_),K(n,V,null),h(a,m,_),h(a,N,_),M&&M.m(N,null),h(a,O,_),h(a,D,_),b(D,$),b($,B),L=!0,Q||(A=[se(t,"click",l[24]),se($,"click",l[25])],Q=!0)},p(a,_){var c,G;(!L||_&1)&&q(o,a[0]),(!L||_&4)&&q(u,a[2]),(!L||_&8)&&q(y,a[3]),R===(R=C(a))&&U?U.p(a,_):(U.d(1),U=R(a),U&&(U.c(),U.m(g,null))),_&1026&&le(g,"bg-blue-500",((c=a[1][a[10]])==null?void 0:c.team)==="team1"),_&1026&&le(g,"bg-red-500",((G=a[1][a[10]])==null?void 0:G.team)==="team2");const p={};_&64&&(p.seconds=a[6]),n.$set(p),a[9]?M?M.p(a,_):(M=we(a),M.c(),M.m(N,null)):M&&(M.d(1),M=null)},i(a){L||(x(n.$$.fragment,a),L=!0)},o(a){ee(n.$$.fragment,a),L=!1},d(a){a&&i(t),a&&i(r),a&&i(s),a&&i(S),a&&i(g),U.d(),a&&i(W),a&&i(V),te(n),a&&i(m),a&&i(N),M&&M.d(),a&&i(O),a&&i(D),Q=!1,ve(A)}}}function Ce(l){let t,e;return t=new Le({props:{value:location.href}}),{c(){Z(t.$$.fragment)},l(o){z(t.$$.fragment,o)},m(o,r){K(t,o,r),e=!0},p:J,i(o){e||(x(t.$$.fragment,o),e=!0)},o(o){ee(t.$$.fragment,o),e=!1},d(o){te(t,o)}}}function Ye(l){let t,e,o;return{c(){t=w("h2"),e=T("Room Id "),o=T(l[0]),this.h()},l(r){t=k(r,"H2",{slot:!0});var s=I(t);e=j(s,"Room Id "),o=j(s,l[0]),s.forEach(i),this.h()},h(){v(t,"slot","title")},m(r,s){h(r,t,s),b(t,e),b(t,o)},p(r,s){s&1&&q(o,r[0])},d(r){r&&i(t)}}}function Qe(l){let t,e;return{c(){t=w("a"),e=T("Exit"),this.h()},l(o){t=k(o,"A",{href:!0,class:!0});var r=I(t);e=j(r,"Exit"),r.forEach(i),this.h()},h(){v(t,"href",`${F}/`),v(t,"class","btn lg danger")},m(o,r){h(o,t,r),b(t,e)},p:J,d(o){o&&i(t)}}}function Fe(l){let t,e,o,r,s,f,u,d,E,y;document.title=t="Word Games!: Playing Game in "+l[0],o=new De({props:{$$slots:{default:[Ae]},$$scope:{ctx:l}}});function S(n){l[26](n)}let g={$$slots:{title:[Ye],default:[Ce]},$$scope:{ctx:l}};l[11]!==void 0&&(g.show=l[11]),s=new ye({props:g}),pe.push(()=>he(s,"show",S));function W(n){l[27](n)}let V={$$slots:{default:[Qe]},$$scope:{ctx:l}};return l[12]!==void 0&&(V.show=l[12]),d=new ye({props:V}),pe.push(()=>he(d,"show",W)),{c(){e=H(),Z(o.$$.fragment),r=H(),Z(s.$$.fragment),u=H(),Z(d.$$.fragment)},l(n){Ie('[data-svelte="svelte-3p3nw5"]',document.head).forEach(i),e=P(n),z(o.$$.fragment,n),r=P(n),z(s.$$.fragment,n),u=P(n),z(d.$$.fragment,n)},m(n,m){h(n,e,m),K(o,n,m),h(n,r,m),K(s,n,m),h(n,u,m),K(d,n,m),y=!0},p(n,[m]){(!y||m&1)&&t!==(t="Word Games!: Playing Game in "+n[0])&&(document.title=t);const N={};m&268468223&&(N.$$scope={dirty:m,ctx:n}),o.$set(N);const O={};m&268435457&&(O.$$scope={dirty:m,ctx:n}),!f&&m&2048&&(f=!0,O.show=n[11],be(()=>f=!1)),s.$set(O);const D={};m&268435456&&(D.$$scope={dirty:m,ctx:n}),!E&&m&4096&&(E=!0,D.show=n[12],be(()=>E=!1)),d.$set(D)},i(n){y||(x(o.$$.fragment,n),x(s.$$.fragment,n),x(d.$$.fragment,n),y=!0)},o(n){ee(o.$$.fragment,n),ee(s.$$.fragment,n),ee(d.$$.fragment,n),y=!1},d(n){n&&i(e),te(o,n),n&&i(r),te(s,n),n&&i(u),te(d,n)}}}const tt=!1;function st(l){return{props:{roomId:l.page.query.get("room")}}}const oe=30,ke=new _e.Howl({src:[`${F}/sounds/alarm-clock.mp3`,`${F}/sounds/alarm-clock.wav`]}),Y=new _e.Howl({src:[`${F}/sounds/ticking.mp3`,`${F}/sounds/ticking.wav`],loop:!0});function Xe(l,t,e){let o,r,s,f,u,d,E,y,S,g;Ee(l,We,p=>e(23,g=p));let{roomId:W}=t,V={},n=Ne.Medium,m=Date.now(),N=0,O=0,D=!0,$=!1,B="",L=0,Q="",A=!1,C=!1,R;Te(()=>{const p=[r.get("seed").on(c=>{e(16,m=c)}),r.get("started").on(c=>{e(17,D=c)}),r.get("playing").on(c=>{e(4,$=c)}),r.get("team1").on(c=>{e(2,N=c)}),r.get("team2").on(c=>{e(3,O=c)}),r.get("words").on(c=>{e(15,n=c)}),r.get("word").on(c=>{e(7,Q=c)}),r.get("turn").on(c=>{e(5,B=c)}),r.get("timer").on(c=>{e(6,L=c)}),r.get("users").on(async c=>{e(1,V=(await Promise.all(Object.values(c))).reduce((G,X)=>(G[X.id]=X,G),{}))})];return setTimeout(()=>{s.length<2&&e(17,D=!1)},3e3),()=>{Y.stop(),ke.stop(),p.forEach(c=>c())}});const U=()=>e(11,A=!0),M=()=>e(12,C=!0);function a(p){A=p,e(11,A)}function _(p){C=p,e(12,C)}return l.$$set=p=>{"roomId"in p&&e(0,W=p.roomId)},l.$$.update=()=>{l.$$.dirty&131073&&(D||Ve(`${F}/lobby?room=${W}`)),l.$$.dirty&8388608&&e(10,o=g),l.$$.dirty&1&&e(20,r=Me.get("rooms").get(W)),l.$$.dirty&2&&e(19,s=Array.from(Object.entries(V)).sort(Se)),l.$$.dirty&1056&&e(9,f=B===o),l.$$.dirty&1310766&&e(21,S=()=>{if(R==null)return;V[B].team==="team1"?r.get("team2").set(O+1):r.get("team1").set(N+1),r.get("timer").set(0),r.get("playing").set(!1),clearInterval(R),e(18,R=void 0),e(4,$=!1),Y.stop(),ke.play()}),l.$$.dirty&3407936&&e(22,y=(p=oe)=>{R==null&&(e(18,R=setInterval(()=>{const c=L;if(c===0)S();else{const G=c-1;Y.rate(1+(1-G/oe)),r.get("timer").set(G)}},1e3)),Y.rate(1+(1-p/oe)),Y.playing()||Y.play(),r.get("timer").set(p))}),l.$$.dirty&4457040&&(f&&$?y(L===0?oe:L):R!=null&&(clearInterval(R),e(18,R=void 0))),l.$$.dirty&1146880&&e(8,d=async()=>{const p=je.fromSeed(m),c=await $e(p,n);r.get("word").set(c),r.get("seed").set(p.nextInt())}),l.$$.dirty&1048832&&e(14,u=async()=>{await d(),r.get("playing").set(!0)}),l.$$.dirty&1573152&&e(13,E=async()=>{const[p]=s[(s.findIndex(([c])=>B===c)+1)%s.length];r.get("turn").set(p),Y.stop(),await d()})},[W,V,N,O,$,B,L,Q,d,f,o,A,C,E,u,n,m,D,R,s,r,S,y,g,U,M,a,_]}class lt extends ce{constructor(t){super();me(this,t,Xe,Fe,de,{roomId:0})}}export{lt as default,st as load,tt as ssr};
