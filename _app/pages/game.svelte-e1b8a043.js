import{S as me,i as ce,s as de,t as E,g as T,f as _,h as O,J as P,d as u,ab as _e,W as pe,X as ge,k as G,j as X,E as $e,n as H,m as J,o as Z,Y as he,x as z,u as K,v as x,T as Ee,A as Te,l as be,e as k,c as w,a as I,b as h,N as oe,F as g,L as ee,M as ve,Z as je,aa as De}from"../chunks/vendor-db20b18e.js";import{b as Y}from"../chunks/paths-28a87002.js";import{L as Se,s as Ve,g as Ne}from"../chunks/util-cf210b2f.js";import{M as ke,W as Me,a as y,b as Le,Q as We,u as we}from"../chunks/userId-a7876691.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";function Re(n){let e=le(n[0])+"",s,r,l=le(n[1])+"",t;return{c(){s=E(e),r=E(":"),t=E(l)},l(f){s=T(f,e),r=T(f,":"),t=T(f,l)},m(f,m){_(f,s,m),_(f,r,m),_(f,t,m)},p(f,[m]){m&1&&e!==(e=le(f[0])+"")&&O(s,e),m&2&&l!==(l=le(f[1])+"")&&O(t,l)},i:P,o:P,d(f){f&&u(s),f&&u(r),f&&u(t)}}}function le(n){return(n<10?"0":"")+n}function Be(n,e,s){let r,l,{seconds:t=60}=e;return n.$$set=f=>{"seconds"in f&&s(2,t=f.seconds)},n.$$.update=()=>{n.$$.dirty&4&&s(0,r=Math.floor(t/60)),n.$$.dirty&5&&s(1,l=Math.floor(t-r*60))},[r,l,t]}class Ge extends me{constructor(e){super();ce(this,e,Be,Re,de,{seconds:2})}}function He(n){var l;let e=((l=n[4][n[7]])==null?void 0:l.name)+"",s,r;return{c(){s=E(e),r=E("'s turn")},l(t){s=T(t,e),r=T(t,"'s turn")},m(t,f){_(t,s,f),_(t,r,f)},p(t,f){var m;f&144&&e!==(e=((m=t[4][t[7]])==null?void 0:m.name)+"")&&O(s,e)},d(t){t&&u(s),t&&u(r)}}}function Oe(n){var l;let e=((l=n[4][n[7]])==null?void 0:l.name)+"",s,r;return{c(){s=E(e),r=E(" and your Team's turn")},l(t){s=T(t,e),r=T(t," and your Team's turn")},m(t,f){_(t,s,f),_(t,r,f)},p(t,f){var m;f&144&&e!==(e=((m=t[4][t[7]])==null?void 0:m.name)+"")&&O(s,e)},d(t){t&&u(s),t&&u(r)}}}function Ue(n){let e;return{c(){e=E("Your Turn")},l(s){e=T(s,"Your Turn")},m(s,r){_(s,e,r)},p:P,d(s){s&&u(e)}}}function Ie(n){let e;function s(t,f){return t[1]?qe:Ae}let r=s(n),l=r(n);return{c(){l.c(),e=be()},l(t){l.l(t),e=be()},m(t,f){l.m(t,f),_(t,e,f)},p(t,f){r===(r=s(t))&&l?l.p(t,f):(l.d(1),l=r(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&u(e)}}}function qe(n){let e,s,r,l,t,f,m,d,b,v,D,p,N,V;return{c(){e=k("div"),s=k("div"),r=k("p"),l=E(n[8]),t=G(),f=k("div"),m=k("div"),d=k("button"),b=E("Skip"),v=G(),D=k("button"),p=E("Next"),this.h()},l(a){e=w(a,"DIV",{class:!0});var c=I(e);s=w(c,"DIV",{class:!0});var j=I(s);r=w(j,"P",{class:!0});var M=I(r);l=T(M,n[8]),M.forEach(u),j.forEach(u),c.forEach(u),t=H(a),f=w(a,"DIV",{class:!0});var L=I(f);m=w(L,"DIV",{class:!0});var W=I(m);d=w(W,"BUTTON",{class:!0});var U=I(d);b=T(U,"Skip"),U.forEach(u),v=H(W),D=w(W,"BUTTON",{class:!0});var $=I(D);p=T($,"Next"),$.forEach(u),W.forEach(u),L.forEach(u),this.h()},h(){h(r,"class","text-6xl"),h(s,"class","text-center"),h(e,"class","flex-1 flex h-full justify-center items-center"),h(d,"class","btn lg danger flex-1"),h(D,"class","btn lg primary flex-1"),h(m,"class","flex flex-1 justify-center"),h(f,"class","flex-1")},m(a,c){_(a,e,c),g(e,s),g(s,r),g(r,l),_(a,t,c),_(a,f,c),g(f,m),g(m,d),g(d,b),g(m,v),g(m,D),g(D,p),N||(V=[ee(d,"click",n[13]),ee(D,"click",n[14])],N=!0)},p(a,c){c&256&&O(l,a[8])},d(a){a&&u(e),a&&u(t),a&&u(f),N=!1,ve(V)}}}function Ae(n){let e,s,r,l,t,f;return{c(){e=k("div"),s=k("div"),r=k("button"),l=E("Start"),this.h()},l(m){e=w(m,"DIV",{class:!0});var d=I(e);s=w(d,"DIV",{class:!0});var b=I(s);r=w(b,"BUTTON",{class:!0});var v=I(r);l=T(v,"Start"),v.forEach(u),b.forEach(u),d.forEach(u),this.h()},h(){h(r,"class","btn lg primary flex-1"),h(s,"class","flex justify-center"),h(e,"class","flex-1")},m(m,d){_(m,e,d),g(e,s),g(s,r),g(r,l),t||(f=ee(r,"click",n[12]),t=!0)},p:P,d(m){m&&u(e),t=!1,f()}}}function Ce(n){let e,s,r,l,t,f,m,d,b,v,D,p,N,V,a,c,j,M,L,W,U,$,Q,te;function se(o,i){var B,q;return o[2]?Ue:((B=o[4][o[11]])==null?void 0:B.team)===((q=o[4][o[7]])==null?void 0:q.team)?Oe:He}let C=se(n),R=C(n);a=new Ge({props:{seconds:n[3]}});let S=n[2]&&Ie(n);return{c(){e=k("h1"),s=E("Room Id "),r=E(n[0]),l=G(),t=k("div"),f=k("div"),m=E(n[5]),d=G(),b=k("div"),v=E(n[6]),D=G(),p=k("h1"),R.c(),N=G(),V=k("p"),X(a.$$.fragment),c=G(),j=k("div"),S&&S.c(),M=G(),L=k("div"),W=k("button"),U=E("Leave"),this.h()},l(o){e=w(o,"H1",{class:!0});var i=I(e);s=T(i,"Room Id "),r=T(i,n[0]),i.forEach(u),l=H(o),t=w(o,"DIV",{class:!0});var B=I(t);f=w(B,"DIV",{class:!0});var q=I(f);m=T(q,n[5]),q.forEach(u),d=H(B),b=w(B,"DIV",{class:!0});var F=I(b);v=T(F,n[6]),F.forEach(u),B.forEach(u),D=H(o),p=w(o,"H1",{class:!0});var ne=I(p);R.l(ne),ne.forEach(u),N=H(o),V=w(o,"P",{class:!0});var ae=I(V);J(a.$$.fragment,ae),ae.forEach(u),c=H(o),j=w(o,"DIV",{class:!0});var fe=I(j);S&&S.l(fe),fe.forEach(u),M=H(o),L=w(o,"DIV",{class:!0});var ie=I(L);W=w(ie,"BUTTON",{class:!0});var ue=I(W);U=T(ue,"Leave"),ue.forEach(u),ie.forEach(u),this.h()},h(){var o,i;h(e,"class","text-center cursor-pointer"),h(f,"class","btn md primary flex-1 text-center"),h(b,"class","btn md danger flex-1 text-center"),h(t,"class","flex justify-center mt-2"),h(p,"class","text-center text-white rounded py-4 my-4"),oe(p,"bg-blue-500",((o=n[4][n[11]])==null?void 0:o.team)==="team1"),oe(p,"bg-red-500",((i=n[4][n[11]])==null?void 0:i.team)==="team2"),h(V,"class","text-2xl text-center"),h(j,"class","flex-grow flex flex-col justify-center"),h(W,"class","btn lg danger flex-1"),h(L,"class","flex justify-center")},m(o,i){_(o,e,i),g(e,s),g(e,r),_(o,l,i),_(o,t,i),g(t,f),g(f,m),g(t,d),g(t,b),g(b,v),_(o,D,i),_(o,p,i),R.m(p,null),_(o,N,i),_(o,V,i),Z(a,V,null),_(o,c,i),_(o,j,i),S&&S.m(j,null),_(o,M,i),_(o,L,i),g(L,W),g(W,U),$=!0,Q||(te=[ee(e,"click",n[17]),ee(W,"click",n[18])],Q=!0)},p(o,i){var q,F;(!$||i&1)&&O(r,o[0]),(!$||i&32)&&O(m,o[5]),(!$||i&64)&&O(v,o[6]),C===(C=se(o))&&R?R.p(o,i):(R.d(1),R=C(o),R&&(R.c(),R.m(p,null))),i&2064&&oe(p,"bg-blue-500",((q=o[4][o[11]])==null?void 0:q.team)==="team1"),i&2064&&oe(p,"bg-red-500",((F=o[4][o[11]])==null?void 0:F.team)==="team2");const B={};i&8&&(B.seconds=o[3]),a.$set(B),o[2]?S?S.p(o,i):(S=Ie(o),S.c(),S.m(j,null)):S&&(S.d(1),S=null)},i(o){$||(z(a.$$.fragment,o),$=!0)},o(o){K(a.$$.fragment,o),$=!1},d(o){o&&u(e),o&&u(l),o&&u(t),o&&u(D),o&&u(p),R.d(),o&&u(N),o&&u(V),x(a),o&&u(c),o&&u(j),S&&S.d(),o&&u(M),o&&u(L),Q=!1,ve(te)}}}function Pe(n){let e,s;return e=new We({props:{value:location.href}}),{c(){X(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,l){Z(e,r,l),s=!0},p:P,i(r){s||(z(e.$$.fragment,r),s=!0)},o(r){K(e.$$.fragment,r),s=!1},d(r){x(e,r)}}}function Ye(n){let e,s,r;return{c(){e=k("h2"),s=E("Room Id "),r=E(n[0]),this.h()},l(l){e=w(l,"H2",{slot:!0});var t=I(e);s=T(t,"Room Id "),r=T(t,n[0]),t.forEach(u),this.h()},h(){h(e,"slot","title")},m(l,t){_(l,e,t),g(e,s),g(e,r)},p(l,t){t&1&&O(r,l[0])},d(l){l&&u(e)}}}function Qe(n){let e,s;return{c(){e=k("a"),s=E("Exit"),this.h()},l(r){e=w(r,"A",{href:!0,class:!0});var l=I(e);s=T(l,"Exit"),l.forEach(u),this.h()},h(){h(e,"href",`${Y}/`),h(e,"class","btn lg danger")},m(r,l){_(r,e,l),g(e,s)},p:P,d(r){r&&u(e)}}}function Fe(n){let e,s,r,l,t,f,m,d,b,v;document.title=e="Word Games!: Playing Game in "+n[0],r=new Se({props:{$$slots:{default:[Ce]},$$scope:{ctx:n}}});function D(a){n[19](a)}let p={$$slots:{title:[Ye],default:[Pe]},$$scope:{ctx:n}};n[9]!==void 0&&(p.show=n[9]),t=new ke({props:p}),pe.push(()=>ge(t,"show",D));function N(a){n[20](a)}let V={$$slots:{default:[Qe]},$$scope:{ctx:n}};return n[10]!==void 0&&(V.show=n[10]),d=new ke({props:V}),pe.push(()=>ge(d,"show",N)),{c(){s=G(),X(r.$$.fragment),l=G(),X(t.$$.fragment),m=G(),X(d.$$.fragment)},l(a){$e('[data-svelte="svelte-3p3nw5"]',document.head).forEach(u),s=H(a),J(r.$$.fragment,a),l=H(a),J(t.$$.fragment,a),m=H(a),J(d.$$.fragment,a)},m(a,c){_(a,s,c),Z(r,a,c),_(a,l,c),Z(t,a,c),_(a,m,c),Z(d,a,c),v=!0},p(a,[c]){(!v||c&1)&&e!==(e="Word Games!: Playing Game in "+a[0])&&(document.title=e);const j={};c&67112959&&(j.$$scope={dirty:c,ctx:a}),r.$set(j);const M={};c&67108865&&(M.$$scope={dirty:c,ctx:a}),!f&&c&512&&(f=!0,M.show=a[9],he(()=>f=!1)),t.$set(M);const L={};c&67108864&&(L.$$scope={dirty:c,ctx:a}),!b&&c&1024&&(b=!0,L.show=a[10],he(()=>b=!1)),d.$set(L)},i(a){v||(z(r.$$.fragment,a),z(t.$$.fragment,a),z(d.$$.fragment,a),v=!0)},o(a){K(r.$$.fragment,a),K(t.$$.fragment,a),K(d.$$.fragment,a),v=!1},d(a){a&&u(s),x(r,a),a&&u(l),x(t,a),a&&u(m),x(d,a)}}}const tt=!1;function st(n){return{props:{roomId:n.page.query.get("room")}}}const re=30,ye=new _e.Howl({src:[`${Y}/sounds/alarm-clock.mp3`,`${Y}/sounds/alarm-clock.wav`]}),A=new _e.Howl({src:[`${Y}/sounds/ticking.mp3`,`${Y}/sounds/ticking.wav`],loop:!0});function Xe(n,e,s){let r;Ee(n,we,o=>s(11,r=o));let{roomId:l}=e,t={},f=[],m=Me.Medium,d=Date.now(),b=0,v=0,D=!0,p=!1,N="",V=!1,a=0,c="",j=!1,M=!1;async function L(){await W(),y.get("rooms").get(l).get("playing").set(!0)}async function W(){const o=je.fromSeed(d),i=await Le(o,m);y.get("rooms").get(l).get("word").set(i),y.get("rooms").get(l).get("seed").set(o.nextInt())}async function U(){const[o]=f[(f.findIndex(([i])=>N===i)+1)%f.length];y.get("rooms").get(l).get("turn").set(o),A.stop(),await W()}let $;function Q(o=re){$==null&&(s(16,$=setInterval(()=>{const i=a;if(i===0)te();else{const B=i-1;A.rate(1+(1-B/re)),y.get("rooms").get(l).get("timer").set(B)}},1e3)),A.rate(1+(1-o/re)),A.playing()||A.play(),y.get("rooms").get(l).get("timer").set(o))}function te(){if($==null)return;const o=t[N];y.get("rooms").get(l),o.team==="team1"?y.get("rooms").get("team2").set(v+1):y.get("rooms").get("team1").set(b+1),y.get("rooms").get("timer").set(0),y.get("rooms").get("playing").set(!1),clearInterval($),s(16,$=void 0),s(1,p=!1),A.stop(),ye.play()}Te(()=>{const o=[y.get("rooms").get(l).get("seed").on(i=>{d=i}),y.get("rooms").get(l).get("started").on(i=>{s(15,D=i)}),y.get("rooms").get(l).get("playing").on(i=>{s(1,p=i)}),y.get("rooms").get(l).get("team1").on(i=>{s(5,b=i)}),y.get("rooms").get(l).get("team2").on(i=>{s(6,v=i)}),y.get("rooms").get(l).get("words").on(i=>{m=i}),y.get("rooms").get(l).get("word").on(i=>{s(8,c=i)}),y.get("rooms").get(l).get("turn").on(i=>{s(7,N=i),s(2,V=De(we)===N)}),y.get("rooms").get(l).get("timer").on(i=>{s(3,a=i)}),y.get("rooms").get(l).get("users").on(i=>{s(4,t=i),f=Array.from(Object.entries(t)).sort(Ve)})];return()=>{A.stop(),ye.stop(),o.forEach(i=>i())}});const se=()=>s(9,j=!0),C=()=>s(10,M=!0);function R(o){j=o,s(9,j)}function S(o){M=o,s(10,M)}return n.$$set=o=>{"roomId"in o&&s(0,l=o.roomId)},n.$$.update=()=>{n.$$.dirty&32769&&(D||Ne(`${Y}/lobby?room=${l}`)),n.$$.dirty&65550&&(V&&p?Q(a===0?re:a):$!=null&&(clearInterval($),s(16,$=void 0)))},[l,p,V,a,t,b,v,N,c,j,M,r,L,W,U,D,$,se,C,R,S]}class ot extends me{constructor(e){super();ce(this,e,Xe,Fe,de,{roomId:0})}}export{ot as default,st as load,tt as ssr};
