import{S as rt,i as nt,s as it,W as Fe,X as Je,k as B,j as ge,E as ut,d as r,n as U,m as ve,f as T,o as be,Y as Xe,x as ke,u as Ee,v as Ie,T as ft,A as mt,Z as ct,_ as dt,e as p,t as D,c as g,a as b,g as L,F as n,J as Ve,b as c,N as ne,L as J,$ as Oe,a0 as ie,h as x,M as Ke,K as Ze,a1 as ze,Q as ht,a2 as _t,a3 as xe,R as pt}from"../chunks/vendor-db20b18e.js";import{L as gt,a as vt,c as Re,s as bt,g as kt}from"../chunks/util-cf210b2f.js";import{b as et}from"../chunks/paths-28a87002.js";import{M as tt,W as we,g as Ce,a as H,Q as Et,u as It}from"../chunks/userId-a7876691.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";const{document:Ne}=dt;function st(t,e,l){const o=t.slice();return o[25]=e[l][0],o[26]=e[l][1],o[28]=l,o}function lt(t,e,l){const o=t.slice();return o[29]=e[l],o}function at(t){let e,l=t[29]+"",o,m;return{c(){e=p("option"),o=D(l),this.h()},l(u){e=g(u,"OPTION",{});var k=b(e);o=L(k,l),k.forEach(r),this.h()},h(){e.__value=m=we[t[29]],e.value=e.__value},m(u,k){T(u,e,k),n(e,o)},p:Ve,d(u){u&&r(e)}}}function ot(t,e){let l,o,m,u=e[28]+1+"",k,R,d=e[26].name+"",E,V,I,j,$,A,a,h,w,_,C,Q,Y,O,G,Z;return{key:t,first:null,c(){l=p("div"),o=p("div"),m=p("p"),k=D(u),R=D(" - "),E=D(d),V=B(),I=p("form"),j=p("div"),$=p("input"),h=B(),w=p("div"),_=p("input"),Y=B(),O=p("hr"),this.h()},l(S){l=g(S,"DIV",{class:!0});var y=b(l);o=g(y,"DIV",{class:!0});var z=b(o);m=g(z,"P",{class:!0});var i=b(m);k=L(i,u),R=L(i," - "),E=L(i,d),i.forEach(r),z.forEach(r),V=U(y),I=g(y,"FORM",{class:!0});var v=b(I);j=g(v,"DIV",{class:!0});var P=b(j);$=g(P,"INPUT",{id:!0,name:!0,type:!0,class:!0}),P.forEach(r),h=U(v),w=g(v,"DIV",{class:!0});var X=b(w);_=g(X,"INPUT",{id:!0,name:!0,type:!0,class:!0}),X.forEach(r),v.forEach(r),y.forEach(r),Y=U(S),O=g(S,"HR",{}),this.h()},h(){c(m,"class","text-2xl p-1 font-bold"),c(o,"class","flex-grow"),c($,"id",A=`${e[25]}-team-1`),c($,"name","team"),$.value="1",c($,"type","radio"),c($,"class","align-bottom"),$.checked=a=!e[26].team||e[26].team==="team1",c(j,"class","btn sm primary flex-1"),c(_,"id",C=`${e[25]}-team-2`),c(_,"name","team"),_.value="2",c(_,"type","radio"),c(_,"class","align-bottom"),_.checked=Q=e[26].team==="team2",c(w,"class","btn sm danger flex-1"),c(I,"class","flex-grow-0 flex flex-row"),c(l,"class","flex justify-between"),ne(l,"bg-gray-200",e[25]===e[3]),this.first=l},m(S,y){T(S,l,y),n(l,o),n(o,m),n(m,k),n(m,R),n(m,E),n(l,V),n(l,I),n(I,j),n(j,$),n(I,h),n(I,w),n(w,_),T(S,Y,y),T(S,O,y),G||(Z=[J($,"click",Oe(e[19])),J(j,"click",function(){ie(e[11](e[25],e[26].team,"team1"))&&e[11](e[25],e[26].team,"team1").apply(this,arguments)}),J(_,"click",Oe(e[18])),J(w,"click",function(){ie(e[11](e[25],e[26].team,"team2"))&&e[11](e[25],e[26].team,"team2").apply(this,arguments)})],G=!0)},p(S,y){e=S,y[0]&16&&u!==(u=e[28]+1+"")&&x(k,u),y[0]&16&&d!==(d=e[26].name+"")&&x(E,d),y[0]&16&&A!==(A=`${e[25]}-team-1`)&&c($,"id",A),y[0]&16&&a!==(a=!e[26].team||e[26].team==="team1")&&($.checked=a),y[0]&16&&C!==(C=`${e[25]}-team-2`)&&c(_,"id",C),y[0]&16&&Q!==(Q=e[26].team==="team2")&&(_.checked=Q),y[0]&24&&ne(l,"bg-gray-200",e[25]===e[3])},d(S){S&&r(l),S&&r(Y),S&&r(O),G=!1,Ke(Z)}}}function wt(t){var Me;let e,l,o,m,u,k,R,d,E,V,I,j,$,A,a,h,w,_,C,Q,Y,O,G,Z,S=(((Me=t[1][t[3]])==null?void 0:Me.team)==="team1"?"Blue":"Red")+"",y,z,i,v,P,X,ye,le,ue,$e,F=[],Be=new Map,fe,ae,me,K,q,Te,ce,Se,ee,je,De,Ue,oe=Object.keys(we),W=[];for(let s=0;s<oe.length;s+=1)W[s]=at(lt(t,oe,s));let de=t[4];const We=s=>s[25]+s[26].team;for(let s=0;s<de.length;s+=1){let f=st(t,de,s),N=We(f);Be.set(N,F[s]=ot(N,f))}return{c(){e=p("h1"),l=D("Room Id "),o=D(t[0]),m=B(),u=p("div"),k=p("label"),R=D("Name"),d=B(),E=p("input"),V=B(),I=p("div"),j=p("label"),$=D("Words"),A=B(),a=p("select");for(let s=0;s<W.length;s+=1)W[s].c();h=B(),w=p("div"),_=p("button"),C=D("Share Game "),Q=D(t[0]),Y=B(),O=p("div"),G=p("h2"),Z=D("Teams (You are on "),y=D(S),z=D(")"),i=B(),v=p("div"),P=p("div"),X=D(t[5]),ye=B(),le=p("div"),ue=D(t[6]),$e=B();for(let s=0;s<F.length;s+=1)F[s].c();fe=B(),ae=p("div"),me=B(),K=p("div"),q=p("button"),Te=D("Start"),Se=B(),ee=p("button"),je=D("Leave"),this.h()},l(s){e=g(s,"H1",{class:!0});var f=b(e);l=L(f,"Room Id "),o=L(f,t[0]),f.forEach(r),m=U(s),u=g(s,"DIV",{class:!0});var N=b(u);k=g(N,"LABEL",{for:!0});var M=b(k);R=L(M,"Name"),M.forEach(r),d=U(N),E=g(N,"INPUT",{class:!0}),N.forEach(r),V=U(s),I=g(s,"DIV",{});var te=b(I);j=g(te,"LABEL",{for:!0});var Ae=b(j);$=L(Ae,"Words"),Ae.forEach(r),A=U(te),a=g(te,"SELECT",{id:!0,class:!0});var Ge=b(a);for(let se=0;se<W.length;se+=1)W[se].l(Ge);Ge.forEach(r),te.forEach(r),h=U(s),w=g(s,"DIV",{class:!0});var Pe=b(w);_=g(Pe,"BUTTON",{class:!0});var Le=b(_);C=L(Le,"Share Game "),Q=L(Le,t[0]),Le.forEach(r),Pe.forEach(r),Y=U(s),O=g(s,"DIV",{class:!0});var re=b(O);G=g(re,"H2",{class:!0});var he=b(G);Z=L(he,"Teams (You are on "),y=L(he,S),z=L(he,")"),he.forEach(r),i=U(re),v=g(re,"DIV",{class:!0});var _e=b(v);P=g(_e,"DIV",{class:!0});var qe=b(P);X=L(qe,t[5]),qe.forEach(r),ye=U(_e),le=g(_e,"DIV",{class:!0});var He=b(le);ue=L(He,t[6]),He.forEach(r),_e.forEach(r),$e=U(re);for(let se=0;se<F.length;se+=1)F[se].l(re);re.forEach(r),fe=U(s),ae=g(s,"DIV",{class:!0}),b(ae).forEach(r),me=U(s),K=g(s,"DIV",{class:!0});var pe=b(K);q=g(pe,"BUTTON",{class:!0});var Qe=b(q);Te=L(Qe,"Start"),Qe.forEach(r),Se=U(pe),ee=g(pe,"BUTTON",{class:!0});var Ye=b(ee);je=L(Ye,"Leave"),Ye.forEach(r),pe.forEach(r),this.h()},h(){c(e,"class","text-center cursor-pointer"),c(k,"for","name"),c(E,"class","input"),c(u,"class","mt-2"),c(j,"for","words"),c(a,"id","words"),c(a,"class","input"),c(_,"class","btn md primary w-full mb-2"),c(w,"class","flex"),c(G,"class","text-center"),c(P,"class","btn md primary flex-1 text-center"),c(le,"class","btn md danger flex-1 text-center"),c(v,"class","mt-2 mb-2 flex justify-center"),c(O,"class","mt-2 mb-2"),c(ae,"class","flex-grow"),c(q,"class","btn lg primary flex-1"),q.disabled=ce=t[4].length<2,ne(q,"bg-blue-100",t[4].length<2),ne(q,"hover:bg-blue-500",t[4].length>1),c(ee,"class","btn lg danger flex-1"),c(K,"class","flex justify-center")},m(s,f){T(s,e,f),n(e,l),n(e,o),T(s,m,f),T(s,u,f),n(u,k),n(k,R),n(u,d),n(u,E),Ze(E,t[2]),T(s,V,f),T(s,I,f),n(I,j),n(j,$),n(I,A),n(I,a);for(let N=0;N<W.length;N+=1)W[N].m(a,null);ze(a,t[7]),T(s,h,f),T(s,w,f),n(w,_),n(_,C),n(_,Q),T(s,Y,f),T(s,O,f),n(O,G),n(G,Z),n(G,y),n(G,z),n(O,i),n(O,v),n(v,P),n(P,X),n(v,ye),n(v,le),n(le,ue),n(O,$e);for(let N=0;N<F.length;N+=1)F[N].m(O,null);T(s,fe,f),T(s,ae,f),T(s,me,f),T(s,K,f),n(K,q),n(q,Te),n(K,Se),n(K,ee),n(ee,je),De||(Ue=[J(e,"click",t[20]),J(E,"input",t[21]),J(E,"input",function(){ie(t[13])&&t[13].apply(this,arguments)}),J(a,"change",Oe(function(){ie(t[12])&&t[12].apply(this,arguments)})),J(_,"click",t[14]),J(q,"click",function(){ie(t[10])&&t[10].apply(this,arguments)}),J(ee,"click",t[22])],De=!0)},p(s,f){var N;if(t=s,f[0]&1&&x(o,t[0]),f[0]&4&&E.value!==t[2]&&Ze(E,t[2]),f&0){oe=Object.keys(we);let M;for(M=0;M<oe.length;M+=1){const te=lt(t,oe,M);W[M]?W[M].p(te,f):(W[M]=at(te),W[M].c(),W[M].m(a,null))}for(;M<W.length;M+=1)W[M].d(1);W.length=oe.length}f[0]&128&&ze(a,t[7]),f[0]&1&&x(Q,t[0]),f[0]&10&&S!==(S=(((N=t[1][t[3]])==null?void 0:N.team)==="team1"?"Blue":"Red")+"")&&x(y,S),f[0]&32&&x(X,t[5]),f[0]&64&&x(ue,t[6]),f[0]&2072&&(de=t[4],F=ht(F,f,We,1,t,de,Be,O,pt,ot,null,st)),f[0]&16&&ce!==(ce=t[4].length<2)&&(q.disabled=ce),f[0]&16&&ne(q,"bg-blue-100",t[4].length<2),f[0]&16&&ne(q,"hover:bg-blue-500",t[4].length>1)},d(s){s&&r(e),s&&r(m),s&&r(u),s&&r(V),s&&r(I),_t(W,s),s&&r(h),s&&r(w),s&&r(Y),s&&r(O);for(let f=0;f<F.length;f+=1)F[f].d();s&&r(fe),s&&r(ae),s&&r(me),s&&r(K),De=!1,Ke(Ue)}}}function yt(t){let e,l;return e=new Et({props:{value:location.href}}),{c(){ge(e.$$.fragment)},l(o){ve(e.$$.fragment,o)},m(o,m){be(e,o,m),l=!0},p:Ve,i(o){l||(ke(e.$$.fragment,o),l=!0)},o(o){Ee(e.$$.fragment,o),l=!1},d(o){Ie(e,o)}}}function $t(t){let e,l,o;return{c(){e=p("h2"),l=D("Room Id "),o=D(t[0]),this.h()},l(m){e=g(m,"H2",{slot:!0});var u=b(e);l=L(u,"Room Id "),o=L(u,t[0]),u.forEach(r),this.h()},h(){c(e,"slot","title")},m(m,u){T(m,e,u),n(e,l),n(e,o)},p(m,u){u[0]&1&&x(o,m[0])},d(m){m&&r(e)}}}function Tt(t){let e,l;return{c(){e=p("a"),l=D("Exit"),this.h()},l(o){e=g(o,"A",{href:!0,class:!0});var m=b(e);l=L(m,"Exit"),m.forEach(r),this.h()},h(){c(e,"href",`${et}/`),c(e,"class","btn lg danger")},m(o,m){T(o,e,m),n(e,l)},p:Ve,d(o){o&&r(e)}}}function St(t){let e,l,o,m,u,k,R,d,E,V;Ne.title=e="Word Games!: Lobby "+t[0],o=new gt({props:{$$slots:{default:[wt]},$$scope:{ctx:t}}});function I(a){t[23](a)}let j={$$slots:{title:[$t],default:[yt]},$$scope:{ctx:t}};t[8]!==void 0&&(j.show=t[8]),u=new tt({props:j}),Fe.push(()=>Je(u,"show",I));function $(a){t[24](a)}let A={$$slots:{default:[Tt]},$$scope:{ctx:t}};return t[9]!==void 0&&(A.show=t[9]),d=new tt({props:A}),Fe.push(()=>Je(d,"show",$)),{c(){l=B(),ge(o.$$.fragment),m=B(),ge(u.$$.fragment),R=B(),ge(d.$$.fragment)},l(a){ut('[data-svelte="svelte-5lsgla"]',Ne.head).forEach(r),l=U(a),ve(o.$$.fragment,a),m=U(a),ve(u.$$.fragment,a),R=U(a),ve(d.$$.fragment,a)},m(a,h){T(a,l,h),be(o,a,h),T(a,m,h),be(u,a,h),T(a,R,h),be(d,a,h),V=!0},p(a,h){(!V||h[0]&1)&&e!==(e="Word Games!: Lobby "+a[0])&&(Ne.title=e);const w={};h[0]&16383|h[1]&2&&(w.$$scope={dirty:h,ctx:a}),o.$set(w);const _={};h[0]&1|h[1]&2&&(_.$$scope={dirty:h,ctx:a}),!k&&h[0]&256&&(k=!0,_.show=a[8],Xe(()=>k=!1)),u.$set(_);const C={};h[1]&2&&(C.$$scope={dirty:h,ctx:a}),!E&&h[0]&512&&(E=!0,C.show=a[9],Xe(()=>E=!1)),d.$set(C)},i(a){V||(ke(o.$$.fragment,a),ke(u.$$.fragment,a),ke(d.$$.fragment,a),V=!0)},o(a){Ee(o.$$.fragment,a),Ee(u.$$.fragment,a),Ee(d.$$.fragment,a),V=!1},d(a){a&&r(l),Ie(o,a),a&&r(m),Ie(u,a),a&&r(R),Ie(d,a)}}}const Nt=!1;function Bt(t){return{props:{roomId:t.page.query.get("room")}}}function jt(t,e,l){let o,m,u,k,R;ft(t,It,i=>l(3,R=i));let{roomId:d}=e,E={},V=[],I=0,j=0,$=!1,A=we.Medium,a=Date.now(),h=!1,w=!1,_=`guest-${vt()}`,C;function Q(){if(navigator&&navigator.share)navigator.share({title:document.title,text:"Join my Game!",url:location.href}).then(()=>Re("Successful shared!","success")).catch(i=>Re(i.message,"error"));else if(navigator&&navigator.clipboard)navigator.clipboard.writeText(location.href).then(()=>Re("Successful Copied!","success"));else{const i=document.createElement("input");i.style.display="none",i.textContent=location.href,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}}mt(async()=>{const i=[H.get("rooms").get(d).get("seed").on(v=>{l(16,a=v)}),H.get("rooms").get(d).get("started").on(v=>{l(15,$=v)}),H.get("rooms").get(d).get("words").on(v=>{l(7,A=v)}),H.get("rooms").get(d).get("users").on(v=>{l(1,E=v),l(4,V=Array.from(Object.entries(E)).sort(bt)),l(5,I=V.filter(([P,X])=>!X.team||X.team==="team1").length),l(6,j=V.length-I)})];return Ce().then(v=>{H.get("rooms").get(d).get("users").get(v).set({id:v,name:_,team:"team1"})}),()=>{i.forEach(v=>v())}});function Y(i){xe.call(this,t,i)}function O(i){xe.call(this,t,i)}const G=()=>l(8,h=!0);function Z(){_=this.value,l(2,_)}const S=()=>l(9,w=!0);function y(i){h=i,l(8,h)}function z(i){w=i,l(9,w)}return t.$$set=i=>{"roomId"in i&&l(0,d=i.roomId)},t.$$.update=()=>{if(t.$$.dirty[0]&32769&&$&&kt(`${et}/game?room=${d}`),t.$$.dirty[0]&5&&l(13,o=async()=>{const i=await Ce();H.get("rooms").get(d).get("users").get(i).get("name").set(_)}),t.$$.dirty[0]&1&&l(12,m=i=>{H.get("rooms").get(d).get("words").set(i.currentTarget.value)}),t.$$.dirty[0]&1&&l(11,u=(i,v,P)=>()=>{v!==P&&H.get("rooms").get(d).get("users").get(i).get("team").set(P)}),t.$$.dirty[0]&65539&&l(10,k=async()=>{const i=ct.fromSeed(a);H.get("rooms").get(d).get("turn").set(i.fromArray(Object.keys(E)).unwrapOr(await Ce())),H.get("rooms").get(d).get("started").set(!0)}),t.$$.dirty[0]&131085&&R&&C!==R){const i=R;C&&H.get("rooms").get(d).get("users").get(C).set(null),H.get("rooms").get(d).get("users").get(i).set({id:i,name:_,team:"team1"}),l(17,C=i)}},[d,E,_,R,V,I,j,A,h,w,k,u,m,o,Q,$,a,C,Y,O,G,Z,S,y,z]}class Ut extends rt{constructor(e){super();nt(this,e,jt,St,it,{roomId:0},null,[-1,-1])}}export{Ut as default,Bt as load,Nt as ssr};
