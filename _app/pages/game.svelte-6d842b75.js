var De=Object.defineProperty,Se=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ce=(l,e,t)=>e in l?De(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,de=(l,e)=>{for(var t in e||(e={}))Re.call(e,t)&&ce(l,t,e[t]);if(me)for(var t of me(e))Ne.call(e,t)&&ce(l,t,e[t]);return l},_e=(l,e)=>Se(l,Ve(e));import{S as pe,i as be,s as he,t as j,g as D,f as b,h as q,J as X,d as i,a9 as ge,W as ve,X as we,k as G,j as Z,E as Pe,n as H,m as x,o as ee,Y as ke,x as te,u as se,v as le,T as Ue,A as Me,l as ye,e as I,c as E,a as T,b as y,N as fe,F as w,L as oe,M as $e,a2 as Le}from"../chunks/vendor-a5234b73.js";import{b as J}from"../chunks/paths-28a87002.js";import{L as We,k as Ie,g as Ge}from"../chunks/util-5bc48e66.js";import{M as Ee,d as z,a as He,Q as Oe,u as qe}from"../chunks/userId-581dd879.js";import"../chunks/singletons-12a22614.js";import"../chunks/preload-helper-ac1c8acd.js";function Be(l){let e=ie(l[0])+"",t,o,a=ie(l[1])+"",s;return{c(){t=j(e),o=j(":"),s=j(a)},l(f){t=D(f,e),o=D(f,":"),s=D(f,a)},m(f,u){b(f,t,u),b(f,o,u),b(f,s,u)},p(f,[u]){u&1&&e!==(e=ie(f[0])+"")&&q(t,e),u&2&&a!==(a=ie(f[1])+"")&&q(s,a)},i:X,o:X,d(f){f&&i(t),f&&i(o),f&&i(s)}}}function ie(l){return(l<10?"0":"")+l}function Ye(l,e,t){let o,a,{seconds:s=60}=e;return l.$$set=f=>{"seconds"in f&&t(2,s=f.seconds)},l.$$.update=()=>{l.$$.dirty&4&&t(0,o=Math.floor(s/60)),l.$$.dirty&5&&t(1,a=Math.floor(s-o*60))},[o,a,s]}class Ae extends pe{constructor(e){super();be(this,e,Ye,Be,he,{seconds:2})}}function Ce(l){var a;let e=((a=l[6][l[1]])==null?void 0:a.name)+"",t,o;return{c(){t=j(e),o=j("'s turn")},l(s){t=D(s,e),o=D(s,"'s turn")},m(s,f){b(s,t,f),b(s,o,f)},p(s,f){var u;f&66&&e!==(e=((u=s[6][s[1]])==null?void 0:u.name)+"")&&q(t,e)},d(s){s&&i(t),s&&i(o)}}}function Qe(l){var a;let e=((a=l[6][l[1]])==null?void 0:a.name)+"",t,o;return{c(){t=j(e),o=j(" and your Team's turn")},l(s){t=D(s,e),o=D(s," and your Team's turn")},m(s,f){b(s,t,f),b(s,o,f)},p(s,f){var u;f&66&&e!==(e=((u=s[6][s[1]])==null?void 0:u.name)+"")&&q(t,e)},d(s){s&&i(t),s&&i(o)}}}function Fe(l){let e;return{c(){e=j("Your Turn")},l(t){e=D(t,"Your Turn")},m(t,o){b(t,e,o)},p:X,d(t){t&&i(e)}}}function Te(l){let e;function t(s,f){return s[2]?Xe:Je}let o=t(l),a=o(l);return{c(){a.c(),e=ye()},l(s){a.l(s),e=ye()},m(s,f){a.m(s,f),b(s,e,f)},p(s,f){o===(o=t(s))&&a?a.p(s,f):(a.d(1),a=o(s),a&&(a.c(),a.m(e.parentNode,e)))},d(s){a.d(s),s&&i(e)}}}function Xe(l){let e,t,o,a,s,f,u,p,k,$,S,h,U,V;return{c(){e=I("div"),t=I("div"),o=I("p"),a=j(l[9]),s=G(),f=I("div"),u=I("div"),p=I("button"),k=j("Skip"),$=G(),S=I("button"),h=j("Next"),this.h()},l(n){e=E(n,"DIV",{class:!0});var c=T(e);t=E(c,"DIV",{class:!0});var R=T(t);o=E(R,"P",{class:!0});var M=T(o);a=D(M,l[9]),M.forEach(i),R.forEach(i),c.forEach(i),s=H(n),f=E(n,"DIV",{class:!0});var g=T(f);u=E(g,"DIV",{class:!0});var P=T(u);p=E(P,"BUTTON",{class:!0});var B=T(p);k=D(B,"Skip"),B.forEach(i),$=H(P),S=E(P,"BUTTON",{class:!0});var L=T(S);h=D(L,"Next"),L.forEach(i),P.forEach(i),g.forEach(i),this.h()},h(){y(o,"class","text-6xl"),y(t,"class","text-center"),y(e,"class","flex-1 flex h-full justify-center items-center"),y(p,"class","btn lg danger flex-1"),y(S,"class","btn lg primary flex-1"),y(u,"class","flex flex-1 justify-center"),y(f,"class","flex-1")},m(n,c){b(n,e,c),w(e,t),w(t,o),w(o,a),b(n,s,c),b(n,f,c),w(f,u),w(u,p),w(p,k),w(u,$),w(u,S),w(S,h),U||(V=[oe(p,"click",l[13]),oe(S,"click",l[14])],U=!0)},p(n,c){c&512&&q(a,n[9])},d(n){n&&i(e),n&&i(s),n&&i(f),U=!1,$e(V)}}}function Je(l){let e,t,o,a,s,f;return{c(){e=I("div"),t=I("div"),o=I("button"),a=j("Start"),this.h()},l(u){e=E(u,"DIV",{class:!0});var p=T(e);t=E(p,"DIV",{class:!0});var k=T(t);o=E(k,"BUTTON",{class:!0});var $=T(o);a=D($,"Start"),$.forEach(i),k.forEach(i),p.forEach(i),this.h()},h(){y(o,"class","btn lg primary flex-1"),y(t,"class","flex justify-center"),y(e,"class","flex-1")},m(u,p){b(u,e,p),w(e,t),w(t,o),w(o,a),s||(f=oe(o,"click",l[12]),s=!0)},p:X,d(u){u&&i(e),s=!1,f()}}}function ze(l){let e,t,o,a,s,f,u,p,k,$,S,h,U,V,n,c,R,M,g,P,B,L,K,re;function ne(r,d){var W,O;return r[4]?Fe:((W=r[6][r[5]])==null?void 0:W.team)===((O=r[6][r[1]])==null?void 0:O.team)?Qe:Ce}let m=ne(l),v=m(l);n=new Ae({props:{seconds:l[3]}});let _=l[4]&&Te(l);return{c(){e=I("h1"),t=j("Room Id "),o=j(l[0]),a=G(),s=I("div"),f=I("div"),u=j(l[7]),p=G(),k=I("div"),$=j(l[8]),S=G(),h=I("h1"),v.c(),U=G(),V=I("p"),Z(n.$$.fragment),c=G(),R=I("div"),_&&_.c(),M=G(),g=I("div"),P=I("button"),B=j("Leave"),this.h()},l(r){e=E(r,"H1",{class:!0});var d=T(e);t=D(d,"Room Id "),o=D(d,l[0]),d.forEach(i),a=H(r),s=E(r,"DIV",{class:!0});var W=T(s);f=E(W,"DIV",{class:!0});var O=T(f);u=D(O,l[7]),O.forEach(i),p=H(W),k=E(W,"DIV",{class:!0});var Y=T(k);$=D(Y,l[8]),Y.forEach(i),W.forEach(i),S=H(r),h=E(r,"H1",{class:!0});var ae=T(h);v.l(ae),ae.forEach(i),U=H(r),V=E(r,"P",{class:!0});var N=T(V);x(n.$$.fragment,N),N.forEach(i),c=H(r),R=E(r,"DIV",{class:!0});var A=T(R);_&&_.l(A),A.forEach(i),M=H(r),g=E(r,"DIV",{class:!0});var Q=T(g);P=E(Q,"BUTTON",{class:!0});var F=T(P);B=D(F,"Leave"),F.forEach(i),Q.forEach(i),this.h()},h(){var r,d;y(e,"class","text-center cursor-pointer"),y(f,"class","btn md primary flex-1 text-center"),y(k,"class","btn md danger flex-1 text-center"),y(s,"class","flex justify-center mt-2"),y(h,"class","text-center text-white rounded py-4 my-4"),fe(h,"bg-blue-500",((r=l[6][l[5]])==null?void 0:r.team)==="team1"),fe(h,"bg-red-500",((d=l[6][l[5]])==null?void 0:d.team)==="team2"),y(V,"class","text-2xl text-center"),y(R,"class","flex-grow flex flex-col justify-center"),y(P,"class","btn lg danger flex-1"),y(g,"class","flex justify-center")},m(r,d){b(r,e,d),w(e,t),w(e,o),b(r,a,d),b(r,s,d),w(s,f),w(f,u),w(s,p),w(s,k),w(k,$),b(r,S,d),b(r,h,d),v.m(h,null),b(r,U,d),b(r,V,d),ee(n,V,null),b(r,c,d),b(r,R,d),_&&_.m(R,null),b(r,M,d),b(r,g,d),w(g,P),w(P,B),L=!0,K||(re=[oe(e,"click",l[17]),oe(P,"click",l[18])],K=!0)},p(r,d){var O,Y;(!L||d&1)&&q(o,r[0]),(!L||d&128)&&q(u,r[7]),(!L||d&256)&&q($,r[8]),m===(m=ne(r))&&v?v.p(r,d):(v.d(1),v=m(r),v&&(v.c(),v.m(h,null))),d&96&&fe(h,"bg-blue-500",((O=r[6][r[5]])==null?void 0:O.team)==="team1"),d&96&&fe(h,"bg-red-500",((Y=r[6][r[5]])==null?void 0:Y.team)==="team2");const W={};d&8&&(W.seconds=r[3]),n.$set(W),r[4]?_?_.p(r,d):(_=Te(r),_.c(),_.m(R,null)):_&&(_.d(1),_=null)},i(r){L||(te(n.$$.fragment,r),L=!0)},o(r){se(n.$$.fragment,r),L=!1},d(r){r&&i(e),r&&i(a),r&&i(s),r&&i(S),r&&i(h),v.d(),r&&i(U),r&&i(V),le(n),r&&i(c),r&&i(R),_&&_.d(),r&&i(M),r&&i(g),K=!1,$e(re)}}}function Ke(l){let e,t;return e=new Oe({props:{value:location.href}}),{c(){Z(e.$$.fragment)},l(o){x(e.$$.fragment,o)},m(o,a){ee(e,o,a),t=!0},p:X,i(o){t||(te(e.$$.fragment,o),t=!0)},o(o){se(e.$$.fragment,o),t=!1},d(o){le(e,o)}}}function Ze(l){let e,t,o;return{c(){e=I("h2"),t=j("Room Id "),o=j(l[0]),this.h()},l(a){e=E(a,"H2",{slot:!0});var s=T(e);t=D(s,"Room Id "),o=D(s,l[0]),s.forEach(i),this.h()},h(){y(e,"slot","title")},m(a,s){b(a,e,s),w(e,t),w(e,o)},p(a,s){s&1&&q(o,a[0])},d(a){a&&i(e)}}}function xe(l){let e,t;return{c(){e=I("a"),t=j("Exit"),this.h()},l(o){e=E(o,"A",{href:!0,class:!0});var a=T(e);t=D(a,"Exit"),a.forEach(i),this.h()},h(){y(e,"href",`${J}/`),y(e,"class","btn lg danger")},m(o,a){b(o,e,a),w(e,t)},p:X,d(o){o&&i(e)}}}function et(l){let e,t,o,a,s,f,u,p,k,$;document.title=e="Word Games!: Playing Game in "+l[0],o=new We({props:{$$slots:{default:[ze]},$$scope:{ctx:l}}});function S(n){l[19](n)}let h={$$slots:{title:[Ze],default:[Ke]},$$scope:{ctx:l}};l[10]!==void 0&&(h.show=l[10]),s=new Ee({props:h}),ve.push(()=>we(s,"show",S));function U(n){l[20](n)}let V={$$slots:{default:[xe]},$$scope:{ctx:l}};return l[11]!==void 0&&(V.show=l[11]),p=new Ee({props:V}),ve.push(()=>we(p,"show",U)),{c(){t=G(),Z(o.$$.fragment),a=G(),Z(s.$$.fragment),u=G(),Z(p.$$.fragment)},l(n){Pe('[data-svelte="svelte-3p3nw5"]',document.head).forEach(i),t=H(n),x(o.$$.fragment,n),a=H(n),x(s.$$.fragment,n),u=H(n),x(p.$$.fragment,n)},m(n,c){b(n,t,c),ee(o,n,c),b(n,a,c),ee(s,n,c),b(n,u,c),ee(p,n,c),$=!0},p(n,[c]){(!$||c&1)&&e!==(e="Word Games!: Playing Game in "+n[0])&&(document.title=e);const R={};c&8392703&&(R.$$scope={dirty:c,ctx:n}),o.$set(R);const M={};c&8388609&&(M.$$scope={dirty:c,ctx:n}),!f&&c&1024&&(f=!0,M.show=n[10],ke(()=>f=!1)),s.$set(M);const g={};c&8388608&&(g.$$scope={dirty:c,ctx:n}),!k&&c&2048&&(k=!0,g.show=n[11],ke(()=>k=!1)),p.$set(g)},i(n){$||(te(o.$$.fragment,n),te(s.$$.fragment,n),te(p.$$.fragment,n),$=!0)},o(n){se(o.$$.fragment,n),se(s.$$.fragment,n),se(p.$$.fragment,n),$=!1},d(n){n&&i(t),le(o,n),n&&i(a),le(s,n),n&&i(u),le(p,n)}}}const it=!1;function ut(l){return{props:{roomId:l.page.query.get("room")}}}const ue=60,je=new ge.Howl({src:[`${J}/sounds/alarm-clock.mp3`,`${J}/sounds/alarm-clock.wav`]}),C=new ge.Howl({src:[`${J}/sounds/ticking.mp3`,`${J}/sounds/ticking.wav`],loop:!0});function tt(l,e,t){let o,a;Ue(l,qe,m=>t(5,a=m));let{roomId:s}=e,f={},u,p,k,$=!1,S=!0,h,U,V=!1,n=!1;async function c(){await R(),z.get("rooms").get(s).get("playing").put(!0)}async function R(){const m=z.get("rooms").get(s),v=await m,_=Le.fromSeed(v.seed),r=await He(_,v.words);m.get("word").put(r),m.get("seed").put(_.nextInt())}async function M(){const m=z.get("rooms").get(s),v=m.get("users"),_=Ie(await v).sort();m.get("turn").put(_[(_.indexOf(k)+1)%_.length]),C.stop(),await R()}let g;function P(m=ue){if(g!=null)return;const v=z.get("rooms").get(s).get("timer");t(16,g=setInterval(async()=>{const _=await v;if(_===0)B();else{const r=_-1;C.rate(1+(1-r/ue)),v.put(r)}},1e3)),C.rate(1+(1-m/ue)),C.playing()||C.play(),v.put(m)}function B(){if(g==null)return;const m=z.get("rooms").get(s),v=m.get("users").get(k),_=m.get("timer");Promise.all([m,v]).then(([r,d])=>{d.team==="team1"?m.get("team2").put(r.team1+1):m.get("team1").put(r.team2+1)}),_.put(0),m.get("playing").put(!1).then(()=>{t(16,g=void 0)}),clearInterval(g),C.stop(),je.play()}Me(()=>{const m=z.get("rooms").get(s),v=m.get("users").on(async N=>{t(6,f=(await Promise.all(Ie(N).map(A=>new Promise(Q=>m.get("users").get(A).once(F=>Q([A,F])))))).reduce((A,[Q,F])=>_e(de({},A),{[Q]:F}),{}))}),_=m.get("timer").on(N=>{t(3,h=N)}),r=m.get("started").on(N=>{t(15,S=N)}),d=m.get("team1").on(N=>{t(7,u=N)}),W=m.get("team2").on(N=>{t(8,p=N)}),O=m.get("word").on(N=>{t(9,U=N)}),Y=m.get("turn").on(N=>{t(1,k=N)}),ae=m.get("playing").on(N=>{t(2,$=N)});return()=>{v.off(),_.off(),r.off(),d.off(),W.off(),O.off(),Y.off(),ae.off(),C.stop(),je.stop()}});const L=()=>t(10,V=!0),K=()=>t(11,n=!0);function re(m){V=m,t(10,V)}function ne(m){n=m,t(11,n)}return l.$$set=m=>{"roomId"in m&&t(0,s=m.roomId)},l.$$.update=()=>{l.$$.dirty&34&&t(4,o=k===a),l.$$.dirty&32769&&(S||Ge(`${J}/lobby?room=${s}`)),l.$$.dirty&65564&&(o&&$?P(h===0?ue:h):g!=null&&(clearInterval(g),t(16,g=void 0)))},[s,k,$,h,o,a,f,u,p,U,V,n,c,R,M,S,g,L,K,re,ne]}class mt extends pe{constructor(e){super();be(this,e,tt,et,he,{roomId:0})}}export{mt as default,ut as load,it as ssr};
